<html><head></head><body>
  <div id="_idContainer131">
   <h1 class="chapter-number" id="_idParaDest-132">
    <a id="_idTextAnchor133">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     4
    </span>
   </h1>
   <h1 id="_idParaDest-133">
    <a id="_idTextAnchor134">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Securing Data on S3 with Policies and Techniques
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we will delve into securing
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      Amazon Simple Storage Service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.6.1">
      S3
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     ), an
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.8.1">
      object store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.9.1">
     on the AWS platform.
    </span>
    <span class="koboSpan" id="kobo.9.2">
     Object storage, which is distinct from traditional
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.10.1">
      hierarchical file systems
     </span>
    </strong>
    <span class="koboSpan" id="kobo.11.1">
     , operates on a key-value principle whereby each object is stored with a unique key as the identifier.
    </span>
    <span class="koboSpan" id="kobo.11.2">
     Think of S3 as a place where each piece of data has a special name that helps you find it, unlike a regular file system that sorts things
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.12.1">
      into folders.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.13.1">
     We have already talked about IAM policies and how to use them for securing data in S3 within the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.14.1">
      Creating a customer-managed IAM policy
     </span>
    </em>
    <span class="koboSpan" id="kobo.15.1">
     recipe in
    </span>
    <a href="B21384_02.xhtml#_idTextAnchor043">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.16.1">
        Chapter 2
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.17.1">
     .
    </span>
    <span class="koboSpan" id="kobo.17.2">
     We will extend that knowledge and focus on making
    </span>
    <a id="_idIndexMarker530">
    </a>
    <span class="koboSpan" id="kobo.18.1">
     S3 data-safe using
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.19.1">
      Access Control Lists
     </span>
    </strong>
    <span class="koboSpan" id="kobo.20.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.21.1">
      ACLs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.22.1">
     ) and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.23.1">
      bucket policies
     </span>
    </strong>
    <span class="koboSpan" id="kobo.24.1">
     .
    </span>
    <span class="koboSpan" id="kobo.24.2">
     We will also look at other important ways to keep our S3 data secure, such as
    </span>
    <a id="_idIndexMarker531">
    </a>
    <span class="koboSpan" id="kobo.25.1">
     using S3 features such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.26.1">
      presigned URLs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.27.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.28.1">
      encryption
     </span>
    </strong>
    <span class="koboSpan" id="kobo.29.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.30.1">
      versioning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.31.1">
     ,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.32.1">
      and
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.33.1">
       replication
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.34.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.35.1">
     This chapter includes the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      following recipes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.37.1">
      Creating an S3
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       bucket policy
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.39.1">
      Working with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.40.1">
       S3 ACLs
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.41.1">
      Creating S3
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.42.1">
       presigned URLs
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.43.1">
      Protecting files with S3 versioning and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.44.1">
       object locking
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.45.1">
      Encrypting data
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.46.1">
       on S3
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-134">
    <a id="_idTextAnchor135">
    </a>
    <span class="koboSpan" id="kobo.47.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.48.1">
     Before diving into the recipes of this chapter, we need to ensure that we have the following knowledge and requirements
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.49.1">
      in place:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.50.1">
      Due to AWS’s cloud-based nature, a stable internet connection is essential for accessing and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.51.1">
       managing services.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.52.1">
      We need an active AWS account to complete most of the recipes within this chapter, and for some recipes, we will need more than one AWS account (as mentioned in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.53.1">
       respective recipes).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.54.1">
      A basic understanding of AWS’s core concept and a working knowledge of the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.55.1">
       AWS Management Console
      </span>
     </strong>
     <span class="koboSpan" id="kobo.56.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.57.1">
       AWS CLI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.58.1">
      , and
     </span>
     <a id="_idIndexMarker532">
     </a>
     <span class="koboSpan" id="kobo.59.1">
      particularly Amazon S3 will benefit us.
     </span>
     <span class="koboSpan" id="kobo.59.2">
      If you are new to the S3 service, you can refer to the following URL for getting started with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.60.1">
       S3:
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-amazon-s3-on-aws-cloud">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.61.1">
        https://www.cloudericks.com/blog/getting-started-with-amazon-s3-on-aws-cloud
       </span>
      </span>
     </a>
    </li>
    <li>
     <span class="koboSpan" id="kobo.62.1">
      Knowledge of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.63.1">
       IAM Identity Center
      </span>
     </strong>
     <span class="koboSpan" id="kobo.64.1">
      from
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.65.1">
       Chapters 1
      </span>
     </em>
     <em class="italic">
      <span class="koboSpan" id="kobo.66.1">
       and
      </span>
     </em>
     <em class="italic">
      <span class="koboSpan" id="kobo.67.1">
       2
      </span>
     </em>
     <span class="koboSpan" id="kobo.68.1">
      is helpful if we are managing users with IAM Identity Center instead of
     </span>
     <a id="_idIndexMarker533">
     </a>
     <span class="koboSpan" id="kobo.69.1">
      using IAM directly.
     </span>
     <span class="koboSpan" id="kobo.69.2">
      If we are planning to use IAM users, we need to be familiar
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.70.1">
       with IAM.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.71.1">
      To execute AWS CLI commands, we need to
     </span>
     <a id="_idIndexMarker534">
     </a>
     <span class="koboSpan" id="kobo.72.1">
      install
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.73.1">
       AWS CLI v2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.74.1">
      .
     </span>
     <span class="koboSpan" id="kobo.74.2">
      We also need to configure it using the AWS IAM Identity Center as needed for each recipe if we are managing users with IAM Identity Center.
     </span>
     <span class="koboSpan" id="kobo.74.3">
      Alternatively, if we are using IAM users for any recipe, we need to configure the CLI profiles using their
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.75.1">
       access key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.76.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.77.1">
       secret
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.78.1">
        access key
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.79.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.80.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.81.1">
     While it’s possible to manage users directly with IAM, AWS now recommends using IAM Identity Center (formerly AWS SSO) whenever possible for enhanced security
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.82.1">
      and convenience.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.83.1">
     The code files for this book are available at
    </span>
    <a href="https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition">
     <span class="koboSpan" id="kobo.84.1">
      https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition
     </span>
    </a>
    <span class="koboSpan" id="kobo.85.1">
     .
    </span>
    <span class="koboSpan" id="kobo.85.2">
     The code files for this chapter are available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.86.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition/tree/main/Chapter04">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.87.1">
       https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition/tree/main/Chapter04
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.88.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-135">
    <a id="_idTextAnchor136">
    </a>
    <span class="koboSpan" id="kobo.89.1">
     Creating an S3 bucket policy
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.90.1">
     Previously, we had explored creating IAM policies.
    </span>
    <span class="koboSpan" id="kobo.90.2">
     IAM policies are generally used for user-level permissions across AWS
    </span>
    <a id="_idIndexMarker535">
    </a>
    <span class="koboSpan" id="kobo.91.1">
     services, while bucket policies are specific to individual S3 buckets and offer more granular control at the bucket level.
    </span>
    <span class="koboSpan" id="kobo.91.2">
     For instance, bucket policies
    </span>
    <a id="_idIndexMarker536">
    </a>
    <span class="koboSpan" id="kobo.92.1">
     uniquely enable granting access to anonymous users, enforcing
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.93.1">
      Server-Side Encryption
     </span>
    </strong>
    <span class="koboSpan" id="kobo.94.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.95.1">
      SSE
     </span>
    </strong>
    <span class="koboSpan" id="kobo.96.1">
     ) by default, and restricting access based on source IP
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.97.1">
      or VPC.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.98.1">
     In this recipe, we will first create a bucket policy from the Management Console by generating a policy using the Policy Generator that allows
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.99.1">
      ListBucket
     </span>
    </strong>
    <span class="koboSpan" id="kobo.100.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.101.1">
      GetObject
     </span>
    </strong>
    <span class="koboSpan" id="kobo.102.1">
     actions to everyone.
    </span>
    <span class="koboSpan" id="kobo.102.2">
     Then, we will create a bucket policy from AWS CLI that provides access to a specific IAM user.
    </span>
    <span class="koboSpan" id="kobo.102.3">
     You can use both the policies from either the Management Console or the AWS CLI; however, I wanted to show how it is done with both approaches.
    </span>
    <span class="koboSpan" id="kobo.102.4">
     I will also provide examples of principal types in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.103.1">
      There’s more
     </span>
    </em>
    <span class="koboSpan" id="kobo.104.1">
     section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.105.1">
      this recipe.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-136">
    <a id="_idTextAnchor137">
    </a>
    <span class="koboSpan" id="kobo.106.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.107.1">
     We need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.108.1">
      this recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.109.1">
      A working AWS account is essential.
     </span>
     <span class="koboSpan" id="kobo.109.2">
      I will be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.110.1">
       awsseccb-sandbox-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.111.1">
      account that we created in
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.112.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.113.1">
      .
     </span>
     <span class="koboSpan" id="kobo.113.2">
      However, I will not be using any features of the AWS Organizations or the IAM
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.114.1">
       Identity Center.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.115.1">
      An
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.116.1">
       awsseccb_admin1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.117.1">
      user with
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.118.1">
       AdministratorAccess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.119.1">
      permission is
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.120.1">
       also important.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.121.1">
      We also need an S3 bucket and a file in it.
     </span>
     <span class="koboSpan" id="kobo.121.2">
      I will use a bucket named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.122.1">
       awsseccbbucketpolicy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.123.1">
      with a file named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.124.1">
       image-cloudericks.png
      </span>
     </strong>
     <span class="koboSpan" id="kobo.125.1">
      .
     </span>
     <span class="koboSpan" id="kobo.125.2">
      Replace them with your bucket name and filename.
     </span>
     <span class="koboSpan" id="kobo.125.3">
      The S3 bucket should be configured with
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.126.1">
       Block all public access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.127.1">
      unchecked, especially for the settings related to bucket policies.
     </span>
     <span class="koboSpan" id="kobo.127.2">
      We can do this while creating a bucket, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.128.1">
        Figure 4
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.129.1">
       .1
      </span>
     </em>
     <span class="koboSpan" id="kobo.130.1">
      .
     </span>
     <span class="koboSpan" id="kobo.130.2">
      For the rest of the settings, keep the defaults as they are, which, at the time of writing this book, are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.131.1">
       as follows:
      </span>
     </span>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.132.1">
         ACLs disabled (recommended)
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.133.1">
         is selected
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.134.1">
         Bucket Versioning
        </span>
       </strong>
       <span class="koboSpan" id="kobo.135.1">
        is set
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.136.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.137.1">
          Disable
         </span>
        </strong>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.138.1">
         Default encryption
        </span>
       </strong>
       <span class="koboSpan" id="kobo.139.1">
        is set to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.140.1">
         Server-side encryption with Amazon S3 managed
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.141.1">
          keys (SSE-S3)
         </span>
        </strong>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.142.1">
         Bucket Key
        </span>
       </strong>
       <span class="koboSpan" id="kobo.143.1">
        is set
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.144.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.145.1">
          Enable
         </span>
        </strong>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.146.1">
         Object Lock
        </span>
       </strong>
       <span class="koboSpan" id="kobo.147.1">
        (which is found under
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.148.1">
         Advanced settings
        </span>
       </strong>
       <span class="koboSpan" id="kobo.149.1">
        ) is set
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.150.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.151.1">
          Disable
         </span>
        </strong>
       </span>
      </li>
     </ul>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer104">
     <span class="koboSpan" id="kobo.152.1">
      <img alt="Figure 4.1 – Unchecking settings for bucket policies" src="image/B21384_04_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.153.1">
     Figure 4.1 – Unchecking settings for bucket policies
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.154.1">
      Verify that your
     </span>
     <a id="_idIndexMarker537">
     </a>
     <span class="koboSpan" id="kobo.155.1">
      bucket does not allow listing for everyone by going to the bucket from the browser using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.156.1">
       https://&lt;bucket-name&gt;.s3.amazonaws.com
      </span>
     </strong>
     <span class="koboSpan" id="kobo.157.1">
      bucket URL, replacing
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.158.1">
       &lt;bucket-name&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.159.1">
      with your bucket name (for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.160.1">
       example,
      </span>
     </span>
     <a href="https://seccbbucket.s3.amazonaws.com/">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.161.1">
        https://seccbbucket.s3.amazonaws.com/
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.162.1">
       ).
      </span>
     </span>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer105">
     <span class="koboSpan" id="kobo.163.1">
      <img alt="Figure 4.2 – Verifying access for the bucket before starting the recipe" src="image/B21384_04_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.164.1">
     Figure 4.2 – Verifying access for the bucket before starting the recipe
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.165.1">
      For using an IAM user as the principal, as outlined in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.166.1">
       Granting ListBucket access for an IAM user from the CLI
      </span>
     </em>
     <span class="koboSpan" id="kobo.167.1">
      section, we need an IAM user with no permissions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.168.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.169.1">
        awsseccb_user1
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.170.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.171.1">
      We will also need an
     </span>
     <a id="_idIndexMarker538">
     </a>
     <span class="koboSpan" id="kobo.172.1">
      environment setup for executing CLI commands with two CLI profiles,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.173.1">
       AwsSecCbAdmin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.174.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.175.1">
       AwsSecCbUser
      </span>
     </strong>
     <span class="koboSpan" id="kobo.176.1">
      , for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.177.1">
       awsseccb_admin1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.178.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.179.1">
       awsseccb_user1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.180.1">
      users, respectively, following the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.181.1">
       Technical requirements
      </span>
     </em>
     <span class="koboSpan" id="kobo.182.1">
      section of this chapter if we want to follow the steps involving
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.183.1">
       CLI commands.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.184.1">
     Next, we will use bucket policies to give permission to everyone to list the contents of our bucket and then retry
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.185.1">
      this step.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-137">
    <a id="_idTextAnchor138">
    </a>
    <span class="koboSpan" id="kobo.186.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.187.1">
     We will first generate a policy from the console using the policy generator.
    </span>
    <span class="koboSpan" id="kobo.187.2">
     Later, we will execute the policy from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.188.1">
      the CLI.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.189.1">
     Granting ListBucket and GetObject access from the console
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.190.1">
     We can give public access to list the
    </span>
    <a id="_idIndexMarker539">
    </a>
    <span class="koboSpan" id="kobo.191.1">
     contents of a bucket
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.192.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.193.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.194.1">
       S3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.195.1">
      service in the console, click on our bucket’s name, go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.196.1">
       Permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.197.1">
      tab, and then go to
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.198.1">
        Bucket policy
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.199.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.200.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.201.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.202.1">
      , then click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.203.1">
       Policy generator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.204.1">
      on the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.205.1">
       upper-right side.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.206.1">
      Within the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.207.1">
       AWS Policy Generator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.208.1">
      page, select
     </span>
     <a id="_idIndexMarker540">
     </a>
     <span class="koboSpan" id="kobo.209.1">
      or enter data
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.210.1">
       as follows:
      </span>
     </span>
     <ol>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.211.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.212.1">
         Select Type of Policy
        </span>
       </strong>
       <span class="koboSpan" id="kobo.213.1">
        , select
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.214.1">
         S3
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.215.1">
          Bucket Policy
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.216.1">
         .
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.217.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.218.1">
         Effect
        </span>
       </strong>
       <span class="koboSpan" id="kobo.219.1">
        ,
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.220.1">
         select
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.221.1">
          Allow
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.222.1">
         .
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.223.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.224.1">
         Principal
        </span>
       </strong>
       <span class="koboSpan" id="kobo.225.1">
        , enter the
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.226.1">
         *
        </span>
       </strong>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.227.1">
         value.
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.228.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.229.1">
         AWS Service
        </span>
       </strong>
       <span class="koboSpan" id="kobo.230.1">
        ,
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.231.1">
         Amazon S3
        </span>
       </strong>
       <span class="koboSpan" id="kobo.232.1">
        will
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.233.1">
         be selected.
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.234.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.235.1">
         Actions
        </span>
       </strong>
       <span class="koboSpan" id="kobo.236.1">
        ,
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.237.1">
         select
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.238.1">
          ListBucket
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.239.1">
         .
        </span>
       </span>
      </li>
      <li class="upper-roman">
       <span class="koboSpan" id="kobo.240.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.241.1">
         Amazon Resource Name (ARN)
        </span>
       </strong>
       <span class="koboSpan" id="kobo.242.1">
        , copy and paste the Bucket ARN (e.g.,
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.243.1">
         arn:aws:s3:::seccbbucket
        </span>
       </strong>
       <span class="koboSpan" id="kobo.244.1">
        ) from the
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.245.1">
         Edit bucket
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.246.1">
          policy
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.247.1">
         page.
        </span>
       </span>
      </li>
     </ol>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer106">
     <span class="koboSpan" id="kobo.248.1">
      <img alt="Figure 4.3 – The AWS Policy Generator page" src="image/B21384_04_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.249.1">
     Figure 4.3 – The AWS Policy Generator page
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.250.1">
      Click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.251.1">
        Add Statement
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.252.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.253.1">
      Click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.254.1">
        Generate Policy
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.255.1">
       .
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.256.1">
       The generated policy
      </span>
      <a id="_idIndexMarker541">
      </a>
      <span class="koboSpan" id="kobo.257.1">
       should look similar to
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.258.1">
        the following.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer107">
     <span class="koboSpan" id="kobo.259.1">
      <img alt="Figure 4.4 – The bucket policy" src="image/B21384_04_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.260.1">
     Figure 4.4 – The bucket policy
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.261.1">
      Copy the policy into the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.262.1">
       Bucket policy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.263.1">
      editor on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.264.1">
       Edit bucket policy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.265.1">
      page, then
     </span>
     <a id="_idIndexMarker542">
     </a>
     <span class="koboSpan" id="kobo.266.1">
      click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.267.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.268.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.269.1">
      In a browser, provide the bucket URL (e.g.,
     </span>
     <a href="https://seccbbucket.s3.amazonaws.com/">
      <span class="koboSpan" id="kobo.270.1">
       https://seccbbucket.s3.amazonaws.com
      </span>
     </a>
     <span class="koboSpan" id="kobo.271.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.271.2">
      The contents of the bucket should now
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.272.1">
       be listed:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer108">
     <span class="koboSpan" id="kobo.273.1">
      <img alt="Figure 4.5 – Listing the contents of the bucket" src="image/B21384_04_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.274.1">
     Figure 4.5 – Listing the contents of the bucket
    </span>
   </p>
   <ol>
    <li value="8">
     <span class="koboSpan" id="kobo.275.1">
      In the bucket policy editor, change
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.276.1">
       s3:ListBucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.277.1">
      to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.278.1">
       s3:GetObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.279.1">
      and add
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.280.1">
       /*
      </span>
     </strong>
     <span class="koboSpan" id="kobo.281.1">
      at the end of the
     </span>
     <a id="_idIndexMarker543">
     </a>
     <span class="koboSpan" id="kobo.282.1">
      resource (such as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.283.1">
       "Resource": "arn:aws:s3:::seccbbucket/*"
      </span>
     </strong>
     <span class="koboSpan" id="kobo.284.1">
      ), then click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.285.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.286.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.287.1">
      Access the object URL from the bucket and paste it into the browser.
     </span>
     <span class="koboSpan" id="kobo.287.2">
      We should be able to successfully retrieve the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.288.1">
       object now:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer109">
     <span class="koboSpan" id="kobo.289.1">
      <img alt="Figure 4.6 – Accessing the image from the bucket" src="image/B21384_04_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.290.1">
     Figure 4.6 – Accessing the image from the bucket
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.291.1">
     If we change the resource to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.292.1">
      arn:aws:s3:::seccbbucket/*
     </span>
    </strong>
    <span class="koboSpan" id="kobo.293.1">
     without an object operation such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.294.1">
      s3:GetObject
     </span>
    </strong>
    <span class="koboSpan" id="kobo.295.1">
     , we will get an error stating that the action does not apply to any resource.
    </span>
    <span class="koboSpan" id="kobo.295.2">
     This is because, when we add any prefix (such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.296.1">
      *
     </span>
    </strong>
    <span class="koboSpan" id="kobo.297.1">
     ) to the bucket, it is
    </span>
    <a id="_idIndexMarker544">
    </a>
    <span class="koboSpan" id="kobo.298.1">
     considered an object operation; otherwise, it is considered a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.299.1">
      bucket-level operation.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.300.1">
     Next, we will see how we can grant ListBucket access to an IAM user from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.301.1">
      the CLI.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.302.1">
     Granting ListBucket Access for an IAM user from the CLI
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.303.1">
     In the previous section, we used a
    </span>
    <a id="_idIndexMarker545">
    </a>
    <span class="koboSpan" id="kobo.304.1">
     policy that allows access to everyone by specifying
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.305.1">
      Principal
     </span>
    </strong>
    <span class="koboSpan" id="kobo.306.1">
     as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.307.1">
      *
     </span>
    </strong>
    <span class="koboSpan" id="kobo.308.1">
     .
    </span>
    <span class="koboSpan" id="kobo.308.2">
     In this section, we will use a bucket policy that provides access to a specific IAM user to demonstrate creating a bucket policy from the CLI.
    </span>
    <span class="koboSpan" id="kobo.308.3">
     Let us
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.309.1">
      get started:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.310.1">
      If you are following along from the previous section, delete that policy and make sure that you do not have access to list
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.311.1">
       the bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.312.1">
      Create a bucket policy to allow our
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.313.1">
       awsseccb_user1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.314.1">
      user to access it and save it
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.315.1">
       as
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.316.1">
        bucket-policy-allow-list.json
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.317.1">
       :
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.318.1">
{
  "Id": "Policy1560416549842",
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "ListAllBuckets",
      "Action": [
        "s3:ListBucket"
      ],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::awsseccbbucketpolicy",
      "Principal": {
        "AWS": "arn:aws:iam::207849759248:user/awsseccb_user1"
      }
    }
  ]
}</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.319.1">
       Remember to replace my S3 bucket name,
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.320.1">
        awsseccbbucketpolicy
       </span>
      </strong>
      <span class="koboSpan" id="kobo.321.1">
       , with your bucket name and my AWS account ID,
      </span>
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.322.1">
        207849759248
       </span>
      </strong>
      <span class="koboSpan" id="kobo.323.1">
       , with your AWS account ID within
      </span>
      <a id="_idIndexMarker546">
      </a>
      <span class="koboSpan" id="kobo.324.1">
       the
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.325.1">
        given policy.
       </span>
      </span>
     </p>
    </li>
    <li>
     <span class="koboSpan" id="kobo.326.1">
      Attach the policy to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.327.1">
       the bucket:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.328.1">aws s3api put-bucket-policy --bucket awsseccbbucketpolicy --policy file://bucket-policy-allow-list.json --profile AwsSecCbAdmin</span></strong></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.329.1">
      List the contents of the bucket using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.330.1">
       AwsSecCbUser
      </span>
     </strong>
     <span class="koboSpan" id="kobo.331.1">
      profile created for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.332.1">
       awsseccb_user1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.333.1">
      user, using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.334.1">
       aws s3 ls bucketname
      </span>
     </strong>
     <span class="koboSpan" id="kobo.335.1">
      command as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.336.1">
       following screenshot:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer110">
     <span class="koboSpan" id="kobo.337.1">
      <img alt="Figure 4.7 – Listing the contents of the bucket using CLI" src="image/B21384_04_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.338.1">
     Figure 4.7 – Listing the contents of the bucket using CLI
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.339.1">
     Now that you have
    </span>
    <a id="_idIndexMarker547">
    </a>
    <span class="koboSpan" id="kobo.340.1">
     seen how to create policies from the console and the CLI, practice more scenarios with each of the available actions
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.341.1">
      and conditions.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-138">
    <a id="_idTextAnchor139">
    </a>
    <span class="koboSpan" id="kobo.342.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.343.1">
     In this recipe, we created S3 bucket policies.
    </span>
    <span class="koboSpan" id="kobo.343.2">
     A bucket policy statement can have the following components:
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.344.1">
      Sid
     </span>
    </strong>
    <span class="koboSpan" id="kobo.345.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.346.1">
      Principal
     </span>
    </strong>
    <span class="koboSpan" id="kobo.347.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.348.1">
      Effect
     </span>
    </strong>
    <span class="koboSpan" id="kobo.349.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.350.1">
      Action
     </span>
    </strong>
    <span class="koboSpan" id="kobo.351.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.352.1">
      Resource
     </span>
    </strong>
    <span class="koboSpan" id="kobo.353.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.354.1">
      Condition
     </span>
    </strong>
    <span class="koboSpan" id="kobo.355.1">
     .
    </span>
    <span class="koboSpan" id="kobo.355.2">
     All of these except Principal are the same as an IAM policy and we explored them in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.356.1">
      Creating a customer-managed IAM policy
     </span>
    </em>
    <span class="koboSpan" id="kobo.357.1">
     recipe in
    </span>
    <a href="B21384_02.xhtml#_idTextAnchor043">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.358.1">
        Chapter 2
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.359.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.360.1">
     The Principal component for a bucket policy can be an account, user, role, or everyone (denoted by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.361.1">
      *
     </span>
    </strong>
    <span class="koboSpan" id="kobo.362.1">
     ).
    </span>
    <span class="koboSpan" id="kobo.362.2">
     It can contain an ARN for a resource (specified using the ARN element) or a canonical ID (specified
    </span>
    <a id="_idIndexMarker548">
    </a>
    <span class="koboSpan" id="kobo.363.1">
     using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.364.1">
      CanonicalUser
     </span>
    </strong>
    <span class="koboSpan" id="kobo.365.1">
     element).
    </span>
    <span class="koboSpan" id="kobo.365.2">
     More details about the principal are present in
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.366.1">
      There’s more
     </span>
    </em>
    <span class="koboSpan" id="kobo.367.1">
     section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.368.1">
      this recipe.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.369.1">
     Resource, in the case of a bucket policy, is a bucket or object and is denoted using a bucket ARN.
    </span>
    <span class="koboSpan" id="kobo.369.2">
     The bucket ARN should be in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.370.1">
      arn:aws:s3:::bucket_name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.371.1">
     form.
    </span>
    <span class="koboSpan" id="kobo.371.2">
     An object resource is represented in the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.372.1">
      arn:aws:s3:::bucket_name/key_name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.373.1">
     form.
    </span>
    <span class="koboSpan" id="kobo.373.2">
     To denote all objects within a bucket, we can use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.374.1">
      arn:aws:s3:::bucket_name/*
     </span>
    </strong>
    <span class="koboSpan" id="kobo.375.1">
     .
    </span>
    <span class="koboSpan" id="kobo.375.2">
     We can denote every resource in every bucket
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.376.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.377.1">
       arn:aws:s3:::*
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.378.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-139">
    <a id="_idTextAnchor140">
    </a>
    <span class="koboSpan" id="kobo.379.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.380.1">
     Bucket policies follow the same JSON document structure as IAM policies but have an additional principal field.
    </span>
    <span class="koboSpan" id="kobo.380.2">
     The principal is the user or entity for which a policy statement is applicable.
    </span>
    <span class="koboSpan" id="kobo.380.3">
     There is no principal for an IAM policy as it is attached to an IAM user.
    </span>
    <span class="koboSpan" id="kobo.380.4">
     The IAM user who executes that policy is the principal in the case of an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.381.1">
      IAM policy.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.382.1">
     Consider the following examples when using Principal in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.383.1">
      bucket policies:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.384.1">
      A root user can
     </span>
     <a id="_idIndexMarker549">
     </a>
     <span class="koboSpan" id="kobo.385.1">
      be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.386.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.387.1">
"Principal": {
    "AWS": "arn:aws:iam::1312086767378:root"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.388.1">
      An IAM user can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.389.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.390.1">
"Principal": {
    "AWS": "arn:aws:iam::312086767378:user/demouser"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.391.1">
      A federated user can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.392.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.393.1">
"Principal": {
    "AWS": "arn:aws:iam::312086767378:user/demouser"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.394.1">
      An IAM role can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.395.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.396.1">
"Principal": {
    "AWS": "arn:aws:iam::your-account-id:role/MyRole"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.397.1">
      A role session can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.398.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.399.1">
"Principal": {
    "AWS": "arn:aws:sts::767883004914:assumed-role/UserRole/MySession"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.400.1">
      A canonical user ID can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.401.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.402.1">
"Principal": {
    "CanonicalUser": "5df5b6014ae606808dcb64208aa09e4f19931b3123 456e152c4dfa52d38bf8fd"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.403.1">
      An AWS session can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.404.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.405.1">
"Principal": {
    "Service": "cloudfront.amazonaws.com"
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.406.1">
      Multiple principals
     </span>
     <a id="_idIndexMarker550">
     </a>
     <span class="koboSpan" id="kobo.407.1">
      can be represented in an array
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.408.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.409.1">
"Principal": {
    "AWS": [
        "arn:aws:iam::873506153865:root",
        "arn:aws:iam::671100771477:root"
    ]
}</span></pre>
    </li>
    <li>
     <span class="koboSpan" id="kobo.410.1">
      An anonymous user can be represented
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.411.1">
       as follows:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.412.1">
"Principal" : "*"</span></pre>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.413.1">
     Let’s quickly go through some more important details relating to S3
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.414.1">
      bucket policies:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.415.1">
      The Conditions element is an optional element that allows us to conditionally execute policies.
     </span>
     <span class="koboSpan" id="kobo.415.2">
      We used Conditions in one of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.416.1">
       the examples.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.417.1">
      Currently, we have around 50 bucket policy actions, including those that work on an object (for example,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.418.1">
       s3:PutObject
      </span>
     </strong>
     <span class="koboSpan" id="kobo.419.1">
      ), a bucket (for example,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.420.1">
       s3:CreateBucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.421.1">
      ), or a bucket sub-resource (for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.422.1">
       example,
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.423.1">
        PutBucketAcl
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.424.1">
       ).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.425.1">
      The current list of bucket sub-resources with permissions includes
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.426.1">
       BucketPolicy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.427.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.428.1">
       BucketWebsite
      </span>
     </strong>
     <span class="koboSpan" id="kobo.429.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.430.1">
       AccelerateConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.431.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.432.1">
       BucketAcl
      </span>
     </strong>
     <span class="koboSpan" id="kobo.433.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.434.1">
       BucketCORS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.435.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.436.1">
       BucketLocation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.437.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.438.1">
       BucketLogging
      </span>
     </strong>
     <span class="koboSpan" id="kobo.439.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.440.1">
       BucketNotification
      </span>
     </strong>
     <span class="koboSpan" id="kobo.441.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.442.1">
       BucketObjectLockConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.443.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.444.1">
       BucketPolicyStatus
      </span>
     </strong>
     <span class="koboSpan" id="kobo.445.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.446.1">
       BucketPublicAccessBlock
      </span>
     </strong>
     <span class="koboSpan" id="kobo.447.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.448.1">
       BucketRequestPayment
      </span>
     </strong>
     <span class="koboSpan" id="kobo.449.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.450.1">
       BucketTagging
      </span>
     </strong>
     <span class="koboSpan" id="kobo.451.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.452.1">
       BucketVersioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.453.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.454.1">
       EncryptionConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.455.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.456.1">
       InventoryConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.457.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.458.1">
       LifecycleConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.459.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.460.1">
       MetricsConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.461.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.462.1">
       ReplicationConfiguration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.463.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.464.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.465.1">
        AnalyticsConfiguration
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.466.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.467.1">
      We cannot specify an IAM group as a principal in an S3 bucket policy.
     </span>
     <span class="koboSpan" id="kobo.467.2">
      If we add a group instead of a
     </span>
     <a id="_idIndexMarker551">
     </a>
     <span class="koboSpan" id="kobo.468.1">
      user, we will get an error:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.469.1">
       Invalid principal
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.470.1">
        in policy
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.471.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.472.1">
      Here are some S3-specific condition keys available for use in conditions within a policy:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.473.1">
       s3:x-amz-acl
      </span>
     </strong>
     <span class="koboSpan" id="kobo.474.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.475.1">
       s3:x-amz-copy-source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.476.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.477.1">
       s3:x-amz-metadatadirective
      </span>
     </strong>
     <span class="koboSpan" id="kobo.478.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.479.1">
       s3:x-amz-server-side-encryption
      </span>
     </strong>
     <span class="koboSpan" id="kobo.480.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.481.1">
       s3:VersionId
      </span>
     </strong>
     <span class="koboSpan" id="kobo.482.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.483.1">
       s3:LocationConstraint
      </span>
     </strong>
     <span class="koboSpan" id="kobo.484.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.485.1">
       s3:delimiter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.486.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.487.1">
       s3:max-keys
      </span>
     </strong>
     <span class="koboSpan" id="kobo.488.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.489.1">
       s3:prefix
      </span>
     </strong>
     <span class="koboSpan" id="kobo.490.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.491.1">
       s3:xamz-server-side-encryption-aws-kms-key-id
      </span>
     </strong>
     <span class="koboSpan" id="kobo.492.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.493.1">
       s3:ExistingObjectTag/
      </span>
     </strong>
     <span class="koboSpan" id="kobo.494.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.495.1">
       s3:RequestObjectTagKeys
      </span>
     </strong>
     <span class="koboSpan" id="kobo.496.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.497.1">
       s3:RequestObjectTag/
      </span>
     </strong>
     <span class="koboSpan" id="kobo.498.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.499.1">
       s3:object-lock-remainingretention-days
      </span>
     </strong>
     <span class="koboSpan" id="kobo.500.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.501.1">
       s3:object-lock-mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.502.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.503.1">
       s3:object-lock-retain-untildate
      </span>
     </strong>
     <span class="koboSpan" id="kobo.504.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.505.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.506.1">
        s3:object-lock-legal-hold
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.507.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-140">
    <a id="_idTextAnchor141">
    </a>
    <span class="koboSpan" id="kobo.508.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.509.1">
      We can read about IAM policies in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.510.1">
       Creating a customer-managed IAM policy
      </span>
     </em>
     <span class="koboSpan" id="kobo.511.1">
      recipe from
     </span>
     <a href="B21384_02.xhtml#_idTextAnchor043">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.512.1">
         Chapter 2
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.513.1">
      .
     </span>
     <span class="koboSpan" id="kobo.513.2">
      For a detailed comparison of ACLs, bucket policies, and IAM policies, refer to the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.514.1">
       There’s more
      </span>
     </em>
     <span class="koboSpan" id="kobo.515.1">
      section of the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.516.1">
       Working with S3 ACLs
      </span>
     </em>
     <span class="koboSpan" id="kobo.517.1">
      recipe in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.518.1">
       current chapter.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.519.1">
      We can find many bucket policy examples
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.520.1">
       at
      </span>
     </span>
     <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.521.1">
        https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.522.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-141">
    <a id="_idTextAnchor142">
    </a>
    <span class="koboSpan" id="kobo.523.1">
     Working with S3 ACLs
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.524.1">
     In Amazon S3, ACLs are utilized to manage access to both buckets and objects.
    </span>
    <span class="koboSpan" id="kobo.524.2">
     As we delve into ACLs, it’s crucial to recognize that they are now viewed as a legacy tool within the AWS ecosystem.
    </span>
    <span class="koboSpan" id="kobo.524.3">
     AWS
    </span>
    <a id="_idIndexMarker552">
    </a>
    <span class="koboSpan" id="kobo.525.1">
     recommends opting for more current solutions such as IAM and bucket policies, which provide enhanced flexibility and security.
    </span>
    <span class="koboSpan" id="kobo.525.2">
     Nonetheless, understanding ACLs is beneficial, particularly when dealing with older systems or applications that were developed before the advent of IAM and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.526.1">
      bucket policies.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.527.1">
     In this recipe, we will learn to grant permissions to the public (everyone) to list the files of a bucket using ACLs from the AWS Management Console.
    </span>
    <span class="koboSpan" id="kobo.527.2">
     We will list more use cases within the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.528.1">
      There’s more
     </span>
    </em>
    <span class="koboSpan" id="kobo.529.1">
     section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.530.1">
      the recipe.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-142">
    <a id="_idTextAnchor143">
    </a>
    <span class="koboSpan" id="kobo.531.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.532.1">
     We need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.533.1">
      this recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.534.1">
      A working AWS account is essential.
     </span>
     <span class="koboSpan" id="kobo.534.2">
      I will be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.535.1">
       awsseccb-sandbox-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.536.1">
      account that we created in
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.537.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.538.1">
      .
     </span>
     <span class="koboSpan" id="kobo.538.2">
      However, I will not be using any features of the AWS Organizations or the IAM
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.539.1">
       Identity Center.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.540.1">
      An
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.541.1">
       awsseccb_admin1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.542.1">
      user with
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.543.1">
        AdministratorAccess
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.544.1">
       permissions.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.545.1">
      We will need an environment setup for executing CLI commands with two CLI profiles,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.546.1">
       AwsSecCbAdmin
      </span>
     </strong>
     <span class="koboSpan" id="kobo.547.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.548.1">
       AwsSecCbUser
      </span>
     </strong>
     <span class="koboSpan" id="kobo.549.1">
      , for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.550.1">
       awsseccb_admin1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.551.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.552.1">
       awsseccb_user1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.553.1">
      users (respectively) following the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.554.1">
       Technical requirements
      </span>
     </em>
     <span class="koboSpan" id="kobo.555.1">
      section of this chapter if we want to follow the steps involving
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.556.1">
       CLI commands.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.557.1">
      We will also need an S3 bucket and a file in it.
     </span>
     <span class="koboSpan" id="kobo.557.2">
      I will be using a bucket named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.558.1">
       awsseccbacldemo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.559.1">
      with a file named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.560.1">
       image-cloudericks.png
      </span>
     </strong>
     <span class="koboSpan" id="kobo.561.1">
      .
     </span>
     <span class="koboSpan" id="kobo.561.2">
      Replace them with your bucket name and filename.
     </span>
     <span class="koboSpan" id="kobo.561.3">
      The S3 bucket should be configured with ACLs enabled.
     </span>
     <span class="koboSpan" id="kobo.561.4">
      We can do this while creating a bucket, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.562.1">
        Figure 4
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.563.1">
       .8
      </span>
     </em>
     <span class="koboSpan" id="kobo.564.1">
      .
     </span>
     <span class="koboSpan" id="kobo.564.2">
      Also, ensure that the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.565.1">
       Block all public access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.566.1">
      option is unchecked, especially for the settings related to ACLs.
     </span>
     <span class="koboSpan" id="kobo.566.2">
      We can do this while creating a bucket, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.567.1">
        Figure 4
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.568.1">
       .9
      </span>
     </em>
     <span class="koboSpan" id="kobo.569.1">
      .
     </span>
     <span class="koboSpan" id="kobo.569.2">
      For the rest of the settings, keep the defaults as they are, which, at the time of writing this book, are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.570.1">
       as follows:
      </span>
     </span>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.571.1">
         Bucket Versioning
        </span>
       </strong>
       <span class="koboSpan" id="kobo.572.1">
        is set
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.573.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.574.1">
          Disable
         </span>
        </strong>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.575.1">
         Default encryption
        </span>
       </strong>
       <span class="koboSpan" id="kobo.576.1">
        is set to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.577.1">
         Server-side encryption with Amazon S3 managed
        </span>
       </strong>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.578.1">
          keys (SSE-S3)
         </span>
        </strong>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.579.1">
         Bucket Key
        </span>
       </strong>
       <span class="koboSpan" id="kobo.580.1">
        is set
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.581.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.582.1">
          Enable
         </span>
        </strong>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.583.1">
         Object Lock
        </span>
       </strong>
       <span class="koboSpan" id="kobo.584.1">
        (found under
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.585.1">
         Advanced settings
        </span>
       </strong>
       <span class="koboSpan" id="kobo.586.1">
        ) is set
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.587.1">
         to
        </span>
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.588.1">
          Disable
         </span>
        </strong>
       </span>
      </li>
     </ul>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.589.1">
     While creating an S3 bucket, we
    </span>
    <a id="_idIndexMarker553">
    </a>
    <span class="koboSpan" id="kobo.590.1">
     can enable ACLs as required for this recipe with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.591.1">
      following settings:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer111">
     <span class="koboSpan" id="kobo.592.1">
      <img alt="Figure 4.8 – Enabling ACLs for Amazon S3 object ownership" src="image/B21384_04_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.593.1">
     Figure 4.8 – Enabling ACLs for Amazon S3 object ownership
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.594.1">
     Furthermore, we can uncheck the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.595.1">
      Block all public access
     </span>
    </strong>
    <span class="koboSpan" id="kobo.596.1">
     option as required for this recipe, as shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.597.1">
      following figure:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer112">
     <span class="koboSpan" id="kobo.598.1">
      <img alt="Figure 4.9 – Unchecking the Block all public access setting for ACLS" src="image/B21384_04_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.599.1">
     Figure 4.9 – Unchecking the Block all public access setting for ACLS
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.600.1">
     Verify that our bucket does not allow listing for
    </span>
    <a id="_idIndexMarker554">
    </a>
    <span class="koboSpan" id="kobo.601.1">
     everyone by going to the bucket from the browser using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.602.1">
      https://&lt;bucket-name&gt;.s3.amazonaws.com
     </span>
    </strong>
    <span class="koboSpan" id="kobo.603.1">
     bucket URL, replacing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.604.1">
      &lt;bucket-name&gt;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.605.1">
     with our bucket name (e.g.,
    </span>
    <a href="https://awsseccbacldemo.s3.amazonaws.com">
     <span class="koboSpan" id="kobo.606.1">
      https://awsseccbacldemo.s3.amazonaws.com
     </span>
    </a>
    <span class="koboSpan" id="kobo.607.1">
     ), similar to
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.608.1">
       Figure 4
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.609.1">
       .2
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.610.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.611.1">
     Next, allow everyone to list the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.612.1">
      bucket’s contents.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-143">
    <a id="_idTextAnchor144">
    </a>
    <span class="koboSpan" id="kobo.613.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.614.1">
     Perform the following steps to allow everyone to list the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.615.1">
      bucket’s contents:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.616.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.617.1">
       S3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.618.1">
      service on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.619.1">
       the console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.620.1">
      Click on our bucket’s name (e.g.,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.621.1">
       awsseccbacldemo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.622.1">
      ) to go to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.623.1">
       bucket’s page.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.624.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.625.1">
       Permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.626.1">
      tab of the bucket, scroll down to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.627.1">
       Access control list (ACL)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.628.1">
      tab, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.629.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.630.1">
        Edit
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.631.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.632.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.633.1">
       Edit access control list (ACL)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.634.1">
      page, under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.635.1">
       Everyone (public access)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.636.1">
      , select the
     </span>
     <a id="_idIndexMarker555">
     </a>
     <span class="koboSpan" id="kobo.637.1">
      checkbox for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.638.1">
       List
      </span>
     </strong>
     <span class="koboSpan" id="kobo.639.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.640.1">
       Objects
      </span>
     </strong>
     <span class="koboSpan" id="kobo.641.1">
      , and select the checkbox next to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.642.1">
       I understand the effects of these changes on my objects and
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.643.1">
        buckets
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.644.1">
       statement.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer113">
     <span class="koboSpan" id="kobo.645.1">
      <img alt="Figure 4.10 – Editing the ACL page" src="image/B21384_04_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.646.1">
     Figure 4.10 – Editing the ACL page
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.647.1">
      Scroll down and click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.648.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.649.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.650.1">
      Access the bucket from the browser using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.651.1">
       https://&lt;bucket-name&gt;.s3.amazonaws.com
      </span>
     </strong>
     <span class="koboSpan" id="kobo.652.1">
      link, replacing
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.653.1">
       &lt;bucket-name&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.654.1">
      with your bucket name (e.g.,
     </span>
     <a href="https://awsseccbacldemo.s3.amazonaws.com/">
      <span class="koboSpan" id="kobo.655.1">
       https://awsseccbacldemo.s3.amazonaws.com/
      </span>
     </a>
     <span class="koboSpan" id="kobo.656.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.656.2">
      You should be able to list the contents of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.657.1">
       the bucket.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer114">
     <span class="koboSpan" id="kobo.658.1">
      <img alt="Figure 4.11 – An XML file showing the contents of the bucket" src="image/B21384_04_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.659.1">
     Figure 4.11 – An XML file showing the contents of the bucket
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.660.1">
     In this edition of the book, we
    </span>
    <a id="_idIndexMarker556">
    </a>
    <span class="koboSpan" id="kobo.661.1">
     focus on a narrower range of scenarios involving ACLs, unlike the broader coverage of use cases in the previous edition of this book, as ACLs are currently considered a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.662.1">
      legacy option.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-144">
    <a id="_idTextAnchor145">
    </a>
    <span class="koboSpan" id="kobo.663.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.664.1">
     This recipe provided the steps for enabling the public listing of an S3 bucket’s contents in AWS.
    </span>
    <span class="koboSpan" id="kobo.664.2">
     The key step involved modifying the ACL settings via the AWS Management Console.
    </span>
    <span class="koboSpan" id="kobo.664.3">
     In doing so, we specifically configured the ACL to allow public access for listing the bucket’s contents, while ensuring that general read access to the bucket’s objects was
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.665.1">
      not granted.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.666.1">
     In this recipe, we allowed everyone to list the contents of the bucket using ACLs from the Management Console.
    </span>
    <span class="koboSpan" id="kobo.666.2">
     We can also do the same from CLI.
    </span>
    <span class="koboSpan" id="kobo.666.3">
     ACLs provide foundational read/write permissions for buckets, objects, and their ACLs.
    </span>
    <span class="koboSpan" id="kobo.666.4">
     Specifically, they can grant the following permissions and can be set while working with the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.667.1">
      AWS CLI:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.668.1">
       READ
      </span>
     </strong>
     <span class="koboSpan" id="kobo.669.1">
      : Allows listing objects in a bucket and reading an object and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.670.1">
       its metadata
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.671.1">
       WRITE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.672.1">
      : Enables the creation, overwriting, or deletion of objects in a bucket; this permission is not applicable to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.673.1">
       individual objects
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.674.1">
       READ_ACP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.675.1">
      : Grants the ability to read the ACL of a bucket
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.676.1">
       or object
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.677.1">
       WRITE_ACP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.678.1">
      : Permits writing the ACL for a bucket
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.679.1">
       or object
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.680.1">
       FULL_CONTROL
      </span>
     </strong>
     <span class="koboSpan" id="kobo.681.1">
      : Includes all of the previous permissions, offering complete authority over the bucket
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.682.1">
       or object
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.683.1">
     Prior to implementing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.684.1">
      READ
     </span>
    </strong>
    <span class="koboSpan" id="kobo.685.1">
     ACLs for public access, we prepared the bucket by enabling ACLs and ensuring that the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.686.1">
      Block all public access
     </span>
    </strong>
    <span class="koboSpan" id="kobo.687.1">
     setting was unchecked, specifically for ACL-related
    </span>
    <a id="_idIndexMarker557">
    </a>
    <span class="koboSpan" id="kobo.688.1">
     options.
    </span>
    <span class="koboSpan" id="kobo.688.2">
     It’s important to note that ACLs, often regarded as a legacy feature in comparison to more recent options such as IAM and bucket policies, are disabled by default.
    </span>
    <span class="koboSpan" id="kobo.688.3">
     Likewise, public access is blocked by default as a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.689.1">
      security measure.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-145">
    <a id="_idTextAnchor146">
    </a>
    <span class="koboSpan" id="kobo.690.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.691.1">
     Let’s delve deeper into some important concepts related to ACLs in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.692.1">
      Amazon S3:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.693.1">
       Basic permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.694.1">
      : ACLs provide foundational read/write permissions for buckets, objects, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.695.1">
       their ACLs.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.696.1">
       Access granting
      </span>
     </strong>
     <span class="koboSpan" id="kobo.697.1">
      : ACLs grant access to AWS accounts and predefined groups but cannot deny access.
     </span>
     <span class="koboSpan" id="kobo.697.2">
      Predefined
     </span>
     <a id="_idIndexMarker558">
     </a>
     <span class="koboSpan" id="kobo.698.1">
      groups in Amazon S3 ACLs are fixed categories set by AWS that represent broad sets of users, such as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.699.1">
       All Users
      </span>
     </strong>
     <span class="koboSpan" id="kobo.700.1">
      for the public,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.701.1">
       Authenticated Users
      </span>
     </strong>
     <span class="koboSpan" id="kobo.702.1">
      for any logged-in AWS user, and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.703.1">
       Log Delivery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.704.1">
      for services that deliver logs to your bucket.
     </span>
     <span class="koboSpan" id="kobo.704.2">
      They simplify permission settings without specifying individual user accounts.
     </span>
     <span class="koboSpan" id="kobo.704.3">
      When specifying grantees, the following methods can
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.705.1">
       be used:
      </span>
     </span>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.706.1">
         AmazonCustomerByEmail
        </span>
       </strong>
       <span class="koboSpan" id="kobo.707.1">
        : Set
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.708.1">
         Type
        </span>
       </strong>
       <span class="koboSpan" id="kobo.709.1">
        to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.710.1">
         AmazonCustomerByEmail
        </span>
       </strong>
       <span class="koboSpan" id="kobo.711.1">
        and use the canonical ID in the
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.712.1">
          EmailAddress
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.713.1">
         field
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.714.1">
         CanonicalUser
        </span>
       </strong>
       <span class="koboSpan" id="kobo.715.1">
        : Set
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.716.1">
         Type
        </span>
       </strong>
       <span class="koboSpan" id="kobo.717.1">
        to
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.718.1">
         CanonicalUser
        </span>
       </strong>
       <span class="koboSpan" id="kobo.719.1">
        ; the account’s email is provided in the
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.720.1">
          ID
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.721.1">
         field
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.722.1">
         Group
        </span>
       </strong>
       <span class="koboSpan" id="kobo.723.1">
        : When
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.724.1">
         Type
        </span>
       </strong>
       <span class="koboSpan" id="kobo.725.1">
        is
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.726.1">
         Group
        </span>
       </strong>
       <span class="koboSpan" id="kobo.727.1">
        , use the URI of the predefined group in the
       </span>
       <span class="No-Break">
        <strong class="bold">
         <span class="koboSpan" id="kobo.728.1">
          URI
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.729.1">
         field
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.730.1">
       Default control
      </span>
     </strong>
     <span class="koboSpan" id="kobo.731.1">
      : ACLs, by default, grant full control to the resource owner and no permissions to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.732.1">
       anyone else.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.733.1">
       Internal representation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.734.1">
      : ACLs are formatted as XML documents, specifying access permissions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.735.1">
       and grantees.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.736.1">
       Non-owner object access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.737.1">
      : ACLs allow granting access to objects not owned by the bucket owner using canned ACLs such
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.738.1">
       as
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.739.1">
        bucket-owner-full-control
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.740.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.741.1">
       Canned ACLs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.742.1">
      : These are short-hand ACL permissions that can be used to provide permission
     </span>
     <a id="_idIndexMarker559">
     </a>
     <span class="koboSpan" id="kobo.743.1">
      for a resource from the command line.
     </span>
     <span class="koboSpan" id="kobo.743.2">
      Currently, the following canned ACLs are supported:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.744.1">
       private
      </span>
     </strong>
     <span class="koboSpan" id="kobo.745.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.746.1">
       public-read
      </span>
     </strong>
     <span class="koboSpan" id="kobo.747.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.748.1">
       public-read-write
      </span>
     </strong>
     <span class="koboSpan" id="kobo.749.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.750.1">
       aws-exec-read
      </span>
     </strong>
     <span class="koboSpan" id="kobo.751.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.752.1">
       authenticated-read
      </span>
     </strong>
     <span class="koboSpan" id="kobo.753.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.754.1">
       bucket-owner-read
      </span>
     </strong>
     <span class="koboSpan" id="kobo.755.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.756.1">
       bucket-owner-full-control
      </span>
     </strong>
     <span class="koboSpan" id="kobo.757.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.758.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.759.1">
        log-delivery-write
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.760.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.761.1">
       Granular object permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.762.1">
      : ACLs offer a simpler method for assigning individual permissions to numerous objects
     </span>
     <a id="_idIndexMarker560">
     </a>
     <span class="koboSpan" id="kobo.763.1">
      compared to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.764.1">
       bucket policies.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.765.1">
       Block public access override
      </span>
     </strong>
     <span class="koboSpan" id="kobo.766.1">
      : S3’s
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.767.1">
       Block Public Access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.768.1">
      settings can override ACLs granting
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.769.1">
       public access.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.770.1">
       Logging access attempts
      </span>
     </strong>
     <span class="koboSpan" id="kobo.771.1">
      : Both successful and denied access attempts can be logged using S3
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.772.1">
       access logs.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.773.1">
       No conditions support
      </span>
     </strong>
     <span class="koboSpan" id="kobo.774.1">
      : ACLs do not support conditional clauses for granting access, unlike IAM or
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.775.1">
       bucket policies.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.776.1">
       Management challenges
      </span>
     </strong>
     <span class="koboSpan" id="kobo.777.1">
      : Managing ACLs in large environments can
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.778.1">
       be complex.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.779.1">
       Security best practices
      </span>
     </strong>
     <span class="koboSpan" id="kobo.780.1">
      : Regular reviews and audits of ACL settings are crucial for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.781.1">
       maintaining security.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.782.1">
       Scope and application differences
      </span>
     </strong>
     <span class="koboSpan" id="kobo.783.1">
      : We have
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.784.1">
       the following:
      </span>
     </span>
     <ul>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.785.1">
         ACLs
        </span>
       </strong>
       <span class="koboSpan" id="kobo.786.1">
        : Specified per resource (bucket
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.787.1">
         or object)
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.788.1">
         Bucket policies
        </span>
       </strong>
       <span class="koboSpan" id="kobo.789.1">
        : Applied to entire buckets and can be used to define access based on
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.790.1">
         object prefixes
        </span>
       </span>
      </li>
      <li>
       <strong class="bold">
        <span class="koboSpan" id="kobo.791.1">
         IAM policies
        </span>
       </strong>
       <span class="koboSpan" id="kobo.792.1">
        : Similar in scope
       </span>
       <a id="_idIndexMarker561">
       </a>
       <span class="koboSpan" id="kobo.793.1">
        to bucket policies but are assigned to IAM users and groups, allowing for more centralized and granular
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.794.1">
         access control
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.795.1">
     Let’s quickly go through some
    </span>
    <a id="_idIndexMarker562">
    </a>
    <span class="koboSpan" id="kobo.796.1">
     more important concepts related to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.797.1">
      canned ACLs:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.798.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.799.1">
       bucket-owner-read
      </span>
     </strong>
     <span class="koboSpan" id="kobo.800.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.801.1">
       bucket-owner-full-control
      </span>
     </strong>
     <span class="koboSpan" id="kobo.802.1">
      canned ACLs are only applicable to objects and are ignored if specified while creating
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.803.1">
       a bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.804.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.805.1">
       log-delivery-write
      </span>
     </strong>
     <span class="koboSpan" id="kobo.806.1">
      canned ACL only applies to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.807.1">
       a bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.808.1">
      With the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.809.1">
       aws-exec-read
      </span>
     </strong>
     <span class="koboSpan" id="kobo.810.1">
      canned ACL, the owner gets the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.811.1">
       FULL_CONTROL
      </span>
     </strong>
     <span class="koboSpan" id="kobo.812.1">
      permission and Amazon EC2 gets
     </span>
     <a id="_idIndexMarker563">
     </a>
     <span class="koboSpan" id="kobo.813.1">
      READ access to an
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.814.1">
       Amazon Machine Image
      </span>
     </strong>
     <span class="koboSpan" id="kobo.815.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.816.1">
       AMI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.817.1">
      )
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.818.1">
       from S3.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.819.1">
      With the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.820.1">
       log-delivery-write
      </span>
     </strong>
     <span class="koboSpan" id="kobo.821.1">
      canned ACL, the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.822.1">
       LogDelivery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.823.1">
      group gets
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.824.1">
       WRITE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.825.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.826.1">
       READ_ACP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.827.1">
      permissions for the bucket.
     </span>
     <span class="koboSpan" id="kobo.827.2">
      This is used for S3
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.828.1">
       access logging.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.829.1">
      When making an API call, we can specify a canned ACL in our request using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.830.1">
       x-amz-acl
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.831.1">
       request header.
      </span>
     </span>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.832.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.833.1">
     In the case of cross-account access, if a user from account A uploads an object to a bucket in account B (owned by account B), account B will have no access to that object even if it is the bucket owner.
    </span>
    <span class="koboSpan" id="kobo.833.2">
     Account A can, however, grant permission to the bucket owner while uploading the document using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.834.1">
      bucket-owner-read
     </span>
    </strong>
    <span class="koboSpan" id="kobo.835.1">
     or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.836.1">
      bucket-owner-full-control
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.837.1">
      canned ACL.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.838.1">
     Comparing ACLs, bucket policies, and IAM policies
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.839.1">
     ACLs differ from IAM policies and
    </span>
    <a id="_idIndexMarker564">
    </a>
    <span class="koboSpan" id="kobo.840.1">
     bucket policies in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.841.1">
      following ways:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.842.1">
      ACLs provide only basic read/write permission to buckets, objects, and their ACLs.
     </span>
     <span class="koboSpan" id="kobo.842.2">
      IAM policies and bucket policies provide more fine-grained permissions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.843.1">
       than ACLs.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.844.1">
      ACLs can only grant access to AWS accounts and predefined groups.
     </span>
     <span class="koboSpan" id="kobo.844.2">
      ACLs cannot grant permissions to IAM users.
     </span>
     <span class="koboSpan" id="kobo.844.3">
      IAM policies and bucket policies can be used to grant access to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.845.1">
       IAM users.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.846.1">
      ACLs, by default, allow full control to the owner of the resource and nothing to everyone else.
     </span>
     <span class="koboSpan" id="kobo.846.2">
      Bucket policies and IAM policies are not attached to a resource
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.847.1">
       by default.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.848.1">
      ACLs can only grant permissions.
     </span>
     <span class="koboSpan" id="kobo.848.2">
      Bucket policies and IAM policies can explicitly
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.849.1">
       deny access.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.850.1">
      ACLs cannot conditionally allow or deny access.
     </span>
     <span class="koboSpan" id="kobo.850.2">
      Bucket policies and IAM policies can conditionally allow or
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.851.1">
       deny access.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.852.1">
      ACLs are represented internally as XML documents.
     </span>
     <span class="koboSpan" id="kobo.852.2">
      Bucket policies and IAM policies are represented as
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.853.1">
       JSON documents.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.854.1">
     IAM policies differ from ACLs and bucket policies in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.855.1">
      following ways:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.856.1">
      IAM policies are user-based and
     </span>
     <a id="_idIndexMarker565">
     </a>
     <span class="koboSpan" id="kobo.857.1">
      are applied to users.
     </span>
     <span class="koboSpan" id="kobo.857.2">
      ACLs and bucket policies are resource-based policies and are applied
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.858.1">
       to resources.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.859.1">
      IAM policies can be inline (embedded directly into a user, group, or role) or standalone (they can be attached to any IAM user, group, or role).
     </span>
     <span class="koboSpan" id="kobo.859.2">
      ACLs and bucket policies are sub-resources of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.860.1">
       a bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.861.1">
      IAM policies can only give access to an IAM user.
     </span>
     <span class="koboSpan" id="kobo.861.2">
      Bucket policies and ACLs can be used to provide anonymous access as well a
     </span>
     <a id="_idTextAnchor147">
     </a>
     <span class="koboSpan" id="kobo.862.1">
      s access to a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.863.1">
       r
      </span>
      <a id="_idTextAnchor148">
      </a>
      <span class="koboSpan" id="kobo.864.1">
       oot user.
      </span>
     </span>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.865.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.866.1">
     We can mix ACLs, bucket policies, and IAM policies.
    </span>
    <span class="koboSpan" id="kobo.866.2">
     All policies are evaluated at the same time if the bucket and user are w
    </span>
    <a id="_idTextAnchor149">
    </a>
    <span class="koboSpan" id="kobo.867.1">
     ithin the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.868.1">
      same account.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-146">
    <a id="_idTextAnchor150">
    </a>
    <span class="koboSpan" id="kobo.869.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.870.1">
      We can learn
     </span>
     <a id="_idIndexMarker566">
     </a>
     <span class="koboSpan" id="kobo.871.1">
      about IAM policies in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.872.1">
       Creating a Customer Managed IAM Policy
      </span>
     </em>
     <span class="koboSpan" id="kobo.873.1">
      recipe in
     </span>
     <a href="B21384_02.xhtml#_idTextAnchor043">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.874.1">
         Chapter 2
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.875.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.876.1">
      We can learn more about IAM policies and permissions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.877.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/demystifying-aws-policies-and-permissions">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.878.1">
        https://www.cloudericks.com/blog/demystifying-aws-policies-and-permissions
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.879.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-147">
    <a id="_idTextAnchor151">
    </a>
    <span class="koboSpan" id="kobo.880.1">
     Creating S3 presigned URLs
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.881.1">
     We can grant temporary
    </span>
    <a id="_idIndexMarker567">
    </a>
    <span class="koboSpan" id="kobo.882.1">
     permission to access S3 objects using presigned URLs with an expiry time.
    </span>
    <span class="koboSpan" id="kobo.882.2">
     In this recipe, we will learn to use presigned URLs.
    </span>
    <span class="koboSpan" id="kobo.882.3">
     We can do this from the Management Console or AWS CLI or by using an SDK for a programming language such as Python, Java, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.883.1">
      so on.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-148">
    <a id="_idTextAnchor152">
    </a>
    <span class="koboSpan" id="kobo.884.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.885.1">
     We will need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.886.1">
      this recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.887.1">
      A working AWS account; I will be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.888.1">
       awsseccb-sandbox-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.889.1">
      account that we created
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.890.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.891.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.892.1">
      An S3 bucket and a file in it; I will use a bucket named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.893.1">
       seccbbucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.894.1">
      with a file
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.895.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.896.1">
        image-cloudericks.png
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.897.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-149">
    <a id="_idTextAnchor153">
    </a>
    <span class="koboSpan" id="kobo.898.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.899.1">
     We will first create a presigned URL from the console and then from the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.900.1">
      AWS CLI.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.901.1">
     Generating a presigned URL from the AWS Console
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.902.1">
     We can create a presigned URL from the
    </span>
    <a id="_idIndexMarker568">
    </a>
    <span class="koboSpan" id="kobo.903.1">
     console and test it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.904.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.905.1">
      Log in to the AWS Management Console, navigate to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.906.1">
       S3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.907.1">
      service, and go into our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.908.1">
       S3 bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.909.1">
      Select the object for which
     </span>
     <a id="_idIndexMarker569">
     </a>
     <span class="koboSpan" id="kobo.910.1">
      we need to create the presigned URL, click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.911.1">
       Object actions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.912.1">
      dropdown, and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.913.1">
       Share with a
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.914.1">
        presigned URL
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.915.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.916.1">
      Enter the value for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.917.1">
       Number of minutes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.918.1">
      as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.919.1">
       5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.920.1">
      , as shown in the following figure, and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.921.1">
       Create
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.922.1">
        presigned URL
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.923.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer115">
     <span class="koboSpan" id="kobo.924.1">
      <img alt="Figure 4.12 – Creating a presigned URL" src="image/B21384_04_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.925.1">
     Figure 4.12 – Creating a presigned URL
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.926.1">
     We should get a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.927.1">
      Copy presigned URL
     </span>
    </strong>
    <span class="koboSpan" id="kobo.928.1">
     notification
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.929.1">
      as follows:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer116">
     <span class="koboSpan" id="kobo.930.1">
      <img alt="Figure 4.13 – A Copy presigned URL message" src="image/B21384_04_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.931.1">
     Figure 4.13 – A Copy presigned URL message
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.932.1">
      Copy and paste the URL and run it from
     </span>
     <a id="_idIndexMarker570">
     </a>
     <span class="koboSpan" id="kobo.933.1">
      a browser within the time mentioned for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.934.1">
       Number of minutes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.935.1">
      .
     </span>
     <span class="koboSpan" id="kobo.935.2">
      We should then be able to see our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.936.1">
       file successfully.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.937.1">
       If we run the URL
      </span>
      <a id="_idIndexMarker571">
      </a>
      <span class="koboSpan" id="kobo.938.1">
       after the specified time, we should get an
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.939.1">
        AccessDenied
       </span>
      </strong>
      <span class="koboSpan" id="kobo.940.1">
       error message similar to
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.941.1">
        the following:
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer117">
     <span class="koboSpan" id="kobo.942.1">
      <img alt="Figure 4.14 – Accessing the presigned URL after expiry" src="image/B21384_04_14.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.943.1">
     Figure 4.14 – Accessing the presigned URL after expiry
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.944.1">
     Next, we will look at how to do pre-signing using
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.945.1">
      the CLI.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.946.1">
     Generating a presigned URL from the CLI
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.947.1">
     We can create a presigned URL from
    </span>
    <a id="_idIndexMarker572">
    </a>
    <span class="koboSpan" id="kobo.948.1">
     the CLI and test it
    </span>
    <a id="_idIndexMarker573">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.949.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.950.1">
      Pre-sign a URL from the CLI
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.951.1">
       as follows:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.952.1">aws s3 presign s3://seccbbucket/image-cloudericks.png --expires-in 100 – profile AwsSecCbAdmin</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.953.1">
       This command will output a presigned URL similar to
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.954.1">
        the following.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer118">
     <span class="koboSpan" id="kobo.955.1">
      <img alt="Figure 4.15 – Generating a presigned URL (partial) from CLI" src="image/B21384_04_15.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.956.1">
     Figure 4.15 – Generating a presigned URL (partial) from CLI
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.957.1">
      Run the URL from
     </span>
     <a id="_idIndexMarker574">
     </a>
     <span class="koboSpan" id="kobo.958.1">
      a browser (as we did in the previous section) before and after
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.959.1">
       the expiry.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.960.1">
     Next, we will explore how to do pre-signing using an SDK such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.961.1">
      Python SDK.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-150">
    <a id="_idTextAnchor154">
    </a>
    <span class="koboSpan" id="kobo.962.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.963.1">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.964.1">
      Generating a presigned URL from the AWS Console
     </span>
    </em>
    <span class="koboSpan" id="kobo.965.1">
     section, we presigned a URL from the AWS console.
    </span>
    <span class="koboSpan" id="kobo.965.2">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.966.1">
      Generating a presigned URL from the CLI
     </span>
    </em>
    <span class="koboSpan" id="kobo.967.1">
     section, we presigned a URL from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.968.1">
      the CLI.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.969.1">
     Most APIs related to presigning will accept the following data for generating presigned,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.970.1">
      timed URLs:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.971.1">
      Bucket
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.972.1">
       and object
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.973.1">
      Expiry date
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.974.1">
       and time
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.975.1">
       HTTP method
      </span>
     </span>
    </li>
    <li>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.976.1">
       Security credentials
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.977.1">
     In this recipe, we specified the bucket, object, and expiry in the code.
    </span>
    <span class="koboSpan" id="kobo.977.2">
     The HTTP operation was
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.978.1">
      GET
     </span>
    </strong>
    <span class="koboSpan" id="kobo.979.1">
     .
    </span>
    <span class="koboSpan" id="kobo.979.2">
     For security credentials, we specified a user profile that has permissions for the operation, which was
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.980.1">
      get_object
     </span>
    </strong>
    <span class="koboSpan" id="kobo.981.1">
     in our case.
    </span>
    <span class="koboSpan" id="kobo.981.2">
     Anyone with valid credentials can generate a presigned URL.
    </span>
    <span class="koboSpan" id="kobo.981.3">
     However, if the generating user does not have permission to perform
    </span>
    <a id="_idIndexMarker575">
    </a>
    <span class="koboSpan" id="kobo.982.1">
     the intended operation (for example,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.983.1">
      get_object
     </span>
    </strong>
    <span class="koboSpan" id="kobo.984.1">
     ), then the operation will
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.985.1">
      eventually fail.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-151">
    <a id="_idTextAnchor155">
    </a>
    <span class="koboSpan" id="kobo.986.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.987.1">
     We can also presign a URL
    </span>
    <a id="_idIndexMarker576">
    </a>
    <span class="koboSpan" id="kobo.988.1">
     using an SDK such as the Python SDK.
    </span>
    <span class="koboSpan" id="kobo.988.2">
     With Python SDK, we also use the boto3 library for Python.
    </span>
    <span class="koboSpan" id="kobo.988.3">
     Boto is the AWS SDK for Python.
    </span>
    <span class="koboSpan" id="kobo.988.4">
     It facilitates the creation, configuration, and management of AWS services, such as EC2 and S3,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.989.1">
      using Python.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-152">
    <a id="_idTextAnchor156">
    </a>
    <span class="koboSpan" id="kobo.990.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.991.1">
     Refer to the following link for more use cases for Python and Boto3 related to presigned
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.992.1">
      URLs:
     </span>
    </span>
    <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-presigned-urls.html">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.993.1">
       https://boto3.amazonaws.com/v1/documentation/api/latest/guide/s3-presigned-urls.html
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.994.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-153">
    <a id="_idTextAnchor157">
    </a>
    <span class="koboSpan" id="kobo.995.1">
     Protecting files with S3 versioning and object locking
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.996.1">
     In this recipe, we will learn to implement
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.997.1">
      S3 Object Locking
     </span>
    </strong>
    <span class="koboSpan" id="kobo.998.1">
     .
    </span>
    <span class="koboSpan" id="kobo.998.2">
     S3 Object Lock is a feature that enables users to prevent the deletion or overwriting of objects in S3 for a specified period of time
    </span>
    <a id="_idIndexMarker577">
    </a>
    <span class="koboSpan" id="kobo.999.1">
     or indefinitely.
    </span>
    <span class="koboSpan" id="kobo.999.2">
     This feature is essential for meeting regulatory compliance requirements and for implementing data protection strategies.
    </span>
    <span class="koboSpan" id="kobo.999.3">
     With Object Lock, you
    </span>
    <a id="_idIndexMarker578">
    </a>
    <span class="koboSpan" id="kobo.1000.1">
     can apply a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1001.1">
      Write Once, Read Many
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1002.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1003.1">
      WORM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1004.1">
     ) model, ensuring that data cannot be altered or deleted until the specified retention period expires.
    </span>
    <span class="koboSpan" id="kobo.1004.2">
     This
    </span>
    <a id="_idIndexMarker579">
    </a>
    <span class="koboSpan" id="kobo.1005.1">
     makes it an effective tool for safeguarding critical business and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1006.1">
      compliance-sensitive data.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1007.1">
     S3 versioning is a prerequisite for S3 Object Locking.
    </span>
    <span class="koboSpan" id="kobo.1007.2">
     Hence, we will also quickly look into how to enable versioning from within the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1008.1">
      Getting ready
     </span>
    </em>
    <span class="koboSpan" id="kobo.1009.1">
     section.
    </span>
    <span class="koboSpan" id="kobo.1009.2">
     If versioning is enabled for a bucket, S3 keeps a copy of every version of the file within the bucket.
    </span>
    <span class="koboSpan" id="kobo.1009.3">
     Versioning thus protects data by providing a means to recover it in the case of unintentional actions such as deletes and overwrites, and hence may also be considered a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1010.1">
      security-related feature.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-154">
    <a id="_idTextAnchor158">
    </a>
    <span class="koboSpan" id="kobo.1011.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1012.1">
     We need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1013.1">
      this recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1014.1">
      A working AWS account; I will
     </span>
     <a id="_idIndexMarker580">
     </a>
     <span class="koboSpan" id="kobo.1015.1">
      be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1016.1">
       awsseccb-sandbox-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1017.1">
      account that we created in
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.1018.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1019.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1020.1">
      An S3 bucket with
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1021.1">
       Bucket Versioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1022.1">
      enabled; I will use a bucket named
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1023.1">
       seccbbucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1024.1">
      with a file
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1025.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1026.1">
        image-cloudericks.png
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1027.1">
       .
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1028.1">
       We can enable
      </span>
      <a id="_idIndexMarker581">
      </a>
      <span class="koboSpan" id="kobo.1029.1">
       versioning while creating an S3 bucket
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1030.1">
        as follows:
       </span>
      </span>
     </p>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer119">
     <span class="koboSpan" id="kobo.1031.1">
      <img alt="Figure 4.16 – Enabling versioning for a new bucket" src="image/B21384_04_16.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1032.1">
     Figure 4.16 – Enabling versioning for a new bucket
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.1033.1">
     We can also enable S3 versioning for an existing bucket as follows.
    </span>
    <span class="koboSpan" id="kobo.1033.2">
     Navigate to the S3 bucket’s
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1034.1">
      Properties
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1035.1">
     tab and click on
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1036.1">
      Edit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1037.1">
     next to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1038.1">
      Bucket Versioning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1039.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1039.2">
     Under
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1040.1">
      Bucket Versioning
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1041.1">
     , select
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1042.1">
      Enable
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1043.1">
     , and then click on
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.1044.1">
       Save changes
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1045.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer120">
     <span class="koboSpan" id="kobo.1046.1">
      <img alt="Figure 4.17 – Enabling versioning for an existing bucket" src="image/B21384_04_17.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1047.1">
     Figure 4.17 – Enabling versioning for an existing bucket
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1048.1">
     Next, we
    </span>
    <a id="_idIndexMarker582">
    </a>
    <span class="koboSpan" id="kobo.1049.1">
     will enable
    </span>
    <a id="_idIndexMarker583">
    </a>
    <span class="koboSpan" id="kobo.1050.1">
     Object Lock for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1051.1">
      our bucket.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-155">
    <a id="_idTextAnchor159">
    </a>
    <span class="koboSpan" id="kobo.1052.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1053.1">
     We can enable Object Locking
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1054.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1055.1">
      Login into the AWS Management Console and navigate to the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1056.1">
        S3
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1057.1">
       service.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1058.1">
      Navigate to the
     </span>
     <a id="_idIndexMarker584">
     </a>
     <span class="koboSpan" id="kobo.1059.1">
      S3 bucket, go to the bucket’s
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1060.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1061.1">
      tab, and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1062.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1063.1">
      next to
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1064.1">
        Object Lock
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1065.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1066.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1067.1">
       Edit Object Lock
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1068.1">
      screen, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1069.1">
       Enable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1070.1">
      and also select the checkbox to acknowledge that
     </span>
     <a id="_idIndexMarker585">
     </a>
     <span class="koboSpan" id="kobo.1071.1">
      enabling Object Lock will permanently allow objects in this bucket to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1072.1">
       be locked.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer121">
     <span class="koboSpan" id="kobo.1073.1">
      <img alt="Figure 4.18 – Enabling Object Lock" src="image/B21384_04_18.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1074.1">
     Figure 4.18 – Enabling Object Lock
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.1075.1">
      Enable default
     </span>
     <a id="_idIndexMarker586">
     </a>
     <span class="koboSpan" id="kobo.1076.1">
      retention to protect new objects put into the bucket by selecting
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1077.1">
       Enable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1078.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1079.1">
       Default retention
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1080.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1080.2">
      Once we enable
     </span>
     <a id="_idIndexMarker587">
     </a>
     <span class="koboSpan" id="kobo.1081.1">
      default retention, we should get additional options to configure
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1082.1">
       Object Locking.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer122">
     <span class="koboSpan" id="kobo.1083.1">
      <img alt="Figure 4.19 – Enabling default retention" src="image/B21384_04_19.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1084.1">
     Figure 4.19 – Enabling default retention
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.1085.1">
      Select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1086.1">
       Governance
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1087.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1088.1">
       Default retention mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1089.1">
      , enter
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1090.1">
       30
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1091.1">
      for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1092.1">
       Default retention period
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1093.1">
      , and click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1094.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1095.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1096.1">
      Upload a new object to
     </span>
     <a id="_idIndexMarker588">
     </a>
     <span class="koboSpan" id="kobo.1097.1">
      our S3 bucket.
     </span>
     <span class="koboSpan" id="kobo.1097.2">
      I have
     </span>
     <a id="_idIndexMarker589">
     </a>
     <span class="koboSpan" id="kobo.1098.1">
      uploaded an
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1099.1">
        image-heartin.png
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1100.1">
       file.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1101.1">
      Go to the bucket’s
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1102.1">
       Object
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1103.1">
      tab and click on the new object’s name to go to the object’s
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1104.1">
        Properties
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1105.1">
       tab.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1106.1">
      Scroll down and verify the retention configuration under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1107.1">
       Object
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1108.1">
        Lock retention
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1109.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer123">
     <span class="koboSpan" id="kobo.1110.1">
      <img alt="Figure 4.20 – Object Lock retention for new objects after setting the default retention mode" src="image/B21384_04_20.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1111.1">
     Figure 4.20 – Object Lock retention for new objects after setting the default retention mode
    </span>
   </p>
   <ol>
    <li value="9">
     <span class="koboSpan" id="kobo.1112.1">
      Optionally, we can click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1113.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1114.1">
      on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1115.1">
       Object Lock retention
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1116.1">
      screen, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.1117.1">
        Figure 4
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1118.1">
       .20
      </span>
     </em>
     <span class="koboSpan" id="kobo.1119.1">
      , to do
     </span>
     <a id="_idIndexMarker590">
     </a>
     <span class="koboSpan" id="kobo.1120.1">
      one of the following:
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1121.1">
       Disable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1122.1">
      retention, change
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1123.1">
       Retention mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1124.1">
      from
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1125.1">
       Governance mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1126.1">
      to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1127.1">
       Compliance mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1128.1">
      , or
     </span>
     <a id="_idIndexMarker591">
     </a>
     <span class="koboSpan" id="kobo.1129.1">
      extend the retention date using the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1130.1">
       Retain until
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1131.1">
        date
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1132.1">
       option.
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1133.1">
     Important Note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1134.1">
     In governance mode, objects in S3 Object Lock are unchangeable until the set retention period is over.
    </span>
    <span class="koboSpan" id="kobo.1134.2">
     To remove these objects before the retention date, retention can be disabled after clicking on
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1135.1">
      Edit
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1136.1">
     , as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1137.1">
       Figure 4
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1138.1">
      .20
     </span>
    </em>
    <span class="koboSpan" id="kobo.1139.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1139.2">
     In compliance mode, we won’t be able to disable retention and objects remain unchangeable until their retention period ends.
    </span>
    <span class="koboSpan" id="kobo.1139.3">
     The only way to delete these objects before the retention time expires is by closing the associated AWS account.
    </span>
    <span class="koboSpan" id="kobo.1139.4">
     In both modes, we can extend the retention date to a future date, but we cannot
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1140.1">
      reduce it.
     </span>
    </span>
   </p>
   <ol>
    <li value="10">
     <span class="koboSpan" id="kobo.1141.1">
      Optionally, go to any existing object’s
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1142.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1143.1">
      tab, scroll down to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1144.1">
       Object Lock retention
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1145.1">
      , and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1146.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1147.1">
      to enable Object Lock for that object.
     </span>
     <span class="koboSpan" id="kobo.1147.2">
      We should get a screen similar to the screen for configuring default retention, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.1148.1">
        Figure 4
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1149.1">
       .19
      </span>
     </em>
     <span class="koboSpan" id="kobo.1150.1">
      , where
     </span>
     <a id="_idIndexMarker592">
     </a>
     <span class="koboSpan" id="kobo.1151.1">
      we can configure retention for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1152.1">
       this object.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1153.1">
      Optionally, go to any new or
     </span>
     <a id="_idIndexMarker593">
     </a>
     <span class="koboSpan" id="kobo.1154.1">
      existing object’s
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1155.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1156.1">
      tab, scroll down to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1157.1">
       Object Lock legal hold
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1158.1">
      , and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1159.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1160.1">
      to enable
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1161.1">
       Legal hold
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1162.1">
      , as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1163.1">
       following figure.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer124">
     <span class="koboSpan" id="kobo.1164.1">
      <img alt="Figure 4.21 – Enabling Object Lock legal hold" src="image/B21384_04_21.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1165.1">
     Figure 4.21 – Enabling Object Lock legal hold
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.1166.1">
     Optionally, wait for the retention date to expire and then try to delete the objects for which we added Object Lock in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1167.1">
      compliance mode.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-156">
    <a id="_idTextAnchor160">
    </a>
    <span class="koboSpan" id="kobo.1168.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1169.1">
     Amazon S3 Object Lock is a feature designed to protect your S3 objects from being deleted or overwritten.
    </span>
    <span class="koboSpan" id="kobo.1169.2">
     It’s particularly useful in enforcing data retention policies for compliance, legal, or regulatory requirements.
    </span>
    <span class="koboSpan" id="kobo.1169.3">
     To use Object Lock, you must first enable versioning in your S3 bucket.
    </span>
    <span class="koboSpan" id="kobo.1169.4">
     Versioning is a means by which S3 keeps multiple versions of an object in the same bucket, allowing you to preserve, retrieve, and restore every version of every object stored in your bucket.
    </span>
    <span class="koboSpan" id="kobo.1169.5">
     With versioning enabled, Object Lock can protect individual
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1170.1">
      object versions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1171.1">
     Object Lock has two primary retention modes: Governance and Compliance.
    </span>
    <span class="koboSpan" id="kobo.1171.2">
     In Governance mode, users with specific permissions can overwrite or delete an object version before its retention period expires.
    </span>
    <span class="koboSpan" id="kobo.1171.3">
     This mode is ideal for internal data management, as it provides a balance between protection and flexibility.
    </span>
    <span class="koboSpan" id="kobo.1171.4">
     In contrast, Compliance mode offers a stricter level of protection.
    </span>
    <span class="koboSpan" id="kobo.1171.5">
     Once an object is locked in Compliance mode, no one can overwrite or delete the object version until its retention period has passed, not even the root user in the AWS account.
    </span>
    <span class="koboSpan" id="kobo.1171.6">
     This mode is designed for scenarios where data must be retained to comply with legal or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1172.1">
      regulatory standards.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1173.1">
     Additionally, Object Lock provides a feature called legal hold for an added layer of protection.
    </span>
    <span class="koboSpan" id="kobo.1173.2">
     A legal hold can be applied to objects regardless of their retention mode, and it prevents object version deletion without any time-bound constraints.
    </span>
    <span class="koboSpan" id="kobo.1173.3">
     Legal Holds are ideal for situations where
    </span>
    <a id="_idIndexMarker594">
    </a>
    <span class="koboSpan" id="kobo.1174.1">
     you might need to retain an object for legal reasons.
    </span>
    <span class="koboSpan" id="kobo.1174.2">
     It’s important to note that both the retention modes and Legal
    </span>
    <a id="_idIndexMarker595">
    </a>
    <span class="koboSpan" id="kobo.1175.1">
     Hold can be applied to individual objects or as default settings at the bucket level.
    </span>
    <span class="koboSpan" id="kobo.1175.2">
     Together, these features make S3 Object Lock a robust tool for ensuring that critical data is not deleted or altered, thereby helping organizations adhere to compliance requirements and protect their data from accidental loss
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1176.1">
      or deletion.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-157">
    <a id="_idTextAnchor161">
    </a>
    <span class="koboSpan" id="kobo.1177.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1178.1">
     After learning about S3 Object Lock in this recipe, let us quickly look into
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1179.1">
      Glacier Vault Lock
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1180.1">
     , an important AWS feature that helps
    </span>
    <a id="_idIndexMarker596">
    </a>
    <span class="koboSpan" id="kobo.1181.1">
     keep data secure within AWS Glacier, especially when the data needs to be stored for a long time.
    </span>
    <span class="koboSpan" id="kobo.1181.2">
     At the core of Glacier Vault Lock is the WORM principle.
    </span>
    <span class="koboSpan" id="kobo.1181.3">
     This means that after data is stored, it can be accessed but not altered.
    </span>
    <span class="koboSpan" id="kobo.1181.4">
     By establishing and locking a policy, we can ensure that no one, not even administrators or creators, can modify or erase these rules or the data they protect.
    </span>
    <span class="koboSpan" id="kobo.1181.5">
     These policies can range from basic ones, such as setting a data retention period, to more detailed ones specifying deletion permission roles or even creating a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1182.1">
      permanent archive.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1183.1">
     Setting up a Glacier Vault Lock involves the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1184.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1185.1">
       Start a Glacier Vault
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1186.1">
      : Begin by
     </span>
     <a id="_idIndexMarker597">
     </a>
     <span class="koboSpan" id="kobo.1187.1">
      creating a vault in Amazon Glacier using the AWS
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1188.1">
       Management Console.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1189.1">
       Create a Vault Lock policy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1190.1">
      : Develop a policy that outlines your data retention preferences.
     </span>
     <span class="koboSpan" id="kobo.1190.2">
      This policy defines the usage and alteration guidelines for the data in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1191.1">
       the vault.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1192.1">
       Initiate the Vault Lock
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1193.1">
      : Apply your policy to the vault.
     </span>
     <span class="koboSpan" id="kobo.1193.2">
      This begins the process but doesn’t activate the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1194.1">
       policy immediately.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1195.1">
       Review and finalize
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1196.1">
      : AWS provides a specific timeframe (typically 24 hours) for you to review and finalize your policy.
     </span>
     <span class="koboSpan" id="kobo.1196.2">
      No changes are allowed after
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1197.1">
       this period.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1198.1">
       Lock the policy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1199.1">
      : Conclude this
     </span>
     <a id="_idIndexMarker598">
     </a>
     <span class="koboSpan" id="kobo.1200.1">
      waiting period by confirming and permanently locking your policy.
     </span>
     <span class="koboSpan" id="kobo.1200.2">
      Once locked, the policy is irreversible, ensuring the data’s safety according to your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1201.1">
       established rules.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1202.1">
     By following these steps, Glacier Vault Lock can effectively be utilized to safeguard critical data requiring long-term
    </span>
    <a id="_idIndexMarker599">
    </a>
    <span class="koboSpan" id="kobo.1203.1">
     storage, meeting compliance and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1204.1">
      security requirements.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1205.1">
     Other important security features related to S3 include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1206.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1207.1">
       S3 encryption
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1208.1">
      : Amazon S3
     </span>
     <a id="_idIndexMarker600">
     </a>
     <span class="koboSpan" id="kobo.1209.1">
      encryption provides methods to protect our data at rest.
     </span>
     <span class="koboSpan" id="kobo.1209.2">
      There are two main types: SSE, whereby Amazon S3 encrypts our data as it writes it to disks and decrypts it when we access it, and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1210.1">
       client-side encryption
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1211.1">
      , whereby
     </span>
     <a id="_idIndexMarker601">
     </a>
     <span class="koboSpan" id="kobo.1212.1">
      we encrypt data on our side before uploading it to S3.
     </span>
     <span class="koboSpan" id="kobo.1212.2">
      For SSE, we have options such as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1213.1">
       S3-Managed Keys
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1214.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1215.1">
       SSE-S3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1216.1">
      ),
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1217.1">
       AWS Key Management Service Keys
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1218.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1219.1">
       SSE-KMS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1220.1">
      ), and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1221.1">
       Customer-Provided Keys
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1222.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1223.1">
       SSE-C
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1224.1">
      ).
     </span>
     <span class="koboSpan" id="kobo.1224.2">
      We will discuss more about S3 Encryption later in this book after we
     </span>
     <a id="_idIndexMarker602">
     </a>
     <span class="koboSpan" id="kobo.1225.1">
      discuss about the
     </span>
     <a id="_idIndexMarker603">
     </a>
     <span class="koboSpan" id="kobo.1226.1">
      AWS
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1227.1">
       Key Management
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1228.1">
        Service
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1229.1">
       (
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1230.1">
        KMS
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1231.1">
       ).
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1232.1">
       S3 Access Points
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1233.1">
      : Amazon S3 Access Points facilitate data access management for large-scale, shared
     </span>
     <a id="_idIndexMarker604">
     </a>
     <span class="koboSpan" id="kobo.1234.1">
      data sets in S3 by providing unique hostnames with tailored access policies.
     </span>
     <span class="koboSpan" id="kobo.1234.2">
      For instance, if we are operating a data lake with multiple departments accessing the same S3 bucket, we can create separate access points for each department – such as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1235.1">
       finance-data-access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1236.1">
      or
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1237.1">
       hr-data-access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1238.1">
      – each with its specific permissions and network controls.
     </span>
     <span class="koboSpan" id="kobo.1238.2">
      This allows us to customize access according to each department’s needs, ensuring secure and efficient data handling.
     </span>
     <span class="koboSpan" id="kobo.1238.3">
      S3 Access Points thus offer a streamlined solution for scenarios requiring distinct, role-based access controls, significantly simplifying the management of complex data
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1239.1">
       access requirements.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1240.1">
       S3 access logs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1241.1">
      : Amazon S3 access logs are a crucial component for enhancing security and monitoring activity in our S3 buckets.
     </span>
     <span class="koboSpan" id="kobo.1241.2">
      These logs provide detailed records of all requests made to a specific S3 bucket, including requester information, bucket name, request
     </span>
     <a id="_idIndexMarker605">
     </a>
     <span class="koboSpan" id="kobo.1242.1">
      time, and the action performed.
     </span>
     <span class="koboSpan" id="kobo.1242.2">
      This information is vital for security analysis and audit trails, allowing us to track access patterns, identify suspicious activities, and ensure compliance with security policies.
     </span>
     <span class="koboSpan" id="kobo.1242.3">
      By analyzing these logs, we can gain insights into usage trends and potential security vulnerabilities, as well as improve our overall data protection strategy
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1243.1">
       in S3.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1244.1">
       S3 replication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1245.1">
      : Amazon S3 replication, encompassing both
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1246.1">
       Cross-Region Replication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1247.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1248.1">
       CRR
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1249.1">
      ) and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1250.1">
       cross-account replication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1251.1">
      , plays a
     </span>
     <a id="_idIndexMarker606">
     </a>
     <span class="koboSpan" id="kobo.1252.1">
      vital role in enhancing data
     </span>
     <a id="_idIndexMarker607">
     </a>
     <span class="koboSpan" id="kobo.1253.1">
      security and availability.
     </span>
     <span class="koboSpan" id="kobo.1253.2">
      With
     </span>
     <a id="_idIndexMarker608">
     </a>
     <span class="koboSpan" id="kobo.1254.1">
      CRR, data is automatically replicated across multiple AWS regions, providing geographical diversification, which is crucial for disaster recovery and meeting data residency requirements.
     </span>
     <span class="koboSpan" id="kobo.1254.2">
      Cross-account replication, meanwhile, offers an added security layer by replicating data between buckets in different AWS accounts.
     </span>
     <span class="koboSpan" id="kobo.1254.3">
      This is ideal for scenarios such as auditing where data integrity and separation are critical.
     </span>
     <span class="koboSpan" id="kobo.1254.4">
      Both replication strategies can be governed by specific policies, allowing precise control over which data gets replicated and the manner of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1255.1">
       its replication.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-158">
    <a id="_idTextAnchor162">
    </a>
    <span class="koboSpan" id="kobo.1256.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1257.1">
      Check the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1258.1">
       Using key policies with conditional keys
      </span>
     </em>
     <span class="koboSpan" id="kobo.1259.1">
      recipe in
     </span>
     <a href="B21384_03.xhtml#_idTextAnchor088">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.1260.1">
         Chapter 3
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1261.1">
      to see how an AWS KMS key can be used for encryption in an
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1262.1">
       S3 bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1263.1">
      While this book addresses key S3 security features, providing recipes for every single one is beyond its scope.
     </span>
     <span class="koboSpan" id="kobo.1263.2">
      For an always up-to-date and complete list, you can visit the blog post
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1264.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/a-comprehensive-list-of-s3-security-features-within-aws-cloud">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1265.1">
        https://www.cloudericks.com/blog/a-comprehensive-list-of-s3-security-features-within-aws-cloud
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1266.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-159">
    <a id="_idTextAnchor163">
    </a>
    <span class="koboSpan" id="kobo.1267.1">
     Encrypting data on S3
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1268.1">
     In this recipe, we will learn to encrypt data on S3 at rest using SSE techniques.
    </span>
    <span class="koboSpan" id="kobo.1268.2">
     Encryption on the server side
    </span>
    <a id="_idIndexMarker609">
    </a>
    <span class="koboSpan" id="kobo.1269.1">
     can be done in three ways: SSE-S3, SSE-KMS, and SSE-C.
    </span>
    <span class="koboSpan" id="kobo.1269.2">
     In client-side encryption, data is encrypted on the client side and then sent to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1270.1">
      the server.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-160">
    <a id="_idTextAnchor164">
    </a>
    <span class="koboSpan" id="kobo.1271.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1272.1">
     We need a working AWS
    </span>
    <a id="_idIndexMarker610">
    </a>
    <span class="koboSpan" id="kobo.1273.1">
     account with the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1274.1">
      resources configured:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1275.1">
      We need an S3 bucket.
     </span>
     <span class="koboSpan" id="kobo.1275.2">
      I will be using a bucket with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1276.1">
       awssecbucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1277.1">
      name.
     </span>
     <span class="koboSpan" id="kobo.1277.2">
      Replace this with your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1278.1">
       bucket name.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1279.1">
      We need a user with
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1280.1">
       AdministratorAccess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1281.1">
      permission.
     </span>
     <span class="koboSpan" id="kobo.1281.2">
      Configure a CLI profile for this user.
     </span>
     <span class="koboSpan" id="kobo.1281.3">
      I will be calling both the user and the profile on the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1282.1">
        awssecadmin
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1283.1">
       CLI.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1284.1">
      We need a customer-managed key created in KMS.
     </span>
     <span class="koboSpan" id="kobo.1284.2">
      Follow the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1285.1">
       Creating keys in KMS
      </span>
     </em>
     <span class="koboSpan" id="kobo.1286.1">
      recipe from
     </span>
     <a href="B21384_03.xhtml#_idTextAnchor088">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.1287.1">
         Chapter 3
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.1288.1">
      to create a key.
     </span>
     <span class="koboSpan" id="kobo.1288.2">
      I have created one
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1289.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1290.1">
        MyS3Key
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1291.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-161">
    <a id="_idTextAnchor165">
    </a>
    <span class="koboSpan" id="kobo.1292.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1293.1">
     In this recipe, we will learn about various use cases
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1294.1">
      for SSE.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1295.1">
     SSE with SSE-S3
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1296.1">
     We can upload an object from the console with
    </span>
    <a id="_idIndexMarker611">
    </a>
    <span class="koboSpan" id="kobo.1297.1">
     SSE-S3
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1298.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1299.1">
      Navigate to your S3 bucket in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1300.1">
       the console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1301.1">
      Under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1302.1">
       Objects
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1303.1">
      pane, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1304.1">
       Upload
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1305.1">
      |
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1306.1">
       Add Files
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1307.1">
      , select your file, and then click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1308.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1309.1">
        Upload
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1310.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1311.1">
      Now go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1312.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1313.1">
      tab.
     </span>
     <span class="koboSpan" id="kobo.1313.2">
      In our bucket, scroll down to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1314.1">
       Default encryption
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1315.1">
      pane and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1316.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1317.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1317.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1318.1">
       Encryption type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1319.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1320.1">
       Server-side encryption with Amazon S3 managed keys (SSE-S3)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1321.1">
      , and under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1322.1">
       Bucket Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1323.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1324.1">
       Enable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1325.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1325.2">
      Finally, click
     </span>
     <a id="_idIndexMarker612">
     </a>
     <span class="koboSpan" id="kobo.1326.1">
      on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1327.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1328.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer125">
     <span class="koboSpan" id="kobo.1329.1">
      <img alt="Figure 4.22 – The default encryption options" src="image/B21384_04_22.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1330.1">
     Figure 4.22 – The default encryption options
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1331.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1332.1">
     It is important to note that, if we try to open or download the object, we will still be able to see the object as-is because S3 will decrypt the object using the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1333.1">
      same key.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1334.1">
     SSE with SSE-KMS
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1335.1">
     We can upload an object from the
    </span>
    <a id="_idIndexMarker613">
    </a>
    <span class="koboSpan" id="kobo.1336.1">
     console with SSE-KMS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1337.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1338.1">
      Navigate to your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1339.1">
       S3 bucket.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1340.1">
      Now go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1341.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1342.1">
      pane.
     </span>
     <span class="koboSpan" id="kobo.1342.2">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1343.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1344.1">
      tab, scroll down to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1345.1">
       Default encryption
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1346.1">
      pane
     </span>
     <a id="_idIndexMarker614">
     </a>
     <span class="koboSpan" id="kobo.1347.1">
      and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1348.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1349.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1349.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1350.1">
       Encryption type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1351.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1352.1">
       Server-side encryption with AWS Key Management Service keys (SSE-KMS)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1353.1">
      ; under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1354.1">
       AWS KMS key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1355.1">
      pane, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1356.1">
       Choose from your AWS KMS keys
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1357.1">
      and select the key; under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1358.1">
       Bucket Key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1359.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1360.1">
       Enable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1361.1">
      , and finally, click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1362.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1363.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer126">
     <span class="koboSpan" id="kobo.1364.1">
      <img alt="Figure 4.23 – Changing the encryption options with KMS" src="image/B21384_04_23.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1365.1">
     Figure 4.23 – Changing the encryption options with KMS
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.1366.1">
      We can change encryption for an existing object to SSE-KMS as follows.
     </span>
     <span class="koboSpan" id="kobo.1366.2">
      Go to the object’s
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1367.1">
       Properties
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1368.1">
      tab.
     </span>
     <span class="koboSpan" id="kobo.1368.2">
      Scroll down to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1369.1">
       Server-side encryption settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1370.1">
      pane and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1371.1">
       Edit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1372.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1372.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1373.1">
       Encryption settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1374.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1375.1">
       Use bucket settings for default encryption
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1376.1">
      and click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1377.1">
        Save changes
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1378.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p class="IMG---Figure">
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer127">
     <span class="koboSpan" id="kobo.1379.1">
      <img alt="Figure 4.24 – Changing the encryption options for an existing object" src="image/B21384_04_24.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1380.1">
     Figure 4.24 – Changing the encryption options for an existing object
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.1381.1">
      We can upload an
     </span>
     <a id="_idIndexMarker615">
     </a>
     <span class="koboSpan" id="kobo.1382.1">
      object from the CLI with SSE-KMS using the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1383.1">
       following command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1384.1">aws s3 cp image-heartin-k.png s3://awsseccookbook/image-heartin-k.png \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1385.1">--sse aws:kms \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1386.1">--sse-kms-key-id cd6b3dff-cfe1-45c2-b4f8-b3555d5086df \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1387.1">--profile awssecadmin</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1388.1">
       We will get the
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1389.1">
        following response:
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer128">
     <span class="koboSpan" id="kobo.1390.1">
      <img alt="Figure 4.25 – The response for uploading an object from the CLI with SSE-KMS" src="image/B21384_04_25.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1391.1">
     Figure 4.25 – The response for uploading an object from the CLI with SSE-KMS
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1392.1">
     Important Note
    </span>
   </p>
   <p class="callout">
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1393.1">
      sse-kms-key-id
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1394.1">
     is the ID of the KMS key you created (refer to the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1395.1">
      Getting ready
     </span>
    </em>
    <span class="koboSpan" id="kobo.1396.1">
     section for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1397.1">
      more details).
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1398.1">
     SSE with SSE-C
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1399.1">
     We can upload an object from the
    </span>
    <a id="_idIndexMarker616">
    </a>
    <span class="koboSpan" id="kobo.1400.1">
     CLI with SSE-C
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1401.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1402.1">
      Upload an object from the CLI with SSE-C by using the following command.
     </span>
     <span class="koboSpan" id="kobo.1402.2">
      Provide any set of digits as the key.
     </span>
     <span class="koboSpan" id="kobo.1402.3">
      You will need to use the same to retrieve the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1403.1">
       object later:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1404.1">aws s3 cp image-heartin-k.png s3://awsseccookbook/imageheartin-k.png \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1405.1">--sse-c AES256 \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1406.1">--sse-c-key 12345678901234567890123456789012 \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1407.1">--profile awssecadmin</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1408.1">
       We will get the
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1409.1">
        following response:
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer129">
     <span class="koboSpan" id="kobo.1410.1">
      <img alt="Figure 4.26 – The response for uploading an object from the CLI with SSE-C" src="image/B21384_04_26.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1411.1">
     Figure 4.26 – The response for uploading an object from the CLI with SSE-C
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.1412.1">
      Retrieve the object encrypted using SSE-C, providing the same key we used in the previous command,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1413.1">
       as follows:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.1414.1">aws s3 cp s3://awsseccookbook/image-heartin-k.png imageheartin-k1.png \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1415.1">--sse-c AES256 \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1416.1">--sse-c-key 12345678901234567890123456789012 \</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.1417.1">--profile awssecadmin</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1418.1">
       We will get the
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1419.1">
        following response:
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer130">
     <span class="koboSpan" id="kobo.1420.1">
      <img alt="Figure 4.27 – The response for retrieving an object encrypted using SSE-C" src="image/B21384_04_27.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1421.1">
     Figure 4.27 – The response for retrieving an object encrypted using SSE-C
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1422.1">
     Tip
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1423.1">
     If we do not specify the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1424.1">
      sse-c
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1425.1">
     option while downloading an object encrypted with SSE-C, we will get a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1426.1">
      fatal error: An error occurred (400)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1427.1">
     exception when calling
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1428.1">
      HeadObject operation: Bad Request
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1429.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1429.2">
     If we do not specify the correct key that was used for encryption (using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1430.1">
      sse-c-key
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1431.1">
     option) while downloading an object encrypted with SSE-C, we will get a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1432.1">
      fatal error: An error occurred (403)
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1433.1">
     exception when calling
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1434.1">
      HeadObject
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1435.1">
       operation: Forbidden
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1436.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-162">
    <a id="_idTextAnchor166">
    </a>
    <span class="koboSpan" id="kobo.1437.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1438.1">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1439.1">
      SSE with SSE-S3
     </span>
    </em>
    <span class="koboSpan" id="kobo.1440.1">
     section, we
    </span>
    <a id="_idIndexMarker617">
    </a>
    <span class="koboSpan" id="kobo.1441.1">
     uploaded an object from the console with SSE-S3 encryption.
    </span>
    <span class="koboSpan" id="kobo.1441.2">
     We changed the encryption for an existing object to SSE-S3 encryption.
    </span>
    <span class="koboSpan" id="kobo.1441.3">
     We also uploaded an object with SSE-S3 encryption.
    </span>
    <span class="koboSpan" id="kobo.1441.4">
     When performing SSE-S3 encryption from the CLI, the value of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1442.1">
      sse
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1443.1">
     parameter is optional.
    </span>
    <span class="koboSpan" id="kobo.1443.2">
     The default
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1444.1">
      is
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1445.1">
       AES256
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1446.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1447.1">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1448.1">
      SSE with SSE-KMS
     </span>
    </em>
    <span class="koboSpan" id="kobo.1449.1">
     section, we uploaded an object with SSE-KMS encryption.
    </span>
    <span class="koboSpan" id="kobo.1449.2">
     We changed encryption for an existing object to SSE-KMS encryption.
    </span>
    <span class="koboSpan" id="kobo.1449.3">
     We also uploaded an object from the CLI with SSE-KMS encryption.
    </span>
    <span class="koboSpan" id="kobo.1449.4">
     When performing SSE-KMS encryption from the CLI, the value of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.1450.1">
      sse-c
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1451.1">
     parameter is optional.
    </span>
    <span class="koboSpan" id="kobo.1451.2">
     The default
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1452.1">
      is
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1453.1">
       AES256
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1454.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1455.1">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1456.1">
      SSE with SSE-C
     </span>
    </em>
    <span class="koboSpan" id="kobo.1457.1">
     section, we uploaded an object from the CLI with SSE-C encryption.
    </span>
    <span class="koboSpan" id="kobo.1457.2">
     Unlike the other two SSE techniques, SSE-S3 and SSE-KMS, the console does not currently have an explicit option for SSE-C.
    </span>
    <span class="koboSpan" id="kobo.1457.3">
     We will need to execute this using APIs.
    </span>
    <span class="koboSpan" id="kobo.1457.4">
     In this recipe, we used a 32-digit number as the key.
    </span>
    <span class="koboSpan" id="kobo.1457.5">
     However, in the real world, keys are generally generated
    </span>
    <a id="_idIndexMarker618">
    </a>
    <span class="koboSpan" id="kobo.1458.1">
     using a key generation tool.
    </span>
    <span class="koboSpan" id="kobo.1458.2">
     We will learn more about keys when we discuss KMS later in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1459.1">
      this book.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-163">
    <a id="_idTextAnchor167">
    </a>
    <span class="koboSpan" id="kobo.1460.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1461.1">
     Let’s quickly go through some important concepts related to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1462.1">
      S3 encryption:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1463.1">
      Data on S3 can be encrypted
     </span>
     <a id="_idIndexMarker619">
     </a>
     <span class="koboSpan" id="kobo.1464.1">
      while at rest (stored on AWS disks) or in transit (moving to and from S3).
     </span>
     <span class="koboSpan" id="kobo.1464.2">
      Encryption at rest can be done using SSE or by uploading encrypted data from
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1465.1">
       the client.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1466.1">
      S3 SSE techniques for data at rest use symmetric keys
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1467.1">
       for encryption.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1468.1">
      Encryption of data in transit using SSL/TLS (HTTPS) uses asymmetric keys
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1469.1">
       for encryption.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1470.1">
      S3 default encryption (available as bucket properties) provides a way to set the default encryption behavior for an S3 bucket with SSE-S3 or SSE-KMS.
     </span>
     <span class="koboSpan" id="kobo.1470.2">
      Enabling this property does not affect existing objects in our bucket and applies only to new
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1471.1">
       objects uploaded.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1472.1">
      With client-side encryption, we need to manage keys on our own.
     </span>
     <span class="koboSpan" id="kobo.1472.2">
      We can also use KMS to manage keys through SDKs.
     </span>
     <span class="koboSpan" id="kobo.1472.3">
      However, it is not currently supported by
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1473.1">
       all SDKs.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1474.1">
      Encryption in transit can be achieved with client-side encryption or by using
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1475.1">
       SSL/TLS (HTTPS).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1476.1">
      SSE types, SSE-S3 and SSE-KMS, follow envelope encryption, while SSE-C does not use
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1477.1">
       envelope encryption.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1478.1">
     Some important features of SSE-S3
    </span>
    <a id="_idIndexMarker620">
    </a>
    <span class="koboSpan" id="kobo.1479.1">
     include
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1480.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1481.1">
      AWS takes care of all
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1482.1">
       key management.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1483.1">
      It follows
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1484.1">
       envelope encryption.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1485.1">
      It uses symmetric keys to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1486.1">
       encrypt data.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1487.1">
      Each object is encrypted with a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1488.1">
       unique key.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1489.1">
      It uses the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1490.1">
       AES-256 algorithm.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1491.1">
      A data key is encrypted
     </span>
     <a id="_idIndexMarker621">
     </a>
     <span class="koboSpan" id="kobo.1492.1">
      with a master key that is automatically
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1493.1">
       rotated periodically.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1494.1">
      It
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1495.1">
       is free.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1496.1">
     Some important features of SSE-KMS include
    </span>
    <a id="_idIndexMarker622">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1497.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1498.1">
      Keys are managed by
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1499.1">
       AWS KMS.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1500.1">
      Keys can be shared by multiple services (
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1501.1">
       including S3).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1502.1">
      As customers, we get more control over keys, such as creating master and data keys, and disabling and rotating
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1503.1">
       master keys.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1504.1">
      It follows
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1505.1">
       envelope encryption.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1506.1">
      It uses symmetric keys to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1507.1">
       encrypt data.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1508.1">
      A data key is encrypted with a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1509.1">
       master key.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1510.1">
      It uses the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1511.1">
       AES-256 algorithm.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1512.1">
      We can choose which object key to encrypt while
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1513.1">
       uploading objects.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1514.1">
      We can use CloudTrail to monitor KMS API calls, enabling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1515.1">
       better auditing.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1516.1">
      It is
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1517.1">
       not free.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1518.1">
     Some important features of SSE-C include
    </span>
    <a id="_idIndexMarker623">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1519.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1520.1">
      Keys are managed by
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1521.1">
       us (customers).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1522.1">
      The customer provides a key along with data; S3 uses this key for encryption and deletes
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1523.1">
       the key.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1524.1">
      The key must be supplied for decryption
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1525.1">
       as well.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1526.1">
      It does not use
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1527.1">
       envelope encryption.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1528.1">
      It uses symmetric keys to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1529.1">
       encrypt data.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1530.1">
      It uses the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1531.1">
       AES-256 algorithm.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1532.1">
      AWS will force you to use HTTPS while uploading data since you are uploading your symmetric key
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1533.1">
       as well.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1534.1">
      It
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1535.1">
       is free.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1536.1">
      By default, S3 allows
     </span>
     <a id="_idIndexMarker624">
     </a>
     <span class="koboSpan" id="kobo.1537.1">
      both HTTP and HTTPS access to data; HTTPS can be enforced with the help of a bucket policy with the following
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1538.1">
       condition element:
      </span>
     </span>
     <pre class="source-code"><span class="koboSpan" id="kobo.1539.1">
"Condition": {
"Bool": {
"aws:SecureTransport": "false"
}
}</span></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.1540.1">
       Any requests without HTTPS will fail with
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1541.1">
        this condition.
       </span>
      </span>
     </p>
    </li>
   </ul>
   <h2 id="_idParaDest-164">
    <a id="_idTextAnchor168">
    </a>
    <span class="koboSpan" id="kobo.1542.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1543.1">
      Understand the basics of Amazon S3 encryption
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1544.1">
       from
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/understanding-amazon-s3-encryption">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1545.1">
        https://www.cloudericks.com/blog/understanding-amazon-s3-encryption
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1546.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1547.1">
      Understand more about S3 bucket key for SSE-KMS encryption
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1548.1">
       from
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/understanding-s3-bucket-key-for-sse-kms-encryption">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1549.1">
        https://www.cloudericks.com/blog/understanding-s3-bucket-key-for-sse-kms-encryption
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1550.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1551.1">
      Read more about encryption
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1552.1">
       at
      </span>
     </span>
     <a href="https://www.secdops.com/blog/getting-started-with-encryption">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1553.1">
        https://www.secdops.com/blog/getting-started-with-encryption
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1554.1">
       .
      </span>
     </span>
    </li>
   </ul>
  </div>
 </body></html>