<html><head></head><body>
  <div id="_idContainer291">
   <h1 class="chapter-number" id="_idParaDest-357">
    <a id="_idTextAnchor361">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     9
    </span>
   </h1>
   <h1 id="_idParaDest-358">
    <a id="_idTextAnchor362">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Advanced Identity and Directory Management
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     Having established a foundation in
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      IAM Identity Center
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     (formerly
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.6.1">
      AWS SSO
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     ), IAM users, IAM groups, IAM roles, and IAM policies for identity and access management in previous chapters, we are now set to explore the more advanced aspects of user identity and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.8.1">
      directory management.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.9.1">
     We will first delve into serverless identity-as-a-service user management strategies within AWS using
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.10.1">
      Amazon Cognito
     </span>
    </strong>
    <span class="koboSpan" id="kobo.11.1">
     .
    </span>
    <span class="koboSpan" id="kobo.11.2">
     We will explore the two key functionalities of Cognito within this chapter:
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.12.1">
      user pools
     </span>
    </strong>
    <span class="koboSpan" id="kobo.13.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.14.1">
      identity pools
     </span>
    </strong>
    <span class="koboSpan" id="kobo.15.1">
     .
    </span>
    <span class="koboSpan" id="kobo.15.2">
     User pools act as robust, scalable directories that handle user registration, authentication, and integration with our applications, along with features such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.16.1">
      multi-factor authentication
     </span>
    </strong>
    <span class="koboSpan" id="kobo.17.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.18.1">
      MFA
     </span>
    </strong>
    <span class="koboSpan" id="kobo.19.1">
     ) and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.20.1">
      federated identity
     </span>
    </strong>
    <span class="koboSpan" id="kobo.21.1">
     logins.
    </span>
    <span class="koboSpan" id="kobo.21.2">
     Conversely, identity pools allocate temporary AWS credentials to authenticated users, allowing them to use AWS services such as Amazon S3, Amazon DynamoDB, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.22.1">
      AWS Lambda.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     Next, we will delve into the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.24.1">
      directory service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.25.1">
     solutions available within AWS, including AWS Simple AD, AWS Active Directory, and AD Connect.
    </span>
    <span class="koboSpan" id="kobo.25.2">
     We will also examine the integration of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.26.1">
      Microsoft Entra ID
     </span>
    </strong>
    <span class="koboSpan" id="kobo.27.1">
     (previously known as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.28.1">
      Azure Active Directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.29.1">
     ) with IAM Identity Center, which allows Entra ID users to access AWS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      resources effortlessly.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.31.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.32.1">
     This chapter’s recipes might require supplementary knowledge, including familiarity with Microsoft products such as Active Directory and Microsoft Entra ID, as well as AWS services and features that have not yet been covered in this book.
    </span>
    <span class="koboSpan" id="kobo.32.2">
     The recipes within this chapter are not mandatory for understanding and practicing subsequent recipes within the book.
    </span>
    <span class="koboSpan" id="kobo.32.3">
     Therefore, if you are progressing through the chapters in this book and lack knowledge of the required products or services, and if you currently have no need for these solutions, feel free to read the steps within the recipes for understanding and skip practicing them until they are needed, and you have the required prerequisite knowledge.
    </span>
    <span class="koboSpan" id="kobo.32.4">
     You may also learn enough about the required products and services from the links provided within the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.33.1">
      respective recipes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.34.1">
     This chapter contains the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.35.1">
      following recipes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.36.1">
      Working with Amazon Cognito
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.37.1">
       user pools
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.38.1">
      Using identity pools to access
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.39.1">
       AWS resources
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.40.1">
      Using AWS Simple AD for creating a lightweight
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.41.1">
       directory solution
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.42.1">
      Using Microsoft Entra ID as the identity provider
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.43.1">
       within AWS
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-359">
    <a id="_idTextAnchor363">
    </a>
    <span class="koboSpan" id="kobo.44.1">
     Technical requirements
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.45.1">
     Before diving into the recipes of this chapter, we need to ensure we have the following requirements and knowledge
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.46.1">
      in place:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.47.1">
      We need an active AWS account to complete the recipes within this chapter.
     </span>
     <span class="koboSpan" id="kobo.47.2">
      If we are using AWS Organizations, we can use the management account of the Organization, as we will be configuring many things at the AWS Organization level in this chapter.
     </span>
     <span class="koboSpan" id="kobo.47.3">
      I will be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.48.1">
       aws-sec-cookbook-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.49.1">
      account that we created in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.50.1">
       Multi-account management with AWS Organizations
      </span>
     </em>
     <span class="koboSpan" id="kobo.51.1">
      recipe in
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.52.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.53.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.54.1">
      For administrative actions, we need a user who has
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.55.1">
       AdministratorAccess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.56.1">
      permission to the AWS account we are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.57.1">
       working with.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.58.1">
     Code files for this book are available at
    </span>
    <a href="https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition">
     <span class="koboSpan" id="kobo.59.1">
      https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition
     </span>
    </a>
    <span class="koboSpan" id="kobo.60.1">
     .
    </span>
    <span class="koboSpan" id="kobo.60.2">
     The code files for this chapter are available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.61.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition/tree/main/Chapter09">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.62.1">
       https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition/tree/main/Chapter09
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.63.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-360">
    <a id="_idTextAnchor364">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     Working with Amazon Cognito user pools
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.65.1">
     Amazon Cognito
    </span>
    <a id="_idIndexMarker1071">
    </a>
    <span class="koboSpan" id="kobo.66.1">
     is used primarily for two use cases: secure user identity
    </span>
    <a id="_idIndexMarker1072">
    </a>
    <span class="koboSpan" id="kobo.67.1">
     management
    </span>
    <a id="_idIndexMarker1073">
    </a>
    <span class="koboSpan" id="kobo.68.1">
     for our applications using its user pools feature and secure access to AWS resources by making use of temporary credentials using its identity pools feature.
    </span>
    <span class="koboSpan" id="kobo.68.2">
     In this recipe, we will explore the user pools feature of Amazon Cognito by creating a user pool from the AWS Management Console and then creating a user
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.69.1">
      within it.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-361">
    <a id="_idTextAnchor365">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.71.1">
     To complete
    </span>
    <a id="_idIndexMarker1074">
    </a>
    <span class="koboSpan" id="kobo.72.1">
     this recipe, we need Amazon
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.73.1">
      Simple Notification Service
     </span>
    </strong>
    <span class="koboSpan" id="kobo.74.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.75.1">
      SNS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.76.1">
     ) for
    </span>
    <a id="_idIndexMarker1075">
    </a>
    <span class="koboSpan" id="kobo.77.1">
     sending SMS if we plan to use SMS verification within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.78.1">
      this recipe.
     </span>
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.79.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.80.1">
     When we start using Amazon SNS for SMS messaging, our AWS account operates in an SMS sandbox.
    </span>
    <span class="koboSpan" id="kobo.80.2">
     This sandbox serves as a secure space to test Amazon SNS functionalities without compromising our sender reputation.
    </span>
    <span class="koboSpan" id="kobo.80.3">
     While in the sandbox, we are limited to sending SMS messages to verified destination phone
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.81.1">
      numbers only.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.82.1">
     If our AWS account is
    </span>
    <a id="_idIndexMarker1076">
    </a>
    <span class="koboSpan" id="kobo.83.1">
     within the SMS sandbox, and we want to use SMS verification within this recipe, we can add a phone number to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.84.1">
      Sandbox destination phone numbers
     </span>
    </strong>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.85.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.86.1">
      Log in to the AWS Management Console and navigate to the Amazon
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.87.1">
       SNS service.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.88.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.89.1">
       Text messaging (SMS)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.90.1">
      from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.91.1">
       left sidebar.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.92.1">
      Verify under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.93.1">
       Account information
      </span>
     </strong>
     <span class="koboSpan" id="kobo.94.1">
      that this account is in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.95.1">
       SMS sandbox.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.96.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.97.1">
       Sandbox destination phone numbers
      </span>
     </strong>
     <span class="koboSpan" id="kobo.98.1">
      section, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.99.1">
       Add
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.100.1">
        phone number
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.101.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.102.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.103.1">
       Add a phone number
      </span>
     </strong>
     <span class="koboSpan" id="kobo.104.1">
      page, enter the phone number, selecting the correct country code.
     </span>
     <span class="koboSpan" id="kobo.104.2">
      Also, choose the verification message language, which is the language the verification message will be
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.105.1">
       sent in.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.106.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.107.1">
       Add phone number
      </span>
     </strong>
     <span class="koboSpan" id="kobo.108.1">
      .
     </span>
     <span class="koboSpan" id="kobo.108.2">
      This will take us to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.109.1">
       Verify phone
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.110.1">
        number
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.111.1">
       page.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.112.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.113.1">
       Verify phone number
      </span>
     </strong>
     <span class="koboSpan" id="kobo.114.1">
      page, enter the verification code received on the provided phone number and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.115.1">
       Verify
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.116.1">
        phone number
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.117.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.118.1">
     If it is successfully verified, the phone number should now appear with the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.119.1">
      Verification status
     </span>
    </strong>
    <span class="koboSpan" id="kobo.120.1">
     as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.121.1">
      Verified
     </span>
    </strong>
    <span class="koboSpan" id="kobo.122.1">
     in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.123.1">
      Sandbox destination phone numbers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.124.1">
     section on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.125.1">
      Text messaging (
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.126.1">
       SMS)
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.127.1">
      page.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.128.1">
     We can explore
    </span>
    <a id="_idIndexMarker1077">
    </a>
    <span class="koboSpan" id="kobo.129.1">
     more about Amazon SNS using the link provided in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.130.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.131.1">
     section of this recipe.
    </span>
    <span class="koboSpan" id="kobo.131.2">
     Assuming that we have set the
    </span>
    <a id="_idIndexMarker1078">
    </a>
    <span class="koboSpan" id="kobo.132.1">
     environment up for this recipe as discussed within this section, we can get started with creating a Cognito
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.133.1">
      user pool.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-362">
    <a id="_idTextAnchor366">
    </a>
    <span class="koboSpan" id="kobo.134.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.135.1">
     We can create a Cognito user pool from the AWS Management Console
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.136.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.137.1">
      Log in to the AWS Account Management Console and navigate to the Cognito service.
     </span>
     <span class="koboSpan" id="kobo.137.2">
      We should see the option to get started based on the business case.
     </span>
     <span class="koboSpan" id="kobo.137.3">
      The default is
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.138.1">
       Add user directories to your app
      </span>
     </strong>
     <span class="koboSpan" id="kobo.139.1">
      , which is done using
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.140.1">
       user pools.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer249">
     <span class="koboSpan" id="kobo.141.1">
      <img alt="Figure 9.1 – Creating a user pool business case" src="image/B21384_09_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.142.1">
     Figure 9.1 – Creating a user pool business case
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.143.1">
     The drop-down menu also includes the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.144.1">
      Grant access to AWS services
     </span>
    </strong>
    <span class="koboSpan" id="kobo.145.1">
     option for business cases using
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.146.1">
      identity pools.
     </span>
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.147.1">
      Select the business case for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.148.1">
       Add user directories to your app
      </span>
     </strong>
     <span class="koboSpan" id="kobo.149.1">
      , as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.150.1">
        Figure 9
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.151.1">
       .1
      </span>
     </em>
     <span class="koboSpan" id="kobo.152.1">
      , and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.153.1">
       Create user pool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.154.1">
      .
     </span>
     <span class="koboSpan" id="kobo.154.2">
      We can also create user pools by going to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.155.1">
       User pools
      </span>
     </strong>
     <span class="koboSpan" id="kobo.156.1">
      page
     </span>
     <a id="_idIndexMarker1079">
     </a>
     <span class="koboSpan" id="kobo.157.1">
      by clicking on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.158.1">
       User pools
      </span>
     </strong>
     <span class="koboSpan" id="kobo.159.1">
      menu option from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.160.1">
       left sidebar.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.161.1">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.162.1">
       Provider types
      </span>
     </strong>
     <span class="koboSpan" id="kobo.163.1">
      , select only
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.164.1">
       Cognito user pool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.165.1">
      (which is the default).
     </span>
     <span class="koboSpan" id="kobo.165.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.166.1">
       Cognito user pool sign-in options
      </span>
     </strong>
     <span class="koboSpan" id="kobo.167.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.168.1">
       User name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.169.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.170.1">
       Email
      </span>
     </strong>
     <span class="koboSpan" id="kobo.171.1">
      , and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.172.1">
       Phone number
      </span>
     </strong>
     <span class="koboSpan" id="kobo.173.1">
      .
     </span>
     <span class="koboSpan" id="kobo.173.2">
      Leave
     </span>
     <a id="_idIndexMarker1080">
     </a>
     <span class="koboSpan" id="kobo.174.1">
      the other options as-is and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.175.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.176.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.177.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer250">
     <span class="koboSpan" id="kobo.178.1">
      <img alt="Figure 9.2 – Configuring authentication providers" src="image/B21384_09_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.179.1">
     Figure 9.2 – Configuring authentication providers
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.180.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.181.1">
       Configure security requirements
      </span>
     </strong>
     <span class="koboSpan" id="kobo.182.1">
      page, set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.183.1">
       Password policy mode
      </span>
     </strong>
     <span class="koboSpan" id="kobo.184.1">
      to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.185.1">
       Cognito defaults
      </span>
     </strong>
     <span class="koboSpan" id="kobo.186.1">
      (which is
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.187.1">
       the default).
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.188.1">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.189.1">
       Multi-factor authentication
      </span>
     </strong>
     <span class="koboSpan" id="kobo.190.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.191.1">
       Require MFA - Recommended
      </span>
     </strong>
     <span class="koboSpan" id="kobo.192.1">
      select
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.193.1">
        Authenticator apps
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.194.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer251">
     <span class="koboSpan" id="kobo.195.1">
      <img alt="Figure 9.3 – Configuring the MFA settings during user pool creation" src="image/B21384_09_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.196.1">
     Figure 9.3 – Configuring the MFA settings during user pool creation
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.197.1">
      In
     </span>
     <a id="_idIndexMarker1081">
     </a>
     <span class="koboSpan" id="kobo.198.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.199.1">
       User account recovery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.200.1">
      section, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.201.1">
       Enable self-service account recovery – Recommended
      </span>
     </strong>
     <span class="koboSpan" id="kobo.202.1">
      .
     </span>
     <span class="koboSpan" id="kobo.202.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.203.1">
       Delivery method for user account recovery messages
      </span>
     </strong>
     <span class="koboSpan" id="kobo.204.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.205.1">
       Email only
      </span>
     </strong>
     <span class="koboSpan" id="kobo.206.1">
      .
     </span>
     <span class="koboSpan" id="kobo.206.2">
      Then
     </span>
     <a id="_idIndexMarker1082">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.207.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.208.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.209.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer252">
     <span class="koboSpan" id="kobo.210.1">
      <img alt="Figure 9.4 – Configuring the user account recovery settings during user pool creation" src="image/B21384_09_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.211.1">
     Figure 9.4 – Configuring the user account recovery settings during user pool creation
    </span>
   </p>
   <ol>
    <li value="7">
     <span class="koboSpan" id="kobo.212.1">
      On
     </span>
     <a id="_idIndexMarker1083">
     </a>
     <span class="koboSpan" id="kobo.213.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.214.1">
       Configure sign-up experience
      </span>
     </strong>
     <span class="koboSpan" id="kobo.215.1">
      page, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.216.1">
       Enable self-registration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.217.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.218.1">
       Allow Cognito to automatically send messages to verify and confirm - Recommended
      </span>
     </strong>
     <span class="koboSpan" id="kobo.219.1">
      , and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.220.1">
       Send email message, verify email address
      </span>
     </strong>
     <span class="koboSpan" id="kobo.221.1">
      .
     </span>
     <span class="koboSpan" id="kobo.221.2">
      Leave the other values as-is
     </span>
     <a id="_idIndexMarker1084">
     </a>
     <span class="koboSpan" id="kobo.222.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.223.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.224.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.225.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.226.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.227.1">
     Enabling user sign-up in our user pool allows individuals from anywhere on the internet to register for an account and log in to our applications.
    </span>
    <span class="koboSpan" id="kobo.227.2">
     We need to avoid turning it on unless we are ready to allow public sign-up access to our app.
    </span>
    <span class="koboSpan" id="kobo.227.3">
     We can also personalize the sign-up experience by incorporating up to 50 custom attributes from the sign-up experience page.
    </span>
    <span class="koboSpan" id="kobo.227.4">
     However, it’s important to note that once a user pool is established, the names of these custom attributes cannot
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.228.1">
      be modified.
     </span>
    </span>
   </p>
   <ol>
    <li value="8">
     <span class="koboSpan" id="kobo.229.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.230.1">
       Configure message delivery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.231.1">
      page, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.232.1">
       Send email
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.233.1">
        with Cognito
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.234.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.235.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.236.1">
     We can initially utilize Cognito’s default email address for development purposes, which supports up to 50 emails daily.
    </span>
    <span class="koboSpan" id="kobo.236.2">
     If we have established a verified sender through Amazon SES and wish to utilize its features, we should choose the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.237.1">
      Send email with Amazon SES - Recommended
     </span>
    </strong>
    <span class="koboSpan" id="kobo.238.1">
     option and input the necessary
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.239.1">
      SES details.
     </span>
    </span>
   </p>
   <ol>
    <li value="9">
     <span class="koboSpan" id="kobo.240.1">
      Provide
     </span>
     <a id="_idIndexMarker1085">
     </a>
     <span class="koboSpan" id="kobo.241.1">
      the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.242.1">
       SecCbCognitoUserPoolRole
      </span>
     </strong>
     <span class="koboSpan" id="kobo.243.1">
      value for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.244.1">
       IAM role name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.245.1">
      within
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.246.1">
       SMS settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.247.1">
      .
     </span>
     <span class="koboSpan" id="kobo.247.2">
      Leave
     </span>
     <a id="_idIndexMarker1086">
     </a>
     <span class="koboSpan" id="kobo.248.1">
      everything else as-is and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.249.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.250.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.251.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer253">
     <span class="koboSpan" id="kobo.252.1">
      <img alt="Figure 9.5 – The SMS settings during user pool creation" src="image/B21384_09_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.253.1">
     Figure 9.5 – The SMS settings during user pool creation
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.254.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.255.1">
     If our AWS account is currently in the SMS sandbox, we must add and verify any phone numbers we intend to use for SMS verification to the sandbox’s list of verified destination phone numbers, as outlined in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.256.1">
      Getting ready
     </span>
    </em>
    <span class="koboSpan" id="kobo.257.1">
     section of this recipe.
    </span>
    <span class="koboSpan" id="kobo.257.2">
     If our account is not in the sandbox, we need to configure SMS messaging by following the instructions provided by Amazon on the screen, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.258.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.259.1">
      .5
     </span>
    </em>
    <span class="koboSpan" id="kobo.260.1">
     .
    </span>
    <span class="koboSpan" id="kobo.260.2">
     Please note that a detailed walkthrough of setting up SMS messaging is beyond the scope of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.261.1">
      this book.
     </span>
    </span>
   </p>
   <ol>
    <li value="10">
     <span class="koboSpan" id="kobo.262.1">
      On
     </span>
     <a id="_idIndexMarker1087">
     </a>
     <span class="koboSpan" id="kobo.263.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.264.1">
       Integrate your app
      </span>
     </strong>
     <span class="koboSpan" id="kobo.265.1">
      page, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.266.1">
       User pool name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.267.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.268.1">
       SecCbUserPool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.269.1">
      , and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.270.1">
       Use the Cognito Hosted UI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.271.1">
      .
     </span>
     <span class="koboSpan" id="kobo.271.2">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.272.1">
       Domain
      </span>
     </strong>
     <span class="koboSpan" id="kobo.273.1">
      section, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.274.1">
       Use a Cognito domain
      </span>
     </strong>
     <span class="koboSpan" id="kobo.275.1">
      and enter a unique
     </span>
     <a id="_idIndexMarker1088">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.276.1">
       domain prefix.
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.277.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.278.1">
     We can also input a custom domain that we own to be used for Cognito-hosted registration and login pages.
    </span>
    <span class="koboSpan" id="kobo.278.2">
     To utilize a custom domain, providing a DNS record and a certificate
    </span>
    <a id="_idIndexMarker1089">
    </a>
    <span class="koboSpan" id="kobo.279.1">
     from
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.280.1">
      AWS Certificate Manager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.281.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.282.1">
      ACM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.283.1">
     ) is a prerequisite.
    </span>
    <span class="koboSpan" id="kobo.283.2">
     For production workloads, AWS recommends the use of a custom domain to enhance professionalism
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.284.1">
      and branding.
     </span>
    </span>
   </p>
   <ol>
    <li value="11">
     <span class="koboSpan" id="kobo.285.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.286.1">
       Initial app client
      </span>
     </strong>
     <span class="koboSpan" id="kobo.287.1">
      section, provide
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.288.1">
       Sec Cb App
      </span>
     </strong>
     <span class="koboSpan" id="kobo.289.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.290.1">
       App client name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.291.1">
      .
     </span>
     <span class="koboSpan" id="kobo.291.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.292.1">
       Client secret
      </span>
     </strong>
     <span class="koboSpan" id="kobo.293.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.294.1">
       Generate a client secret
      </span>
     </strong>
     <span class="koboSpan" id="kobo.295.1">
      , and for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.296.1">
       Allowed callback URLs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.297.1">
      , give a URL to redirect after authentication, say
     </span>
     <a href="https://www.cloudericks.com">
      <span class="koboSpan" id="kobo.298.1">
       https://www.cloudericks.com
      </span>
     </a>
     <span class="koboSpan" id="kobo.299.1">
      .
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.300.1">
       Click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.301.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.302.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.303.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.304.1">
     Client secrets serve as a means for the server-side part of an app to authenticate API requests, offering a layer of security that helps prevent third parties from impersonating your client.
    </span>
    <span class="koboSpan" id="kobo.304.2">
     It is essential to note that once Amazon Cognito generates a client secret for your app client, it cannot be modified
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.305.1">
      or deleted.
     </span>
    </span>
   </p>
   <ol>
    <li value="12">
     <span class="koboSpan" id="kobo.306.1">
      Review all
     </span>
     <a id="_idIndexMarker1090">
     </a>
     <span class="koboSpan" id="kobo.307.1">
      details and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.308.1">
       Create user pools
      </span>
     </strong>
     <span class="koboSpan" id="kobo.309.1">
      .
     </span>
     <span class="koboSpan" id="kobo.309.2">
      We should now be able to see our new user pool on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.310.1">
       User
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.311.1">
        pools
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.312.1">
       page.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.313.1">
      From
     </span>
     <a id="_idIndexMarker1091">
     </a>
     <span class="koboSpan" id="kobo.314.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.315.1">
       User pools
      </span>
     </strong>
     <span class="koboSpan" id="kobo.316.1">
      page, click on the hyperlinked name of the user pool we created to access its settings page.
     </span>
     <span class="koboSpan" id="kobo.316.2">
      The settings page should have a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.317.1">
       User pool overview
      </span>
     </strong>
     <span class="koboSpan" id="kobo.318.1">
      section and the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.319.1">
       Delete user pool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.320.1">
      button, as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.321.1">
       following figure:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer254">
     <span class="koboSpan" id="kobo.322.1">
      <img alt="Figure 9.6 – The User pool overview page" src="image/B21384_09_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.323.1">
     Figure 9.6 – The User pool overview page
    </span>
   </p>
   <ol>
    <li value="14">
     <span class="koboSpan" id="kobo.324.1">
      Scroll down and navigate to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.325.1">
       Users
      </span>
     </strong>
     <span class="koboSpan" id="kobo.326.1">
      tab, which is the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.327.1">
       first tab.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer255">
     <span class="koboSpan" id="kobo.328.1">
      <img alt="Figure 9.7 – The Users tab for the user pool" src="image/B21384_09_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.329.1">
     Figure 9.7 – The Users tab for the user pool
    </span>
   </p>
   <ol>
    <li value="15">
     <span class="koboSpan" id="kobo.330.1">
      Click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.331.1">
        Create user
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.332.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.333.1">
      On
     </span>
     <a id="_idIndexMarker1092">
     </a>
     <span class="koboSpan" id="kobo.334.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.335.1">
       Create user
      </span>
     </strong>
     <span class="koboSpan" id="kobo.336.1">
      page, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.337.1">
       Email
      </span>
     </strong>
     <span class="koboSpan" id="kobo.338.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.339.1">
       Phone
      </span>
     </strong>
     <span class="koboSpan" id="kobo.340.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.341.1">
       Alias attributes used to
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.342.1">
        sign in
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.343.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer256">
     <span class="koboSpan" id="kobo.344.1">
      <img alt="Figure 9.8 – Configuring the alias attributes used to sign in" src="image/B21384_09_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.345.1">
     Figure 9.8 – Configuring the alias attributes used to sign in
    </span>
   </p>
   <ol>
    <li value="17">
     <span class="koboSpan" id="kobo.346.1">
      Select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.347.1">
       Don’t send an invitation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.348.1">
      for
     </span>
     <a id="_idIndexMarker1093">
     </a>
     <span class="koboSpan" id="kobo.349.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.350.1">
       Invitation
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.351.1">
        message
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.352.1">
       option.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer257">
     <span class="koboSpan" id="kobo.353.1">
      <img alt="Figure 9.9 – Configuring the invitation message" src="image/B21384_09_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.354.1">
     Figure 9.9 – Configuring the invitation message
    </span>
   </p>
   <ol>
    <li value="18">
     <span class="koboSpan" id="kobo.355.1">
      Provide
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.356.1">
       User name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.357.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.358.1">
       Email address
      </span>
     </strong>
     <span class="koboSpan" id="kobo.359.1">
      ,
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.360.1">
       Phone number
      </span>
     </strong>
     <span class="koboSpan" id="kobo.361.1">
      , and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.362.1">
       Temporary password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.363.1">
      for the user, and click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.364.1">
        Create user
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.365.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer258">
     <span class="koboSpan" id="kobo.366.1">
      <img alt="Figure 9.10 – New user configuration" src="image/B21384_09_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.367.1">
     Figure 9.10 – New user configuration
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.368.1">
     The
    </span>
    <a id="_idIndexMarker1094">
    </a>
    <span class="koboSpan" id="kobo.369.1">
     new user
    </span>
    <a id="_idIndexMarker1095">
    </a>
    <span class="koboSpan" id="kobo.370.1">
     should now appear in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.371.1">
      Users
     </span>
    </strong>
    <span class="koboSpan" id="kobo.372.1">
     tab similar to the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.373.1">
      following figure:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer259">
     <span class="koboSpan" id="kobo.374.1">
      <img alt="Figure 9.11 – The Users tab with the new user" src="image/B21384_09_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.375.1">
     Figure 9.11 – The Users tab with the new user
    </span>
   </p>
   <ol>
    <li value="19">
     <span class="koboSpan" id="kobo.376.1">
      From the user pool’s settings page, navigate to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.377.1">
       App integration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.378.1">
      tab and click on the
     </span>
     <a id="_idIndexMarker1096">
     </a>
     <span class="koboSpan" id="kobo.379.1">
      hyperlinked
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.380.1">
       App client name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.381.1">
      of the initial app client that was created as part of this recipe.
     </span>
     <span class="koboSpan" id="kobo.381.2">
      We should now see our app’s
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.382.1">
       settings page.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.383.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.384.1">
       Hosted UI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.385.1">
      section
     </span>
     <a id="_idIndexMarker1097">
     </a>
     <span class="koboSpan" id="kobo.386.1">
      within the app’s settings page, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.387.1">
       View Hosted UI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.388.1">
      .
     </span>
     <span class="koboSpan" id="kobo.388.2">
      We should now see the default Hosted UI sign-in page,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.389.1">
       as follows:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer260">
     <span class="koboSpan" id="kobo.390.1">
      <img alt="Figure 9.12 – The hosted UI sign-in page" src="image/B21384_09_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.391.1">
     Figure 9.12 – The hosted UI sign-in page
    </span>
   </p>
   <ol>
    <li value="21">
     <span class="koboSpan" id="kobo.392.1">
      Enter the username and password for the user we created in this recipe and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.393.1">
       Sign in
      </span>
     </strong>
     <span class="koboSpan" id="kobo.394.1">
      .
     </span>
     <span class="koboSpan" id="kobo.394.2">
      We will be taken to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.395.1">
       Change
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.396.1">
        Password
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.397.1">
       screen.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.398.1">
      Within the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.399.1">
       Change Password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.400.1">
      screen, enter a new password under the checkboxes with the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.401.1">
       New Password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.402.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.403.1">
       Enter New Password Again text
      </span>
     </strong>
     <span class="koboSpan" id="kobo.404.1">
      labels, and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.405.1">
       Send
      </span>
     </strong>
     <span class="koboSpan" id="kobo.406.1">
      .
     </span>
     <span class="koboSpan" id="kobo.406.2">
      This will
     </span>
     <a id="_idIndexMarker1098">
     </a>
     <span class="koboSpan" id="kobo.407.1">
      send a
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.408.1">
       One Time Password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.409.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.410.1">
       OTP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.411.1">
      ) to the phone number provided while creating the user and ask us to enter it for verification, as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.412.1">
       following figure:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer261">
     <span class="koboSpan" id="kobo.413.1">
      <img alt="Figure 9.13 – SMS verification" src="image/B21384_09_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.414.1">
     Figure 9.13 – SMS verification
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.415.1">
     Once verified, we
    </span>
    <a id="_idIndexMarker1099">
    </a>
    <span class="koboSpan" id="kobo.416.1">
     will be redirected
    </span>
    <a id="_idIndexMarker1100">
    </a>
    <span class="koboSpan" id="kobo.417.1">
     to the configured URL.
    </span>
    <span class="koboSpan" id="kobo.417.2">
     If you were following the recipe and provided the
    </span>
    <a href="https://www.cloudericks.com">
     <span class="koboSpan" id="kobo.418.1">
      https://www.cloudericks.com
     </span>
    </a>
    <span class="koboSpan" id="kobo.419.1">
     URL, you should see a screen similar to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.420.1">
      the following:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer262">
     <span class="koboSpan" id="kobo.421.1">
      <img alt="Figure 9.14 – The post-sign in page" src="image/B21384_09_14.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.422.1">
     Figure 9.14 – The post-sign in page
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.423.1">
     In this recipe, we created a user pool and then created a user from the AWS Management Console.
    </span>
    <span class="koboSpan" id="kobo.423.2">
     Alternatively, users can sign up on their own through the hosted UI’s sign-up option.
    </span>
    <span class="koboSpan" id="kobo.423.3">
     Customizations for the sign-in and sign-up experiences, and configuring the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.424.1">
      Groups
     </span>
    </strong>
    <span class="koboSpan" id="kobo.425.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.426.1">
      Messaging
     </span>
    </strong>
    <span class="koboSpan" id="kobo.427.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.428.1">
      App integration
     </span>
    </strong>
    <span class="koboSpan" id="kobo.429.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.430.1">
      User pool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.431.1">
     properties, can be made from the user pool’s settings page by navigating to their respective tabs, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.432.1">
       Figure 9
      </span>
     </em>
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.433.1">
       .7
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.434.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-363">
    <a id="_idTextAnchor367">
    </a>
    <span class="koboSpan" id="kobo.435.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.436.1">
     Amazon Cognito
    </span>
    <a id="_idIndexMarker1101">
    </a>
    <span class="koboSpan" id="kobo.437.1">
     provides two primary features: user pools and identity pools.
    </span>
    <span class="koboSpan" id="kobo.437.2">
     User pools serve as secure directories that handle sign-up and sign-in operations for app users, while identity pools are mechanisms for issuing AWS credentials to authenticated users, enabling access to the AWS services.
    </span>
    <span class="koboSpan" id="kobo.437.3">
     In this recipe, we created a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.438.1">
      user pool.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.439.1">
     For the user
    </span>
    <a id="_idIndexMarker1102">
    </a>
    <span class="koboSpan" id="kobo.440.1">
     pool sign-in options, we selected
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.441.1">
      Username
     </span>
    </strong>
    <span class="koboSpan" id="kobo.442.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.443.1">
      Email
     </span>
    </strong>
    <span class="koboSpan" id="kobo.444.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.445.1">
      Phone number
     </span>
    </strong>
    <span class="koboSpan" id="kobo.446.1">
     .
    </span>
    <span class="koboSpan" id="kobo.446.2">
     We can have one or both email or phone number as the username and then use these to sign in instead of username.
    </span>
    <span class="koboSpan" id="kobo.446.3">
     For enhanced security, we also selected MFA and specified the account recovery mechanisms.
    </span>
    <span class="koboSpan" id="kobo.446.4">
     For a better sign-up experience, we enabled self-registration and configured automatic
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.447.1">
      message verification.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.448.1">
     We used the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.449.1">
      Cognito domain
     </span>
    </strong>
    <span class="koboSpan" id="kobo.450.1">
     option for Cognito-hosted registration and login pages to keep the recipe simple.
    </span>
    <span class="koboSpan" id="kobo.450.2">
     We can also use a custom domain that we own instead.
    </span>
    <span class="koboSpan" id="kobo.450.3">
     To utilize a custom domain, providing a DNS record and a certificate from ACM is a prerequisite.
    </span>
    <span class="koboSpan" id="kobo.450.4">
     For production workloads, AWS recommends the use of a custom domain to enhance professionalism
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.451.1">
      and branding.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.452.1">
     No custom attributes were set up during our process.
    </span>
    <span class="koboSpan" id="kobo.452.2">
     However, the sign-up experience can be tailored by introducing up to 50 custom attributes.
    </span>
    <span class="koboSpan" id="kobo.452.3">
     Once a user pool is established, it’s important to remember that the names of these custom attributes become fixed and cannot be altered.
    </span>
    <span class="koboSpan" id="kobo.452.4">
     We can, however, add new
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.453.1">
      ones later.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.454.1">
     An initial app client was also created during the process with default settings.
    </span>
    <span class="koboSpan" id="kobo.454.2">
     Amazon Cognito client apps work by authenticating users and then exchanging tokens with Amazon Cognito for temporary AWS credentials.
    </span>
    <span class="koboSpan" id="kobo.454.3">
     These temporary AWS credentials can then be used to access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.455.1">
      AWS resources.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.456.1">
     Client apps within Cognito can be classified into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.457.1">
      three categories:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.458.1">
       Public client
      </span>
     </strong>
     <span class="koboSpan" id="kobo.459.1">
      : This is
     </span>
     <a id="_idIndexMarker1103">
     </a>
     <span class="koboSpan" id="kobo.460.1">
      typically a client-side application such as a native app on a mobile device or a browser-based app.
     </span>
     <span class="koboSpan" id="kobo.460.2">
      In this scenario, the app makes API requests from devices that cannot be entrusted with a client secret due to the potential
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.461.1">
       for exposure.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.462.1">
       Confidential client
      </span>
     </strong>
     <span class="koboSpan" id="kobo.463.1">
      : This is
     </span>
     <a id="_idIndexMarker1104">
     </a>
     <span class="koboSpan" id="kobo.464.1">
      often a server-side application that has the capability to securely store a client secret.
     </span>
     <span class="koboSpan" id="kobo.464.2">
      API requests to Cognito are routed through a central server, which is considered secure and capable of protecting this
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.465.1">
       sensitive information.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.466.1">
       Custom app
      </span>
     </strong>
     <span class="koboSpan" id="kobo.467.1">
      : This option
     </span>
     <a id="_idIndexMarker1105">
     </a>
     <span class="koboSpan" id="kobo.468.1">
      allows for a more tailored setup.
     </span>
     <span class="koboSpan" id="kobo.468.2">
      You have the autonomy to define the specific grant types, authentication flows, and whether a client secret
     </span>
     <a id="_idIndexMarker1106">
     </a>
     <span class="koboSpan" id="kobo.469.1">
      is required based on your unique requirements and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.470.1">
       security considerations.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.471.1">
     We will look into some more details including alternative business cases in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.472.1">
      next section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-364">
    <a id="_idTextAnchor368">
    </a>
    <span class="koboSpan" id="kobo.473.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.474.1">
     In this recipe, we created an Amazon Cognito user pool by selecting the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.475.1">
      Add user directories to your app
     </span>
    </strong>
    <span class="koboSpan" id="kobo.476.1">
     business case, as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.477.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.478.1">
      .1
     </span>
    </em>
    <span class="koboSpan" id="kobo.479.1">
     .
    </span>
    <span class="koboSpan" id="kobo.479.2">
     We can instead select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.480.1">
      Grant access to AWS services
     </span>
    </strong>
    <span class="koboSpan" id="kobo.481.1">
     business case from the dropdown to create an identity pool, as shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.482.1">
      following figure:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer263">
     <span class="koboSpan" id="kobo.483.1">
      <img alt="Figure 9.15 – Creating an identity pool business case" src="image/B21384_09_15.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.484.1">
     Figure 9.15 – Creating an identity pool business case
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.485.1">
     In the
    </span>
    <a id="_idIndexMarker1107">
    </a>
    <span class="koboSpan" id="kobo.486.1">
     recipe, under
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.487.1">
      Provider types
     </span>
    </strong>
    <span class="koboSpan" id="kobo.488.1">
     , we only selected the Cognito user pool (which is the default), as shown in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.489.1">
       Figure 9
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.490.1">
      .2
     </span>
    </em>
    <span class="koboSpan" id="kobo.491.1">
     .
    </span>
    <span class="koboSpan" id="kobo.491.2">
     As shown in that figure, the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.492.1">
      Cognito user pool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.493.1">
     option is selected by default and cannot be unchecked, and we also have an option called
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.494.1">
      Federated identity providers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.495.1">
     .
    </span>
    <span class="koboSpan" id="kobo.495.2">
     If we select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.496.1">
      Federated identity providers
     </span>
    </strong>
    <span class="koboSpan" id="kobo.497.1">
     option, we will get additional sign-in options enabling us to use credentials from popular
    </span>
    <a id="_idIndexMarker1108">
    </a>
    <span class="koboSpan" id="kobo.498.1">
     social IdPs such as Facebook, Google, Amazon, and Apple, or from external directories via SAML or
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.499.1">
      Open ID Connect
     </span>
    </strong>
    <span class="koboSpan" id="kobo.500.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.501.1">
      OIDC
     </span>
    </strong>
    <span class="koboSpan" id="kobo.502.1">
     ) protocols, as
    </span>
    <a id="_idIndexMarker1109">
    </a>
    <span class="koboSpan" id="kobo.503.1">
     shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.504.1">
      following figure:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer264">
     <span class="koboSpan" id="kobo.505.1">
      <img alt="Figure 9.16 – Federated sign-in options for user pools" src="image/B21384_09_16.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.506.1">
     Figure 9.16 – Federated sign-in options for user pools
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.507.1">
     Selecting
    </span>
    <a id="_idIndexMarker1110">
    </a>
    <span class="koboSpan" id="kobo.508.1">
     the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.509.1">
      Cognito user pool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.510.1">
     option is mandatory since it maintains profiles for both direct and federated users within our user
    </span>
    <a id="_idIndexMarker1111">
    </a>
    <span class="koboSpan" id="kobo.511.1">
     pool.
    </span>
    <span class="koboSpan" id="kobo.511.2">
     However, if our goal is to exclusively offer federated sign-in options, we can turn off the self-registration feature in our user pool, thus mandating that only administrators have the authority to create user profiles.
    </span>
    <span class="koboSpan" id="kobo.511.3">
     Additionally, should we wish to restrict sign-ins through the user pool, it is possible to deselect our user pool as an IdP within our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.512.1">
      app clients.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.513.1">
     We may also integrate
    </span>
    <a id="_idIndexMarker1112">
    </a>
    <span class="koboSpan" id="kobo.514.1">
     Amazon Cognito with
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.515.1">
      Amazon Verified Permissions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.516.1">
     , a refined authorization service designed for enforcing role and attribute-based access control in applications that utilize Amazon Cognito for authentication.
    </span>
    <span class="koboSpan" id="kobo.516.2">
     Verified Permissions evaluates a user’s attributes against the established access rules for a given resource based on their identity or access token.
    </span>
    <span class="koboSpan" id="kobo.516.3">
     It then issues an authorization decision – either granting or denying access.
    </span>
    <span class="koboSpan" id="kobo.516.4">
     This service allows for the centralization of authorization across all your applications and resources into one
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.517.1">
      policy store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.518.1">
     .
    </span>
    <span class="koboSpan" id="kobo.518.2">
     Policies
    </span>
    <a id="_idIndexMarker1113">
    </a>
    <span class="koboSpan" id="kobo.519.1">
     are formulated
    </span>
    <a id="_idIndexMarker1114">
    </a>
    <span class="koboSpan" id="kobo.520.1">
     in
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.521.1">
      Cedar
     </span>
    </strong>
    <span class="koboSpan" id="kobo.522.1">
     , an open source language specifically designed for crafting access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.523.1">
      control protocols.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.524.1">
     We created a user pool from the console in this recipe.
    </span>
    <span class="koboSpan" id="kobo.524.2">
     We can also create a user pool with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.525.1">
      aws cognito-idp create-user-pool
     </span>
    </strong>
    <span class="koboSpan" id="kobo.526.1">
     CLI command, passing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.527.1">
      pool-name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.528.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.529.1">
      region
     </span>
    </strong>
    <span class="koboSpan" id="kobo.530.1">
     .
    </span>
    <span class="koboSpan" id="kobo.530.2">
     Even though we can directly specify all user pool settings from the command line by referring to the documentation, it is an easier and safer approach to use an input JSON file
    </span>
    <a id="_idIndexMarker1115">
    </a>
    <span class="koboSpan" id="kobo.531.1">
     with all the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.532.1">
      configurations
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker1116">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.533.1">
      specified.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-365">
    <a id="_idTextAnchor369">
    </a>
    <span class="koboSpan" id="kobo.534.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.535.1">
      We can read more
     </span>
     <a id="_idIndexMarker1117">
     </a>
     <span class="koboSpan" id="kobo.536.1">
      about Amazon Cognito
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.537.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-amazon-cognito">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.538.1">
        https://www.cloudericks.com/blog/getting-started-with-amazon-cognito
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.539.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.540.1">
      We can read more about
     </span>
     <a id="_idIndexMarker1118">
     </a>
     <span class="koboSpan" id="kobo.541.1">
      Amazon SNS service
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.542.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-amazon-sns-service">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.543.1">
        https://www.cloudericks.com/blog/getting-started-with-amazon-sns-service
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.544.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.545.1">
      We can read more about
     </span>
     <a id="_idIndexMarker1119">
     </a>
     <span class="koboSpan" id="kobo.546.1">
      Amazon Verified Permissions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.547.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-amazon-verified-permissions">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.548.1">
        https://www.cloudericks.com/blog/getting-started-with-amazon-verified-permissions
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.549.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.550.1">
      We can learn about integrating Amazon Cognito with Amazon Verified permissions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.551.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/integrating-amazon-cognito-with-amazon-verified-permissions">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.552.1">
        https://www.cloudericks.com/blog/integrating-amazon-cognito-with-amazon-verified-permissions
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.553.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-366">
    <a id="_idTextAnchor370">
    </a>
    <span class="koboSpan" id="kobo.554.1">
     Using identity pools to access AWS resources
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.555.1">
     As discussed earlier
    </span>
    <a id="_idIndexMarker1120">
    </a>
    <span class="koboSpan" id="kobo.556.1">
     in this chapter, Amazon Cognito serves two primary use cases.
    </span>
    <span class="koboSpan" id="kobo.556.2">
     While user pools help us in handling identity and access management for our applications, identity pools extend this functionality to
    </span>
    <a id="_idIndexMarker1121">
    </a>
    <span class="koboSpan" id="kobo.557.1">
     provide temporary AWS credentials, enabling secure access to various AWS services without the need for long-term keys.
    </span>
    <span class="koboSpan" id="kobo.557.2">
     In this recipe, we will delve into the use of identity pools for effective access to AWS resources.
    </span>
    <span class="koboSpan" id="kobo.557.3">
     Let’s embark on a deep dive into the realm of identity pools and leverage their capability to weave identity pools into our applications, ensuring a secure and scalable method to access the AWS resources, making use of temporary
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.558.1">
      AWS credentials.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-367">
    <a id="_idTextAnchor371">
    </a>
    <span class="koboSpan" id="kobo.559.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.560.1">
     To complete
    </span>
    <a id="_idIndexMarker1122">
    </a>
    <span class="koboSpan" id="kobo.561.1">
     this recipe, we need to ensure
    </span>
    <a id="_idIndexMarker1123">
    </a>
    <span class="koboSpan" id="kobo.562.1">
     that the following additional requirements are in place in addition to those mentioned in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.563.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.564.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.565.1">
      section:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.566.1">
       An Amazon Cognito user pool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.567.1">
      : An
     </span>
     <a id="_idIndexMarker1124">
     </a>
     <span class="koboSpan" id="kobo.568.1">
      Amazon Cognito user pool serves as the identity backbone for our identity pool.
     </span>
     <span class="koboSpan" id="kobo.568.2">
      We created one in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.569.1">
       Working with Amazon Cognito user pools
      </span>
     </em>
     <span class="koboSpan" id="kobo.570.1">
      recipe earlier in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.571.1">
       this chapter.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.572.1">
       App Client with ALLOW_USER_PASSWORD_AUTH
      </span>
     </strong>
     <span class="koboSpan" id="kobo.573.1">
      : We need to set up an app
     </span>
     <a id="_idIndexMarker1125">
     </a>
     <span class="koboSpan" id="kobo.574.1">
      client configured with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.575.1">
       ALLOW_USER_PASSWORD_AUTH
      </span>
     </strong>
     <span class="koboSpan" id="kobo.576.1">
      flow.
     </span>
     <span class="koboSpan" id="kobo.576.2">
      This can be accomplished by navigating to the user pool settings in the AWS Management Console, selecting the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.577.1">
       App integration
      </span>
     </strong>
     <span class="koboSpan" id="kobo.578.1">
      tab, and creating an app client.
     </span>
     <span class="koboSpan" id="kobo.578.2">
      Alternatively, we can include the authentication flow during the initial App Client setup as outlined in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.579.1">
       Working with Amazon Cognito user
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.580.1">
        pools
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.581.1">
       recipe.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.582.1">
       An Amazon S3 Bucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.583.1">
      : We need an
     </span>
     <a id="_idIndexMarker1126">
     </a>
     <span class="koboSpan" id="kobo.584.1">
      S3 bucket with default options as discussed in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.585.1">
       Technical requirements
      </span>
     </em>
     <span class="koboSpan" id="kobo.586.1">
      section of
     </span>
     <a href="B21384_02.xhtml#_idTextAnchor043">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.587.1">
         Chapter 2
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.588.1">
      to demonstrate user pools.
     </span>
     <span class="koboSpan" id="kobo.588.2">
      I will be using a bucket name of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.589.1">
       myawsbucket
      </span>
     </strong>
     <span class="koboSpan" id="kobo.590.1">
      in the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.591.1">
       us-east-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.592.1">
      region.
     </span>
     <span class="koboSpan" id="kobo.592.2">
      S3 bucket names must be globally unique; choose an available name and replace my bucket name with your chosen
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.593.1">
       bucket name.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.594.1">
     Next, we will see how we can implement Cognito
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.595.1">
      identity pools.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-368">
    <a id="_idTextAnchor372">
    </a>
    <span class="koboSpan" id="kobo.596.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.597.1">
     We can use identity pools for effective access to AWS resources
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.598.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.599.1">
      Navigate to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.600.1">
       Amazon Cognito
      </span>
     </strong>
     <span class="koboSpan" id="kobo.601.1">
      service in the AWS Console and search for the Cognito user pool that we created.
     </span>
     <span class="koboSpan" id="kobo.601.2">
      Navigate to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.602.1">
       Users
      </span>
     </strong>
     <span class="koboSpan" id="kobo.603.1">
      tab and click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.604.1">
       Create
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.605.1">
        user
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.606.1">
       button.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer265">
     <span class="koboSpan" id="kobo.607.1">
      <img alt="Figure 9.17 – The Create user option" src="image/B21384_09_17.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.608.1">
     Figure 9.17 – The Create user option
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.609.1">
      Provide
     </span>
     <a id="_idIndexMarker1127">
     </a>
     <span class="koboSpan" id="kobo.610.1">
      the
     </span>
     <a id="_idIndexMarker1128">
     </a>
     <span class="koboSpan" id="kobo.611.1">
      user profile details: set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.612.1">
       User name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.613.1">
      to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.614.1">
       testuser
      </span>
     </strong>
     <span class="koboSpan" id="kobo.615.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.616.1">
       Email address
      </span>
     </strong>
     <span class="koboSpan" id="kobo.617.1">
      to testuser@cloudericks.com.
     </span>
     <span class="koboSpan" id="kobo.617.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.618.1">
       Temporary password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.619.1">
      , select the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.620.1">
       Set a password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.621.1">
      option, enter a secure password, and finally, click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.622.1">
        Create user
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.623.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer266">
     <span class="koboSpan" id="kobo.624.1">
      <img alt="Figure 9.18 – The details for creating a user" src="image/B21384_09_18.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.625.1">
     Figure 9.18 – The details for creating a user
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.626.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.627.1">
     To prevent encountering MFA challenges when authenticating this user via the AWS CLI for an app client, we should choose the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.628.1">
      No MFA
     </span>
    </strong>
    <span class="koboSpan" id="kobo.629.1">
     option in the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.630.1">
      Configure security requirements
     </span>
    </strong>
    <span class="koboSpan" id="kobo.631.1">
     settings while creating the Cognito
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.632.1">
      user pool.
     </span>
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.633.1">
      In the
     </span>
     <a id="_idIndexMarker1129">
     </a>
     <span class="koboSpan" id="kobo.634.1">
      AWS Management Console, go
     </span>
     <a id="_idIndexMarker1130">
     </a>
     <span class="koboSpan" id="kobo.635.1">
      to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.636.1">
       Amazon
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.637.1">
        Cognito
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.638.1">
       service.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.639.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.640.1">
       Identity pools
      </span>
     </strong>
     <span class="koboSpan" id="kobo.641.1">
      and then
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.642.1">
       Create
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.643.1">
        identity pool
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.644.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.645.1">
      Configure the identity pool by selecting
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.646.1">
       Authenticated access
      </span>
     </strong>
     <span class="koboSpan" id="kobo.647.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.648.1">
       Amazon Cognito user pool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.649.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.650.1">
       Authenticated identity sources
      </span>
     </strong>
     <span class="koboSpan" id="kobo.651.1">
      .
     </span>
     <span class="koboSpan" id="kobo.651.2">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.652.1">
       Next
      </span>
     </strong>
     <span class="koboSpan" id="kobo.653.1">
      to reach the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.654.1">
       Configure
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.655.1">
        permissions
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.656.1">
       page.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer267">
     <span class="koboSpan" id="kobo.657.1">
      <img alt="Figure 9.19 – Configuring the authentication providers" src="image/B21384_09_19.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.658.1">
     Figure 9.19 – Configuring the authentication providers
    </span>
   </p>
   <ol>
    <li value="6">
     <span class="koboSpan" id="kobo.659.1">
      On
     </span>
     <a id="_idIndexMarker1131">
     </a>
     <span class="koboSpan" id="kobo.660.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.661.1">
       Configure permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.662.1">
      page, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.663.1">
       Create a new IAM role
      </span>
     </strong>
     <span class="koboSpan" id="kobo.664.1">
      and specify IAM roles for authenticated
     </span>
     <a id="_idIndexMarker1132">
     </a>
     <span class="koboSpan" id="kobo.665.1">
      users by giving a role name.
     </span>
     <span class="koboSpan" id="kobo.665.2">
      We can use
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.666.1">
       MY_IDP_AUTHROLE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.667.1">
      as the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.668.1">
       IAM role name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.669.1">
      .
     </span>
     <span class="koboSpan" id="kobo.669.2">
      Click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.670.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.671.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.672.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer268">
     <span class="koboSpan" id="kobo.673.1">
      <img alt="Figure 9.20 – Selecting an authenticated role" src="image/B21384_09_20.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.674.1">
     Figure 9.20 – Selecting an authenticated role
    </span>
   </p>
   <ol>
    <li value="7">
     <span class="koboSpan" id="kobo.675.1">
      Enter
     </span>
     <a id="_idIndexMarker1133">
     </a>
     <span class="koboSpan" id="kobo.676.1">
      the
     </span>
     <a id="_idIndexMarker1134">
     </a>
     <span class="koboSpan" id="kobo.677.1">
      values for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.678.1">
       User pool ID
      </span>
     </strong>
     <span class="koboSpan" id="kobo.679.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.680.1">
       App
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.681.1">
        client ID
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.682.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer269">
     <span class="koboSpan" id="kobo.683.1">
      <img alt="Figure 9.21 – The user pool details" src="image/B21384_09_21.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.684.1">
     Figure 9.21 – The user pool details
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.685.1">
     Leave the other values as default and click
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.686.1">
      on
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.687.1">
       Next
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.688.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer270">
     <span class="koboSpan" id="kobo.689.1">
      <img alt="Figure 9.22 – The attributes for access control" src="image/B21384_09_22.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.690.1">
     Figure 9.22 – The attributes for access control
    </span>
   </p>
   <ol>
    <li value="8">
     <span class="koboSpan" id="kobo.691.1">
      Give a
     </span>
     <a id="_idIndexMarker1135">
     </a>
     <span class="koboSpan" id="kobo.692.1">
      name for the identity pool
     </span>
     <a id="_idIndexMarker1136">
     </a>
     <span class="koboSpan" id="kobo.693.1">
      and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.694.1">
       Next
      </span>
     </strong>
     <span class="koboSpan" id="kobo.695.1">
      to finish
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.696.1">
       the configuration.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer271">
     <span class="koboSpan" id="kobo.697.1">
      <img alt="Figure 9.23 – The final configuration page" src="image/B21384_09_23.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.698.1">
     Figure 9.23 – The final configuration page
    </span>
   </p>
   <ol>
    <li value="9">
     <span class="koboSpan" id="kobo.699.1">
      On
     </span>
     <a id="_idIndexMarker1137">
     </a>
     <span class="koboSpan" id="kobo.700.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.701.1">
       Review and create
      </span>
     </strong>
     <span class="koboSpan" id="kobo.702.1">
      page, review everything and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.703.1">
       Create
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.704.1">
        identity pool
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.705.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.706.1">
      We should see
     </span>
     <a id="_idIndexMarker1138">
     </a>
     <span class="koboSpan" id="kobo.707.1">
      a prompt stating that the role has been created successfully; click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.708.1">
        View role
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.709.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer272">
     <span class="koboSpan" id="kobo.710.1">
      <img alt="Figure 9.24 – The prompt after successful role creation for the identity pool" src="image/B21384_09_24.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.711.1">
     Figure 9.24 – The prompt after successful role creation for the identity pool
    </span>
   </p>
   <ol>
    <li value="11">
     <span class="koboSpan" id="kobo.712.1">
      The role for authenticated users should have permission to access S3 buckets.
     </span>
     <span class="koboSpan" id="kobo.712.2">
      Make sure to grant access rights for the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.713.1">
       AmazonS3ReadonlyAccess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.714.1">
      action.
     </span>
     <span class="koboSpan" id="kobo.714.2">
      Click on
     </span>
     <a id="_idIndexMarker1139">
     </a>
     <span class="koboSpan" id="kobo.715.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.716.1">
       Add permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.717.1">
      dropdown
     </span>
     <a id="_idIndexMarker1140">
     </a>
     <span class="koboSpan" id="kobo.718.1">
      and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.719.1">
       Add policy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.720.1">
      .
     </span>
     <span class="koboSpan" id="kobo.720.2">
      Search for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.721.1">
       AmazonS3ReadonlyAccess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.722.1">
      policy, select it, and click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.723.1">
        Add permissions
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.724.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer273">
     <span class="koboSpan" id="kobo.725.1">
      <img alt="Figure 9.25 – The permission policies" src="image/B21384_09_25.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.726.1">
     Figure 9.25 – The permission policies
    </span>
   </p>
   <ol>
    <li value="12">
     <span class="koboSpan" id="kobo.727.1">
      To authenticate a user in the user pool, we can use the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.728.1">
       Amazon Cognito Identity SDK
      </span>
     </strong>
     <span class="koboSpan" id="kobo.729.1">
      or
     </span>
     <a id="_idIndexMarker1141">
     </a>
     <span class="koboSpan" id="kobo.730.1">
      directly use AWS CLI’s
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.731.1">
       cognito-idp
      </span>
     </strong>
     <span class="koboSpan" id="kobo.732.1">
      commands.
     </span>
     <span class="koboSpan" id="kobo.732.2">
      For this, go to AWS CloudShell and run the following command by providing the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.733.1">
       &lt;username&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.734.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.735.1">
       &lt;password&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.736.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.737.1">
       &lt;client-id&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.738.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.739.1">
       &lt;region&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.740.1">
      of the user we want
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.741.1">
       to authenticate:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.742.1">aws cognito-idp initiate-auth</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.743.1">--auth-flow USER_PASSWORD_AUTH</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.744.1"> --auth-parameters USERNAME=&lt;username&gt;,PASSWORD=&lt;password&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.745.1"> --client-id &lt;client-id&gt; --region &lt;region&gt;</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.746.1">
       We should
      </span>
      <a id="_idIndexMarker1142">
      </a>
      <span class="koboSpan" id="kobo.747.1">
       get a challenge response asking us to give a
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.748.1">
        new password.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer274">
     <span class="koboSpan" id="kobo.749.1">
      <img alt="Figure 9.26 – The challenge response asking us to give a new password" src="image/B21384_09_26.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.750.1">
     Figure 9.26 – The challenge response asking us to give a new password
    </span>
   </p>
   <ol>
    <li value="13">
     <span class="koboSpan" id="kobo.751.1">
      We need
     </span>
     <a id="_idIndexMarker1143">
     </a>
     <span class="koboSpan" id="kobo.752.1">
      to respond to the challenge to give the user a new password using the following command by giving the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.753.1">
       user-pool-id
      </span>
     </strong>
     <span class="koboSpan" id="kobo.754.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.755.1">
       client-id
      </span>
     </strong>
     <span class="koboSpan" id="kobo.756.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.757.1">
       NEW_PASSWORD
      </span>
     </strong>
     <span class="koboSpan" id="kobo.758.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.759.1">
       USERNAME
      </span>
     </strong>
     <span class="koboSpan" id="kobo.760.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.761.1">
       session
      </span>
     </strong>
     <span class="koboSpan" id="kobo.762.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.763.1">
       region
      </span>
     </strong>
     <span class="koboSpan" id="kobo.764.1">
      .
     </span>
     <span class="koboSpan" id="kobo.764.2">
      The session should be the one we received in response to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.765.1">
       previous command:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.766.1">aws cognito-idp admin-respond-to-auth-challenge</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.767.1">--user-pool-id &lt;user-pool-id&gt; --client-id &lt;client-id&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.768.1"> --challenge-name NEW_PASSWORD_REQUIRED --challenge-responses NEW_PASSWORD=&lt;new-password&gt;,USERNAME=&lt;username&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.769.1"> --session &lt;session&gt; --region &lt;region&gt;</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.770.1">
       We should get a screen showing the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.771.1">
        RefreshToken
       </span>
      </strong>
      <span class="koboSpan" id="kobo.772.1">
       and
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.773.1">
        IdToken
       </span>
      </strong>
      <span class="koboSpan" id="kobo.774.1">
       .
      </span>
      <span class="koboSpan" id="kobo.774.2">
       We should get the screen as follows; take note of the
      </span>
      <span class="No-Break">
       <strong class="bold">
        <span class="koboSpan" id="kobo.775.1">
         IdToken
        </span>
       </strong>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.776.1">
        value.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer275">
     <span class="koboSpan" id="kobo.777.1">
      <img alt="Figure 9.27 – The response after the password change" src="image/B21384_09_27.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.778.1">
     Figure 9.27 – The response after the password change
    </span>
   </p>
   <ol>
    <li value="14">
     <span class="koboSpan" id="kobo.779.1">
      To
     </span>
     <a id="_idIndexMarker1144">
     </a>
     <span class="koboSpan" id="kobo.780.1">
      get
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.781.1">
       IdentityId
      </span>
     </strong>
     <span class="koboSpan" id="kobo.782.1">
      , run the following
     </span>
     <a id="_idIndexMarker1145">
     </a>
     <span class="koboSpan" id="kobo.783.1">
      command by providing the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.784.1">
       &lt;identity-pool-id&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.785.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.786.1">
       &lt;region&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.787.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.788.1">
       &lt;user-pool-id&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.789.1">
      of the identity pool that we created previously, as well as the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.790.1">
       &lt;id-token&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.791.1">
      we received from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.792.1">
       previous step:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.793.1">aws cognito-identity get-id</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.794.1">--identity-pool-id &lt;identity-pool-id&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.795.1">--logins "cognito-idp.&lt;region&gt;.amazonaws.com/&lt;user-pool-id&gt;=&lt;id-token&gt;" --region &lt;region&gt;</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.796.1">
       We should get a screen like the following showing us
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.797.1">
        the
       </span>
      </span>
      <span class="No-Break">
       <strong class="bold">
        <span class="koboSpan" id="kobo.798.1">
         IdentityId
        </span>
       </strong>
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.799.1">
        .
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer276">
     <span class="koboSpan" id="kobo.800.1">
      <img alt="Figure 9.28 – The response to the get-id command" src="image/B21384_09_28.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.801.1">
     Figure 9.28 – The response to the get-id command
    </span>
   </p>
   <ol>
    <li value="15">
     <span class="koboSpan" id="kobo.802.1">
      Use the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.803.1">
       IdentityId
      </span>
     </strong>
     <span class="koboSpan" id="kobo.804.1">
      obtained from the previous step to get temporary
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.805.1">
       AWS credentials:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.806.1">aws cognito-identity get-credentials-for-identity</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.807.1">--identity-id &lt;identity-id&gt; --logins "cognito-idp.&lt;region&gt;.amazonaws.com/&lt;user-pool-id&gt;=&lt;id-token&gt;"</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.808.1">--region &lt;region&gt;</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.809.1">
       This
      </span>
      <a id="_idIndexMarker1146">
      </a>
      <span class="koboSpan" id="kobo.810.1">
       command will return temporary AWS access
      </span>
      <a id="_idIndexMarker1147">
      </a>
      <span class="koboSpan" id="kobo.811.1">
       and secret keys, as well as a
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.812.1">
        session token.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer277">
     <span class="koboSpan" id="kobo.813.1">
      <img alt="Figure 9.29 – The response to the get-credentials-for-identity command" src="image/B21384_09_29.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.814.1">
     Figure 9.29 – The response to the get-credentials-for-identity command
    </span>
   </p>
   <ol>
    <li value="16">
     <span class="koboSpan" id="kobo.815.1">
      Configure the AWS CLI with the temporary credentials obtained in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.816.1">
       previous step.
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.817.1">aws configure set aws_access_key_id &lt;access-key&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.818.1">aws configure set aws_secret_access_key &lt;secret-key&gt;</span></strong>
<strong class="bold"><span class="koboSpan" id="kobo.819.1">aws configure set aws_session_token &lt;session-token&gt;</span></strong></pre>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.820.1">
       These commands do not return any response as
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.821.1">
        shown below:
       </span>
      </span>
     </p>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer278">
     <span class="koboSpan" id="kobo.822.1">
      <img alt="Figure 9.30 – Configuring the AWS CLI" src="image/B21384_09_30.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.823.1">
     Figure 9.30 – Configuring the AWS CLI
    </span>
   </p>
   <ol>
    <li value="17">
     <span class="koboSpan" id="kobo.824.1">
      We
     </span>
     <a id="_idIndexMarker1148">
     </a>
     <span class="koboSpan" id="kobo.825.1">
      can now use the AWS CLI to list our
     </span>
     <a id="_idIndexMarker1149">
     </a>
     <span class="koboSpan" id="kobo.826.1">
      S3 buckets using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.827.1">
       aws s3
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.828.1">
        ls
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.829.1">
       command.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer279">
     <span class="koboSpan" id="kobo.830.1">
      <img alt="Figure 9.31 – The response to the s3 ls command" src="image/B21384_09_31.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.831.1">
     Figure 9.31 – The response to the s3 ls command
    </span>
   </p>
   <ol>
    <li value="18">
     <span class="koboSpan" id="kobo.832.1">
      Navigate back to our identity pool and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.833.1">
       User statistics
      </span>
     </strong>
     <span class="koboSpan" id="kobo.834.1">
      .
     </span>
     <span class="koboSpan" id="kobo.834.2">
      We should see that we have been authenticated successfully via the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.835.1">
       identity pool.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer280">
     <span class="koboSpan" id="kobo.836.1">
      <img alt="Figure 9.32 – The user statistics" src="image/B21384_09_32.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.837.1">
     Figure 9.32 – The user statistics
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.838.1">
     In this recipe, we made use of an identity pool to access
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.839.1">
      AWS resources.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-369">
    <a id="_idTextAnchor373">
    </a>
    <span class="koboSpan" id="kobo.840.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.841.1">
     To access
    </span>
    <a id="_idIndexMarker1150">
    </a>
    <span class="koboSpan" id="kobo.842.1">
     Amazon S3 using an identity pool with
    </span>
    <a id="_idIndexMarker1151">
    </a>
    <span class="koboSpan" id="kobo.843.1">
     Amazon Cognito user pool as the IdP and list S3 buckets via the AWS CLI, we first created a user pool and a user within it.
    </span>
    <span class="koboSpan" id="kobo.843.2">
     Then, we set up an identity pool, defined IAM roles, and configured permissions for authenticated users, including listing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.844.1">
      S3 buckets.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.845.1">
     Next, we obtained an ID token through the AWS CLI’s
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.846.1">
      cognito-idp
     </span>
    </strong>
    <span class="koboSpan" id="kobo.847.1">
     commands, initiated authentication, and got an ID from the identity pool.
    </span>
    <span class="koboSpan" id="kobo.847.2">
     With the obtained ID, we retrieved temporary AWS credentials.
    </span>
    <span class="koboSpan" id="kobo.847.3">
     After configuring the AWS CLI with these credentials, we used it to list our
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.848.1">
      S3 buckets.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.849.1">
     This process allows secure and controlled access to S3 resources via identity-based authentication, ensuring that users are authorized to perform specific actions on the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.850.1">
      S3 service.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-370">
    <a id="_idTextAnchor374">
    </a>
    <span class="koboSpan" id="kobo.851.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.852.1">
     Let us see some more concepts related to Amazon Cognito that will help us further understand
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.853.1">
      the service:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.854.1">
       Social IdPs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.855.1">
      : Both
     </span>
     <a id="_idIndexMarker1152">
     </a>
     <span class="koboSpan" id="kobo.856.1">
      Cognito user pools and identity pools can be configured to allow users to sign in using social IdPs such as Facebook, Google, or Amazon.
     </span>
     <span class="koboSpan" id="kobo.856.2">
      This extends the authentication options for our application and provides a seamless sign-in experience for users who may prefer to use their existing social
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.857.1">
       media accounts.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.858.1">
       MFA
      </span>
     </strong>
     <span class="koboSpan" id="kobo.859.1">
      : We can
     </span>
     <a id="_idIndexMarker1153">
     </a>
     <span class="koboSpan" id="kobo.860.1">
      enable MFA in both Cognito user pools and identity pools to enhance security.
     </span>
     <span class="koboSpan" id="kobo.860.2">
      With MFA, users are required to provide an additional authentication factor, such as a one-time code from a mobile app or SMS, in addition to their password.
     </span>
     <span class="koboSpan" id="kobo.860.3">
      This significantly strengthens the security of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.861.1">
       user authentication.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.862.1">
       Custom authentication challenges
      </span>
     </strong>
     <span class="koboSpan" id="kobo.863.1">
      : Cognito user pools allow us to set up custom authentication
     </span>
     <a id="_idIndexMarker1154">
     </a>
     <span class="koboSpan" id="kobo.864.1">
      challenges.
     </span>
     <span class="koboSpan" id="kobo.864.2">
      This can be useful for scenarios where we need users to complete specific tasks or provide additional information during the authentication process.
     </span>
     <span class="koboSpan" id="kobo.864.3">
      We can customize the challenge flow to match our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.865.1">
       application’s requirements.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.866.1">
     Exploring every feature
    </span>
    <a id="_idIndexMarker1155">
    </a>
    <span class="koboSpan" id="kobo.867.1">
     of Amazon Cognito in depth would
    </span>
    <a id="_idIndexMarker1156">
    </a>
    <span class="koboSpan" id="kobo.868.1">
     need a book of its own.
    </span>
    <span class="koboSpan" id="kobo.868.2">
     Therefore, additional links are provided in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.869.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.870.1">
     sections of both this recipe and the previous one to allow you to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.871.1">
      explore further.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-371">
    <a id="_idTextAnchor375">
    </a>
    <span class="koboSpan" id="kobo.872.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.873.1">
      We can learn about
     </span>
     <a id="_idIndexMarker1157">
     </a>
     <span class="koboSpan" id="kobo.874.1">
      using Federated IdPs with Amazon Cognito
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.875.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/using-federated-identity-providers-with-amazon-cognito">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.876.1">
        https://www.cloudericks.com/blog/using-federated-identity-providers-with-amazon-cognito
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.877.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.878.1">
      Read more about troubleshooting security incidents using AWS Cognito logs
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.879.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/troubleshooting-security-incidents-using-aws-cognito-logs">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.880.1">
        https://www.cloudericks.com/blog/troubleshooting-security-incidents-using-aws-cognito-logs
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.881.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-372">
    <a id="_idTextAnchor376">
    </a>
    <span class="koboSpan" id="kobo.882.1">
     Using AWS Simple AD for creating a lightweight directory solution
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.883.1">
     AWS Simple AD, powered by a Samba 4 Active Directory Compatible Server, is a lightweight standalone
    </span>
    <a id="_idIndexMarker1158">
    </a>
    <span class="koboSpan" id="kobo.884.1">
     managed directory service provided by AWS, catering especially to small and medium-sized businesses seeking the functionality of directory services without the complexity of managing on-premise infrastructure.
    </span>
    <span class="koboSpan" id="kobo.884.2">
     Available in two sizes, the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.885.1">
      Small
     </span>
    </strong>
    <span class="koboSpan" id="kobo.886.1">
     option is intended for environments with up to 500 users (or approximately 2,000 objects, including users, groups, and computers), while the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.887.1">
      Large
     </span>
    </strong>
    <span class="koboSpan" id="kobo.888.1">
     option accommodates environments with up to 5,000 users (or roughly
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.889.1">
      20,000 objects).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.890.1">
     Simple AD provides
    </span>
    <a id="_idIndexMarker1159">
    </a>
    <span class="koboSpan" id="kobo.891.1">
     essential services such as user account management, group membership organization, group policy application, secure Amazon EC2 instance connections, and Kerberos-based
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.892.1">
      Single Sign-On
     </span>
    </strong>
    <span class="koboSpan" id="kobo.893.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.894.1">
      SSO
     </span>
    </strong>
    <span class="koboSpan" id="kobo.895.1">
     ) functionality.
    </span>
    <span class="koboSpan" id="kobo.895.2">
     It is
    </span>
    <a id="_idIndexMarker1160">
    </a>
    <span class="koboSpan" id="kobo.896.1">
     compatible with various applications and tools dependent on Microsoft Active Directory, facilitating access to AWS applications such as WorkSpaces, Amazon WorkDocs, and Amazon WorkMail for users.
    </span>
    <span class="koboSpan" id="kobo.896.2">
     However, Simple AD does not support certain services, including Amazon AppStream 2.0, Amazon Chime, or Amazon RDS for SQL Server
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.897.1">
      and Oracle.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-373">
    <a id="_idTextAnchor377">
    </a>
    <span class="koboSpan" id="kobo.898.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.899.1">
     We need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.900.1">
      this recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.901.1">
      A working AWS account and a user, as described in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.902.1">
       Technical
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.903.1">
        requirements
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.904.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.905.1">
      A VPC configured with at least two subnets across different availability zones following the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.906.1">
       Setting up VPC plus VPC resources with minimal effort
      </span>
     </em>
     <span class="koboSpan" id="kobo.907.1">
      recipe from
     </span>
     <a href="B21384_05.xhtml#_idTextAnchor169">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.908.1">
         Chapter 5
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.909.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-374">
    <a id="_idTextAnchor378">
    </a>
    <span class="koboSpan" id="kobo.910.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.911.1">
     We will use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.912.1">
      following steps:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.913.1">
      Log into the AWS management console and go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.914.1">
       Directory Service
      </span>
     </strong>
     <span class="koboSpan" id="kobo.915.1">
      .
     </span>
     <span class="koboSpan" id="kobo.915.2">
      We should see a screen like
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.916.1">
       the following.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer281">
     <span class="koboSpan" id="kobo.917.1">
      <img alt="Figure 9.33 – The Set up directory screen" src="image/B21384_09_33.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.918.1">
     Figure 9.33 – The Set up directory screen
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.919.1">
      Select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.920.1">
       Simple AD
      </span>
     </strong>
     <span class="koboSpan" id="kobo.921.1">
      from the drop-down menu, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.922.1">
        Figure 9
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.923.1">
       .34
      </span>
     </em>
     <span class="koboSpan" id="kobo.924.1">
      , and then
     </span>
     <a id="_idIndexMarker1161">
     </a>
     <span class="koboSpan" id="kobo.925.1">
      click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.926.1">
       Set up directory
      </span>
     </strong>
     <span class="koboSpan" id="kobo.927.1">
      button
     </span>
     <a id="_idIndexMarker1162">
     </a>
     <span class="koboSpan" id="kobo.928.1">
      shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.929.1">
        Figure 9
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.930.1">
       .33
      </span>
     </em>
     <span class="koboSpan" id="kobo.931.1">
      .
     </span>
     <span class="koboSpan" id="kobo.931.2">
      Click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.932.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.933.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.934.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer282">
     <span class="koboSpan" id="kobo.935.1">
      <img alt="Figure 9.34 – The Set up directory drop-down menu" src="image/B21384_09_34.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.936.1">
     Figure 9.34 – The Set up directory drop-down menu
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.937.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.938.1">
       Select directory type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.939.1">
      page, make sure that
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.940.1">
       Simple AD
      </span>
     </strong>
     <span class="koboSpan" id="kobo.941.1">
      is selected and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.942.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.943.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.944.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.945.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.946.1">
       Enter directory information
      </span>
     </strong>
     <span class="koboSpan" id="kobo.947.1">
      page, under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.948.1">
       Directory size
      </span>
     </strong>
     <span class="koboSpan" id="kobo.949.1">
      , choose
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.950.1">
       Small
      </span>
     </strong>
     <span class="koboSpan" id="kobo.951.1">
      .
     </span>
     <span class="koboSpan" id="kobo.951.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.952.1">
       Directory DNS name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.953.1">
      , enter
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.954.1">
       corp.cloudericks.com
      </span>
     </strong>
     <span class="koboSpan" id="kobo.955.1">
      , and for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.956.1">
       Directory NetBIOS name - optional
      </span>
     </strong>
     <span class="koboSpan" id="kobo.957.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.958.1">
       enter
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.959.1">
        CORP
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.960.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer283">
     <span class="koboSpan" id="kobo.961.1">
      <img alt="Figure 9.35 – Configuring Simple AD" src="image/B21384_09_35.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.962.1">
     Figure 9.35 – Configuring Simple AD
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.963.1">
      Scroll
     </span>
     <a id="_idIndexMarker1163">
     </a>
     <span class="koboSpan" id="kobo.964.1">
      down and
     </span>
     <a id="_idIndexMarker1164">
     </a>
     <span class="koboSpan" id="kobo.965.1">
      provide a value for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.966.1">
       Administrator password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.967.1">
      and confirm the password in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.968.1">
       Confirm password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.969.1">
      field.
     </span>
     <span class="koboSpan" id="kobo.969.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.970.1">
       Directory description - optional
      </span>
     </strong>
     <span class="koboSpan" id="kobo.971.1">
      , provide the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.972.1">
       Cloudericks corporate directory
      </span>
     </strong>
     <span class="koboSpan" id="kobo.973.1">
      description for the directory, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.974.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.975.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.976.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.977.1">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.978.1">
       VPC
      </span>
     </strong>
     <span class="koboSpan" id="kobo.979.1">
      , select a VPC with at least two subnets, as discussed in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.980.1">
       Getting ready
      </span>
     </em>
     <span class="koboSpan" id="kobo.981.1">
      section.
     </span>
     <span class="koboSpan" id="kobo.981.2">
      Select two of its public subnets under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.982.1">
       Subnets
      </span>
     </strong>
     <span class="koboSpan" id="kobo.983.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.984.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.985.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.986.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.987.1">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.988.1">
       Subnets
      </span>
     </strong>
     <span class="koboSpan" id="kobo.989.1">
      , choose the subnets for the domain controllers.
     </span>
     <span class="koboSpan" id="kobo.989.2">
      Ensure that they are in different Availability Zones and click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.990.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.991.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.992.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.993.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.994.1">
       Review &amp; create
      </span>
     </strong>
     <span class="koboSpan" id="kobo.995.1">
      page, review all details and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.996.1">
       Create directory
      </span>
     </strong>
     <span class="koboSpan" id="kobo.997.1">
      .
     </span>
     <span class="koboSpan" id="kobo.997.2">
      The status of our directory will be
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.998.1">
       Creating
      </span>
     </strong>
     <span class="koboSpan" id="kobo.999.1">
      and once creation is complete, it will change
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1000.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1001.1">
        Active
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1002.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <h2 id="_idParaDest-375">
    <a id="_idTextAnchor379">
    </a>
    <span class="koboSpan" id="kobo.1003.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1004.1">
     AWS Simple AD
    </span>
    <a id="_idIndexMarker1165">
    </a>
    <span class="koboSpan" id="kobo.1005.1">
     provides a managed
    </span>
    <a id="_idIndexMarker1166">
    </a>
    <span class="koboSpan" id="kobo.1006.1">
     Active Directory-compatible directory service, offering users a straightforward solution for user authentication, group management, and domain join operations in the AWS cloud.
    </span>
    <span class="koboSpan" id="kobo.1006.2">
     Users can easily create a Simple AD directory through the AWS Management Console or CLI, specifying domain details and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1007.1">
      size requirements.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1008.1">
     Once created, Simple AD supports standard directory features such as LDAP authentication and Kerberos-based SSO, allowing organizations to manage user accounts and access controls efficiently.
    </span>
    <span class="koboSpan" id="kobo.1008.2">
     This service is particularly beneficial for small and mid-sized businesses seeking a cost-effective and hassle-free Active Directory solution without the complexity of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1009.1">
      self-managed infrastructure.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1010.1">
     AWS Simple AD allows efficient user and group management, supports Kerberos-based SSO for seamless access to multiple applications, and integrates with various AWS services such as Amazon EC2, RDS, and WorkSpaces.
    </span>
    <span class="koboSpan" id="kobo.1010.2">
     Simple AD also supports LDAP, making it suitable for applications requiring directory services for authentication and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1011.1">
      information retrieval.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-376">
    <a id="_idTextAnchor380">
    </a>
    <span class="koboSpan" id="kobo.1012.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1013.1">
     Here are the different ways we can use AWS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1014.1">
      Simple AD:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1015.1">
       User and group management
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1016.1">
      : Simple
     </span>
     <a id="_idIndexMarker1167">
     </a>
     <span class="koboSpan" id="kobo.1017.1">
      AD allows you to manage users and groups efficiently.
     </span>
     <span class="koboSpan" id="kobo.1017.2">
      You can create, modify, and delete user accounts, as well as organize them into groups for easier access
     </span>
     <a id="_idIndexMarker1168">
     </a>
     <span class="koboSpan" id="kobo.1018.1">
      control and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1019.1">
       permissions management.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1020.1">
       SSO
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1021.1">
      : Simple AD
     </span>
     <a id="_idIndexMarker1169">
     </a>
     <span class="koboSpan" id="kobo.1022.1">
      supports Kerberos-based SSO, enabling users to log in once and gain access to multiple applications and services without re-entering
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1023.1">
       their credentials.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1024.1">
       Lightweight Directory Access Protocol
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1025.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1026.1">
       LDAP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1027.1">
      ): Simple AD supports LDAP, allowing
     </span>
     <a id="_idIndexMarker1170">
     </a>
     <span class="koboSpan" id="kobo.1028.1">
      applications that require directory services to authenticate and retrieve information from
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1029.1">
       the directory.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1030.1">
       Integration with AWS services
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1031.1">
      : Simple AD integrates seamlessly with various
     </span>
     <a id="_idIndexMarker1171">
     </a>
     <span class="koboSpan" id="kobo.1032.1">
      AWS services, enabling you to manage access and permissions for resources within your
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1033.1">
       AWS environment.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1034.1">
       Amazon EC2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1035.1">
      : Manage
     </span>
     <a id="_idIndexMarker1172">
     </a>
     <span class="koboSpan" id="kobo.1036.1">
      access to EC2 instances using
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1037.1">
       domain credentials.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1038.1">
       Amazon RDS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1039.1">
      : Integrate
     </span>
     <a id="_idIndexMarker1173">
     </a>
     <span class="koboSpan" id="kobo.1040.1">
      with RDS instances for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1041.1">
       database authentication.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1042.1">
       Amazon WorkSpaces
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1043.1">
      : Use
     </span>
     <a id="_idIndexMarker1174">
     </a>
     <span class="koboSpan" id="kobo.1044.1">
      Simple AD to manage user access to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1045.1">
       virtual desktops.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1046.1">
       Cost-effective directory services
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1047.1">
      : Simple AD provides a cost-effective solution for
     </span>
     <a id="_idIndexMarker1175">
     </a>
     <span class="koboSpan" id="kobo.1048.1">
      small to medium-sized businesses that need basic directory services without the need for a full Active
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1049.1">
       Directory setup.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1050.1">
     In this recipe, we explored Simple AD, a cost-effective and straightforward directory service within AWS ideal for
    </span>
    <a id="_idIndexMarker1176">
    </a>
    <span class="koboSpan" id="kobo.1051.1">
     small to medium-sized businesses.
    </span>
    <span class="koboSpan" id="kobo.1051.2">
     AWS also supports other directory solutions, including
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1052.1">
      AWS Managed Microsoft AD
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1053.1">
     , which offers fully managed Active Directory services;
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1054.1">
      AD Connector
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1055.1">
     , a gateway to redirect
    </span>
    <a id="_idIndexMarker1177">
    </a>
    <span class="koboSpan" id="kobo.1056.1">
     directory
    </span>
    <a id="_idIndexMarker1178">
    </a>
    <span class="koboSpan" id="kobo.1057.1">
     requests to
    </span>
    <a id="_idIndexMarker1179">
    </a>
    <span class="koboSpan" id="kobo.1058.1">
     on-premises AD;
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1059.1">
      Amazon Cognito User Pools
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1060.1">
     , providing user sign-up and sign-in for web and mobile apps; and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1061.1">
      Amazon Cloud Directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1062.1">
     , a scalable
    </span>
    <a id="_idIndexMarker1180">
    </a>
    <span class="koboSpan" id="kobo.1063.1">
     directory for managing hierarchical
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1064.1">
      data relationships.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-377">
    <a id="_idTextAnchor381">
    </a>
    <span class="koboSpan" id="kobo.1065.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1066.1">
      Read more about Simple AD
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1067.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-aws-simple-ad">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1068.1">
        https://www.cloudericks.com/blog/getting-started-with-aws-simple-ad
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1069.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1070.1">
      Read about
     </span>
     <a id="_idIndexMarker1181">
     </a>
     <span class="koboSpan" id="kobo.1071.1">
      different directory solutions in AWS such as AWS Managed Microsoft AD, Simple AD, AD Connector, Amazon Cognito User Pools, and Amazon Cloud Directory
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1072.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/exploring-aws-directory-solutions">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1073.1">
        https://www.cloudericks.com/blog/exploring-aws-directory-solutions
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1074.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-378">
    <a id="_idTextAnchor382">
    </a>
    <span class="koboSpan" id="kobo.1075.1">
     Using Microsoft Entra ID as the identity provider within AWS
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.1076.1">
     In today’s tech
    </span>
    <a id="_idIndexMarker1182">
    </a>
    <span class="koboSpan" id="kobo.1077.1">
     landscape, numerous organizations are adopting a multi-cloud strategy, utilizing different public clouds such as AWS and Azure for deploying applications.
    </span>
    <span class="koboSpan" id="kobo.1077.2">
     A common practice among these organizations is managing user identities with Microsoft Entra ID.
    </span>
    <span class="koboSpan" id="kobo.1077.3">
     The AWS IAM Identity Center offers a straightforward way to link our AWS accounts with Microsoft Entra ID.
    </span>
    <span class="koboSpan" id="kobo.1077.4">
     This integration yields two significant benefits: centralized management of identities and enhanced
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1078.1">
      user experience.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1079.1">
     Centralizing identity management in one location simplifies the responsibilities of IT teams and strengthens security protocols.
    </span>
    <span class="koboSpan" id="kobo.1079.2">
     Additionally, it relieves users of the hassle of handling multiple login credentials, streamlining the sign-in process and reducing the demand for IT support.
    </span>
    <span class="koboSpan" id="kobo.1079.3">
     In this recipe, we will delve into integrating Microsoft Entra ID with AWS IAM Identity Center, using Microsoft Entra ID as the IdP.
    </span>
    <span class="koboSpan" id="kobo.1079.4">
     We will conclude by demonstrating this setup using an Entra ID user to manage an S3 bucket, as an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1080.1">
      AWS resource.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-379">
    <a id="_idTextAnchor383">
    </a>
    <span class="koboSpan" id="kobo.1081.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1082.1">
     To complete this recipe, we need to ensure that the following additional requirements are in place in addition to those mentioned in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1083.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.1084.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1085.1">
      section:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1086.1">
      It’s essential to have an AWS account with AWS IAM Identity Center set up.
     </span>
     <span class="koboSpan" id="kobo.1086.2">
      For guidance on setting up IAM Identity Center, refer to the
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.1087.1">
         Chapter
        </span>
       </em>
      </span>
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.1088.1">
         1
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1089.1">
       recipes.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1090.1">
      An active Microsoft Entra ID tenant is also
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1091.1">
       a must-have.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1092.1">
      An
     </span>
     <a id="_idIndexMarker1183">
     </a>
     <span class="koboSpan" id="kobo.1093.1">
      administrator user in the Microsoft Entra ID tenant is essential for performing the configuration steps within
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1094.1">
       this recipe.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1095.1">
      A demo user with data for the attributes first name, last name, display name, and user principal name is also needed to test the configuration.
     </span>
     <span class="koboSpan" id="kobo.1095.2">
      Let us call the demo
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1096.1">
       user
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1097.1">
        demouser1
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1098.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1099.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1100.1">
     To successfully integrate users into the AWS IAM Identity Center through the AWS SSO Enterprise application in Azure, the users need values for the following attributes: first name, last name, display name, and user principal name.
    </span>
    <span class="koboSpan" id="kobo.1100.2">
     Without these attributes, the provisioning process may encounter errors, hindering the smooth and secure transition of users into the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1101.1">
      AWS environment.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1102.1">
     Next, we will see how to use Microsoft Entra ID as the IdP
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1103.1">
      within AWS.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-380">
    <a id="_idTextAnchor384">
    </a>
    <span class="koboSpan" id="kobo.1104.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1105.1">
     We will first download the metadata file from AWS, configure Microsoft Azure for IAM Identity Center integration with that metadata file, and continue with AWS IAM Identity Center set up in AWS.
    </span>
    <span class="koboSpan" id="kobo.1105.2">
     After that, we will go back to Azure to complete the configuration and finally will verify users
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1106.1">
      within AWS.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1107.1">
     Downloading the metadata file from AWS
    </span>
   </h3>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1108.1">
      Log in to
     </span>
     <a id="_idIndexMarker1184">
     </a>
     <span class="koboSpan" id="kobo.1109.1">
      the Management Console of an AWS account with permission to manage IAM Identity Center and go to the IAM Identity
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1110.1">
       Center service.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1111.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1112.1">
       Settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1113.1">
      in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1114.1">
       left sidebar.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1115.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1116.1">
       Settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1117.1">
      page, locate the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1118.1">
       Identity source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1119.1">
      section, click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1120.1">
       Actions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1121.1">
      pull-down menu, and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1122.1">
       Change
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1123.1">
        identity source
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1124.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1125.1">
      On
     </span>
     <a id="_idIndexMarker1185">
     </a>
     <span class="koboSpan" id="kobo.1126.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1127.1">
       Change identity source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1128.1">
      page, choose
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1129.1">
       External identity provider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1130.1">
      and click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1131.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1132.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1133.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.1134.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.1135.1">
     On the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1136.1">
      Change identity source
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1137.1">
     page, there are currently three options:
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1138.1">
      Identity Center directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1139.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1140.1">
      Active Directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1141.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1142.1">
      External identity provider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1143.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1143.2">
     If we select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1144.1">
      Identity Center directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1145.1">
     option, it will allow for the management of users and groups within IAM Identity Center, with users logging in through the AWS access portal.
    </span>
    <span class="koboSpan" id="kobo.1145.2">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1146.1">
      Active Directory
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1147.1">
     option is used for managing users and groups within AWS Managed Microsoft AD.
    </span>
    <span class="koboSpan" id="kobo.1147.2">
     We also have the flexibility to connect IAM Identity Center to an existing Active Directory using either AWS Managed Microsoft AD or AD Connector.
    </span>
    <span class="koboSpan" id="kobo.1147.3">
     In this scenario, users also sign in through the AWS access portal.
    </span>
    <span class="koboSpan" id="kobo.1147.4">
     The third option,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1148.1">
      External identity provider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1149.1">
     , is tailored for managing users and groups through an external IdP such as Microsoft Entra ID.
    </span>
    <span class="koboSpan" id="kobo.1149.2">
     Here, users first sign in to the IdP’s sign-in page, as we will see in this recipe, and are then redirected to the AWS access portal, where they can access their AWS accounts and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1150.1">
      cloud applications.
     </span>
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.1151.1">
     Once we click
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1152.1">
      Next
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1153.1">
     , we should see the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1154.1">
      Configure external identity provider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1155.1">
     page, which looks similar to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1156.1">
      the following:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer284">
     <span class="koboSpan" id="kobo.1157.1">
      <img alt="Figure 9.36 – The Configure external identity provider page" src="image/B21384_09_36.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1158.1">
     Figure 9.36 – The Configure external identity provider page
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.1159.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1160.1">
       Configure external identity provider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1161.1">
      page, within the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1162.1">
       Service provider metadata
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1163.1">
      section, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1164.1">
       Download metadata file
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1165.1">
      and save it on the computer.
     </span>
     <span class="koboSpan" id="kobo.1165.2">
      This file will be used when configuring the external IdP (e.g., Microsoft
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1166.1">
       Entra ID).
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1167.1">
     The metadata file
    </span>
    <a id="_idIndexMarker1186">
    </a>
    <span class="koboSpan" id="kobo.1168.1">
     we downloaded from IAM Identity Center includes the IAM Identity Center certificate and metadata details necessary for our IdP, which in this recipe is Microsoft Entra ID, to establish trust with IAM Identity Center as a service provider.
    </span>
    <span class="koboSpan" id="kobo.1168.2">
     Alternatively, instead of downloading, we can simply copy this information directly from the webpage and manually enter it into the service provider configuration section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1169.1">
      our IdP.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1170.1">
     Configuring Microsoft Azure for IAM Identity Center integration
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1171.1">
     We can
    </span>
    <a id="_idIndexMarker1187">
    </a>
    <span class="koboSpan" id="kobo.1172.1">
     configure Microsoft Azure for IAM Identity Center integration
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1173.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1174.1">
      Sign in to the Microsoft Azure portal as a user with the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1175.1">
       Application Administrator
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1176.1">
      role or a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1177.1">
       superset role.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1178.1">
      Navigate to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1179.1">
       Microsoft Entra ID
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1180.1">
      and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1181.1">
       Enterprise applications
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1182.1">
      from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1183.1">
       left sidebar.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1184.1">
      Click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1185.1">
       New application
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1186.1">
      , and on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1187.1">
       Browse Microsoft Entra Gallery
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1188.1">
      page, search for
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1189.1">
       AWS IAM
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.1190.1">
        Identity Center
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1191.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1192.1">
      Enter an application name and click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1193.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1194.1">
        Create
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1195.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1196.1">
      Open the application after it has been
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1197.1">
       successfully created.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1198.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1199.1">
       Single sign-on
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1200.1">
      from the left sidebar and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1201.1">
       SAML
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1202.1">
      as the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1203.1">
       SSO method.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1204.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1205.1">
       Upload metadata file
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1206.1">
      , and in the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1207.1">
       Upload metadata file
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1208.1">
      pane, click on the folder icon to select the metadata file that we downloaded in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1209.1">
       Step 5
      </span>
     </em>
     <span class="koboSpan" id="kobo.1210.1">
      of the previous section.
     </span>
     <span class="koboSpan" id="kobo.1210.2">
      Then click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1211.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1212.1">
        Add
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1213.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1214.1">
      Click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1215.1">
       Save
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1216.1">
      on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1217.1">
       Basic SAML
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1218.1">
        Configuration
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1219.1">
       pane.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1220.1">
      Scroll down to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1221.1">
       SAML Certificates
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1222.1">
      section of the page and download the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1223.1">
       Federation Metadata
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1224.1">
        XML
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1225.1">
       file.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1226.1">
     We can now go back to the AWS Management Console on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1227.1">
      Configure external identity provider
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1228.1">
     page and continue with the steps required.
    </span>
    <span class="koboSpan" id="kobo.1228.2">
     References to detailed steps, with screenshots for the steps to be done on the Azure side, are given within the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1229.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.1230.1">
     section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1231.1">
      this recipe.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1232.1">
     Continuing with the AWS IAM Identity Center setup
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1233.1">
     We can
    </span>
    <a id="_idIndexMarker1188">
    </a>
    <span class="koboSpan" id="kobo.1234.1">
     continue the steps required on AWS IAM Identity Center from the AWS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1235.1">
      Management Console:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1236.1">
      Navigate back to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1237.1">
       Configure external identity provider
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1238.1">
      page as we did in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1239.1">
       Downloading the metadata file from
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.1240.1">
        AWS
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1241.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1242.1">
      In
     </span>
     <a id="_idIndexMarker1189">
     </a>
     <span class="koboSpan" id="kobo.1243.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1244.1">
       Identity provider metadata
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1245.1">
      section, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1246.1">
       Choose file
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1247.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1248.1">
       IdP SAML metadata
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1249.1">
      and upload the file we downloaded in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1250.1">
       Configuring Microsoft Azure for IAM Identity Center
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.1251.1">
        integration
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1252.1">
       section.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer285">
     <span class="koboSpan" id="kobo.1253.1">
      <img alt="Figure 9.37 – Uploading the identity provider metadata" src="image/B21384_09_37.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1254.1">
     Figure 9.37 – Uploading the identity provider metadata
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.1255.1">
      Scroll down and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1256.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1257.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1258.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1259.1">
      Scroll down, and within the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1260.1">
       Review and confirm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1261.1">
      section, type
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1262.1">
       ACCEPT
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1263.1">
      , as shown in the following figure, and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1264.1">
       Change
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1265.1">
        identity source
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1266.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer286">
     <span class="koboSpan" id="kobo.1267.1">
      <img alt="Figure 9.38 – Reviewing and confirming the identity source change" src="image/B21384_09_38.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1268.1">
     Figure 9.38 – Reviewing and confirming the identity source change
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.1269.1">
      Within
     </span>
     <a id="_idIndexMarker1190">
     </a>
     <span class="koboSpan" id="kobo.1270.1">
      the settings page, we should now see a message for enabling
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1271.1">
       Automatic provisioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1272.1">
      with an
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1273.1">
       Enable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1274.1">
      button.
     </span>
     <span class="koboSpan" id="kobo.1274.2">
      Click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1275.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1276.1">
        Enable
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1277.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1278.1">
      Once the provisioning is enabled, we should see the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1279.1">
       SCIM endpoint
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1280.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1281.1">
       Access token
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1282.1">
      values for our identity source, as shown in the following figure.
     </span>
     <span class="koboSpan" id="kobo.1282.2">
      Save
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1283.1">
       this information.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer287">
     <span class="koboSpan" id="kobo.1284.1">
      <img alt="Figure 9.39 – The access token" src="image/B21384_09_39.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1285.1">
     Figure 9.39 – The access token
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1286.1">
     Let us now
    </span>
    <a id="_idIndexMarker1191">
    </a>
    <span class="koboSpan" id="kobo.1287.1">
     go back to the Azure portal and continue
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1288.1">
      the configuration.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1289.1">
     Continuing with the configuration in Microsoft Azure
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1290.1">
     Let us now
    </span>
    <a id="_idIndexMarker1192">
    </a>
    <span class="koboSpan" id="kobo.1291.1">
     go to the AWS IAM Identity Enterprise application we created in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1292.1">
      Configuring Microsoft Azure for IAM Identity Center integration
     </span>
    </em>
    <span class="koboSpan" id="kobo.1293.1">
     section and continue
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1294.1">
      setting up:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1295.1">
      Under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1296.1">
       Manage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1297.1">
      section on the left sidebar, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1298.1">
       Provisioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1299.1">
      , and set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1300.1">
       Provisioning Mode
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1301.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1302.1">
        Automatic
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1303.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1304.1">
      Under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1305.1">
       Admin Credentials
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1306.1">
      section, enter the AWS Identity Center SCIM endpoint that we saved in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.1307.1">
       Step 6
      </span>
     </em>
     <span class="koboSpan" id="kobo.1308.1">
      from the previous section under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1309.1">
       Tenant URL
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1310.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1311.1">
       Access token
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1312.1">
      under
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1313.1">
        Secret Token
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1314.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1315.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1316.1">
       Test Connection
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1317.1">
      , and if this is successful, click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1318.1">
       Save
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1319.1">
       under
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1320.1">
        Provisioning
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1321.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1322.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1323.1">
       Provisioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1324.1">
      tab, click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1325.1">
        Start provisioning
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1326.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1327.1">
      Under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1328.1">
       Manage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1329.1">
      section on the left sidebar, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1330.1">
       Users and groups
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1331.1">
      , and then on the panel on the right side, click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1332.1">
        Add user/group
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1333.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1334.1">
      Select the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1335.1">
       demouser1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1336.1">
      user that we created for the demo and click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1337.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.1338.1">
        Assign
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1339.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.1340.1">
     Once the provisioning is successful, we can head back to AWS IAM Identity Center to verify the user provisioning.
    </span>
    <span class="koboSpan" id="kobo.1340.2">
     It could take some time, usually up to around 30 minutes, for the users
    </span>
    <a id="_idIndexMarker1193">
    </a>
    <span class="koboSpan" id="kobo.1341.1">
     to appear in AWS.
    </span>
    <span class="koboSpan" id="kobo.1341.2">
     References to detailed steps with screenshots for the steps to be done on the Azure side are given within the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.1342.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.1343.1">
     section of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1344.1">
      this recipe.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.1345.1">
     Verifying Users on AWS IAM Identity Center
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.1346.1">
     We can verify
    </span>
    <a id="_idIndexMarker1194">
    </a>
    <span class="koboSpan" id="kobo.1347.1">
     the automatic user provisioning in AWS IAM Identity Center
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1348.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.1349.1">
      Navigate back to the IAM Identity
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1350.1">
       Center dashboard.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1351.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1352.1">
       Users
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1353.1">
      from the left sidebar.
     </span>
     <span class="koboSpan" id="kobo.1353.2">
      We should be able to see the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.1354.1">
       demouser1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1355.1">
      user in our AWS Identity Center.
     </span>
     <span class="koboSpan" id="kobo.1355.2">
      We can now log in to the AWS Identity Center using these user’s Microsoft Entra
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1356.1">
       ID credentials.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer288">
     <span class="koboSpan" id="kobo.1357.1">
      <img alt="Figure 9.40 – Azure user in AWS" src="image/B21384_09_40.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1358.1">
     Figure 9.40 – Azure user in AWS
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.1359.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1360.1">
       Settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1361.1">
      and copy the AWS access
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1362.1">
       portal URL.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1363.1">
      Paste this URL in another browser.
     </span>
     <span class="koboSpan" id="kobo.1363.2">
      We should be given a prompt to log in with our Microsoft Entra ID credentials.
     </span>
     <span class="koboSpan" id="kobo.1363.3">
      Enter the user’s principal name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1364.1">
       and password.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer289">
     <span class="koboSpan" id="kobo.1365.1">
      <img alt="Figure 9.41 – Signing in as a Microsoft user" src="image/B21384_09_41.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1366.1">
     Figure 9.41 – Signing in as a Microsoft user
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.1367.1">
     After entering
    </span>
    <a id="_idIndexMarker1195">
    </a>
    <span class="koboSpan" id="kobo.1368.1">
     the user’s principal name and password, we should be redirected to the AWS account as a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1369.1">
      logged-in user.
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer290">
     <span class="koboSpan" id="kobo.1370.1">
      <img alt="Figure 9.42 – The credentials of an Azure user in AWS account" src="image/B21384_09_42.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.1371.1">
     Figure 9.42 – The credentials of an Azure user in AWS account
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1372.1">
     We have used Microsoft Entra ID as our IdP in this recipe and logged in to an AWS account using the Microsoft Entra ID credentials.
    </span>
    <span class="koboSpan" id="kobo.1372.2">
     We will now need to provide the necessary permissions and access to this user
    </span>
    <a id="_idIndexMarker1196">
    </a>
    <span class="koboSpan" id="kobo.1373.1">
     using
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.1374.1">
      permission sets
     </span>
    </strong>
    <span class="koboSpan" id="kobo.1375.1">
     .
    </span>
    <span class="koboSpan" id="kobo.1375.2">
     We can also follow a similar approach that we did in this recipe to use other supported IdPs instead of Microsoft
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1376.1">
      Entra ID.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-381">
    <a id="_idTextAnchor385">
    </a>
    <span class="koboSpan" id="kobo.1377.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1378.1">
     SSO
    </span>
    <a id="_idIndexMarker1197">
    </a>
    <span class="koboSpan" id="kobo.1379.1">
     between AWS Identity Center and Azure Entra ID allows users to log in to AWS Identity Center using their Azure AD credentials.
    </span>
    <span class="koboSpan" id="kobo.1379.2">
     This provides a number of benefits, including improved security and convenience for users, reduced administrative overhead, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1380.1">
      improved compliance.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1381.1">
     SSO between AWS Identity Center and Azure Entra ID works by generating a SAML assertion from Azure AD and sending it to AWS Identity Center.
    </span>
    <span class="koboSpan" id="kobo.1381.2">
     AWS Identity Center then validates the SAML assertion and creates a session for the user, allowing them to access the AWS Identity Center application without having to enter their
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1382.1">
      credentials again.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.1383.1">
     When provisioning users from Azure into the AWS IAM Identity Center, it’s essential to seamlessly integrate them into AWS as if they were native AWS users.
    </span>
    <span class="koboSpan" id="kobo.1383.2">
     This involves assigning them to specific AWS accounts and granting permission sets that align with their respective roles within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1384.1">
      the organization.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-382">
    <a id="_idTextAnchor386">
    </a>
    <span class="koboSpan" id="kobo.1385.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1386.1">
     Let us explore some more important concepts related to integrating IAM Identity Center with Microsoft
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1387.1">
      Entra ID:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1388.1">
       User provisioning
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1389.1">
      : This is
     </span>
     <a id="_idIndexMarker1198">
     </a>
     <span class="koboSpan" id="kobo.1390.1">
      the process of automatically creating and managing user accounts in an application or system.
     </span>
     <span class="koboSpan" id="kobo.1390.2">
      In the context of SSO between AWS IAM Identity Center and Microsoft Entra ID, user provisioning allows us to automatically create AWS Identity Center user accounts for users who are already in Microsoft Entra ID.
     </span>
     <span class="koboSpan" id="kobo.1390.3">
      This can improve security by reducing the risk of unauthorized access to our applications and resources and also reduce administrative overhead by freeing up our IT staff to focus on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1391.1">
       other tasks.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1392.1">
       Group synchronization
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1393.1">
      : This is
     </span>
     <a id="_idIndexMarker1199">
     </a>
     <span class="koboSpan" id="kobo.1394.1">
      the process of keeping user groups in sync between two systems.
     </span>
     <span class="koboSpan" id="kobo.1394.2">
      In the context of SSO between IAM Identity Center and Microsoft Entra ID, group synchronization allows us to keep user groups in sync between Microsoft Entra ID and IAM Identity Center.
     </span>
     <span class="koboSpan" id="kobo.1394.3">
      This ensures that users are always assigned to the correct groups in both systems, which can improve the user experience by ensuring that they always have access to the
     </span>
     <a id="_idIndexMarker1200">
     </a>
     <span class="koboSpan" id="kobo.1395.1">
      applications and resources
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1396.1">
       they need.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1397.1">
       Attribute mapping
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1398.1">
      : This is
     </span>
     <a id="_idIndexMarker1201">
     </a>
     <span class="koboSpan" id="kobo.1399.1">
      the process of mapping user attributes between two systems.
     </span>
     <span class="koboSpan" id="kobo.1399.2">
      In the context of SSO between AWS Identity Center and Microsoft Entra ID, attribute mapping allows us to map user attributes between Microsoft Entra ID and IAM Identity Center.
     </span>
     <span class="koboSpan" id="kobo.1399.3">
      This is important because IAM Identity Center uses user attributes to make authorization decisions, so by mapping the correct attributes, we can ensure that users are always granted the correct
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1400.1">
       access permissions.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.1401.1">
     Let us now see some additional references to help us further explore integrating IAM Identity Center with Microsoft Entra ID, especially with respect to the changes on the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1402.1">
      Azure side.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-383">
    <a id="_idTextAnchor387">
    </a>
    <span class="koboSpan" id="kobo.1403.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.1404.1">
      We
     </span>
     <a id="_idIndexMarker1202">
     </a>
     <span class="koboSpan" id="kobo.1405.1">
      can explore more about automatic provisioning within AWS IAM Identity Center
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1406.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/understanding-automatic-provisioning-with-aws-iam-identity-center">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1407.1">
        https://www.cloudericks.com/blog/understanding-automatic-provisioning-with-aws-iam-identity-center
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1408.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.1409.1">
      Including detailed steps and explanations for the configurations needed to be done on the Azure side would have been outside the scope of this book.
     </span>
     <span class="koboSpan" id="kobo.1409.2">
      We can learn more about Microsoft Entra SSO integration with AWS IAM Identity Center
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1410.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/understanding-microsoft-entra-sso-integration-with-iam-identity-center">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.1411.1">
        https://www.cloudericks.com/blog/understanding-microsoft-entra-sso-integration-with-iam-identity-center
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1412.1">
       .
      </span>
     </span>
    </li>
   </ul>
  </div>
 </body></html>