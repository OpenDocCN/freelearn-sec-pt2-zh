<html><head></head><body>
  <div id="_idContainer309">
   <h1 class="chapter-number" id="_idParaDest-384">
    <a id="_idTextAnchor388">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     10
    </span>
   </h1>
   <h1 id="_idParaDest-385">
    <a id="_idTextAnchor389">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Additional Services and Practices for AWS Security
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     We have looked into many security-related concepts and services throughout this book.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     There are still more security services and practices that can help us make our AWS infrastructure secure.
    </span>
    <span class="koboSpan" id="kobo.3.3">
     In this chapter, we will look into some of these additional services and practices that are worth paying attention to.
    </span>
    <span class="koboSpan" id="kobo.3.4">
     Unlike other chapters, we will not go very deep into these services.
    </span>
    <span class="koboSpan" id="kobo.3.5">
     You can refer to the links provided in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.4.1">
      See also
     </span>
    </em>
    <span class="koboSpan" id="kobo.5.1">
     section for further learning.
    </span>
    <span class="koboSpan" id="kobo.5.2">
     We will learn about some security-related managed services such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.6.1">
      AWS Resource Access Manager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.8.1">
      AWS RAM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.9.1">
     ),
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.10.1">
      AWS Systems Manager Parameter Store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.11.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.12.1">
      AWS Secrets Manager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.13.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.14.1">
      AWS Trusted Advisor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.15.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.16.1">
      AWS Artifact
     </span>
    </strong>
    <span class="koboSpan" id="kobo.17.1">
     .
    </span>
    <span class="koboSpan" id="kobo.17.2">
     We will also see how we can use
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.18.1">
      Amazon Machine Images
     </span>
    </strong>
    <span class="koboSpan" id="kobo.19.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.20.1">
      AMIs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.21.1">
     ) and security products from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.22.1">
      AWS Marketplace.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     In this chapter, we will cover the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      following recipes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.25.1">
      Setting up and using
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.26.1">
       AWS RAM
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.27.1">
      Storing sensitive data with the Systems Manager
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.28.1">
       Parameter Store
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.29.1">
      Using AWS Secrets Manager to manage
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.30.1">
       RDS credentials
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.31.1">
      Creating an AMI instead of using EC2
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.32.1">
       user data
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.33.1">
      Using security products from
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.34.1">
       AWS Marketplace
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.35.1">
      Using AWS Trusted Advisor
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.36.1">
       for recommendations
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.37.1">
      Using AWS Artifact for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       compliance reports
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-386">
    <a id="_idTextAnchor390">
    </a>
    <span class="koboSpan" id="kobo.39.1">
     Technical requirements
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.40.1">
     Before diving into the recipes of this chapter, we need to ensure we have the following requirements
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.41.1">
      in place:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.42.1">
      We need at least an active AWS account to complete the recipes within this chapter.
     </span>
     <span class="koboSpan" id="kobo.42.2">
      Unless specifically mentioned in the recipe, I will be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.43.1">
       awsseccb-sandbox-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.44.1">
      account that we created in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.45.1">
       Multi-account management with AWS Organizations
      </span>
     </em>
     <span class="koboSpan" id="kobo.46.1">
      recipe in
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.47.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.48.1">
      , and I won’t be utilizing any AWS
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.49.1">
       Organizations features.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.50.1">
      For administrative actions, we need a user who has
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.51.1">
       AdministratorAccess
      </span>
     </strong>
     <span class="koboSpan" id="kobo.52.1">
      permission to the AWS account we are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.53.1">
       working with.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.54.1">
     The code files for this book are available at
    </span>
    <a href="https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition">
     <span class="koboSpan" id="kobo.55.1">
      https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition
     </span>
    </a>
    <span class="koboSpan" id="kobo.56.1">
     .
    </span>
    <span class="koboSpan" id="kobo.56.2">
     The code files for this chapter are available
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.57.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition/tree/main/Chapter10">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.58.1">
       https://github.com/PacktPublishing/AWS-Security-Cookbook-Second-Edition/tree/main/Chapter10
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.59.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-387">
    <a id="_idTextAnchor391">
    </a>
    <span class="koboSpan" id="kobo.60.1">
     Setting up and using AWS RAM
    </span>
   </h1>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.61.1">
      AWS RAM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.62.1">
     enables us to securely share AWS resources
    </span>
    <a id="_idIndexMarker1203">
    </a>
    <span class="koboSpan" id="kobo.63.1">
     with other AWS accounts
    </span>
    <a id="_idIndexMarker1204">
    </a>
    <span class="koboSpan" id="kobo.64.1">
     or within our AWS
    </span>
    <a id="_idIndexMarker1205">
    </a>
    <span class="koboSpan" id="kobo.65.1">
     organization.
    </span>
    <span class="koboSpan" id="kobo.65.2">
     The resources we can share include transit gateways, subnets, AWS License Manager configurations, and Amazon Route 53 resolver rules.
    </span>
    <span class="koboSpan" id="kobo.65.3">
     In this recipe, we will learn to use AWS RAM to share
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.66.1">
      a subnet.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-388">
    <a id="_idTextAnchor392">
    </a>
    <span class="koboSpan" id="kobo.67.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.68.1">
     We need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.69.1">
      the recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.70.1">
      A management account with AWS Organizations set up as discussed in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.71.1">
       Multi-account management with AWS Organizations
      </span>
     </em>
     <span class="koboSpan" id="kobo.72.1">
      recipe from
     </span>
     <a href="B21384_01.xhtml#_idTextAnchor020">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.73.1">
         Chapter 1
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.74.1">
      .
     </span>
     <span class="koboSpan" id="kobo.74.2">
      I will be using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.75.1">
       aws-sec-cookbook-1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.76.1">
      account that we created in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.77.1">
       that recipe.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.78.1">
      A member account within the organization to share
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.79.1">
       resources with.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.80.1">
      VPC and subnets by following the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.81.1">
       Setting up VPC plus VPC resources with minimal effort
      </span>
     </em>
     <span class="koboSpan" id="kobo.82.1">
      recipe in
     </span>
     <a href="B21384_05.xhtml#_idTextAnchor169">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.83.1">
         Chapter 5
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.84.1">
      , however, you may skip creating a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.85.1">
       NAT gateway.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-389">
    <a id="_idTextAnchor393">
    </a>
    <span class="koboSpan" id="kobo.86.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.87.1">
     We can set up
    </span>
    <a id="_idIndexMarker1206">
    </a>
    <span class="koboSpan" id="kobo.88.1">
     and use
    </span>
    <a id="_idIndexMarker1207">
    </a>
    <span class="koboSpan" id="kobo.89.1">
     AWS RAM
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.90.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.91.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.92.1">
       Resource Access Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.93.1">
      service in the AWS Management Console.
     </span>
     <span class="koboSpan" id="kobo.93.2">
      If we are using the service for the first time, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.94.1">
       Settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.95.1">
      from the left sidebar, select the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.96.1">
       Enable sharing with AWS Organizations
      </span>
     </strong>
     <span class="koboSpan" id="kobo.97.1">
      option, click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.98.1">
       Save settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.99.1">
      , and go back to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.100.1">
       Resource Access
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.101.1">
        Manager
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.102.1">
       dashboard.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer292">
     <span class="koboSpan" id="kobo.103.1">
      <img alt="Figure 10.1 – Enable sharing with AWS Organizations" src="image/B21384_10_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.104.1">
     Figure 10.1 – Enable sharing with AWS Organizations
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.105.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.106.1">
       Create a
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.107.1">
        resource share
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.108.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.109.1">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.110.1">
       Resource share name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.111.1">
      , provide the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.112.1">
        my-subnet-share
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.113.1">
       value.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.114.1">
      In the section titled
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.115.1">
       Resources - optional
      </span>
     </strong>
     <span class="koboSpan" id="kobo.116.1">
      , in the dropdown for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.117.1">
       Select resource type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.118.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.119.1">
       Subnets
      </span>
     </strong>
     <span class="koboSpan" id="kobo.120.1">
      , and from the subnet list, select a subnet we created for this recipe, as discussed in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.121.1">
       Getting
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.122.1">
        ready
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.123.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.124.1">
      Scroll down and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.125.1">
       Next
      </span>
     </strong>
     <span class="koboSpan" id="kobo.126.1">
      .
     </span>
     <span class="koboSpan" id="kobo.126.2">
      We will be taken to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.127.1">
       Associate managed permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.128.1">
      page.
     </span>
     <span class="koboSpan" id="kobo.128.2">
      Leave everything as default, scroll down, and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.129.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.130.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.131.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.132.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.133.1">
       Grant access to principals
      </span>
     </strong>
     <span class="koboSpan" id="kobo.134.1">
      page, under the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.135.1">
       Principals
      </span>
     </strong>
     <span class="koboSpan" id="kobo.136.1">
      section, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.137.1">
       Allow sharing only within your organization
      </span>
     </strong>
     <span class="koboSpan" id="kobo.138.1">
      , under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.139.1">
       Select principal type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.140.1">
      , choose
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.141.1">
       AWS account
      </span>
     </strong>
     <span class="koboSpan" id="kobo.142.1">
      , enter the account number of another AWS account, click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.143.1">
       Add
      </span>
     </strong>
     <span class="koboSpan" id="kobo.144.1">
      , scroll down, and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.145.1">
       Next
      </span>
     </strong>
     <span class="koboSpan" id="kobo.146.1">
      .
     </span>
     <span class="koboSpan" id="kobo.146.2">
      It will lead to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.147.1">
       Review and create
      </span>
     </strong>
     <span class="koboSpan" id="kobo.148.1">
      page.
     </span>
     <span class="koboSpan" id="kobo.148.2">
      Review the details, scroll down, and click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.149.1">
       Create
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.150.1">
        resource share
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.151.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.152.1">
      To verify the resource
     </span>
     <a id="_idIndexMarker1208">
     </a>
     <span class="koboSpan" id="kobo.153.1">
      share, log in to the account that we specified in
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.154.1">
       Step 6
      </span>
     </em>
     <span class="koboSpan" id="kobo.155.1">
      and go
     </span>
     <a id="_idIndexMarker1209">
     </a>
     <span class="koboSpan" id="kobo.156.1">
      to the AWS
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.157.1">
       Resource Access Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.158.1">
      dashboard.
     </span>
     <span class="koboSpan" id="kobo.158.2">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.159.1">
       Resource shares
      </span>
     </strong>
     <span class="koboSpan" id="kobo.160.1">
      under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.161.1">
       Shared with me
      </span>
     </strong>
     <span class="koboSpan" id="kobo.162.1">
      from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.163.1">
       left sidebar.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer293">
     <span class="koboSpan" id="kobo.164.1">
      <img alt="Figure 10.2 – Shared resources in our member account" src="image/B21384_10_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.165.1">
     Figure 10.2 – Shared resources in our member account
    </span>
   </p>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.166.1">
     We should see the subnet that was shared.
    </span>
    <span class="koboSpan" id="kobo.166.2">
     We need to select the same Region where we created the shares to see
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.167.1">
      the shares.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-390">
    <a id="_idTextAnchor394">
    </a>
    <span class="koboSpan" id="kobo.168.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.169.1">
     First, we enabled sharing within our AWS organization.
    </span>
    <span class="koboSpan" id="kobo.169.2">
     This can be done from the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.170.1">
      AWS RAM
     </span>
    </strong>
    <span class="koboSpan" id="kobo.171.1">
     console, as we saw in this recipe.
    </span>
    <span class="koboSpan" id="kobo.171.2">
     If we do not enable sharing within our AWS organization, the accounts we add will be considered external accounts, even if they are part of our organization.
    </span>
    <span class="koboSpan" id="kobo.171.3">
     We added a resource share for a subnet and shared it with another account within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.172.1">
      our OU.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-391">
    <a id="_idTextAnchor395">
    </a>
    <span class="koboSpan" id="kobo.173.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.174.1">
     We shared a subnet resource type
    </span>
    <a id="_idIndexMarker1210">
    </a>
    <span class="koboSpan" id="kobo.175.1">
     with AWS RAM.
    </span>
    <span class="koboSpan" id="kobo.175.2">
     The following are the resource type options currently available:
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.176.1">
      Aurora DB Clusters
     </span>
    </strong>
    <span class="koboSpan" id="kobo.177.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.178.1">
      Capacity Reservations
     </span>
    </strong>
    <span class="koboSpan" id="kobo.179.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.180.1">
      CodeBuild Projects
     </span>
    </strong>
    <span class="koboSpan" id="kobo.181.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.182.1">
      CodeBuild Report Groups
     </span>
    </strong>
    <span class="koboSpan" id="kobo.183.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.184.1">
      Dedicated Hosts
     </span>
    </strong>
    <span class="koboSpan" id="kobo.185.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.186.1">
      Image Builder Components
     </span>
    </strong>
    <span class="koboSpan" id="kobo.187.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.188.1">
      Image Builder Image Recipes
     </span>
    </strong>
    <span class="koboSpan" id="kobo.189.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.190.1">
      Image Builder Images
     </span>
    </strong>
    <span class="koboSpan" id="kobo.191.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.192.1">
      License Configurations
     </span>
    </strong>
    <span class="koboSpan" id="kobo.193.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.194.1">
      Resolver Rules
     </span>
    </strong>
    <span class="koboSpan" id="kobo.195.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.196.1">
      Traffic Mirror Targets
     </span>
    </strong>
    <span class="koboSpan" id="kobo.197.1">
     , and
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.198.1">
       Transit Gateways
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.199.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-392">
    <a id="_idTextAnchor396">
    </a>
    <span class="koboSpan" id="kobo.200.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.201.1">
     You can read more
    </span>
    <a id="_idIndexMarker1211">
    </a>
    <span class="koboSpan" id="kobo.202.1">
     about AWS RAM
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.203.1">
      at
     </span>
    </span>
    <a href="https://www.cloudericks.com/blog/getting-started-with-aws-ram">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.204.1">
       https://www.cloudericks.com/blog/getting-started-with-aws-ram
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.205.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-393">
    <a id="_idTextAnchor397">
    </a>
    <span class="koboSpan" id="kobo.206.1">
     Storing sensitive data with the Systems Manager Parameter Store
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.207.1">
     We can store data using the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.208.1">
      Systems Manager Parameter Store
     </span>
    </strong>
    <span class="koboSpan" id="kobo.209.1">
     with and without encryption, and then reference
    </span>
    <a id="_idIndexMarker1212">
    </a>
    <span class="koboSpan" id="kobo.210.1">
     it from various services without having to hardcode the data in any place.
    </span>
    <span class="koboSpan" id="kobo.210.2">
     In this recipe, we will learn how to store data with encryption in an AWS Systems Manager Parameter Store and then retrieve it from an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.211.1">
      EC2 instance.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-394">
    <a id="_idTextAnchor398">
    </a>
    <span class="koboSpan" id="kobo.212.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.213.1">
     We need the following to successfully complete
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.214.1">
      the recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.215.1">
      A working AWS account and a user as described in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.216.1">
       Technical
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.217.1">
        requirements
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.218.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.219.1">
      An EC2 instance in the default VPC, within a public subnet within the VPC.
     </span>
     <span class="koboSpan" id="kobo.219.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.220.1">
       Amazon Machine Image (AMI)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.221.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.222.1">
       Amazon Linux 2023 AMI
      </span>
     </strong>
     <span class="koboSpan" id="kobo.223.1">
      .
     </span>
     <span class="koboSpan" id="kobo.223.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.224.1">
       Instance type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.225.1">
      , select
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.226.1">
       t2.micro
      </span>
     </strong>
     <span class="koboSpan" id="kobo.227.1">
      , For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.228.1">
       Key pair (login)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.229.1">
      , select an existing one you have access to or create a new one.
     </span>
     <span class="koboSpan" id="kobo.229.2">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.230.1">
       Network settings
      </span>
     </strong>
     <span class="koboSpan" id="kobo.231.1">
      , make sure the value for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.232.1">
       Auto-assign public IP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.233.1">
      is
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.234.1">
       Enable
      </span>
     </strong>
     <span class="koboSpan" id="kobo.235.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.236.1">
       Create security group
      </span>
     </strong>
     <span class="koboSpan" id="kobo.237.1">
      is selected with the value for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.238.1">
       Allow SSH traffic from
      </span>
     </strong>
     <span class="koboSpan" id="kobo.239.1">
      set as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.240.1">
       Anywhere
      </span>
     </strong>
     <span class="koboSpan" id="kobo.241.1">
      .
     </span>
     <span class="koboSpan" id="kobo.241.2">
      We learned about EC2 in
     </span>
     <a href="B21384_05.xhtml#_idTextAnchor169">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.242.1">
         Chapter 5
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.243.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.244.1">
      You would benefit from being familiar with KMS.
     </span>
     <span class="koboSpan" id="kobo.244.2">
      We learned about KMS in
     </span>
     <a href="B21384_03.xhtml#_idTextAnchor088">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.245.1">
         Chapter 3
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.246.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-395">
    <a id="_idTextAnchor399">
    </a>
    <span class="koboSpan" id="kobo.247.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.248.1">
     First, we will create a parameter
    </span>
    <a id="_idIndexMarker1213">
    </a>
    <span class="koboSpan" id="kobo.249.1">
     in the AWS Systems Manager Parameter Store.
    </span>
    <span class="koboSpan" id="kobo.249.2">
     Then, we will attach a role necessary for accessing the AWS Systems Manager from an EC2 instance.
    </span>
    <span class="koboSpan" id="kobo.249.3">
     Finally, we will retrieve the parameter’s information from that
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.250.1">
      EC2 instance.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.251.1">
     Creating a parameter in the AWS Systems Manager Parameter Store
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.252.1">
     We can create a Systems Manager Parameter Store parameter
    </span>
    <a id="_idIndexMarker1214">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.253.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.254.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.255.1">
       Systems Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.256.1">
      service in the AWS
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.257.1">
       management dashboard.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.258.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.259.1">
       Parameter Store
      </span>
     </strong>
     <span class="koboSpan" id="kobo.260.1">
      from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.261.1">
       left sidebar.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.262.1">
      Click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.263.1">
        Create parameter
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.264.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.265.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.266.1">
       Create parameter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.267.1">
      page, for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.268.1">
       Name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.269.1">
      , enter
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.270.1">
       MySecureParameter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.271.1">
      , for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.272.1">
       Description — Optional
      </span>
     </strong>
     <span class="koboSpan" id="kobo.273.1">
      , enter
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.274.1">
       My Secure Parameter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.275.1">
      , and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.276.1">
       Tier
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.277.1">
       as
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.278.1">
        Standard
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.279.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.280.1">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.281.1">
       Type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.282.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.283.1">
       SecureString
      </span>
     </strong>
     <span class="koboSpan" id="kobo.284.1">
      , for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.285.1">
       KMS key source
      </span>
     </strong>
     <span class="koboSpan" id="kobo.286.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.287.1">
       My current account
      </span>
     </strong>
     <span class="koboSpan" id="kobo.288.1">
      , for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.289.1">
       KMS Key ID
      </span>
     </strong>
     <span class="koboSpan" id="kobo.290.1">
      , leave the default value of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.291.1">
       alias/aws/ssm
      </span>
     </strong>
     <span class="koboSpan" id="kobo.292.1">
      as is, and for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.293.1">
       Value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.294.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.295.1">
       enter
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.296.1">
        MySecureValue
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.297.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.298.1">
      Scroll down and click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.299.1">
       Create parameter
      </span>
     </strong>
     <span class="koboSpan" id="kobo.300.1">
      .
     </span>
     <span class="koboSpan" id="kobo.300.2">
      We should get this message:
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.301.1">
       Create parameter
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.302.1">
        request succeeded!
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.303.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.304.1">
     Next, we will create and attach a role to our EC2 instance to access the AWS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.305.1">
      Systems Manager.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.306.1">
     Creating and attaching a role for the AWS Systems Manager
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.307.1">
     To use the AWS Systems Manager
    </span>
    <a id="_idIndexMarker1215">
    </a>
    <span class="koboSpan" id="kobo.308.1">
     from an EC2 instance, we need
    </span>
    <a id="_idIndexMarker1216">
    </a>
    <span class="koboSpan" id="kobo.309.1">
     to attach a role to an EC2 instance,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.310.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.311.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.312.1">
       IAM
      </span>
     </strong>
     <span class="koboSpan" id="kobo.313.1">
      dashboard in the AWS
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.314.1">
       Management Console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.315.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.316.1">
       Roles
      </span>
     </strong>
     <span class="koboSpan" id="kobo.317.1">
      from the left sidebar and click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.318.1">
        Create role
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.319.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.320.1">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.321.1">
       Trusted entity type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.322.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.323.1">
       AWS service
      </span>
     </strong>
     <span class="koboSpan" id="kobo.324.1">
      , and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.325.1">
       EC2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.326.1">
      from the list of services for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.327.1">
       Service or
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.328.1">
        use case
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.329.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.330.1">
      Scroll down and select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.331.1">
       EC2 Role for AWS Systems Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.332.1">
      .
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.333.1">
       Click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.334.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.335.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer294">
     <span class="koboSpan" id="kobo.336.1">
      <img alt="Figure 10.3 – Select trusted entity" src="image/B21384_10_3.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.337.1">
     Figure 10.3 – Select trusted entity
    </span>
   </p>
   <ol>
    <li value="5">
     <span class="koboSpan" id="kobo.338.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.339.1">
       Add permissions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.340.1">
      pane, click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.341.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.342.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.343.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.344.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.345.1">
       Name, review, and create
      </span>
     </strong>
     <span class="koboSpan" id="kobo.346.1">
      page, for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.347.1">
       Role name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.348.1">
      , provide the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.349.1">
       MySSMManInstanceRole
      </span>
     </strong>
     <span class="koboSpan" id="kobo.350.1">
      value, and for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.351.1">
       Description
      </span>
     </strong>
     <span class="koboSpan" id="kobo.352.1">
      , provide the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.353.1">
       Amazon SSM Managed Instance Core Role
      </span>
     </strong>
     <span class="koboSpan" id="kobo.354.1">
      value.
     </span>
     <span class="koboSpan" id="kobo.354.2">
      Review the entire page and then click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.355.1">
       Create role
      </span>
     </strong>
     <span class="koboSpan" id="kobo.356.1">
      .
     </span>
     <span class="koboSpan" id="kobo.356.2">
      We should see the message that the role was
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.357.1">
       created successfully.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.358.1">
      Attach this role
     </span>
     <a id="_idIndexMarker1217">
     </a>
     <span class="koboSpan" id="kobo.359.1">
      to our EC2 instance
     </span>
     <a id="_idIndexMarker1218">
     </a>
     <span class="koboSpan" id="kobo.360.1">
      as we saw in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.361.1">
       Cross-service access via IAM roles on EC2 instances
      </span>
     </em>
     <span class="koboSpan" id="kobo.362.1">
      recipe from
     </span>
     <a href="B21384_02.xhtml#_idTextAnchor043">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.363.1">
         Chapter 2
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.364.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <h3>
    <span class="koboSpan" id="kobo.365.1">
     Retrieving parameters from the AWS Systems Manager Parameter Store
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.366.1">
     We can retrieve the parameter
    </span>
    <a id="_idIndexMarker1219">
    </a>
    <span class="koboSpan" id="kobo.367.1">
     value from our EC2 instance.
    </span>
    <span class="koboSpan" id="kobo.367.2">
     SSH into the EC2 instance and run the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.368.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.369.1">
aws ssm get-parameters --names MySecureParameter --with-decryption --region us-east-1</span></pre>
   <p>
    <span class="koboSpan" id="kobo.370.1">
     We should get a response like
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.371.1">
      the following:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer295">
     <span class="koboSpan" id="kobo.372.1">
      <img alt="Figure 10.4 – Getting the parameter" src="image/B21384_10_4.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.373.1">
     Figure 10.4 – Getting the parameter
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.374.1">
     The parameter value will be decrypted.
    </span>
    <span class="koboSpan" id="kobo.374.2">
     We also have a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.375.1">
      get-parameter
     </span>
    </strong>
    <span class="koboSpan" id="kobo.376.1">
     subcommand for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.377.1">
      aws ssm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.378.1">
     CLI command; however, currently, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.379.1">
      AWS-provided AmazonEC2RoleForEC2
     </span>
    </strong>
    <span class="koboSpan" id="kobo.380.1">
     role does not include it.
    </span>
    <span class="koboSpan" id="kobo.380.2">
     You can
    </span>
    <a id="_idIndexMarker1220">
    </a>
    <span class="koboSpan" id="kobo.381.1">
     add the permission manually and then
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.382.1">
      use
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.383.1">
       get-parameter
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.384.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-396">
    <a id="_idTextAnchor400">
    </a>
    <span class="koboSpan" id="kobo.385.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.386.1">
     In this recipe, we created a parameter
    </span>
    <a id="_idIndexMarker1221">
    </a>
    <span class="koboSpan" id="kobo.387.1">
     in the AWS Systems Manager Parameter Store and retrieved it.
    </span>
    <span class="koboSpan" id="kobo.387.2">
     We can use the parameter from any service without needing to hardcode its values.
    </span>
    <span class="koboSpan" id="kobo.387.3">
     Now, we can update the value for that parameter from
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.388.1">
      one place.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.389.1">
     For retrieving and decrypting the parameter value that was encrypted, we used the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.390.1">
      get-parameters
     </span>
    </strong>
    <span class="koboSpan" id="kobo.391.1">
     subcommand of the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.392.1">
      aws ssm
     </span>
    </strong>
    <span class="koboSpan" id="kobo.393.1">
     CLI command with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.394.1">
      --with-decryption
     </span>
    </strong>
    <span class="koboSpan" id="kobo.395.1">
     option.
    </span>
    <span class="koboSpan" id="kobo.395.2">
     The default is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.396.1">
      --no-with-decryption
     </span>
    </strong>
    <span class="koboSpan" id="kobo.397.1">
     if none is specified and does not decrypt
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.398.1">
      the value.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.399.1">
     We can also create parameters without encryption by setting
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.400.1">
      Type
     </span>
    </strong>
    <span class="koboSpan" id="kobo.401.1">
     to
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.402.1">
      String
     </span>
    </strong>
    <span class="koboSpan" id="kobo.403.1">
     instead of
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.404.1">
       Secure String
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.405.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-397">
    <a id="_idTextAnchor401">
    </a>
    <span class="koboSpan" id="kobo.406.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.407.1">
     In this recipe, we only used one of the features of the AWS Systems Manager, namely the Parameter Store.
    </span>
    <span class="koboSpan" id="kobo.407.2">
     Let’s quickly go through some more important features
    </span>
    <a id="_idIndexMarker1222">
    </a>
    <span class="koboSpan" id="kobo.408.1">
     of the AWS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.409.1">
      Systems Manager:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.410.1">
      AWS Systems Manager
     </span>
     <a id="_idIndexMarker1223">
     </a>
     <span class="koboSpan" id="kobo.411.1">
      allows us to group resources such as EC2 instances, S3 buckets, and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.412.1">
       Relational Database Service
      </span>
     </strong>
     <span class="koboSpan" id="kobo.413.1">
      (
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.414.1">
       RDS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.415.1">
      ) instances.
     </span>
     <span class="koboSpan" id="kobo.415.2">
      After we’ve done this, we can perform actions, such as installing a patch across
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.416.1">
       a group.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.417.1">
      We can use the parameter in the AWS Systems Manager Parameter Store from various services, such as EC2, Lambda, and CloudFormation.
     </span>
     <span class="koboSpan" id="kobo.417.2">
      We can also use the parameter in a Systems Manager
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.418.1">
        run
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.419.1">
       command.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.420.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.421.1">
       run
      </span>
     </strong>
     <span class="koboSpan" id="kobo.422.1">
      command can be used to automate admin tasks and configuration changes across a group of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.423.1">
       EC2 machines.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.424.1">
      The EC2 role for a simple Systems Manager permits us to use the EC2
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.425.1">
       run
      </span>
     </strong>
     <span class="koboSpan" id="kobo.426.1">
      command from our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.427.1">
       EC2 instances.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.428.1">
      We can specify EC2 target instances manually or based on a tag attached to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.429.1">
       EC2 instances.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.430.1">
      When we configure a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.431.1">
       run
      </span>
     </strong>
     <span class="koboSpan" id="kobo.432.1">
      command from the console, AWS provides us with the corresponding CLI command that we
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.433.1">
       can run.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.434.1">
      For working with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.435.1">
       run
      </span>
     </strong>
     <span class="koboSpan" id="kobo.436.1">
      command, the SSM agent needs to be installed on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.437.1">
       the instances.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.438.1">
      We can use the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.439.1">
       run
      </span>
     </strong>
     <span class="koboSpan" id="kobo.440.1">
      command
     </span>
     <a id="_idIndexMarker1224">
     </a>
     <span class="koboSpan" id="kobo.441.1">
      to execute actions on on-premises systems
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.442.1">
       as well.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-398">
    <a id="_idTextAnchor402">
    </a>
    <span class="koboSpan" id="kobo.443.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.444.1">
      You can read more about
     </span>
     <a id="_idIndexMarker1225">
     </a>
     <span class="koboSpan" id="kobo.445.1">
      the AWS Systems Manager
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.446.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-aws-systems-manager-ssm">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.447.1">
        https://www.cloudericks.com/blog/getting-started-with-aws-systems-manager-ssm
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.448.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.449.1">
      You can read more about
     </span>
     <a id="_idIndexMarker1226">
     </a>
     <span class="koboSpan" id="kobo.450.1">
      using KMS with the AWS Systems Manager Parameter Store
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.451.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/using-aws-kms-with-aws-ssm-parameter-store">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.452.1">
        https://www.cloudericks.com/blog/using-aws-kms-with-aws-ssm-parameter-store
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.453.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-399">
    <a id="_idTextAnchor403">
    </a>
    <span class="koboSpan" id="kobo.454.1">
     Using AWS Secrets Manager to manage RDS credentials
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.455.1">
     In this recipe, we will learn
    </span>
    <a id="_idIndexMarker1227">
    </a>
    <span class="koboSpan" id="kobo.456.1">
     to use AWS Secrets Manager
    </span>
    <a id="_idIndexMarker1228">
    </a>
    <span class="koboSpan" id="kobo.457.1">
     to manage RDS credentials.
    </span>
    <span class="koboSpan" id="kobo.457.2">
     This is a more secure alternative to managing and rotating the RDS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.458.1">
      credentials manually.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-400">
    <a id="_idTextAnchor404">
    </a>
    <span class="koboSpan" id="kobo.459.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.460.1">
     We need the following
    </span>
    <a id="_idIndexMarker1229">
    </a>
    <span class="koboSpan" id="kobo.461.1">
     to successfully complete
    </span>
    <a id="_idIndexMarker1230">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.462.1">
      the recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.463.1">
      A working AWS account and a user as described in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.464.1">
       Technical
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.465.1">
        requirements
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.466.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.467.1">
      An RDS database instance created in RDS with defaults, but with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.468.1">
       following exceptions:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.469.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.470.1">
         Instance configuration
        </span>
       </strong>
       <span class="koboSpan" id="kobo.471.1">
        , select
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.472.1">
         serverless v2
        </span>
       </strong>
       <span class="koboSpan" id="kobo.473.1">
        to keep costs to
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.474.1">
         the minimum.
        </span>
       </span>
      </li>
      <li>
       <span class="koboSpan" id="kobo.475.1">
        For
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.476.1">
         Credentials Settings
        </span>
       </strong>
       <span class="koboSpan" id="kobo.477.1">
        , provide values for
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.478.1">
         Master username
        </span>
       </strong>
       <span class="koboSpan" id="kobo.479.1">
        and
       </span>
       <strong class="bold">
        <span class="koboSpan" id="kobo.480.1">
         Master password
        </span>
       </strong>
       <span class="koboSpan" id="kobo.481.1">
        , as shown in the
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.482.1">
         following figure:
        </span>
       </span>
      </li>
     </ul>
    </li>
   </ul>
   <div>
    <div class="IMG---Figure" id="_idContainer296">
     <span class="koboSpan" id="kobo.483.1">
      <img alt="Figure 10.5 – Credentials Settings for the RDS database" src="image/B21384_10_5.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.484.1">
     Figure 10.5 – Credentials Settings for the RDS database
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.485.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.486.1">
     If we select the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.487.1">
      Managed in AWS Secrets Manager
     </span>
    </strong>
    <span class="koboSpan" id="kobo.488.1">
     option in
    </span>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.489.1">
       Figure 10
      </span>
     </em>
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.490.1">
      .5
     </span>
    </em>
    <span class="koboSpan" id="kobo.491.1">
     , then RDS will generate a password and store it within the Secrets Manager without the need for the steps outlined in this recipe.
    </span>
    <span class="koboSpan" id="kobo.491.2">
     However, we want to demonstrate storing secrets manually within this recipe and hence we selected the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.492.1">
      Self
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.493.1">
       managed
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.494.1">
      option.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-401">
    <a id="_idTextAnchor405">
    </a>
    <span class="koboSpan" id="kobo.495.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.496.1">
     We can configure AWS Secrets Manager
    </span>
    <a id="_idIndexMarker1231">
    </a>
    <span class="koboSpan" id="kobo.497.1">
     to manage the credentials
    </span>
    <a id="_idIndexMarker1232">
    </a>
    <span class="koboSpan" id="kobo.498.1">
     of an RDS database
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.499.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.500.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.501.1">
       Secrets Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.502.1">
      service in the AWS
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.503.1">
       Management Console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.504.1">
      From the left sidebar, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.505.1">
       Secrets
      </span>
     </strong>
     <span class="koboSpan" id="kobo.506.1">
      .
     </span>
     <span class="koboSpan" id="kobo.506.2">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.507.1">
       Secrets
      </span>
     </strong>
     <span class="koboSpan" id="kobo.508.1">
      page, click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.509.1">
       Store a
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.510.1">
        new secret
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.511.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.512.1">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.513.1">
       Secret type
      </span>
     </strong>
     <span class="koboSpan" id="kobo.514.1">
      , select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.515.1">
       Credentials for Amazon RDS database
      </span>
     </strong>
     <span class="koboSpan" id="kobo.516.1">
      , as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.517.1">
       following figure:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer297">
     <span class="koboSpan" id="kobo.518.1">
      <img alt="Figure 10.6 – Choosing a Secret type option in AWS Secrets Manager" src="image/B21384_10_6.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.519.1">
     Figure 10.6 – Choosing a Secret type option in AWS Secrets Manager
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.520.1">
      Provide the values of
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.521.1">
       Master username
      </span>
     </strong>
     <span class="koboSpan" id="kobo.522.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.523.1">
       Master password
      </span>
     </strong>
     <span class="koboSpan" id="kobo.524.1">
      as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.525.1">
       User name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.526.1">
      and
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.527.1">
        Password
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.528.1">
       respectively.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.529.1">
      For the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.530.1">
       Encryption key
      </span>
     </strong>
     <span class="koboSpan" id="kobo.531.1">
      option, select the default encryption key from the dropdown.
     </span>
     <span class="koboSpan" id="kobo.531.2">
      We may also create a KMS encryption key following the recipes in
     </span>
     <a href="B21384_03.xhtml#_idTextAnchor088">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.532.1">
         Chapter 3
        </span>
       </em>
      </span>
     </a>
     <span class="koboSpan" id="kobo.533.1">
      and use it instead, but for this recipe, we will use the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.534.1">
       default one.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.535.1">
      In the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.536.1">
       Database
      </span>
     </strong>
     <span class="koboSpan" id="kobo.537.1">
      section
     </span>
     <a id="_idIndexMarker1233">
     </a>
     <span class="koboSpan" id="kobo.538.1">
      select the database
     </span>
     <a id="_idIndexMarker1234">
     </a>
     <span class="koboSpan" id="kobo.539.1">
      we created in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.540.1">
       Getting ready
      </span>
     </em>
     <span class="koboSpan" id="kobo.541.1">
      section and click
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.542.1">
       on
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.543.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.544.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.545.1">
      Provide
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.546.1">
       prod/CloudericksApp/Postgres
      </span>
     </strong>
     <span class="koboSpan" id="kobo.547.1">
      for the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.548.1">
       Secret name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.549.1">
      field and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.550.1">
       Access to Postgress prod database for the Cloudericks app
      </span>
     </strong>
     <span class="koboSpan" id="kobo.551.1">
      for the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.552.1">
       Description
      </span>
     </strong>
     <span class="koboSpan" id="kobo.553.1">
      field.
     </span>
     <span class="koboSpan" id="kobo.553.2">
      Optionally, add any tags and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.554.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.555.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.556.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.557.1">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.558.1">
       Configure automatic rotation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.559.1">
      , enable
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.560.1">
       Automatic rotation
      </span>
     </strong>
     <span class="koboSpan" id="kobo.561.1">
      .
     </span>
     <span class="koboSpan" id="kobo.561.2">
      Then, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.562.1">
       Schedule expression builder
      </span>
     </strong>
     <span class="koboSpan" id="kobo.563.1">
      for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.564.1">
       Rotation schedule
      </span>
     </strong>
     <span class="koboSpan" id="kobo.565.1">
      , set
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.566.1">
       Time unit
      </span>
     </strong>
     <span class="koboSpan" id="kobo.567.1">
      to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.568.1">
       Days
      </span>
     </strong>
     <span class="koboSpan" id="kobo.569.1">
      , and enter
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.570.1">
       30
      </span>
     </strong>
     <span class="koboSpan" id="kobo.571.1">
      for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.572.1">
       Days
      </span>
     </strong>
     <span class="koboSpan" id="kobo.573.1">
      .
     </span>
     <span class="koboSpan" id="kobo.573.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.574.1">
       Window duration – optional
      </span>
     </strong>
     <span class="koboSpan" id="kobo.575.1">
      , leave as default and select the checkbox for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.576.1">
       Rotate immediately when the secret is stored.
      </span>
      <span class="koboSpan" id="kobo.576.2">
       The next rotation will begin on
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.577.1">
        your schedule
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.578.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer298">
     <span class="koboSpan" id="kobo.579.1">
      <img alt="Figure 10.7 – Configuring automatic rotation" src="image/B21384_10_7.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.580.1">
     Figure 10.7 – Configuring automatic rotation
    </span>
   </p>
   <ol>
    <li value="9">
     <span class="koboSpan" id="kobo.581.1">
      In
     </span>
     <a id="_idIndexMarker1235">
     </a>
     <span class="koboSpan" id="kobo.582.1">
      the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.583.1">
       Rotation function
      </span>
     </strong>
     <span class="koboSpan" id="kobo.584.1">
      section, select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.585.1">
       Create a rotation function
      </span>
     </strong>
     <span class="koboSpan" id="kobo.586.1">
      .
     </span>
     <span class="koboSpan" id="kobo.586.2">
      For
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.587.1">
       Lambda rotation function
      </span>
     </strong>
     <span class="koboSpan" id="kobo.588.1">
      , provide
     </span>
     <a id="_idIndexMarker1236">
     </a>
     <span class="koboSpan" id="kobo.589.1">
      the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.590.1">
       postgres-rotation-lambda
      </span>
     </strong>
     <span class="koboSpan" id="kobo.591.1">
      name.
     </span>
     <span class="koboSpan" id="kobo.591.2">
      Select
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.592.1">
       Single user
      </span>
     </strong>
     <span class="koboSpan" id="kobo.593.1">
      for
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.594.1">
       Rotation strategy
      </span>
     </strong>
     <span class="koboSpan" id="kobo.595.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.596.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.597.1">
        Next
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.598.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer299">
     <span class="koboSpan" id="kobo.599.1">
      <img alt="Figure 10.8 – Configuring the rotation function" src="image/B21384_10_8.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.600.1">
     Figure 10.8 – Configuring the rotation function
    </span>
   </p>
   <ol>
    <li value="10">
     <span class="koboSpan" id="kobo.601.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.602.1">
       Review
      </span>
     </strong>
     <span class="koboSpan" id="kobo.603.1">
      page, carefully review
     </span>
     <a id="_idIndexMarker1237">
     </a>
     <span class="koboSpan" id="kobo.604.1">
      all the details.
     </span>
     <span class="koboSpan" id="kobo.604.2">
      Additionally, sample code
     </span>
     <a id="_idIndexMarker1238">
     </a>
     <span class="koboSpan" id="kobo.605.1">
      is provided for different languages, including Java, JavaScript, C#, Python3, Ruby, Go, and Rust, demonstrating how to retrieve the secret from our application, as shown in
     </span>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.606.1">
        Figure 10
       </span>
      </em>
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.607.1">
       .9
      </span>
     </em>
     <span class="koboSpan" id="kobo.608.1">
      .
     </span>
     <span class="koboSpan" id="kobo.608.2">
      Finally,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.609.1">
       click
      </span>
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.610.1">
        Store
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.611.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer300">
     <span class="koboSpan" id="kobo.612.1">
      <img alt="Figure 10.9 – Sample code to retrieve secrets from Secrets Manager" src="image/B21384_10_9.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.613.1">
     Figure 10.9 – Sample code to retrieve secrets from Secrets Manager
    </span>
   </p>
   <ol>
    <li value="11">
     <span class="koboSpan" id="kobo.614.1">
      Once we get the success
     </span>
     <a id="_idIndexMarker1239">
     </a>
     <span class="koboSpan" id="kobo.615.1">
      message, go to the new secret
     </span>
     <a id="_idIndexMarker1240">
     </a>
     <span class="koboSpan" id="kobo.616.1">
      to verify
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.617.1">
       the details.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.618.1">
      Scroll down and go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.619.1">
       Overview
      </span>
     </strong>
     <span class="koboSpan" id="kobo.620.1">
      tab, and then click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.621.1">
       Retrieve secret value
      </span>
     </strong>
     <span class="koboSpan" id="kobo.622.1">
      to view our secret.
     </span>
     <span class="koboSpan" id="kobo.622.2">
      If you want to edit them, you can do so using the
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.623.1">
        Edit
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.624.1">
       button.
      </span>
     </span>
     <p class="list-inset">
      <span class="koboSpan" id="kobo.625.1">
       If we want to delete a secret, we can go to the secret, click on the
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.626.1">
        Actions
       </span>
      </strong>
      <span class="koboSpan" id="kobo.627.1">
       dropdown, and click on
      </span>
      <strong class="bold">
       <span class="koboSpan" id="kobo.628.1">
        Delete secret
       </span>
      </strong>
      <span class="koboSpan" id="kobo.629.1">
       .
      </span>
      <span class="koboSpan" id="kobo.629.2">
       We must specify a waiting period of between 7 and 30 days before the secret will
      </span>
      <span class="No-Break">
       <span class="koboSpan" id="kobo.630.1">
        be deleted.
       </span>
      </span>
     </p>
    </li>
   </ol>
   <h2 id="_idParaDest-402">
    <a id="_idTextAnchor406">
    </a>
    <span class="koboSpan" id="kobo.631.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.632.1">
     In this recipe, we stored credentials
    </span>
    <a id="_idIndexMarker1241">
    </a>
    <span class="koboSpan" id="kobo.633.1">
     for our RDS database
    </span>
    <a id="_idIndexMarker1242">
    </a>
    <span class="koboSpan" id="kobo.634.1">
     in Secrets Manager.
    </span>
    <span class="koboSpan" id="kobo.634.2">
     For the secret type, we selected
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.635.1">
      Credentials for Amazon RDS database
     </span>
    </strong>
    <span class="koboSpan" id="kobo.636.1">
     .
    </span>
    <span class="koboSpan" id="kobo.636.2">
     The following are the other secret type options currently available in the console:
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.637.1">
      Credentials for Redshift cluster
     </span>
    </strong>
    <span class="koboSpan" id="kobo.638.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.639.1">
      Credentials for DocumentDB database
     </span>
    </strong>
    <span class="koboSpan" id="kobo.640.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.641.1">
      Credentials for other database
     </span>
    </strong>
    <span class="koboSpan" id="kobo.642.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.643.1">
      Other type of secrets
     </span>
    </strong>
    <span class="koboSpan" id="kobo.644.1">
     (e.g.,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.645.1">
      API key).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.646.1">
     We enabled automatic key rotation with a duration of 30 days.
    </span>
    <span class="koboSpan" id="kobo.646.2">
     We can also select 60 days or 90 days, or provide a custom period up to 365 days.
    </span>
    <span class="koboSpan" id="kobo.646.3">
     I selected the default encryption key for this recipe.
    </span>
    <span class="koboSpan" id="kobo.646.4">
     Instead, you can use a KMS key you created.
    </span>
    <span class="koboSpan" id="kobo.646.5">
     We learned about KMS keys in
    </span>
    <a href="B21384_03.xhtml#_idTextAnchor088">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.647.1">
        Chapter 3
       </span>
      </em>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.648.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.649.1">
     After configuring a secret, our application can make an API call to Secrets Manager to retrieve the secret programmatically.
    </span>
    <span class="koboSpan" id="kobo.649.2">
     While storing the secret, AWS provides us with sample code for different languages to retrieve the secret.
    </span>
    <span class="koboSpan" id="kobo.649.3">
     Currently, there are sample codes for Java, JavaScript, C#, Python3, Ruby, Go,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.650.1">
      and Rust.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.651.1">
     We saw a warning that the first rotation would happen immediately upon storing this secret.
    </span>
    <span class="koboSpan" id="kobo.651.2">
     Therefore, if any of our applications are still using hardcoded credentials and are not updated to use the APIs to get the latest credentials, those applications
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.652.1">
      will fail.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-403">
    <a id="_idTextAnchor407">
    </a>
    <span class="koboSpan" id="kobo.653.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.654.1">
     AWS Secrets Manager may look
    </span>
    <a id="_idIndexMarker1243">
    </a>
    <span class="koboSpan" id="kobo.655.1">
     like AWS Systems Manager Parameter Store.
    </span>
    <span class="koboSpan" id="kobo.655.2">
     Let’s quickly compare
    </span>
    <a id="_idIndexMarker1244">
    </a>
    <span class="koboSpan" id="kobo.656.1">
     Secrets Manager with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.657.1">
      Parameter Store:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.658.1">
      Secrets Manager is primarily used for storing database credentials, API keys, and SSH keys.
     </span>
     <span class="koboSpan" id="kobo.658.2">
      Parameter Store is primarily used for storing license codes, configuration data, user-defined parameters, and database strings, and is less commonly used for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.659.1">
       passwords too.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.660.1">
      AWS Secrets Manager is charged per secret per month and per API call.
     </span>
     <span class="koboSpan" id="kobo.660.2">
      AWS Systems Manager Parameter Store does not charge for standard parameters but charges us for advanced parameters based on the number of advanced parameters stored and per
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.661.1">
       API interaction.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.662.1">
      Secrets Manager has built-in integration with RDS databases.
     </span>
     <span class="koboSpan" id="kobo.662.2">
      Secrets Manager supports the built-in rotation of secrets for RDS.
     </span>
     <span class="koboSpan" id="kobo.662.3">
      It also supports the rotation of non-RDS databases using custom
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.663.1">
       Lambda functions.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.664.1">
      Parameter Store
     </span>
     <a id="_idIndexMarker1245">
     </a>
     <span class="koboSpan" id="kobo.665.1">
      is integrated with
     </span>
     <a id="_idIndexMarker1246">
     </a>
     <span class="koboSpan" id="kobo.666.1">
      AWS
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.667.1">
       Systems Manager.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-404">
    <a id="_idTextAnchor408">
    </a>
    <span class="koboSpan" id="kobo.668.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.669.1">
     Read more about
    </span>
    <a id="_idIndexMarker1247">
    </a>
    <span class="koboSpan" id="kobo.670.1">
     the AWS Secrets Manager and Parameter Store comparison
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.671.1">
      at
     </span>
    </span>
    <a href="https://www.cloudericks.com/blog/comparing-aws-secrets-manager-and-parameter-store">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.672.1">
       https://www.cloudericks.com/blog/comparing-aws-secrets-manager-and-parameter-store
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.673.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-405">
    <a id="_idTextAnchor409">
    </a>
    <span class="koboSpan" id="kobo.674.1">
     Creating an AMI instead of using EC2 user data
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.675.1">
     In this recipe, we will create an AMI with a web server and then launch an instance from that AMI.
    </span>
    <span class="koboSpan" id="kobo.675.2">
     Instances from AMIs have faster boot times than instances with the same configuration defined through EC2 user data.
    </span>
    <span class="koboSpan" id="kobo.675.3">
     In the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.676.1">
      Launching an EC2 instance with a web server using user data
     </span>
    </em>
    <span class="koboSpan" id="kobo.677.1">
     recipe from
    </span>
    <a href="B21384_05.xhtml#_idTextAnchor169">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.678.1">
        Chapter 5
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.679.1">
     , we used EC2 user data to update our operating system and set up a simple web server
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.680.1">
      at launch.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-406">
    <a id="_idTextAnchor410">
    </a>
    <span class="koboSpan" id="kobo.681.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.682.1">
     We need the following
    </span>
    <a id="_idIndexMarker1248">
    </a>
    <span class="koboSpan" id="kobo.683.1">
     to successfully complete
    </span>
    <a id="_idIndexMarker1249">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.684.1">
      the recipe:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.685.1">
      A working AWS account and a user as described in the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.686.1">
       Technical
      </span>
     </em>
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.687.1">
        requirements
       </span>
      </em>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.688.1">
       section.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.689.1">
      A launched EC2 instance, launched following the
     </span>
     <em class="italic">
      <span class="koboSpan" id="kobo.690.1">
       Launching an EC2 instance with a web server using user data
      </span>
     </em>
     <span class="koboSpan" id="kobo.691.1">
      recipe in
     </span>
     <a href="B21384_05.xhtml#_idTextAnchor169">
      <span class="No-Break">
       <em class="italic">
        <span class="koboSpan" id="kobo.692.1">
         Chapter 5
        </span>
       </em>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.693.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-407">
    <a id="_idTextAnchor411">
    </a>
    <span class="koboSpan" id="kobo.694.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.695.1">
     We can create an AMI from an EC2 instance
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.696.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.697.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.698.1">
       EC2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.699.1">
      service in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.700.1">
       the console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.701.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.702.1">
       Instances
      </span>
     </strong>
     <span class="koboSpan" id="kobo.703.1">
      , select our instance, click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.704.1">
       Actions
      </span>
     </strong>
     <span class="koboSpan" id="kobo.705.1">
      , expand
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.706.1">
       Image and templates
      </span>
     </strong>
     <span class="koboSpan" id="kobo.707.1">
      , and then click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.708.1">
        Create image
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.709.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.710.1">
      On the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.711.1">
       Create image
      </span>
     </strong>
     <span class="koboSpan" id="kobo.712.1">
      screen, provide
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.713.1">
       Image name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.714.1">
      and
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.715.1">
       Image description - optional
      </span>
     </strong>
     <span class="koboSpan" id="kobo.716.1">
      .
     </span>
     <span class="koboSpan" id="kobo.716.2">
      Use the defaults for the other parameters and click on
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.717.1">
        Create image
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.718.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.719.1">
      If we go to the AMIs list, our AMI should display its initial status as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.720.1">
       Pending
      </span>
     </strong>
     <span class="koboSpan" id="kobo.721.1">
      .
     </span>
     <span class="koboSpan" id="kobo.721.2">
      Once the status changes to
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.722.1">
       Available
      </span>
     </strong>
     <span class="koboSpan" id="kobo.723.1">
      , create a new instance from this AMI.
     </span>
     <span class="koboSpan" id="kobo.723.2">
      While launching the instance, choose our AMI from the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.724.1">
       My
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.725.1">
        AMI
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.726.1">
       tab.
      </span>
     </span>
    </li>
   </ol>
   <h2 id="_idParaDest-408">
    <a id="_idTextAnchor412">
    </a>
    <span class="koboSpan" id="kobo.727.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.728.1">
     In this recipe, we created
    </span>
    <a id="_idIndexMarker1250">
    </a>
    <span class="koboSpan" id="kobo.729.1">
     an AMI from an EC2 instance.
    </span>
    <span class="koboSpan" id="kobo.729.2">
     Information
    </span>
    <a id="_idIndexMarker1251">
    </a>
    <span class="koboSpan" id="kobo.730.1">
     related to the launch of an instance, including any organization-specific configuration, can be saved into an AMI.
    </span>
    <span class="koboSpan" id="kobo.730.2">
     We used Amazon Linux 2023 as our base AMI within this recipe and hence used commands that are specific to Amazon Linux 2023.
    </span>
    <span class="koboSpan" id="kobo.730.3">
     If you are using Amazon Linux 2, you can also use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.731.1">
      same commands.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.732.1">
     We did a similar configuration in
    </span>
    <a href="B21384_05.xhtml#_idTextAnchor169">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.733.1">
        Chapter 5
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.734.1">
     using EC2 user data.
    </span>
    <span class="koboSpan" id="kobo.734.2">
     Instances from AMIs have faster boot times than instances with the same configuration defined through EC2 user data.
    </span>
    <span class="koboSpan" id="kobo.734.3">
     This is because we can have packages preinstalled in an AMI, whereas we need to install them at launch with
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.735.1">
      user data.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-409">
    <a id="_idTextAnchor413">
    </a>
    <span class="koboSpan" id="kobo.736.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.737.1">
     Let’s quickly go through some important concepts
    </span>
    <a id="_idIndexMarker1252">
    </a>
    <span class="koboSpan" id="kobo.738.1">
     related
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.739.1">
      to AMIs:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.740.1">
      Multiple EC2 instances can be launched from a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.741.1">
       single AMI.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.742.1">
      AMIs are specific to a Region, but you can copy them across Regions.
     </span>
     <span class="koboSpan" id="kobo.742.2">
      While launching an instance, we can choose between the AMIs suggested by Amazon, our own AMIs, AWS Marketplace AMIs, and community AMIs.
     </span>
     <span class="koboSpan" id="kobo.742.3">
      We can also filter the list based on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.743.1">
       additional parameters.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.744.1">
      We should only use public AMIs that we trust.
     </span>
     <span class="koboSpan" id="kobo.744.2">
      We can check ratings for AMIs before
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.745.1">
       using them.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.746.1">
      AMIs are stored in S3.
     </span>
     <span class="koboSpan" id="kobo.746.2">
      Hence, we will be charged based on S3 pricing, which is also dependent on our free tier eligibility and usage.
     </span>
     <span class="koboSpan" id="kobo.746.3">
      However, we won’t be able to see the AMI or its bucket from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.747.1">
       S3 console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.748.1">
      By default, AMIs are private for our account and Region.
     </span>
     <span class="koboSpan" id="kobo.748.2">
      We can make our AMIs public for other AWS accounts
     </span>
     <a id="_idIndexMarker1253">
     </a>
     <span class="koboSpan" id="kobo.749.1">
      to use or sell them through
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.750.1">
       AWS Marketplace.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-410">
    <a id="_idTextAnchor414">
    </a>
    <span class="koboSpan" id="kobo.751.1">
     See also
    </span>
   </h2>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.752.1">
      You can read more
     </span>
     <a id="_idIndexMarker1254">
     </a>
     <span class="koboSpan" id="kobo.753.1">
      about AMIs
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.754.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/getting-started-with-amis-for-ec2-instances-in-aws">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.755.1">
        https://www.cloudericks.com/blog/getting-started-with-amis-for-ec2-instances-in-aws
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.756.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.757.1">
      Read more about
     </span>
     <a id="_idIndexMarker1255">
     </a>
     <span class="koboSpan" id="kobo.758.1">
      AMI hardening
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.759.1">
       at
      </span>
     </span>
     <a href="https://www.cloudericks.com/blog/ami-hardening-for-ensuring-security-and-stability-in-our-aws-environment">
      <span class="No-Break">
       <span class="koboSpan" id="kobo.760.1">
        https://www.cloudericks.com/blog/ami-hardening-for-ensuring-security-and-stability-in-our-aws-environment
       </span>
      </span>
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.761.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <h1 id="_idParaDest-411">
    <a id="_idTextAnchor415">
    </a>
    <span class="koboSpan" id="kobo.762.1">
     Using security products from AWS Marketplace
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.763.1">
     In this recipe, we will
    </span>
    <a id="_idIndexMarker1256">
    </a>
    <span class="koboSpan" id="kobo.764.1">
     learn to use various
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.765.1">
      security products
     </span>
    </strong>
    <span class="koboSpan" id="kobo.766.1">
     from AWS Marketplace.
    </span>
    <span class="koboSpan" id="kobo.766.2">
     Many third-party
    </span>
    <a id="_idIndexMarker1257">
    </a>
    <span class="koboSpan" id="kobo.767.1">
     companies will install and configure their products and solutions on EC2 instances and provide them as AMIs in AWS Marketplace.
    </span>
    <span class="koboSpan" id="kobo.767.2">
     Marketplace AMIs can be considered EC2 instances with pre-configured software.
    </span>
    <span class="koboSpan" id="kobo.767.3">
     Alternatively, we can also buy the products directly from these vendors and do the configurations on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.768.1">
      our own.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-412">
    <a id="_idTextAnchor416">
    </a>
    <span class="koboSpan" id="kobo.769.1">
     Getting ready...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.770.1">
     We need a working AWS account, and a user as described in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.771.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.772.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.773.1">
      section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-413">
    <a id="_idTextAnchor417">
    </a>
    <span class="koboSpan" id="kobo.774.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.775.1">
     We can find and use
    </span>
    <a id="_idIndexMarker1258">
    </a>
    <span class="koboSpan" id="kobo.776.1">
     security-related AMIs from AWS Marketplace
    </span>
    <a id="_idIndexMarker1259">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.777.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.778.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.779.1">
       EC2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.780.1">
      service on
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.781.1">
       the dashboard.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.782.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.783.1">
       Instances
      </span>
     </strong>
     <span class="koboSpan" id="kobo.784.1">
      from the left sidebar and click
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.785.1">
        Launch instances
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.786.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.787.1">
      Under
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.788.1">
       Application and OS Images (Amazon Machine Image)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.789.1">
      , click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.790.1">
       Browse
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.791.1">
        more AMIs
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.792.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer301">
     <span class="koboSpan" id="kobo.793.1">
      <img alt="Figure 10.10 – Browsing AMIS from AWS Marketplace" src="image/B21384_10_10.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.794.1">
     Figure 10.10 – Browsing AMIS from AWS Marketplace
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.795.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.796.1">
       AWS Marketplace AMIs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.797.1">
      tab and search for
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.798.1">
       security
      </span>
     </strong>
     <span class="koboSpan" id="kobo.799.1">
      in the search bar.
     </span>
     <span class="koboSpan" id="kobo.799.2">
      As of this writing, 10719 AMIs
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.800.1">
       are available.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer302">
     <span class="koboSpan" id="kobo.801.1">
      <img alt="Figure 10.11 – AWS Marketplace AMIs" src="image/B21384_10_11.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.802.1">
     Figure 10.11 – AWS Marketplace AMIs
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.803.1">
     We can further filter results
    </span>
    <a id="_idIndexMarker1260">
    </a>
    <span class="koboSpan" id="kobo.804.1">
     based on parameters
    </span>
    <a id="_idIndexMarker1261">
    </a>
    <span class="koboSpan" id="kobo.805.1">
     such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.806.1">
      Operating System
     </span>
    </strong>
    <span class="koboSpan" id="kobo.807.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.808.1">
      Software Free Trial
     </span>
    </strong>
    <span class="koboSpan" id="kobo.809.1">
     ,
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.810.1">
      Software Pricing Plans
     </span>
    </strong>
    <span class="koboSpan" id="kobo.811.1">
     , and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.812.1">
      Support
     </span>
    </strong>
    <span class="koboSpan" id="kobo.813.1">
     from the left sidebar.
    </span>
    <span class="koboSpan" id="kobo.813.2">
     Once we decide on a product, we can follow the recipes within
    </span>
    <a href="B21384_05.xhtml#_idTextAnchor169">
     <span class="No-Break">
      <em class="italic">
       <span class="koboSpan" id="kobo.814.1">
        Chapter 5
       </span>
      </em>
     </span>
    </a>
    <span class="koboSpan" id="kobo.815.1">
     , to complete launching
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.816.1">
      the instance.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-414">
    <a id="_idTextAnchor418">
    </a>
    <span class="koboSpan" id="kobo.817.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.818.1">
     AWS may not be able to provide all the security products we need.
    </span>
    <span class="koboSpan" id="kobo.818.2">
     Many third-party companies have developed products and solutions that complement AWS services for security and compliance.
    </span>
    <span class="koboSpan" id="kobo.818.3">
     We saw how to find such AMIs in AWS Marketplace.
    </span>
    <span class="koboSpan" id="kobo.818.4">
     Once we decide on a product, we can launch an instance with that AMI.
    </span>
    <span class="koboSpan" id="kobo.818.5">
     For more details about the particular product we selected, we can refer to the respective
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.819.1">
      product’s documentation.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-415">
    <a id="_idTextAnchor419">
    </a>
    <span class="koboSpan" id="kobo.820.1">
     There’s more...
    </span>
   </h2>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.821.1">
      Network packet inspection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.822.1">
     , also referred to as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.823.1">
      deep packet inspection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.824.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.825.1">
      DPI
     </span>
    </strong>
    <span class="koboSpan" id="kobo.826.1">
     ), inspects packet
    </span>
    <a id="_idIndexMarker1262">
    </a>
    <span class="koboSpan" id="kobo.827.1">
     headers and data
    </span>
    <a id="_idIndexMarker1263">
    </a>
    <span class="koboSpan" id="kobo.828.1">
     contents of packets to detect non-compliant data, viruses, spam, and so on, and can take actions such as blocking and logging.
    </span>
    <span class="koboSpan" id="kobo.828.2">
     It combines
    </span>
    <a id="_idIndexMarker1264">
    </a>
    <span class="koboSpan" id="kobo.829.1">
     the functionalities
    </span>
    <a id="_idIndexMarker1265">
    </a>
    <span class="koboSpan" id="kobo.830.1">
     of a traditional firewall with an
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.831.1">
      intrusion detection system
     </span>
    </strong>
    <span class="koboSpan" id="kobo.832.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.833.1">
      IDS
     </span>
    </strong>
    <span class="koboSpan" id="kobo.834.1">
     ) or an
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.835.1">
      intrusion prevention
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.836.1">
       system
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.837.1">
      (
     </span>
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.838.1">
       IPS
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.839.1">
      ).
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.840.1">
      AWS Web Application Firewall
     </span>
    </strong>
    <span class="koboSpan" id="kobo.841.1">
     (
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.842.1">
      WAF
     </span>
    </strong>
    <span class="koboSpan" id="kobo.843.1">
     ), the firewall service in AWS, can check
    </span>
    <a id="_idIndexMarker1266">
    </a>
    <span class="koboSpan" id="kobo.844.1">
     for known exploits such as SQL injection, cross-site scripting, and so on.
    </span>
    <span class="koboSpan" id="kobo.844.2">
     However, AWS cannot do a complete network packet inspection and lacks the functionality of an IDS and IPS.
    </span>
    <span class="koboSpan" id="kobo.844.3">
     We can, however, use solutions from AWS Marketplace.
    </span>
    <span class="koboSpan" id="kobo.844.4">
     There are solutions provided by vendors including Alert Logic, Trend Micro, McAfee, Palo Alto Networks, and Cisco Systems,
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.845.1">
      among others.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-416">
    <a id="_idTextAnchor420">
    </a>
    <span class="koboSpan" id="kobo.846.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.847.1">
     You can read about
    </span>
    <a id="_idIndexMarker1267">
    </a>
    <span class="koboSpan" id="kobo.848.1">
     security products in AWS Marketplace
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.849.1">
      at
     </span>
    </span>
    <a href="https://www.cloudericks.com/blog/getting-started-with-aws-marketplace">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.850.1">
       https://www.cloudericks.com/blog/getting-started-with-aws-marketplace
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.851.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-417">
    <a id="_idTextAnchor421">
    </a>
    <span class="koboSpan" id="kobo.852.1">
     Using AWS Trusted Advisor for recommendations
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.853.1">
     In this recipe, we will learn
    </span>
    <a id="_idIndexMarker1268">
    </a>
    <span class="koboSpan" id="kobo.854.1">
     to use Trusted Advisor.
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.855.1">
      Trusted Advisor
     </span>
    </strong>
    <span class="koboSpan" id="kobo.856.1">
     is an online tool in AWS that provides recommendations related to cost optimizations, performance, security, fault tolerance, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.857.1">
      service limits.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-418">
    <a id="_idTextAnchor422">
    </a>
    <span class="koboSpan" id="kobo.858.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.859.1">
     We need a working AWS account, and a user as described in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.860.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.861.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.862.1">
      section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-419">
    <a id="_idTextAnchor423">
    </a>
    <span class="koboSpan" id="kobo.863.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.864.1">
     We can use Trusted Advisor
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.865.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.866.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.867.1">
       Trusted Advisor
      </span>
     </strong>
     <span class="koboSpan" id="kobo.868.1">
      service in the AWS Management Console.
     </span>
     <span class="koboSpan" id="kobo.868.2">
      We should see the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.869.1">
       Recommendations
      </span>
     </strong>
     <span class="koboSpan" id="kobo.870.1">
      categories and basic recommendations on the dashboard landing page, as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.871.1">
       following figure:
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer303">
     <span class="koboSpan" id="kobo.872.1">
      <img alt="Figure 10.12 – The Trusted Advisor dashboard" src="image/B21384_10_12.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.873.1">
     Figure 10.12 – The Trusted Advisor dashboard
    </span>
   </p>
   <ol>
    <li value="2">
     <span class="koboSpan" id="kobo.874.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.875.1">
       Security
      </span>
     </strong>
     <span class="koboSpan" id="kobo.876.1">
      from the left sidebar
     </span>
     <a id="_idIndexMarker1269">
     </a>
     <span class="koboSpan" id="kobo.877.1">
      to see recommendations related
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.878.1">
       to security.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer304">
     <span class="koboSpan" id="kobo.879.1">
      <img alt="Figure 10.13 – The Security recommendation page" src="image/B21384_10_13.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.880.1">
     Figure 10.13 – The Security recommendation page
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.881.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.882.1">
       Download all checks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.883.1">
      to download all checks or click on the download button for a recommendation to download the details of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.884.1">
       that recommendation.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.885.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.886.1">
       Refresh all checks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.887.1">
      to download all checks or click on the refresh button for a recommendation to refresh the details of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.888.1">
       that recommendation.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.889.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.890.1">
       Service limits
      </span>
     </strong>
     <span class="koboSpan" id="kobo.891.1">
      from the left sidebar to see recommendations related to service limits such as services that use more than 80% of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.892.1">
       service quota.
      </span>
     </span>
    </li>
   </ol>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.893.1">
     Important note
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.894.1">
     As of this writing, except for
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.895.1">
      Security
     </span>
    </strong>
    <span class="koboSpan" id="kobo.896.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.897.1">
      Service limits
     </span>
    </strong>
    <span class="koboSpan" id="kobo.898.1">
     , all other recommendations are only available after upgrading.
    </span>
    <span class="koboSpan" id="kobo.898.2">
     We can upgrade after clicking on
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.899.1">
      Recommendations
     </span>
    </strong>
    <span class="koboSpan" id="kobo.900.1">
     from the left sidebar or after going to any of the recommendation category options in the left sidebar except
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.901.1">
      Security
     </span>
    </strong>
    <span class="koboSpan" id="kobo.902.1">
     and
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.903.1">
       Service limits
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.904.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-420">
    <a id="_idTextAnchor424">
    </a>
    <span class="koboSpan" id="kobo.905.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.906.1">
     Trusted Advisor provides recommendations
    </span>
    <a id="_idIndexMarker1270">
    </a>
    <span class="koboSpan" id="kobo.907.1">
     related to cost optimizations, performance, security, fault tolerance, service limits, and operational excellence.
    </span>
    <span class="koboSpan" id="kobo.907.2">
     There are two service levels: the Basic plan and the fully Trusted Advisor.
    </span>
    <span class="koboSpan" id="kobo.907.3">
     The Basic plan is free and covers core checks and recommendations.
    </span>
    <span class="koboSpan" id="kobo.907.4">
     Fully Trusted Advisor functionality is available for the Developer, Business, and Enterprise AWS
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.908.1">
      support plans.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-421">
    <a id="_idTextAnchor425">
    </a>
    <span class="koboSpan" id="kobo.909.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.910.1">
     The Trusted Advisor Basic plan currently has no recommendations available under cost optimization, performance, fault tolerance, and operational excellence.
    </span>
    <span class="koboSpan" id="kobo.910.2">
     For these categories, recommendations are available only with the fully Trusted Advisor.
    </span>
    <span class="koboSpan" id="kobo.910.3">
     For the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.911.1">
      Security
     </span>
    </strong>
    <span class="koboSpan" id="kobo.912.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.913.1">
      Service limits
     </span>
    </strong>
    <span class="koboSpan" id="kobo.914.1">
     categories, some recommendations come with both the Basic plan as well as the full
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.915.1">
      Trusted Advisor.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-422">
    <a id="_idTextAnchor426">
    </a>
    <span class="koboSpan" id="kobo.916.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.917.1">
     You can read more about
    </span>
    <a id="_idIndexMarker1271">
    </a>
    <span class="koboSpan" id="kobo.918.1">
     Trusted Advisor
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.919.1">
      at
     </span>
    </span>
    <a href="https://www.cloudericks.com/blog/understanding-aws-trusted-advisor">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.920.1">
       https://www.cloudericks.com/blog/understanding-aws-trusted-advisor
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.921.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-423">
    <a id="_idTextAnchor427">
    </a>
    <span class="koboSpan" id="kobo.922.1">
     Using AWS Artifact for compliance reports
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.923.1">
     In this recipe, we
    </span>
    <a id="_idIndexMarker1272">
    </a>
    <span class="koboSpan" id="kobo.924.1">
     will learn
    </span>
    <a id="_idIndexMarker1273">
    </a>
    <span class="koboSpan" id="kobo.925.1">
     to use AWS Artifact.
    </span>
    <span class="koboSpan" id="kobo.925.2">
     AWS Artifact is a free, self-service portal for accessing AWS’s compliance reports.
    </span>
    <span class="koboSpan" id="kobo.925.3">
     AWS Artifact can be used to access AWS’s security and compliance reports and select
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.926.1">
      online agreements.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-424">
    <a id="_idTextAnchor428">
    </a>
    <span class="koboSpan" id="kobo.927.1">
     Getting ready
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.928.1">
     We need a working AWS account, and a user as described in the
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.929.1">
      Technical
     </span>
    </em>
    <span class="No-Break">
     <em class="italic">
      <span class="koboSpan" id="kobo.930.1">
       requirements
      </span>
     </em>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.931.1">
      section.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-425">
    <a id="_idTextAnchor429">
    </a>
    <span class="koboSpan" id="kobo.932.1">
     How to do it...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.933.1">
     We can use
    </span>
    <a id="_idIndexMarker1274">
    </a>
    <span class="koboSpan" id="kobo.934.1">
     AWS Artifact
    </span>
    <a id="_idIndexMarker1275">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.935.1">
      as follows:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.936.1">
      Go to the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.937.1">
       AWS Artifact
      </span>
     </strong>
     <span class="koboSpan" id="kobo.938.1">
      service in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.939.1">
       the console.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.940.1">
      Click on
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.941.1">
       Reports
      </span>
     </strong>
     <span class="koboSpan" id="kobo.942.1">
      in the left sidebar to see the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.943.1">
       available reports.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer305">
     <span class="koboSpan" id="kobo.944.1">
      <img alt="Figure 10.14 – Reports from AWS Artifact" src="image/B21384_10_14.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.945.1">
     Figure 10.14 – Reports from AWS Artifact
    </span>
   </p>
   <ol>
    <li value="3">
     <span class="koboSpan" id="kobo.946.1">
      Click
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.947.1">
       Agreements
      </span>
     </strong>
     <span class="koboSpan" id="kobo.948.1">
      in the left sidebar to see
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.949.1">
       Account agreements
      </span>
     </strong>
     <span class="koboSpan" id="kobo.950.1">
      and
     </span>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.951.1">
        Organization agreements
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.952.1">
       .
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer306">
     <span class="koboSpan" id="kobo.953.1">
      <img alt="Figure 10.15 – Agreements" src="image/B21384_10_15.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.954.1">
     Figure 10.15 – Agreements
    </span>
   </p>
   <p class="callout-heading">
    <span class="koboSpan" id="kobo.955.1">
     Tip
    </span>
   </p>
   <p class="callout">
    <span class="koboSpan" id="kobo.956.1">
     We can click on the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.957.1">
      Organization agreements
     </span>
    </strong>
    <span class="koboSpan" id="kobo.958.1">
     tab from an organization’s master account to manage agreements for our master account and all member accounts in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.959.1">
      our organization.
     </span>
    </span>
   </p>
   <ol>
    <li value="4">
     <span class="koboSpan" id="kobo.960.1">
      Select any agreement
     </span>
     <a id="_idIndexMarker1276">
     </a>
     <span class="koboSpan" id="kobo.961.1">
      and click on the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.962.1">
       Download agreement
      </span>
     </strong>
     <span class="koboSpan" id="kobo.963.1">
      button to download
     </span>
     <a id="_idIndexMarker1277">
     </a>
     <span class="koboSpan" id="kobo.964.1">
      the agreement.
     </span>
     <span class="koboSpan" id="kobo.964.2">
      If an
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.965.1">
       Accept NDA to download report
      </span>
     </strong>
     <span class="koboSpan" id="kobo.966.1">
      message appears, we need to select the
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.967.1">
       I have read and agree to the all the terms of the
      </span>
     </strong>
     <span class="No-Break">
      <strong class="bold">
       <span class="koboSpan" id="kobo.968.1">
        NDA
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.969.1">
       checkbox.
      </span>
     </span>
    </li>
   </ol>
   <div>
    <div class="IMG---Figure" id="_idContainer307">
     <span class="koboSpan" id="kobo.970.1">
      <img alt="img" role="presentation" src="image/B21384_10_16.jpg"/>
     </span>
    </div>
   </div>
   <p class="list-inset">
    <span class="koboSpan" id="kobo.971.1">
     Click
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.972.1">
      Accept NDA
     </span>
    </strong>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.973.1">
       and download
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.974.1">
      .
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer308">
     <span class="koboSpan" id="kobo.975.1">
      <img alt="Figure 10.16 – Accepting and downloading the report" src="image/B21384_10_17.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.976.1">
     Figure 10.16 – Accepting and downloading the report
    </span>
   </p>
   <h2 id="_idParaDest-426">
    <a id="_idTextAnchor430">
    </a>
    <span class="koboSpan" id="kobo.977.1">
     How it works...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.978.1">
     We’ve learned to use AWS Artifact
    </span>
    <a id="_idIndexMarker1278">
    </a>
    <span class="koboSpan" id="kobo.979.1">
     for checking compliance
    </span>
    <a id="_idIndexMarker1279">
    </a>
    <span class="koboSpan" id="kobo.980.1">
     reports.
    </span>
    <span class="koboSpan" id="kobo.980.2">
     The following are some of the reports currently available with AWS Artifact: Accessibility Conformance Report (VPAT) – Amazon Cognito User Pool, HDS Certification in English, ABS Cloud Computing Implementation Guide 2.0 – Workbook, Accessibility Conformance Report (VPAT) – Amazon API Gateway, Accessibility Conformance Report (VPAT) – Amazon AppFlow, Accessibility Conformance Report (VPAT) – Amazon AppStream 2.0, Accessibility Conformance Report (VPAT) – Amazon Simple Queue Service, Accessibility Conformance Report (VPAT) – Amazon Simple Notification Service (SNS), and Accessibility Conformance Report (VPAT) – Amazon Simple Email
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.981.1">
      Service (SES).
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-427">
    <a id="_idTextAnchor431">
    </a>
    <span class="koboSpan" id="kobo.982.1">
     There’s more...
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.983.1">
     We saw many AWS services within this book to help us secure our infrastructure on AWS.
    </span>
    <span class="koboSpan" id="kobo.983.2">
     However, that is not an exhaustive list.
    </span>
    <span class="koboSpan" id="kobo.983.3">
     AWS also constantly adds more services and features.
    </span>
    <span class="koboSpan" id="kobo.983.4">
     Let’s quickly go through some more services related
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.984.1">
      to security:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.985.1">
       Amazon Detective
      </span>
     </strong>
     <span class="koboSpan" id="kobo.986.1">
      is a service that can help
     </span>
     <a id="_idIndexMarker1280">
     </a>
     <span class="koboSpan" id="kobo.987.1">
      in finding the root cause of potential security issues by analyzing and visualizing security data.
     </span>
     <span class="koboSpan" id="kobo.987.2">
      As of this writing, this service is
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.988.1">
       in preview.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.989.1">
       AWS Control Tower
      </span>
     </strong>
     <span class="koboSpan" id="kobo.990.1">
      helps us to set up and govern
     </span>
     <a id="_idIndexMarker1281">
     </a>
     <span class="koboSpan" id="kobo.991.1">
      a multi-account AWS environment based on best practices related to security and compliance.
     </span>
     <span class="koboSpan" id="kobo.991.2">
      End users can provision new accounts following the company-wide compliance policies centrally established, and the cloud administrators can see a complete overview of the landing zone.
     </span>
     <span class="koboSpan" id="kobo.991.3">
      A landing zone is a container for all of our OUs, accounts, users, and other resources that need to be compliant.
     </span>
     <span class="koboSpan" id="kobo.991.4">
      Landing zones should be in a non-member account of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.992.1">
       an organization.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.993.1">
       AWS License Manager
      </span>
     </strong>
     <span class="koboSpan" id="kobo.994.1">
      helps us manage licenses from third-party
     </span>
     <a id="_idIndexMarker1282">
     </a>
     <span class="koboSpan" id="kobo.995.1">
      vendors, such as Microsoft, Oracle, and SAP when we bring them to AWS.
     </span>
     <span class="koboSpan" id="kobo.995.2">
      We can control their usage and even set customized rules on their usage for different groups
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.996.1">
       of users.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.997.1">
       AWS Personal Health Dashboard
      </span>
     </strong>
     <span class="koboSpan" id="kobo.998.1">
      is a service available to customers
     </span>
     <a id="_idIndexMarker1283">
     </a>
     <span class="koboSpan" id="kobo.999.1">
      with the Premium support plan to monitor, manage, and optimize their
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1000.1">
       AWS environment.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1001.1">
       AWS Well-Architected Tool
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1002.1">
      is a management service
     </span>
     <a id="_idIndexMarker1284">
     </a>
     <span class="koboSpan" id="kobo.1003.1">
      based on the AWS
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.1004.1">
       Well-Architected Framework
      </span>
     </strong>
     <span class="koboSpan" id="kobo.1005.1">
      .
     </span>
     <span class="koboSpan" id="kobo.1005.2">
      We can define workloads
     </span>
     <a id="_idIndexMarker1285">
     </a>
     <span class="koboSpan" id="kobo.1006.1">
      against current AWS best practices and this tool will provide guidance on how to improve our
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1007.1">
       cloud architectures.
      </span>
     </span>
    </li>
   </ul>
   <h2 id="_idParaDest-428">
    <a id="_idTextAnchor432">
    </a>
    <span class="koboSpan" id="kobo.1008.1">
     See also
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.1009.1">
     You can read about
    </span>
    <a id="_idIndexMarker1286">
    </a>
    <span class="koboSpan" id="kobo.1010.1">
     AWS Artifact
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1011.1">
      at
     </span>
    </span>
    <a href="https://www.cloudericks.com/blog/getting-started-with-aws-artifact">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.1012.1">
       https://www.cloudericks.com/blog/getting-started-with-aws-artifact
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.1013.1">
      .
     </span>
    </span>
   </p>
  </div>
 </body></html>