<html><head></head><body>
<div id="_idContainer013">
<h1 class="chapter-number" id="_idParaDest-15"><a id="_idTextAnchor014"/><span class="koboSpan" id="kobo.1.1">1</span></h1>
<h1 id="_idParaDest-16"><a id="_idTextAnchor015"/><span class="koboSpan" id="kobo.2.1">Getting Started with Penetration Testing Labs in the Cloud</span></h1>
<p><span class="koboSpan" id="kobo.3.1">The demand for cloud security professionals continues to increase as the number of cloud-related threats and incidents rises significantly every year. </span><span class="koboSpan" id="kobo.3.2">To manage the risks involved when learning cloud penetration testing and ethical hacking, security engineers seeking to advance their careers would benefit from having a solid understanding of how to set up penetration testing environments in </span><span class="No-Break"><span class="koboSpan" id="kobo.4.1">the cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.5.1">In this introductory chapter, we will quickly go through the benefits of setting up penetration testing labs in the cloud. </span><span class="koboSpan" id="kobo.5.2">We will explore how modern cloud applications are designed, developed, and deployed as this will be essential when we build penetration testing labs in the succeeding chapters. </span><span class="koboSpan" id="kobo.5.3">In the final section of this chapter, we’ll delve deeper into several relevant factors to consider when designing and building vulnerable </span><span class="No-Break"><span class="koboSpan" id="kobo.6.1">cloud infrastructures.</span></span></p>
<p><span class="koboSpan" id="kobo.7.1">That said, we will cover the </span><span class="No-Break"><span class="koboSpan" id="kobo.8.1">following topics:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.9.1">Why build your penetration testing labs in </span><span class="No-Break"><span class="koboSpan" id="kobo.10.1">the cloud?</span></span></li>
<li><span class="koboSpan" id="kobo.11.1">Recognizing the impact of cloud computing on the </span><span class="No-Break"><span class="koboSpan" id="kobo.12.1">cybersecurity landscape</span></span></li>
<li><span class="koboSpan" id="kobo.13.1">Exploring how modern cloud applications are designed, developed, </span><span class="No-Break"><span class="koboSpan" id="kobo.14.1">and deployed</span></span></li>
<li><span class="koboSpan" id="kobo.15.1">Examining the considerations when building penetration testing lab environments in </span><span class="No-Break"><span class="koboSpan" id="kobo.16.1">the cloud</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.17.1">With these in mind, let’s </span><span class="No-Break"><span class="koboSpan" id="kobo.18.1">get started!</span></span></p>
<h1 id="_idParaDest-17"><a id="_idTextAnchor016"/><span class="koboSpan" id="kobo.19.1">Why build your penetration testing labs in the cloud?</span></h1>
<p><span class="koboSpan" id="kobo.20.1">At </span><a id="_idIndexMarker000"/><span class="koboSpan" id="kobo.21.1">some point in their careers, security professionals may build penetration testing labs where they can practice their skills safely in an isolated environment. </span><span class="koboSpan" id="kobo.21.2">At this point, you might be asking yourself: </span><em class="italic"><span class="koboSpan" id="kobo.22.1">What’s inside a penetration testing </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.23.1">lab environment?</span></em></span></p>
<div>
<div class="IMG---Figure" id="_idContainer007">
<span class="koboSpan" id="kobo.24.1"><img alt="" src="image/B19755_01_1.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.25.1">Figure 1.1 – Penetration testing lab example</span></p>
<p><span class="koboSpan" id="kobo.26.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.27.1">Figure 1</span></em></span><em class="italic"><span class="koboSpan" id="kobo.28.1">.1</span></em><span class="koboSpan" id="kobo.29.1">, we can </span><a id="_idIndexMarker001"/><span class="koboSpan" id="kobo.30.1">see that a </span><strong class="bold"><span class="koboSpan" id="kobo.31.1">penetration testing lab environment</span></strong><span class="koboSpan" id="kobo.32.1"> is simply a controlled environment that hosts several vulnerable-by-design applications and services. </span><span class="koboSpan" id="kobo.32.2">These applications have known vulnerabilities and misconfigurations that can be exploited using the right set of tools and techniques. </span><span class="koboSpan" id="kobo.32.3">These vulnerabilities are incorporated to provide a realistic environment for penetration testers to practice and simulate real-world attack scenarios. </span><span class="koboSpan" id="kobo.32.4">In addition to this, security researchers and penetration testers can dive deeper into various attack vectors, explore new techniques for exploitation, and </span><span class="No-Break"><span class="koboSpan" id="kobo.33.1">develop countermeasures.</span></span></p>
<p><span class="koboSpan" id="kobo.34.1">Before going over the benefits of setting up our penetration testing labs in the cloud, let’s discuss why having a penetration testing lab environment is a great idea. </span><span class="koboSpan" id="kobo.34.2">Here are some of the reasons why it is recommended to have a penetration testing </span><span class="No-Break"><span class="koboSpan" id="kobo.35.1">lab environment:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.36.1">Learning penetration testing in a dedicated lab environment helps you stay away from </span><a id="_idIndexMarker002"/><span class="koboSpan" id="kobo.37.1">legal trouble. </span><span class="koboSpan" id="kobo.37.2">Attacking a system owned by another person or company is illegal without a contract, consent, </span><span class="No-Break"><span class="koboSpan" id="kobo.38.1">or agreement.</span></span></li>
<li><span class="koboSpan" id="kobo.39.1">Given that penetration tests may corrupt data, crash servers, and leave environments in an unstable state, having a separate penetration testing lab will help ensure that production environments are not affected by the possible side effects of penetration </span><span class="No-Break"><span class="koboSpan" id="kobo.40.1">test simulations.</span></span></li>
<li><span class="koboSpan" id="kobo.41.1">We may also use these lab environments while developing custom penetration testing tools to automate and speed up certain steps in the penetration </span><span class="No-Break"><span class="koboSpan" id="kobo.42.1">testing process.</span></span></li>
<li><span class="koboSpan" id="kobo.43.1">We can also </span><a id="_idIndexMarker003"/><span class="koboSpan" id="kobo.44.1">practice </span><strong class="bold"><span class="koboSpan" id="kobo.45.1">defense evasion</span></strong><span class="koboSpan" id="kobo.46.1"> in these environments by setting up various defense mechanisms that could detect and block certain types </span><span class="No-Break"><span class="koboSpan" id="kobo.47.1">of attacks.</span></span></li>
<li><span class="koboSpan" id="kobo.48.1">We can hack lab environments to teach the fundamentals of penetration testing to security enthusiasts </span><span class="No-Break"><span class="koboSpan" id="kobo.49.1">and beginners.</span></span></li>
<li><span class="koboSpan" id="kobo.50.1">Penetration testing labs can be used to validate a newly disclosed vulnerability. </span><span class="koboSpan" id="kobo.50.2">These isolated environments can also be used to verify whether a previously known vulnerability has already been remediated after an update, a configuration change, or a patch has </span><span class="No-Break"><span class="koboSpan" id="kobo.51.1">been applied.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.52.1">Now that we have discussed </span><em class="italic"><span class="koboSpan" id="kobo.53.1">why</span></em><span class="koboSpan" id="kobo.54.1"> it is a good idea to have a penetration testing lab environment, it’s about time we talk about </span><em class="italic"><span class="koboSpan" id="kobo.55.1">where</span></em><span class="koboSpan" id="kobo.56.1"> we can host these hacking labs. </span><span class="koboSpan" id="kobo.56.2">In the past, most security practitioners set up their lab environments primarily on their local machines (for example, their personal computer or laptop). </span><span class="koboSpan" id="kobo.56.3">They invested in dedicated hardware </span><a id="_idIndexMarker004"/><span class="koboSpan" id="kobo.57.1">where they can run virtual lab environments using </span><strong class="bold"><span class="koboSpan" id="kobo.58.1">VirtualBox</span></strong><span class="koboSpan" id="kobo.59.1"> or other alternative </span><span class="No-Break"><span class="koboSpan" id="kobo.60.1">virtualization software:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer008">
<span class="koboSpan" id="kobo.61.1"><img alt="" src="image/B19755_01_2.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.62.1">Figure 1.2 – Running penetration testing lab environments on your local machine</span></p>
<p><span class="koboSpan" id="kobo.63.1">In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.64.1">Figure 1</span></em></span><em class="italic"><span class="koboSpan" id="kobo.65.1">.2</span></em><span class="koboSpan" id="kobo.66.1">, we can see that a </span><a id="_idIndexMarker005"/><span class="koboSpan" id="kobo.67.1">common practice in home lab environments involves creating </span><strong class="bold"><span class="koboSpan" id="kobo.68.1">snapshots</span></strong><span class="koboSpan" id="kobo.69.1"> (used to capture the current state) before tests are performed since certain steps in the penetration testing</span><a id="_idIndexMarker006"/><span class="koboSpan" id="kobo.70.1"> process may affect the configuration and stability of the target machine. </span><span class="koboSpan" id="kobo.70.2">These snapshots can then be used to revert and restore the setup to its original state so that security professionals and researchers can perform a series of tests and experiments without having to worry about the side effects of the </span><span class="No-Break"><span class="koboSpan" id="kobo.71.1">previous tests.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.72.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.73.1">In the past, one of the common targets that was set up in penetration testing lab environments was an </span><a id="_idIndexMarker007"/><span class="koboSpan" id="kobo.74.1">intentionally vulnerable Linux image called </span><strong class="bold"><span class="koboSpan" id="kobo.75.1">Metasploitable</span></strong><span class="koboSpan" id="kobo.76.1">. </span><span class="koboSpan" id="kobo.76.2">It contained various vulnerable running services mapped to several open ports waiting to be scanned and attacked. </span><span class="koboSpan" id="kobo.76.3">Practitioners would then set up an attacker </span><a id="_idIndexMarker008"/><span class="koboSpan" id="kobo.77.1">machine using </span><strong class="bold"><span class="koboSpan" id="kobo.78.1">BackTrack Linux</span></strong><span class="koboSpan" id="kobo.79.1"> (now known as </span><strong class="bold"><span class="koboSpan" id="kobo.80.1">Kali Linux</span></strong><span class="koboSpan" id="kobo.81.1">) that had been </span><a id="_idIndexMarker009"/><span class="koboSpan" id="kobo.82.1">configured with </span><a id="_idIndexMarker010"/><span class="koboSpan" id="kobo.83.1">a variety of tools, such as </span><strong class="bold"><span class="koboSpan" id="kobo.84.1">Nmap</span></strong><span class="koboSpan" id="kobo.85.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.86.1">Metasploit</span></strong><span class="koboSpan" id="kobo.87.1">, to attack </span><a id="_idIndexMarker011"/><span class="koboSpan" id="kobo.88.1">the </span><span class="No-Break"><span class="koboSpan" id="kobo.89.1">target machine.</span></span></p>
<p><span class="koboSpan" id="kobo.90.1">Of course, setting up a vulnerable-by-design lab environment on our local machines has its own set of challenges and limitations. </span><span class="koboSpan" id="kobo.90.2">These may include one or more of </span><span class="No-Break"><span class="koboSpan" id="kobo.91.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.92.1">Setting up a </span><a id="_idIndexMarker012"/><span class="koboSpan" id="kobo.93.1">penetration testing lab environment on our personal computer or laptop (most likely containing personal and work files) may have unintended consequences as the entire system might be compromised if the hacking lab environment is set up incorrectly. </span><span class="koboSpan" id="kobo.93.2">In the worst case, we might lose all our files when the system crashes completely due to hardware degradation </span><span class="No-Break"><span class="koboSpan" id="kobo.94.1">or failure.</span></span></li>
<li><span class="koboSpan" id="kobo.95.1">Virtual machines that are used in the lab environment can be resource-hungry. </span><span class="koboSpan" id="kobo.95.2">That said, we may be required to have a more expensive local setup to meet the demands of the virtual machines that </span><span class="No-Break"><span class="koboSpan" id="kobo.96.1">are running.</span></span></li>
<li><span class="koboSpan" id="kobo.97.1">Setting up a vulnerable lab environment can be time-consuming and may require prior knowledge of the tools and applications involved. </span><span class="koboSpan" id="kobo.97.2">The process of configuring and preparing the necessary components for a lab environment, such as vulnerable software or network setups, can be complex and demanding. </span><span class="koboSpan" id="kobo.97.3">It is essential to have a good understanding of the tools and their dependencies, which can be a limitation for those who are new to the field or have </span><span class="No-Break"><span class="koboSpan" id="kobo.98.1">limited experience.</span></span></li>
<li><span class="koboSpan" id="kobo.99.1">Certain vulnerabilities and misconfigurations may be hard to test, especially those that involve the usage and presence of a </span><span class="No-Break"><span class="koboSpan" id="kobo.100.1">cloud service.</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.101.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.102.1">In some cases, we may also encounter licensing issues that prevent us from using certain virtual machines, operating systems, and applications in our hacking </span><span class="No-Break"><span class="koboSpan" id="kobo.103.1">lab environment.</span></span></p>
<p><span class="koboSpan" id="kobo.104.1">To solve one or more of the challenges mentioned, it is a good idea to consider setting up our </span><a id="_idIndexMarker013"/><span class="koboSpan" id="kobo.105.1">penetration testing labs in the cloud. </span><span class="koboSpan" id="kobo.105.2">Here are some of the advantages when setting up cloud penetration </span><span class="No-Break"><span class="koboSpan" id="kobo.106.1">testing labs:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.107.1">Lab environments hosted in the cloud may be closer to what actual production environments deployed in the cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.108.1">look like</span></span></li>
<li><span class="koboSpan" id="kobo.109.1">We can manage costs significantly by having our hacking lab environment running in the cloud for a few hours and then deleting (or turning off) the cloud resources after the tests and experiments </span><span class="No-Break"><span class="koboSpan" id="kobo.110.1">are finished</span></span></li>
<li><span class="koboSpan" id="kobo.111.1">Setting up the cloud lab environment ourselves will help us have a deeper understanding of the implementation and security configuration of the cloud resources deployed in the penetration testing </span><span class="No-Break"><span class="koboSpan" id="kobo.112.1">lab environment</span></span></li>
<li><span class="koboSpan" id="kobo.113.1">It is easier to grow the complexity of vulnerable lab environments in the cloud since resources can be provisioned right away without us having to worry about the prerequisite </span><span class="No-Break"><span class="koboSpan" id="kobo.114.1">hardware requirements</span></span></li>
<li><span class="koboSpan" id="kobo.115.1">Certain attacks are difficult to simulate locally but are relatively simple to carry out in cloud environments (for example, attacks on cloud functions, along with other </span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.116.1">serverless</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.117.1"> resources)</span></span></li>
<li><span class="koboSpan" id="kobo.118.1">Setting up complex lab environments in the cloud may be faster with the help of automation tools, frameworks, </span><span class="No-Break"><span class="koboSpan" id="kobo.119.1">and services</span></span></li>
<li><span class="koboSpan" id="kobo.120.1">We don’t have to worry about the personal and work files stored on our local machine being deleted </span><span class="No-Break"><span class="koboSpan" id="kobo.121.1">or stolen</span></span></li>
<li><span class="koboSpan" id="kobo.122.1">It is easier to have multiple users practice penetration testing in hacking lab environments deployed in </span><span class="No-Break"><span class="koboSpan" id="kobo.123.1">the cloud</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.124.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.125.1">In addition to these, learning penetration testing can be faster in the cloud. </span><span class="koboSpan" id="kobo.125.2">For one thing, downloading large files and setting up vulnerable VMs can be significantly faster in the cloud. </span><span class="koboSpan" id="kobo.125.3">In addition to this, rebuilding cloud environments is generally easier since there are various options to recreate and rebuild these </span><span class="No-Break"><span class="koboSpan" id="kobo.126.1">lab environments.</span></span></p>
<p><span class="koboSpan" id="kobo.127.1">At this point, we should know why it is a </span><em class="italic"><span class="koboSpan" id="kobo.128.1">great</span></em><span class="koboSpan" id="kobo.129.1"> idea to build our penetration testing lab environments in the cloud! </span><span class="koboSpan" id="kobo.129.2">In the next section, we’ll quickly discuss how cloud computing has influenced and shaped the modern </span><span class="No-Break"><span class="koboSpan" id="kobo.130.1">cybersecurity landscape.</span></span></p>
<h1 id="_idParaDest-18"><a id="_idTextAnchor017"/><span class="koboSpan" id="kobo.131.1">Recognizing the impact of cloud computing on the cybersecurity landscape</span></h1>
<p><span class="koboSpan" id="kobo.132.1">In the past, companies had to host their applications primarily in their data centers. </span><span class="koboSpan" id="kobo.132.2">Due to </span><a id="_idIndexMarker014"/><span class="koboSpan" id="kobo.133.1">the operational overhead of managing their own data centers, most businesses have considered migrating their data and their workloads to the cloud. </span><span class="koboSpan" id="kobo.133.2">Some organizations have moved all their applications and data to the cloud, while others use a </span><em class="italic"><span class="koboSpan" id="kobo.134.1">hybrid cloud architecture</span></em><span class="koboSpan" id="kobo.135.1"> to host their applications in both on-premises data centers and in the cloud. </span><span class="koboSpan" id="kobo.135.2">Cloud computing has allowed companies to do </span><span class="No-Break"><span class="koboSpan" id="kobo.136.1">the following:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.137.1">Ensure continuous operations</span></strong><span class="koboSpan" id="kobo.138.1">: High availability in the cloud ensures that applications and services remain accessible and operational, even in the event of failures or disruptions. </span><span class="koboSpan" id="kobo.138.2">By leveraging redundancy and fault-tolerant architectures offered by cloud providers, downtime is minimized, and uninterrupted access to resources </span><span class="No-Break"><span class="koboSpan" id="kobo.139.1">is maintained.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.140.1">Save money</span></strong><span class="koboSpan" id="kobo.141.1">: No hardware infrastructure investment is needed to get started as cloud resources can be created and deleted within seconds or minutes. </span><span class="koboSpan" id="kobo.141.2">In addition to this, cloud platforms generally have a pay-per-use model for the usage of </span><span class="No-Break"><span class="koboSpan" id="kobo.142.1">cloud resources.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.143.1">Easily manage application workloads</span></strong><span class="koboSpan" id="kobo.144.1">: Application workloads in the cloud can be managed remotely. </span><span class="koboSpan" id="kobo.144.2">In addition to this, resources can be scaled up and down easily, depending on what the </span><span class="No-Break"><span class="koboSpan" id="kobo.145.1">business needs.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.146.1">Easily manage data</span></strong><span class="koboSpan" id="kobo.147.1">: Managing data becomes more streamlined and convenient in the cloud environment due to the availability of a wide range of services, features, and capabilities. </span><span class="koboSpan" id="kobo.147.2">Additionally, the virtually unlimited storage capacity offered by the cloud eliminates concerns related to handling large files. </span><span class="koboSpan" id="kobo.147.3">This enhanced data management capability in the cloud contributes to improved efficiency and scalability </span><span class="No-Break"><span class="koboSpan" id="kobo.148.1">for companies.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.149.1">Automate relevant processes</span></strong><span class="koboSpan" id="kobo.150.1">: Building automated pipelines and workflows in the cloud is easier</span><a id="_idIndexMarker015"/><span class="koboSpan" id="kobo.151.1"> since most of the cloud</span><a id="_idIndexMarker016"/><span class="koboSpan" id="kobo.152.1"> services </span><a id="_idIndexMarker017"/><span class="koboSpan" id="kobo.153.1">can be managed through </span><strong class="bold"><span class="koboSpan" id="kobo.154.1">application programming interfaces</span></strong><span class="koboSpan" id="kobo.155.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.156.1">APIs</span></strong><span class="koboSpan" id="kobo.157.1">) and </span><strong class="bold"><span class="koboSpan" id="kobo.158.1">software development </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.159.1">kits</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.160.1"> (</span></span><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.161.1">SDKs</span></strong></span><span class="No-Break"><span class="koboSpan" id="kobo.162.1">).</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.163.1">With more companies storing their data in the cloud, there has been a significant increase in cloud attacks in the last couple of years. </span><span class="koboSpan" id="kobo.163.2">The attack surface has changed due to the rise of cloud computing, and along with it, the types of attacks have changed. </span><span class="koboSpan" id="kobo.163.3">Hackers can take advantage </span><a id="_idIndexMarker018"/><span class="koboSpan" id="kobo.164.1">of vulnerable and misconfigured cloud resources, which could end up having sensitive data stored in the </span><span class="No-Break"><span class="koboSpan" id="kobo.165.1">cloud stolen.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.166.1">What do we mean by attack surface?</span></p>
<p class="callout"><strong class="bold"><span class="koboSpan" id="kobo.167.1">Attack surface</span></strong><span class="koboSpan" id="kobo.168.1"> refers to </span><a id="_idIndexMarker019"/><span class="koboSpan" id="kobo.169.1">the collective set of potential vulnerabilities within a system that can be exploited by attackers. </span><span class="koboSpan" id="kobo.169.2">It encompasses various elements, including network interfaces, APIs, user access points, operating systems, and deployed cloud resources. </span><span class="koboSpan" id="kobo.169.3">Understanding and managing the attack surface is crucial for assessing and mitigating security risks in the cloud as it allows organizations to identify and address potential weak points that could be targeted by </span><span class="No-Break"><span class="koboSpan" id="kobo.170.1">malicious actors.</span></span></p>
<p><span class="koboSpan" id="kobo.171.1">With this </span><a id="_idIndexMarker020"/><span class="koboSpan" id="kobo.172.1">in mind, here is a quick list of relevant cyberattacks on cloud-based data </span><span class="No-Break"><span class="koboSpan" id="kobo.173.1">and applications:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.174.1">Attacks on vulnerable application servers and misconfigured cloud storage resources</span></strong><span class="koboSpan" id="kobo.175.1">: Attacks</span><a id="_idIndexMarker021"/><span class="koboSpan" id="kobo.176.1"> on vulnerable and misconfigured cloud resources such as APIs, virtual machines, CI/CD pipelines, and storage resources have resulted in serious data breaches around the world. </span><span class="koboSpan" id="kobo.176.2">Identities and information stolen from data breaches are used for identity theft </span><span class="No-Break"><span class="koboSpan" id="kobo.177.1">and phishing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.178.1">Ransomware attacks in the cloud</span></strong><span class="koboSpan" id="kobo.179.1">: Sensitive data stored in the cloud is constantly being targeted by hackers. </span><span class="koboSpan" id="kobo.179.2">Ransomware victims are generally asked to pay the ransom in Bitcoin or other cryptocurrencies. </span><span class="koboSpan" id="kobo.179.3">Bitcoin and other cryptocurrencies let users maintain their anonymity. </span><span class="koboSpan" id="kobo.179.4">This, along with other techniques, makes it hard for authorities to track down </span><span class="No-Break"><span class="koboSpan" id="kobo.180.1">ransomware hackers.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.181.1">Cloud account hijacking</span></strong><span class="koboSpan" id="kobo.182.1">: Once a hacker takes over an organization’s cloud account, the hacker can freely spin up resources, access sensitive files, and use resources inside the account to attack other companies </span><span class="No-Break"><span class="koboSpan" id="kobo.183.1">and accounts.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.184.1">Distributed Denial-of-Service (DDoS) and Denial-of-Wallet (DoW) attacks</span></strong><span class="koboSpan" id="kobo.185.1">: During a DDoS attack, an attacker seeks to make an online service unavailable </span><a id="_idIndexMarker022"/><span class="koboSpan" id="kobo.186.1">by overwhelming and flooding deployed cloud resources with generated traffic. </span><span class="koboSpan" id="kobo.186.2">During a DoW attack, similar techniques are used to inflict financial damage (due to a </span><span class="No-Break"><span class="koboSpan" id="kobo.187.1">large bill).</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.188.1">Over the years, the quantity and quality of tools focusing on cloud security have increased as cloud security threats have evolved and become more widespread. </span><span class="koboSpan" id="kobo.188.2">More security tools and utilities became available as the number of disclosed vulnerabilities increased every year. </span><span class="koboSpan" id="kobo.188.3">These tools ranged from simple scripts to sophisticated frameworks and modules that can be configured to suit the needs of an attacker. </span><span class="koboSpan" id="kobo.188.4">Security professionals have seen tools and products evolve over time as well. </span><span class="koboSpan" id="kobo.188.5">In the past, cloud security products needed to be installed and set up by the internal teams of companies. </span><span class="koboSpan" id="kobo.188.6">These past few years, more managed cloud-based tools and services became available, most of which can be used immediately with minimal configuration. </span><span class="koboSpan" id="kobo.188.7">Here are some of the more recent security solutions that have become available for </span><span class="No-Break"><span class="koboSpan" id="kobo.189.1">cloud security:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.190.1">Various </span><a id="_idIndexMarker023"/><span class="koboSpan" id="kobo.191.1">offensive security cloud tools </span><span class="No-Break"><span class="koboSpan" id="kobo.192.1">and frameworks</span></span></li>
<li><span class="koboSpan" id="kobo.193.1">Agentless vulnerability assessment tools for virtual machines in </span><span class="No-Break"><span class="koboSpan" id="kobo.194.1">the cloud</span></span></li>
<li><span class="koboSpan" id="kobo.195.1">Vulnerability assessment tools for </span><span class="No-Break"><span class="koboSpan" id="kobo.196.1">container images</span></span></li>
<li><span class="koboSpan" id="kobo.197.1">Vulnerability assessment tools and services for serverless </span><span class="No-Break"><span class="koboSpan" id="kobo.198.1">compute resources</span></span></li>
<li><span class="koboSpan" id="kobo.199.1">Machine learning-powered code security scanner tools </span><span class="No-Break"><span class="koboSpan" id="kobo.200.1">and services</span></span></li>
<li><span class="koboSpan" id="kobo.201.1">Cloud network security </span><span class="No-Break"><span class="koboSpan" id="kobo.202.1">audit tools</span></span></li>
<li><span class="koboSpan" id="kobo.203.1">Managed </span><span class="No-Break"><span class="koboSpan" id="kobo.204.1">cloud firewalls</span></span></li>
<li><span class="koboSpan" id="kobo.205.1">Managed cloud threat </span><span class="No-Break"><span class="koboSpan" id="kobo.206.1">detection services</span></span></li>
<li><span class="koboSpan" id="kobo.207.1">Artificial</span><a id="_idIndexMarker024"/><span class="koboSpan" id="kobo.208.1"> intelligence-powered </span><span class="No-Break"><span class="koboSpan" id="kobo.209.1">security tools</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.210.1">At this point, we should have a better understanding of how cloud computing has shaped and influenced the cybersecurity landscape. </span><span class="koboSpan" id="kobo.210.2">In the next section, we will dive deeper into how modern applications are designed, developed, and deployed in </span><span class="No-Break"><span class="koboSpan" id="kobo.211.1">the cloud.</span></span></p>
<h1 id="_idParaDest-19"><a id="_idTextAnchor018"/><span class="koboSpan" id="kobo.212.1">Exploring how modern cloud applications are designed, developed, and deployed</span></h1>
<p><span class="koboSpan" id="kobo.213.1">One of the primary objectives when building our penetration testing labs is to prepare a vulnerable-by-design environment that mimics real cloud environments. </span><span class="koboSpan" id="kobo.213.2">That said, we must </span><a id="_idIndexMarker025"/><span class="koboSpan" id="kobo.214.1">have a good understanding of how </span><em class="italic"><span class="koboSpan" id="kobo.215.1">modern</span></em><span class="koboSpan" id="kobo.216.1"> cloud applications look as this will equip us with the knowledge required to build the right environment for </span><span class="No-Break"><span class="koboSpan" id="kobo.217.1">our needs.</span></span></p>
<p><span class="koboSpan" id="kobo.218.1">Years ago, most </span><a id="_idIndexMarker026"/><span class="koboSpan" id="kobo.219.1">applications that were deployed in the cloud were designed and developed as </span><strong class="bold"><span class="koboSpan" id="kobo.220.1">monolithic applications</span></strong><span class="koboSpan" id="kobo.221.1">. </span><span class="koboSpan" id="kobo.221.2">This means that the frontend, backend, and database layers of the application’s architecture were built together as a single logical unit. </span><span class="koboSpan" id="kobo.221.3">Most of the time, multiple developers would work on a single code repository for a project. </span><span class="koboSpan" id="kobo.221.4">In addition to this, the entire application, along with the database, would most likely be deployed together as a single unit inside the same server or virtual </span><a id="_idIndexMarker027"/><span class="koboSpan" id="kobo.222.1">machine (similar to what’s shown in the simplified diagram in </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.223.1">Figure 1</span></em></span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.224.1">.3</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.225.1">):</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer009">
<span class="koboSpan" id="kobo.226.1"><img alt="" src="image/B19755_01_3.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.227.1">Figure 1.3 – Deployment of monolithic applications (simplified)</span></p>
<p><span class="koboSpan" id="kobo.228.1">From a security standpoint, an attacker that’s able to get </span><strong class="bold"><span class="koboSpan" id="kobo.229.1">root access</span></strong><span class="koboSpan" id="kobo.230.1"> to the virtual machine hosting the application server would most likely be able to access and steal sensitive </span><a id="_idIndexMarker028"/><span class="koboSpan" id="kobo.231.1">information stored in the database running on the </span><span class="No-Break"><span class="koboSpan" id="kobo.232.1">same machine.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.233.1">What do we mean by root access?</span></p>
<p class="callout"><strong class="bold"><span class="koboSpan" id="kobo.234.1">Root access</span></strong><span class="koboSpan" id="kobo.235.1"> refers to </span><a id="_idIndexMarker029"/><span class="koboSpan" id="kobo.236.1">having complete administrative privileges and unrestricted control over a computer system or virtual machine. </span><span class="koboSpan" id="kobo.236.2">It grants the user the highest level of access and authority, enabling them to modify system files, install or uninstall software, and perform actions that are typically restricted to other users. </span><span class="koboSpan" id="kobo.236.3">In the context of security, if an attacker obtains root access to a virtual machine hosting an application server, it implies they have gained full control of the system. </span><span class="koboSpan" id="kobo.236.4">This can potentially lead to unauthorized access to sensitive data stored in databases residing on the </span><span class="No-Break"><span class="koboSpan" id="kobo.237.1">same machine.</span></span></p>
<p><span class="koboSpan" id="kobo.238.1">Of course, there are modern applications that are still designed and architected as monolithic applications due to the benefits of having this type of architecture. </span><span class="koboSpan" id="kobo.238.2">However, as we will see shortly, more teams around the world are starting with a distributed microservice architecture instead of a monolithic setup. </span><span class="koboSpan" id="kobo.238.3">One of the notable downsides of having a monolithic architecture is that development teams may have problems scaling specific layers of the application once more users start to use the system. </span><span class="koboSpan" id="kobo.238.4">Once the application starts to slow down, teams may end up </span><em class="italic"><span class="koboSpan" id="kobo.239.1">vertically scaling</span></em><span class="koboSpan" id="kobo.240.1"> the virtual machine where the </span><a id="_idIndexMarker030"/><span class="koboSpan" id="kobo.241.1">application is running. </span><span class="koboSpan" id="kobo.241.2">With </span><strong class="bold"><span class="koboSpan" id="kobo.242.1">vertical scaling</span></strong><span class="koboSpan" id="kobo.243.1">, the resources of a single server, such as CPU and RAM, are increased by upgrading its hardware or adding more powerful machines. </span><span class="koboSpan" id="kobo.243.2">This approach allows the server to handle higher workloads and demands by enhancing its capacity. </span><span class="koboSpan" id="kobo.243.3">In contrast, </span><strong class="bold"><span class="koboSpan" id="kobo.244.1">horizontal scaling</span></strong><span class="koboSpan" id="kobo.245.1"> involves adding </span><a id="_idIndexMarker031"/><span class="koboSpan" id="kobo.246.1">more servers to distribute the load, allowing each server to handle a portion of the overall traffic. </span><span class="koboSpan" id="kobo.246.2">Given that vertical scaling is generally more expensive than horizontal scaling long-term, cloud architects recommend having a distributed multi-tier setup instead since horizontal scaling involves scaling only the infrastructure resources hosting the components of the application that </span><span class="No-Break"><span class="koboSpan" id="kobo.247.1">require scaling.</span></span></p>
<p><span class="koboSpan" id="kobo.248.1">For instance, in a distributed e-commerce application, instead of vertically scaling a single monolithic server to handle increased user traffic, the system can be designed with separate tiers for the web servers, application servers, and databases. </span><span class="koboSpan" id="kobo.248.2">By separating different tiers, it becomes possible to independently scale each tier based on its specific resource demands. </span><span class="koboSpan" id="kobo.248.3">For example, while the application server layer can scale horizontally to </span><a id="_idIndexMarker032"/><span class="koboSpan" id="kobo.249.1">handle increased user traffic, the database layer can scale vertically to accommodate growing data storage requirements. </span><span class="koboSpan" id="kobo.249.2">This way, when traffic surges, the infrastructure can horizontally scale by adding more web servers to handle the increased load, resulting in a more cost-effective and </span><span class="No-Break"><span class="koboSpan" id="kobo.250.1">scalable solution:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer010">
<span class="koboSpan" id="kobo.251.1"><img alt="" src="image/B19755_01_4.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.252.1">Figure 1.4 – Autoscaling setup</span></p>
<p><span class="koboSpan" id="kobo.253.1">In addition to this, a distributed </span><a id="_idIndexMarker033"/><span class="koboSpan" id="kobo.254.1">multi-tier setup can easily support the </span><strong class="bold"><span class="koboSpan" id="kobo.255.1">autoscaling</span></strong><span class="koboSpan" id="kobo.256.1"> of resources due to its inherent architectural design. </span><span class="koboSpan" id="kobo.256.2">This flexibility allows the system to automatically adjust resource allocation without manual intervention, ensuring optimal performance and resource utilization. </span><span class="koboSpan" id="kobo.256.3">If the traffic that’s received by the application is spiky or unpredictable, a cloud architect may consider having an autoscaling setup for specific layers of the application to ensure that the infrastructure </span><a id="_idIndexMarker034"/><span class="koboSpan" id="kobo.257.1">resources hosting the application are </span><span class="No-Break"><span class="koboSpan" id="kobo.258.1">not underutilized.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.259.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.260.1">Security professionals must take into account that the downsizing operation of an autoscaling setup may delete resources automatically once the traffic received by the application goes down. </span><span class="koboSpan" id="kobo.260.2">It is important to note that misconfigured or incomplete autoscaling implementations generally do not have the recommended log rotation setup configured properly in production environments. </span><span class="koboSpan" id="kobo.260.3">This would make investigation harder since the logs stored in the compromised infrastructure resources or servers might be deleted during the automated </span><span class="No-Break"><span class="koboSpan" id="kobo.261.1">downsizing operation.</span></span></p>
<p><span class="koboSpan" id="kobo.262.1">At this point, we should have a good idea of how the initial cloud applications were designed and deployed. </span><span class="koboSpan" id="kobo.262.2">Fast</span><a id="_idIndexMarker035"/><span class="koboSpan" id="kobo.263.1"> forwarding to the present, here’s what a modern application may </span><span class="No-Break"><span class="koboSpan" id="kobo.264.1">look like:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer011">
<span class="koboSpan" id="kobo.265.1"><img alt="" src="image/B19755_01_5.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.266.1">Figure 1.5 – What a modern cloud architecture looks like</span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.267.1">Wow! </span><span class="koboSpan" id="kobo.267.2">That escalated quickly!</span></em><span class="koboSpan" id="kobo.268.1"> In </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.269.1">Figure 1</span></em></span><em class="italic"><span class="koboSpan" id="kobo.270.1">.5</span></em><span class="koboSpan" id="kobo.271.1">, we can see that in addition to what was discussed </span><a id="_idIndexMarker036"/><span class="koboSpan" id="kobo.272.1">already, modern application architectures may have one or more of the following </span><span class="No-Break"><span class="koboSpan" id="kobo.273.1">as well:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.274.1">Usage of Infrastructure as Code (IaC) solutions to automatically provision cloud resources</span></strong><span class="koboSpan" id="kobo.275.1">: While </span><a id="_idIndexMarker037"/><span class="koboSpan" id="kobo.276.1">building a modern cloud application, an organization could utilize IaC solutions to streamline the provisioning of cloud resources. </span><span class="koboSpan" id="kobo.276.2">For example, they might employ tools such as Terraform or AWS CloudFormation, defining their infrastructure requirements in code to automatically provision and configure resources such as virtual machines, storage, networking, and </span><span class="No-Break"><span class="koboSpan" id="kobo.277.1">load balancers.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.278.1">Usage of managed container services to ease the management of Kubernetes clusters</span></strong><span class="koboSpan" id="kobo.279.1">: A company may opt to utilize managed container services to simplify the </span><a id="_idIndexMarker038"/><span class="koboSpan" id="kobo.280.1">management of their Kubernetes clusters. </span><span class="koboSpan" id="kobo.280.2">For example, they could choose a managed Kubernetes service provided by a cloud platform, which would handle tasks such as cluster provisioning, scaling, and monitoring. </span><span class="koboSpan" id="kobo.280.3">This allows the company to focus on developing and deploying its application without the overhead of managing the underlying </span><span class="No-Break"><span class="koboSpan" id="kobo.281.1">Kubernetes infrastructure.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.282.1">A continuous integration and continuous deployment (CI/CD) pipeline</span></strong><span class="koboSpan" id="kobo.283.1">: A company</span><a id="_idIndexMarker039"/><span class="koboSpan" id="kobo.284.1"> could set up a CI/CD pipeline to automate the process of integrating code changes, running tests, and deploying the application to the cloud. </span><span class="koboSpan" id="kobo.284.2">Developers would commit their code changes to a version control system, triggering an automated build process that compiles the code, runs tests, and generates artifacts. </span><span class="koboSpan" id="kobo.284.3">The CI/CD pipeline would then deploy the application </span><a id="_idIndexMarker040"/><span class="koboSpan" id="kobo.285.1">to a staging environment for further testing and, upon successful validation, automatically promote it to a </span><span class="No-Break"><span class="koboSpan" id="kobo.286.1">production environment.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.287.1">Function-as-a-Service (FaaS) resources</span></strong><span class="koboSpan" id="kobo.288.1">: An organization implementing a modern cloud </span><a id="_idIndexMarker041"/><span class="koboSpan" id="kobo.289.1">application could utilize FaaS resources as part of their solution. </span><span class="koboSpan" id="kobo.289.2">For instance, they might design the application to leverage serverless functions to handle specific tasks or workflows. </span><span class="koboSpan" id="kobo.289.3">By breaking down the application into smaller, independent functions, the company can achieve greater scalability, reduce operational overhead, and improve </span><span class="No-Break"><span class="koboSpan" id="kobo.290.1">resource utilization.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.291.1">APIs consumed by web and mobile applications</span></strong><span class="koboSpan" id="kobo.292.1">: A company could adopt a</span><a id="_idIndexMarker042"/><span class="koboSpan" id="kobo.293.1"> microservices architecture, where APIs are designed and exposed to be consumed by both web and mobile applications. </span><span class="koboSpan" id="kobo.293.2">In this scenario, the company would develop individual microservices that encapsulate specific functionalities and expose well-defined APIs. </span><span class="koboSpan" id="kobo.293.3">These APIs would then be consumed by the web and mobile applications. </span><span class="koboSpan" id="kobo.293.4">With this setup, there would be seamless communication and interaction between the frontend clients and the </span><span class="No-Break"><span class="koboSpan" id="kobo.294.1">backend services.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.295.1">Usage of managed firewalls and load balancers</span></strong><span class="koboSpan" id="kobo.296.1">: An organization can leverage existing</span><a id="_idIndexMarker043"/><span class="koboSpan" id="kobo.297.1"> managed firewall services and solutions provided by their cloud provider, which would allow them to define and enforce security policies at the network level. </span><span class="koboSpan" id="kobo.297.2">In addition to this, they could utilize a load balancer service to distribute incoming traffic across multiple instances of their application. </span><span class="koboSpan" id="kobo.297.3">This will help ensure the scalability and high availability of modern cloud systems while removing the need to manage the underlying infrastructure and operating systems of these managed </span><span class="No-Break"><span class="koboSpan" id="kobo.298.1">cloud resources.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.299.1">Usage of artificial intelligence (AI) and machine learning (ML) services</span></strong><span class="koboSpan" id="kobo.300.1">: A company</span><a id="_idIndexMarker044"/><span class="koboSpan" id="kobo.301.1"> implementing a modern cloud application could utilize AI-powered and ML-powered services by leveraging pre-trained models and APIs. </span><span class="koboSpan" id="kobo.301.2">For example, they could utilize an AI service for sentiment analysis to analyze customer feedback and improve user experience. </span><span class="koboSpan" id="kobo.301.3">In addition to this, they could also employ managed ML services for predictive analytics to enhance decision-making processes within </span><span class="No-Break"><span class="koboSpan" id="kobo.302.1">the application.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.303.1">There has also </span><a id="_idIndexMarker045"/><span class="koboSpan" id="kobo.304.1">been an observable shift in the use of more managed services globally as more companies migrate their workloads to the cloud. </span><span class="koboSpan" id="kobo.304.2">The managed services provided by cloud platforms have gradually replaced specific components in the system that were originally maintained manually by a company’s internal system administration team. </span><span class="koboSpan" id="kobo.304.3">For instance, companies are leveraging managed services </span><a id="_idIndexMarker046"/><span class="koboSpan" id="kobo.305.1">such as </span><strong class="bold"><span class="koboSpan" id="kobo.306.1">Google Cloud Pub/Sub</span></strong><span class="koboSpan" id="kobo.307.1"> instead of setting up their own messaging systems such as RabbitMQ. </span><span class="koboSpan" id="kobo.307.2">This approach allows organizations to focus their valuable time and resources on other critical </span><span class="No-Break"><span class="koboSpan" id="kobo.308.1">business requirements.</span></span></p>
<p><span class="koboSpan" id="kobo.309.1">With managed services, a major portion of the maintenance work is handled and automated by the cloud platform instead of a company’s internal team members. </span><span class="koboSpan" id="kobo.309.2">Here are some of the advantages when using </span><span class="No-Break"><span class="koboSpan" id="kobo.310.1">managed services:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.311.1">Server security patches and operational maintenance work is handled internally by the cloud platform when using managed services. </span><span class="koboSpan" id="kobo.311.2">This allows the company’s internal team members to use their precious time to work on other important requirements. </span><span class="koboSpan" id="kobo.311.3">A good </span><a id="_idIndexMarker047"/><span class="koboSpan" id="kobo.312.1">example would be </span><strong class="bold"><span class="koboSpan" id="kobo.313.1">Amazon SageMaker</span></strong><span class="koboSpan" id="kobo.314.1">, where data scientists and ML engineers can concentrate on training and deploying ML models without having to worry about manual </span><span class="No-Break"><span class="koboSpan" id="kobo.315.1">maintenance tasks.</span></span></li>
<li><span class="koboSpan" id="kobo.316.1">Scaling is generally easier when using managed services as a resource launch can easily be modified and scaled with an API call or through a user interface. </span><span class="koboSpan" id="kobo.316.2">In some cases, resources can easily have auto-scaling configured. </span><span class="koboSpan" id="kobo.316.3">When it comes to scaling, </span><strong class="bold"><span class="koboSpan" id="kobo.317.1">Azure Kubernetes Service</span></strong><span class="koboSpan" id="kobo.318.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.319.1">AKS</span></strong><span class="koboSpan" id="kobo.320.1">) would be a great example as it enables easy </span><a id="_idIndexMarker048"/><span class="koboSpan" id="kobo.321.1">resource scaling and adjustment of the number of pods running in </span><span class="No-Break"><span class="koboSpan" id="kobo.322.1">the cluster.</span></span></li>
<li><span class="koboSpan" id="kobo.323.1">Generally, cloud resources that are deployed have reliable monitoring and management tools installed already. </span><span class="koboSpan" id="kobo.323.2">In addition to this, the integration with other services from the same cloud platform is seamless and immediately available. </span><span class="koboSpan" id="kobo.323.3">At the same time, managed cloud services and resources usually have built-in practical </span><a id="_idIndexMarker049"/><span class="koboSpan" id="kobo.324.1">automation features that are immediately available </span><span class="No-Break"><span class="koboSpan" id="kobo.325.1">for use.</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.326.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.327.1">Security professionals need to have a good idea of what’s possible and what’s not when managed services are used. </span><span class="koboSpan" id="kobo.327.2">For example, we are not able to access the underlying operating system of certain managed services as these were designed and implemented that way. </span><span class="koboSpan" id="kobo.327.3">A good example would </span><a id="_idIndexMarker050"/><span class="koboSpan" id="kobo.328.1">be the managed </span><strong class="bold"><span class="koboSpan" id="kobo.329.1">NAT Gateway</span></strong><span class="koboSpan" id="kobo.330.1"> of the AWS cloud platform. </span><span class="koboSpan" id="kobo.330.2">In addition to this, security professionals need to be aware of other possible mechanisms available when using managed services. </span><span class="koboSpan" id="kobo.330.3">For example, in Amazon Aurora (a relational database management system built for the cloud), we also have the </span><a id="_idIndexMarker051"/><span class="koboSpan" id="kobo.331.1">option to do </span><strong class="bold"><span class="koboSpan" id="kobo.332.1">passwordless authentication</span></strong><span class="koboSpan" id="kobo.333.1"> using an </span><strong class="bold"><span class="koboSpan" id="kobo.334.1">Identity and Access Management</span></strong><span class="koboSpan" id="kobo.335.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.336.1">IAM</span></strong><span class="koboSpan" id="kobo.337.1">) role. </span><span class="koboSpan" id="kobo.337.2">This means that if an </span><a id="_idIndexMarker052"/><span class="koboSpan" id="kobo.338.1">attacker manages to exfiltrate AWS credentials with the right set of permissions, the database records can be accessed and modified even without the database’s username </span><span class="No-Break"><span class="koboSpan" id="kobo.339.1">and password.</span></span></p>
<p><span class="koboSpan" id="kobo.340.1">There has been a significant increase in the usage of containers these last couple of years. </span><span class="koboSpan" id="kobo.340.2">If you are wondering what containers are, containers are simply lightweight, isolated environments that package applications and their dependencies to guarantee consistency and portability. </span><span class="koboSpan" id="kobo.340.3">Container images, on the other hand, act as self-contained executable packages, comprising the necessary files and configurations for running specific applications. </span><span class="koboSpan" id="kobo.340.4">Companies opt for containers because they offer quicker launch times and the capability to host multiple containers in one virtual machine and ensure consistent environments throughout various development stages. </span><span class="koboSpan" id="kobo.340.5">Initially, companies were hesitant in using </span><strong class="bold"><span class="koboSpan" id="kobo.341.1">Docker</span></strong><span class="koboSpan" id="kobo.342.1"> containers </span><a id="_idIndexMarker053"/><span class="koboSpan" id="kobo.343.1">for deployment in production. </span><span class="koboSpan" id="kobo.343.2">However, due to the latest advances and release of production-ready tools such as </span><strong class="bold"><span class="koboSpan" id="kobo.344.1">Kubernetes</span></strong><span class="koboSpan" id="kobo.345.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.346.1">Docker Compose</span></strong><span class="koboSpan" id="kobo.347.1">, and other </span><a id="_idIndexMarker054"/><span class="koboSpan" id="kobo.348.1">similar container frameworks, more companies </span><a id="_idIndexMarker055"/><span class="koboSpan" id="kobo.349.1">around the world have been using containers to </span><span class="No-Break"><span class="koboSpan" id="kobo.350.1">host applications.</span></span></p>
<p><span class="koboSpan" id="kobo.351.1">At this point, you might be wondering, </span><em class="italic"><span class="koboSpan" id="kobo.352.1">What are the advantages of using containers?</span></em><span class="koboSpan" id="kobo.353.1"> Here are a few reasons why companies would opt to </span><span class="No-Break"><span class="koboSpan" id="kobo.354.1">utilize containers:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.355.1">Launching new</span><a id="_idIndexMarker056"/><span class="koboSpan" id="kobo.356.1"> containers from container images is generally faster compared to creating new virtual machines and servers from images. </span><span class="koboSpan" id="kobo.356.2">This is because containers leverage lightweight virtualization and share the host system’s operating system, allowing them to start quickly without the need to boot an entire operating system. </span><span class="koboSpan" id="kobo.356.3">In addition to this, containers only require the necessary dependencies and libraries specific to the application, resulting in smaller image sizes and faster </span><span class="No-Break"><span class="koboSpan" id="kobo.357.1">deployment times.</span></span></li>
<li><span class="koboSpan" id="kobo.358.1">We can have multiple containers running inside a virtual machine. </span><span class="koboSpan" id="kobo.358.2">Having the ability to run multiple containers inside a virtual machine offers significant benefits in </span><a id="_idIndexMarker057"/><span class="koboSpan" id="kobo.359.1">terms of resource utilization and scalability. </span><span class="koboSpan" id="kobo.359.2">Each container operates independently, allowing for processes and services to be isolated while sharing the underlying resources of the virtual machine. </span><span class="koboSpan" id="kobo.359.3">This enables efficient utilization of computing resources as multiple containers can run concurrently on the same hardware, optimizing the utilization of CPU, memory, </span><span class="No-Break"><span class="koboSpan" id="kobo.360.1">and storage.</span></span></li>
<li><span class="koboSpan" id="kobo.361.1">Using containers allows for seamless consistency across different environments, such as local development, staging, and production. </span><span class="koboSpan" id="kobo.361.2">With containerization, developers can package all necessary dependencies and configurations, ensuring that the application runs consistently across these environments. </span><span class="koboSpan" id="kobo.361.3">This approach promotes early consideration of environment consistency, enabling developers to detect and address any compatibility or deployment issues at an earlier stage in the </span><a id="_idIndexMarker058"/><span class="koboSpan" id="kobo.362.1">development life cycle, leading to smoother deployments and reduced chances of </span><span class="No-Break"><span class="koboSpan" id="kobo.363.1">environment-related errors.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.364.1">In addition to these, nowadays, more managed cloud services already provide support for the usage of custom container environments, which gives developers the flexibility they need while ensuring that minimal work is done on the maintenance end. </span><span class="koboSpan" id="kobo.364.2">By leveraging these managed cloud services, developers can focus on application development and innovation while offloading the burden of infrastructure maintenance and ensuring optimal performance, scalability, and security for their </span><span class="No-Break"><span class="koboSpan" id="kobo.365.1">containerized applications.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.366.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.367.1">Imagine a company developing a microservices-based application. </span><span class="koboSpan" id="kobo.367.2">By leveraging containers, they can encapsulate each microservice within its own container, allowing for independent development, testing, and deployment. </span><span class="koboSpan" id="kobo.367.3">This modular approach enables teams to iterate and update specific services without impacting the entire application stack. </span><span class="koboSpan" id="kobo.367.4">Furthermore, containers facilitate seamless scaling as demand fluctuates. </span><span class="koboSpan" id="kobo.367.5">When the application experiences increased traffic, container orchestration platforms such as Kubernetes automatically spin up additional instances of the required containers, ensuring optimal performance and resource utilization. </span><span class="koboSpan" id="kobo.367.6">This scalability allows businesses to efficiently handle peak loads without </span><span class="No-Break"><span class="koboSpan" id="kobo.368.1">overprovisioning infrastructure.</span></span></p>
<p><span class="koboSpan" id="kobo.369.1">That said, having a solid understanding of container security is critical due to the growing popularity of containers. </span><span class="koboSpan" id="kobo.369.2">Containers present unique security challenges that must be addressed </span><a id="_idIndexMarker059"/><span class="koboSpan" id="kobo.370.1">to protect applications and data. </span><span class="koboSpan" id="kobo.370.2">By implementing effective container security measures, organizations can mitigate risks (such as unauthorized access, data breaches, and container breakouts) to ensure the security of critical systems and </span><span class="No-Break"><span class="koboSpan" id="kobo.371.1">sensitive information.</span></span></p>
<p><span class="koboSpan" id="kobo.372.1">Similar to containers, there’s also been a noticeable increase in the usage of FaaS services in the </span><a id="_idIndexMarker060"/><span class="koboSpan" id="kobo.373.1">past couple of years. </span><span class="koboSpan" id="kobo.373.2">FaaS options from major </span><a id="_idIndexMarker061"/><span class="koboSpan" id="kobo.374.1">cloud platforms, including </span><strong class="bold"><span class="koboSpan" id="kobo.375.1">AWS Lambda Functions</span></strong><span class="koboSpan" id="kobo.376.1">, </span><strong class="bold"><span class="koboSpan" id="kobo.377.1">Azure Functions</span></strong><span class="koboSpan" id="kobo.378.1">, and </span><strong class="bold"><span class="koboSpan" id="kobo.379.1">Google Cloud Functions</span></strong><span class="koboSpan" id="kobo.380.1">, allow developers and engineers to deploy and run </span><a id="_idIndexMarker062"/><span class="koboSpan" id="kobo.381.1">custom application code inside isolated environments without having to worry about server management. </span><span class="koboSpan" id="kobo.381.2">Previously, developers had to handle server provisioning and configuration. </span><span class="koboSpan" id="kobo.381.3">However, with serverless functions, developers can focus on writing and deploying custom application code without worrying about infrastructure, resulting in a more efficient and streamlined development process. </span><span class="koboSpan" id="kobo.381.4">This shift enables rapid iteration, scalable deployments, and reduced operational overhead, significantly simplifying the lives of developers. </span><span class="koboSpan" id="kobo.381.5">Using these along with the other building blocks of event-driven architectures, developers can divide complex application code into smaller and more manageable components. </span><span class="koboSpan" id="kobo.381.6">To have a better understanding of how these services work, let’s quickly discuss</span><a id="_idIndexMarker063"/><span class="koboSpan" id="kobo.382.1"> some of the common properties of these </span><span class="No-Break"><span class="koboSpan" id="kobo.383.1">cloud functions:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.384.1">Scaling up and down </span><span class="No-Break"><span class="koboSpan" id="kobo.385.1">is automatic</span></span></li>
<li><span class="koboSpan" id="kobo.386.1">Usage follows a </span><span class="No-Break"><span class="koboSpan" id="kobo.387.1">pay-per-use model</span></span></li>
<li><span class="koboSpan" id="kobo.388.1">The runtime environment gets created and deleted when a function </span><span class="No-Break"><span class="koboSpan" id="kobo.389.1">is invoked</span></span></li>
<li><span class="koboSpan" id="kobo.390.1">No maintenance is needed since the cloud platform takes care of the </span><span class="No-Break"><span class="koboSpan" id="kobo.391.1">maintenance work</span></span></li>
<li><span class="koboSpan" id="kobo.392.1">There are </span><a id="_idIndexMarker064"/><span class="koboSpan" id="kobo.393.1">resource limits on maximum execution time, memory, storage, and code </span><span class="No-Break"><span class="koboSpan" id="kobo.394.1">package size</span></span></li>
<li><span class="koboSpan" id="kobo.395.1">Functions are triggered </span><span class="No-Break"><span class="koboSpan" id="kobo.396.1">by events</span></span></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.397.1">Important note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.398.1">The terms </span><strong class="bold"><span class="koboSpan" id="kobo.399.1">FaaS</span></strong><span class="koboSpan" id="kobo.400.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.401.1">serverless computing</span></strong><span class="koboSpan" id="kobo.402.1"> are </span><a id="_idIndexMarker065"/><span class="koboSpan" id="kobo.403.1">sometimes used </span><a id="_idIndexMarker066"/><span class="koboSpan" id="kobo.404.1">interchangeably by professionals. </span><span class="koboSpan" id="kobo.404.2">However, they are two different concepts. </span><span class="koboSpan" id="kobo.404.3">FaaS primarily focuses on having a platform that speeds up the development and deployment of application code functions. </span><span class="koboSpan" id="kobo.404.4">On the other hand, serverless computing refers to the cloud computing execution model, which is generally characterized by the usage of event-driven architecture, managed services, along with per-usage billing. </span><span class="koboSpan" id="kobo.404.5">That said, it is possible to have a serverless implementation without utilizing </span><a id="_idIndexMarker067"/><span class="koboSpan" id="kobo.405.1">a FaaS service (for example, a frontend-only </span><strong class="bold"><span class="koboSpan" id="kobo.406.1">single-page application</span></strong><span class="koboSpan" id="kobo.407.1"> (</span><strong class="bold"><span class="koboSpan" id="kobo.408.1">SPA</span></strong><span class="koboSpan" id="kobo.409.1">) hosted using the static website hosting capability of a cloud </span><span class="No-Break"><span class="koboSpan" id="kobo.410.1">storage service).</span></span></p>
<p><em class="italic"><span class="koboSpan" id="kobo.411.1">How is this relevant to cloud security and penetration testing?</span></em><span class="koboSpan" id="kobo.412.1"> The design and implementation of cloud functions impact and influence the offensive and defensive security strategies of professionals. </span><span class="koboSpan" id="kobo.412.2">Developers and engineers need to make sure that the code that’s deployed </span><a id="_idIndexMarker068"/><span class="koboSpan" id="kobo.413.1">inside cloud functions is safe from a variety of </span><strong class="bold"><span class="koboSpan" id="kobo.414.1">injection attacks</span></strong><span class="koboSpan" id="kobo.415.1">. </span><span class="koboSpan" id="kobo.415.2">For one thing, creating a file and saving it inside a storage bucket with a filename that includes a malicious payload may trigger command execution once an event triggers the cloud function. </span><span class="koboSpan" id="kobo.415.3">In addition to this, security professionals must find alternative ways of maintaining persistence (after a successful breach) when dealing with cloud functions since the </span><strong class="bold"><span class="koboSpan" id="kobo.416.1">runtime environment</span></strong><span class="koboSpan" id="kobo.417.1"> gets created and deleted </span><span class="No-Break"><span class="koboSpan" id="kobo.418.1">in seconds.</span></span></p>
<p><span class="koboSpan" id="kobo.419.1">At this point, you should have a good idea of what modern cloud applications look like! </span><span class="koboSpan" id="kobo.419.2">There is a lot more we could discuss in this section, but this should do the trick for now. </span><span class="koboSpan" id="kobo.419.3">With everything </span><a id="_idIndexMarker069"/><span class="koboSpan" id="kobo.420.1">we have learned so far, we can now proceed with diving deeper into what we should consider when designing and building penetration testing lab environments in </span><span class="No-Break"><span class="koboSpan" id="kobo.421.1">the cloud.</span></span></p>
<h1 id="_idParaDest-20"><a id="_idTextAnchor019"/><span class="koboSpan" id="kobo.422.1">Examining the considerations when building penetration testing lab environments in the cloud</span></h1>
<p><span class="koboSpan" id="kobo.423.1">In the succeeding chapters of this book, we will be designing and building multiple vulnerable-by-design labs in the cloud. </span><span class="koboSpan" id="kobo.423.2">After setting up each of the lab environments, we will </span><a id="_idIndexMarker070"/><span class="koboSpan" id="kobo.424.1">simulate the penetration testing process to validate if the vulnerabilities present are exploitable. </span><span class="koboSpan" id="kobo.424.2">Before performing a penetration testing session in our cloud environments, we must be aware of </span><span class="No-Break"><span class="koboSpan" id="kobo.425.1">the following:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.426.1">What activities are allowed without notification </span><span class="No-Break"><span class="koboSpan" id="kobo.427.1">or authorization</span></span></li>
<li><span class="koboSpan" id="kobo.428.1">Whether the attack traffic will pass through the </span><span class="No-Break"><span class="koboSpan" id="kobo.429.1">public internet</span></span></li>
<li><span class="koboSpan" id="kobo.430.1">Whether we will perform </span><span class="No-Break"><span class="koboSpan" id="kobo.431.1">network stress-testing</span></span></li>
<li><span class="koboSpan" id="kobo.432.1">How our penetration testing lab environment </span><span class="No-Break"><span class="koboSpan" id="kobo.433.1">looks like</span></span></li>
<li><span class="koboSpan" id="kobo.434.1">What activities we will perform inside </span><span class="No-Break"><span class="koboSpan" id="kobo.435.1">the environment</span></span></li>
<li><span class="koboSpan" id="kobo.436.1">Whether we are testing the security of an application inside a server or we are testing the security of the configuration of a </span><span class="No-Break"><span class="koboSpan" id="kobo.437.1">cloud service</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.438.1">In addition to these, we must be aware of the activities and actions prohibited by the cloud platforms. </span><span class="koboSpan" id="kobo.438.2">Here are a few examples of what’s </span><em class="italic"><span class="koboSpan" id="kobo.439.1">not</span></em><span class="koboSpan" id="kobo.440.1"> allowed in </span><span class="No-Break"><span class="koboSpan" id="kobo.441.1">cloud environments:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.442.1">Attempting social engineering attacks on employees of the </span><span class="No-Break"><span class="koboSpan" id="kobo.443.1">cloud platforms</span></span></li>
<li><span class="koboSpan" id="kobo.444.1">Attacking resources and trying to gain access to data owned by other account owners </span><span class="No-Break"><span class="koboSpan" id="kobo.445.1">and users</span></span></li>
<li><span class="koboSpan" id="kobo.446.1">Using cloud services in a way that goes against a platform’s </span><strong class="bold"><span class="koboSpan" id="kobo.447.1">Acceptable Use Policy</span></strong><span class="koboSpan" id="kobo.448.1"> and </span><strong class="bold"><span class="koboSpan" id="kobo.449.1">Terms </span></strong><span class="No-Break"><strong class="bold"><span class="koboSpan" id="kobo.450.1">of Service</span></strong></span></li>
</ul>
<p><span class="koboSpan" id="kobo.451.1">Note that there’s a long list of prohibited actions and activities in the relevant documentation pages available online for each of the cloud platforms. </span><span class="koboSpan" id="kobo.451.2">You can find the relevant links to resources on the succeeding pages and the </span><em class="italic"><span class="koboSpan" id="kobo.452.1">Further reading</span></em><span class="koboSpan" id="kobo.453.1"> section of </span><span class="No-Break"><span class="koboSpan" id="kobo.454.1">this chapter.</span></span></p>
<p><span class="koboSpan" id="kobo.455.1">We must also notify and contact the respective support and security teams of the cloud platform </span><a id="_idIndexMarker071"/><span class="koboSpan" id="kobo.456.1">when needed. </span><span class="koboSpan" id="kobo.456.2">This will guarantee that we will not be breaking any rules, especially if we are unsure or if it is our first-time performing penetration tests in </span><span class="No-Break"><span class="koboSpan" id="kobo.457.1">the cloud.</span></span></p>
<p class="callout-heading"><span class="koboSpan" id="kobo.458.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.459.1">The best practice is to notify the cloud platform ahead of time to get authorization and approval. </span><span class="koboSpan" id="kobo.459.2">In some cases, an approval or notification is not required but filing a support ticket before performing penetration tests on your resources </span><span class="No-Break"><span class="koboSpan" id="kobo.460.1">won’t hurt.</span></span></p>
<p><span class="koboSpan" id="kobo.461.1">On some occasions, you might think that you no longer need to get authorization from the cloud provider since your penetration testing session will not </span><em class="italic"><span class="koboSpan" id="kobo.462.1">harm other customers</span></em><span class="koboSpan" id="kobo.463.1">. </span><span class="koboSpan" id="kobo.463.2">However, this is not always the case as there might be actions that still require authorization from the cloud provider. </span><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.464.1">Figure 1</span></em></span><em class="italic"><span class="koboSpan" id="kobo.465.1">.6</span></em><span class="koboSpan" id="kobo.466.1"> shows a sample penetration testing lab environment </span><span class="No-Break"><span class="koboSpan" id="kobo.467.1">on AWS:</span></span></p>
<div>
<div class="IMG---Figure" id="_idContainer012">
<span class="koboSpan" id="kobo.468.1"><img alt="" src="image/B19755_01_6.jpg"/></span>
</div>
</div>
<p class="IMG---Caption" lang="en-US" xml:lang="en-US"><span class="koboSpan" id="kobo.469.1">Figure 1.6 – Sample penetration testing lab environment setup</span></p>
<p><span class="koboSpan" id="kobo.470.1">This </span><a id="_idIndexMarker072"/><span class="koboSpan" id="kobo.471.1">lab environment </span><a id="_idIndexMarker073"/><span class="koboSpan" id="kobo.472.1">has the </span><span class="No-Break"><span class="koboSpan" id="kobo.473.1">following components:</span></span></p>
<ul>
<li><span class="koboSpan" id="kobo.474.1">An </span><em class="italic"><span class="koboSpan" id="kobo.475.1">attacker</span></em><span class="koboSpan" id="kobo.476.1"> machine inside a VPC that prevents all </span><span class="No-Break"><span class="koboSpan" id="kobo.477.1">outbound connections</span></span></li>
<li><span class="koboSpan" id="kobo.478.1">A </span><em class="italic"><span class="koboSpan" id="kobo.479.1">target</span></em><span class="koboSpan" id="kobo.480.1"> machine that contains vulnerable applications </span><span class="No-Break"><span class="koboSpan" id="kobo.481.1">and services</span></span></li>
<li><span class="koboSpan" id="kobo.482.1">A VPC peering connection that allows traffic between the VPCs where the attacker and target EC2 instances are hosted (so that the attack traffic will pass through this VPC </span><span class="No-Break"><span class="koboSpan" id="kobo.483.1">peering connection)</span></span></li>
<li><span class="koboSpan" id="kobo.484.1">An S3 bucket containing files accessed via </span><span class="No-Break"><span class="koboSpan" id="kobo.485.1">Private Link</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.486.1">Performing penetration tests on an application running </span><em class="italic"><span class="koboSpan" id="kobo.487.1">inside</span></em><span class="koboSpan" id="kobo.488.1"> an EC2 instance requires no approval. </span><span class="koboSpan" id="kobo.488.2">On the other hand, performing penetration tests on your own S3 bucket in your AWS account is not allowed unless you get approval from AWS. </span><em class="italic"><span class="koboSpan" id="kobo.489.1">Why?</span></em><span class="koboSpan" id="kobo.490.1"> Performing penetration tests on an S3 bucket you own differs from penetration tests on an application hosted on S3. </span><span class="koboSpan" id="kobo.490.2">You must </span><a id="_idIndexMarker074"/><span class="koboSpan" id="kobo.491.1">complete the </span><strong class="bold"><span class="koboSpan" id="kobo.492.1">Simulated Events Form</span></strong><span class="koboSpan" id="kobo.493.1"> and provide the required information to get authorization from AWS before performing penetration testing simulations on Amazon S3, along with other services not listed under </span><strong class="bold"><span class="koboSpan" id="kobo.494.1">Permitted Services</span></strong><span class="koboSpan" id="kobo.495.1"> of the </span><strong class="bold"><span class="koboSpan" id="kobo.496.1">Customer Service Policy for Penetration Testing</span></strong><span class="koboSpan" id="kobo.497.1"> information page. </span><span class="koboSpan" id="kobo.497.2">Make sure you check out the following links before performing penetration tests </span><span class="No-Break"><span class="koboSpan" id="kobo.498.1">on AWS:</span></span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.499.1">AWS Customer Support Policy for Penetration Testing, Customer Service Policy for Penetration Testing, Other Simulated </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.500.1">Events</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.501.1">: </span></span><a href="https://aws.amazon.com/security/penetration-testing/"><span class="No-Break"><span class="koboSpan" id="kobo.502.1">https://aws.amazon.com/security/penetration-testing/</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.503.1">Amazon EC2 Testing </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.504.1">Policy</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.505.1">: </span></span><a href="https://aws.amazon.com/ec2/testing/"><span class="No-Break"><span class="koboSpan" id="kobo.506.1">https://aws.amazon.com/ec2/testing/</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.507.1">DDoS Simulation Testing </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.508.1">Policy</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.509.1">: </span></span><a href="https://aws.amazon.com/security/ddos-simulation-testing/"><span class="No-Break"><span class="koboSpan" id="kobo.510.1">https://aws.amazon.com/security/ddos-simulation-testing/</span></span></a></li>
</ul>
<p><span class="koboSpan" id="kobo.511.1">It is </span><a id="_idIndexMarker075"/><span class="koboSpan" id="kobo.512.1">important to note that penetration testing policies and guidelines differ across cloud platforms. </span><span class="koboSpan" id="kobo.512.2">Here are some of the resources and links you need to check before performing penetration tests </span><span class="No-Break"><span class="koboSpan" id="kobo.513.1">on Azure:</span></span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.514.1">Penetration Testing Rules of </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.515.1">Engagement</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.516.1">: </span></span><a href="https://www.microsoft.com/en-us/msrc/pentest-rules-of-engagement?rtc=1"><span class="No-Break"><span class="koboSpan" id="kobo.517.1">https://www.microsoft.com/en-us/msrc/pentest-rules-of-engagement?rtc=1</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.518.1">Penetration </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.519.1">Testing</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.520.1">: </span></span><a href="https://learn.microsoft.com/en-us/azure/security/fundamentals/pen-testing"><span class="No-Break"><span class="koboSpan" id="kobo.521.1">https://learn.microsoft.com/en-us/azure/security/fundamentals/pen-testing</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.522.1">Azure Security Test </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.523.1">Practices</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.524.1">: </span></span><a href="https://learn.microsoft.com/en-us/azure/architecture/framework/security/monitor-test"><span class="No-Break"><span class="koboSpan" id="kobo.525.1">https://learn.microsoft.com/en-us/azure/architecture/framework/security/monitor-test</span></span></a></li>
</ul>
<p><span class="koboSpan" id="kobo.526.1">Here are the relevant resources and links </span><span class="No-Break"><span class="koboSpan" id="kobo.527.1">for GCP:</span></span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.528.1">Cloud Security </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.529.1">FAQ</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.530.1">: </span></span><a href="https://support.google.com/cloud/answer/6262505"><span class="No-Break"><span class="koboSpan" id="kobo.531.1">https://support.google.com/cloud/answer/6262505</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.532.1">Google Cloud Platform Acceptable Use </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.533.1">Policy</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.534.1">: </span></span><a href="https://cloud.google.com/terms/aup"><span class="No-Break"><span class="koboSpan" id="kobo.535.1">https://cloud.google.com/terms/aup</span></span></a></li>
<li><em class="italic"><span class="koboSpan" id="kobo.536.1">Google Cloud Platform Terms of </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.537.1">Service</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.538.1">: </span></span><a href="https://cloud.google.com/terms/"><span class="No-Break"><span class="koboSpan" id="kobo.539.1">https://cloud.google.com/terms/</span></span></a></li>
</ul>
<p class="callout-heading"><span class="koboSpan" id="kobo.540.1">Note</span></p>
<p class="callout"><span class="koboSpan" id="kobo.541.1">Note that these policies and guidelines may change in the future, so make sure you review the guidelines before doing penetration tests on applications running in a cloud environment. </span><span class="koboSpan" id="kobo.541.2">Make sure you reach out to the support and security teams of the cloud platforms for guidance if you have questions and </span><span class="No-Break"><span class="koboSpan" id="kobo.542.1">need clarification.</span></span></p>
<p><span class="koboSpan" id="kobo.543.1">In addition </span><a id="_idIndexMarker076"/><span class="koboSpan" id="kobo.544.1">to what has been discussed already, there are other things we need to consider, particularly in terms of security </span><span class="No-Break"><span class="koboSpan" id="kobo.545.1">and engineering:</span></span></p>
<ul>
<li><strong class="bold"><span class="koboSpan" id="kobo.546.1">The performance requirements when choosing the cloud infrastructure resources needed for the lab</span></strong><span class="koboSpan" id="kobo.547.1">: When building penetration testing lab environments in the cloud, it is crucial to consider the performance requirements and select the appropriate cloud infrastructure resources. </span><span class="koboSpan" id="kobo.547.2">This involves assessing factors such as network bandwidth, computational power, and storage capabilities to ensure the lab environment can effectively simulate real-world scenarios and handle the resource-intensive nature of </span><span class="No-Break"><span class="koboSpan" id="kobo.548.1">security testing.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.549.1">The overall cost of setting up, running, and maintaining the penetration lab</span></strong><span class="koboSpan" id="kobo.550.1">: The cost of establishing, operating, and maintaining a penetration testing lab environment in the cloud should be considered in the context of security and engineering. </span><span class="koboSpan" id="kobo.550.2">This includes expenses related to resource provisioning, infrastructure management, and ongoing monitoring </span><span class="No-Break"><span class="koboSpan" id="kobo.551.1">and updates.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.552.1">The security and auditability of the environment as the penetration testing lab must be protected from unwarranted external attacks</span></strong><span class="koboSpan" id="kobo.553.1">: When building penetration testing lab environments in the cloud, ensuring the security and auditability of the environment is critical. </span><span class="koboSpan" id="kobo.553.2">It is crucial to protect the lab from unwarranted external attacks by implementing robust security measures and controls. </span><span class="koboSpan" id="kobo.553.3">This includes utilizing security features offered by the cloud platform, such as network segmentation, access controls, and monitoring, to create a secure and auditable </span><span class="No-Break"><span class="koboSpan" id="kobo.554.1">testing environment.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.555.1">The scalability and modularity of the lab environment</span></strong><span class="koboSpan" id="kobo.556.1">: Making lab environments scalable and modular allows you to efficiently customize the lab for a variety of scenarios and requirements, allowing penetration testers to effectively simulate and evaluate diverse </span><span class="No-Break"><span class="koboSpan" id="kobo.557.1">attack scenarios.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.558.1">The manageability of the lab versions</span></strong><span class="koboSpan" id="kobo.559.1">: Utilizing version control systems and tools allows penetration testers to efficiently manage and track changes made to the lab environment configurations, software versions, and custom scripts. </span><span class="koboSpan" id="kobo.559.2">This ensures that the lab versions are easily maintainable and reproducible and can be rolled back or updated </span><span class="No-Break"><span class="koboSpan" id="kobo.560.1">as needed.</span></span></li>
<li><strong class="bold"><span class="koboSpan" id="kobo.561.1">The use of automation tools and services for fast rebuilds and setup</span></strong><span class="koboSpan" id="kobo.562.1">: By leveraging automation, penetration testers can focus more on the actual testing and analysis rather than spending significant time on manual setup and </span><span class="No-Break"><span class="koboSpan" id="kobo.563.1">maintenance tasks.</span></span></li>
</ul>
<p><span class="koboSpan" id="kobo.564.1">We could </span><a id="_idIndexMarker077"/><span class="koboSpan" id="kobo.565.1">add a few more to this list, but these considerations should do for now. </span><span class="koboSpan" id="kobo.565.2">We will discuss these security and engineering considerations in detail in the next few chapters as we build a variety of vulnerable-by-design lab environments across the different </span><span class="No-Break"><span class="koboSpan" id="kobo.566.1">cloud platforms.</span></span></p>
<h1 id="_idParaDest-21"><a id="_idTextAnchor020"/><span class="koboSpan" id="kobo.567.1">Summary</span></h1>
<p><span class="koboSpan" id="kobo.568.1">In this chapter, we started with a quick discussion on the advantages of setting up a penetration testing lab in the cloud. </span><span class="koboSpan" id="kobo.568.2">We took a closer look at how cloud computing has influenced and shaped the modern cybersecurity landscape. </span><span class="koboSpan" id="kobo.568.3">We also explored how modern cloud applications are designed, developed, and deployed. </span><span class="koboSpan" id="kobo.568.4">We wrapped up this chapter by diving deeper into several important considerations when designing and building vulnerable environments in </span><span class="No-Break"><span class="koboSpan" id="kobo.569.1">the cloud.</span></span></p>
<p><span class="koboSpan" id="kobo.570.1">In the next chapter, we will proceed with setting up our first vulnerable lab environment in the cloud. </span><span class="koboSpan" id="kobo.570.2">After setting up our penetration testing lab, we will validate whether  the vulnerabilities are exploitable using various offensive security tools </span><span class="No-Break"><span class="koboSpan" id="kobo.571.1">and techniques.</span></span></p>
<h1 id="_idParaDest-22"><a id="_idTextAnchor021"/><span class="koboSpan" id="kobo.572.1">Further reading</span></h1>
<p><span class="koboSpan" id="kobo.573.1">For more information on the topics covered in this chapter, feel free to check out the </span><span class="No-Break"><span class="koboSpan" id="kobo.574.1">following resources:</span></span></p>
<ul>
<li><em class="italic"><span class="koboSpan" id="kobo.575.1">How do I run security assessments or penetration tests on </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.576.1">AWS?</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.577.1"> (</span></span><a href="https://aws.amazon.com/premiumsupport/knowledge-center/penetration-testing/"><span class="No-Break"><span class="koboSpan" id="kobo.578.1">https://aws.amazon.com/premiumsupport/knowledge-center/penetration-testing/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.579.1">)</span></span></li>
<li><em class="italic"><span class="koboSpan" id="kobo.580.1">AWS Shared Responsibility </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.581.1">Model</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.582.1"> (</span></span><a href="https://aws.amazon.com/compliance/shared-responsibility-model/"><span class="No-Break"><span class="koboSpan" id="kobo.583.1">https://aws.amazon.com/compliance/shared-responsibility-model/</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.584.1">)</span></span></li>
<li><em class="italic"><span class="koboSpan" id="kobo.585.1">Azure Penetration Testing Rules of </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.586.1">Engagement</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.587.1"> (</span></span><a href="https://www.microsoft.com/en-us/msrc/pentest-rules-of-engagement?rtc=1"><span class="No-Break"><span class="koboSpan" id="kobo.588.1">https://www.microsoft.com/en-us/msrc/pentest-rules-of-engagement?rtc=1</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.589.1">)</span></span></li>
<li><em class="italic"><span class="koboSpan" id="kobo.590.1">Azure Security Test </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.591.1">Practices</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.592.1"> (</span></span><a href="https://learn.microsoft.com/en-us/azure/architecture/framework/security/monitor-test"><span class="No-Break"><span class="koboSpan" id="kobo.593.1">https://learn.microsoft.com/en-us/azure/architecture/framework/security/monitor-test</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.594.1">)</span></span></li>
<li><em class="italic"><span class="koboSpan" id="kobo.595.1">GCP Cloud Security </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.596.1">FAQ</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.597.1"> (</span></span><a href="https://support.google.com/cloud/answer/6262505?hl=en"><span class="No-Break"><span class="koboSpan" id="kobo.598.1">https://support.google.com/cloud/answer/6262505?hl=en</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.599.1">)</span></span></li>
<li><em class="italic"><span class="koboSpan" id="kobo.600.1">GCP Security Best </span></em><span class="No-Break"><em class="italic"><span class="koboSpan" id="kobo.601.1">Practices</span></em></span><span class="No-Break"><span class="koboSpan" id="kobo.602.1"> (</span></span><a href="https://cloud.google.com/security/best-practices"><span class="No-Break"><span class="koboSpan" id="kobo.603.1">https://cloud.google.com/security/best-practices</span></span></a><span class="No-Break"><span class="koboSpan" id="kobo.604.1">)</span></span></li>
</ul>
</div>
</body></html>