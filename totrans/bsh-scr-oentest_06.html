<html><head></head><body>
  <div id="_idContainer048">
   <h1 class="chapter-number" id="_idParaDest-87">
    <a id="_idTextAnchor089">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     5
    </span>
   </h1>
   <h1 id="_idParaDest-88">
    <a id="_idTextAnchor090">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Functions and Script Organization
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In the previous chapter, you learned about regular expressions and how to apply them in practical applications.
    </span>
    <span class="koboSpan" id="kobo.3.2">
     This chapter builds on this by teaching you how to apply everything you’ve learned in previous chapters to organize your code
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.4.1">
      into functions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.5.1">
     Functions are a fundamental concept in Bash scripting that allow you to organize your code into reusable and modular units.
    </span>
    <span class="koboSpan" id="kobo.5.2">
     By mastering functions, you can write more efficient, maintainable, and readable scripts.
    </span>
    <span class="koboSpan" id="kobo.5.3">
     This chapter will dive deep into the world of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.6.1">
      Bash functions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.7.1">
     , exploring their syntax, usage, and advanced techniques.
    </span>
    <span class="koboSpan" id="kobo.7.2">
     We’ll also discuss how functions can help you structure your scripts and simplify common pentesting tasks.
    </span>
    <span class="koboSpan" id="kobo.7.3">
     Lastly, we will compare and contrast functions
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.8.1">
      and aliases.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.9.1">
     By the end of this chapter, you’ll have a solid understanding of how to define and use functions in your Bash scripts.
    </span>
    <span class="koboSpan" id="kobo.9.2">
     You’ll learn how to pass arguments to functions, understand variable scope and lifetime within functions, and explore advanced techniques such as recursion and callbacks.
    </span>
    <span class="koboSpan" id="kobo.9.3">
     Most importantly, you’ll see how functions can help you write cleaner, more organized scripts that are easier to maintain and extend, ultimately streamlining your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.10.1">
      pentesting workflow.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.11.1">
     In this chapter, we’re going to cover the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.12.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.13.1">
      Introduction to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       Bash functions
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      Passing arguments
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.16.1">
       to functions
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.17.1">
      The scope and lifetime of variables
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       in functions
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.19.1">
      Advanced
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.20.1">
       function techniques
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.21.1">
      Functions
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.22.1">
       versus aliases
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.23.1">
     The code for this chapter can be found
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Bash-Shell-Scripting-for-Pentesters/tree/main/Chapter05">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.25.1">
       https://github.com/PacktPublishing/Bash-Shell-Scripting-for-Pentesters/tree/main/Chapter05
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.26.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-89">
    <a id="_idTextAnchor091">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     Introduction to Bash functions
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.28.1">
     Bash functions are an essential tool for anyone who works with the Bash shell on Linux systems.
    </span>
    <span class="koboSpan" id="kobo.28.2">
     They allow you to encapsulate reusable pieces of code into named, parameterized units that can
    </span>
    <a id="_idIndexMarker254">
    </a>
    <span class="koboSpan" id="kobo.29.1">
     be called from anywhere in your Bash scripts or interactive
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      shell sessions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.31.1">
     Let’s explore some of the key reasons why Bash functions are so important
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.32.1">
      and useful.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-90">
    <a id="_idTextAnchor092">
    </a>
    <span class="koboSpan" id="kobo.33.1">
     Code reuse
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.34.1">
     One of the biggest benefits of
    </span>
    <a id="_idIndexMarker255">
    </a>
    <span class="koboSpan" id="kobo.35.1">
     Bash functions is that they promote code reuse.
    </span>
    <span class="koboSpan" id="kobo.35.2">
     If you find yourself writing the same or very similar code over and over in your Bash scripts, that’s a good sign that you should extract that code into a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.36.1">
      reusable function!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.37.1">
     For example, let’s say many of your scripts need to parse command-line arguments in a consistent way.
    </span>
    <span class="koboSpan" id="kobo.37.2">
     Rather than copying and pasting the argument parsing logic into each script, you could define a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.38.1">
      parse_args
     </span>
    </strong>
    <span class="koboSpan" id="kobo.39.1">
     function (the code can be found in this chapter’s folder in the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.40.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.41.1">
       ch05_parse_args.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.42.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.43.1">
parse_args() {
  while [[ $# -gt 0 ]]; do
    case "$1" in
      -h|--help)
        usage
        exit 0
        ;;
      -v|--verbose)
        verbose=true
        ;;
      *)
        echo "Invalid argument: $1"
        usage
        exit 1
        ;;
    esac
    shift
  done
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.44.1">
     Now, any script that needs to parse arguments in this way can simply call the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.45.1">
      parse_args
     </span>
    </strong>
    <span class="koboSpan" id="kobo.46.1">
     function.
    </span>
    <span class="koboSpan" id="kobo.46.2">
     This
    </span>
    <a id="_idIndexMarker256">
    </a>
    <span class="koboSpan" id="kobo.47.1">
     makes your code more concise, readable, and maintainable.
    </span>
    <span class="koboSpan" id="kobo.47.2">
     If you ever need to update the argument parsing logic, you only have to do it in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.48.1">
      one place.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.49.1">
     Don’t worry if you don’t understand what the preceding function is doing.
    </span>
    <span class="koboSpan" id="kobo.49.2">
     You’ll understand it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.50.1">
      soon enough.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-91">
    <a id="_idTextAnchor093">
    </a>
    <span class="koboSpan" id="kobo.51.1">
     Modularity
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.52.1">
     Bash functions allow you to break your
    </span>
    <a id="_idIndexMarker257">
    </a>
    <span class="koboSpan" id="kobo.53.1">
     scripts down into smaller, self-contained, and more manageable pieces.
    </span>
    <span class="koboSpan" id="kobo.53.2">
     Each function should ideally do one specific task and do
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.54.1">
      it well.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.55.1">
     By decomposing your scripts into modular functions, your code becomes easier to understand, debug, and maintain.
    </span>
    <span class="koboSpan" id="kobo.55.2">
     It’s much simpler to troubleshoot a specific function than a monolithic script with hundreds or thousands
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.56.1">
      of lines.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.57.1">
     Well-designed functions also make your scripts more readable by giving semantic names to chunks of code.
    </span>
    <span class="koboSpan" id="kobo.57.2">
     For example, a script full of calls such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.58.1">
      fetch_data
     </span>
    </strong>
    <span class="koboSpan" id="kobo.59.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.60.1">
      parse_response
     </span>
    </strong>
    <span class="koboSpan" id="kobo.61.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.62.1">
      update_database
     </span>
    </strong>
    <span class="koboSpan" id="kobo.63.1">
     is much easier to follow than a script with all those
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.64.1">
      operations intermixed.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-92">
    <a id="_idTextAnchor094">
    </a>
    <span class="koboSpan" id="kobo.65.1">
     Encapsulation
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.66.1">
     Functions provide
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.67.1">
      encapsulation
     </span>
    </strong>
    <span class="koboSpan" id="kobo.68.1">
     , meaning they
    </span>
    <a id="_idIndexMarker258">
    </a>
    <span class="koboSpan" id="kobo.69.1">
     create a separate scope for variables and other resources.
    </span>
    <span class="koboSpan" id="kobo.69.2">
     Any variables
    </span>
    <a id="_idIndexMarker259">
    </a>
    <span class="koboSpan" id="kobo.70.1">
     defined inside a function are local to that function by default.
    </span>
    <span class="koboSpan" id="kobo.70.2">
     They don’t pollute the global namespace or conflict with variables in other parts of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.71.1">
      your script.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.72.1">
     This encapsulation makes functions safer and less error-prone than just using global variables everywhere.
    </span>
    <span class="koboSpan" id="kobo.72.2">
     It prevents accidental naming collisions and makes it clear which variables are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.73.1">
      used where.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.74.1">
     Of course, sometimes you do
    </span>
    <a id="_idIndexMarker260">
    </a>
    <span class="koboSpan" id="kobo.75.1">
     want to share variables between functions or with the main script.
    </span>
    <span class="koboSpan" id="kobo.75.2">
     Bash allows this by declaring variables with the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.76.1">
      global
     </span>
    </strong>
    <span class="koboSpan" id="kobo.77.1">
     keyword
    </span>
    <a id="_idIndexMarker261">
    </a>
    <span class="koboSpan" id="kobo.78.1">
     or by using
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.79.1">
      upvar-style
     </span>
    </strong>
    <span class="koboSpan" id="kobo.80.1">
     references.
    </span>
    <span class="koboSpan" id="kobo.80.2">
     But these techniques should be used sparingly.
    </span>
    <span class="koboSpan" id="kobo.80.3">
     In general, it’s best to keep functions as independent and self-contained
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.81.1">
      as possible.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-93">
    <a id="_idTextAnchor095">
    </a>
    <span class="koboSpan" id="kobo.82.1">
     Testability
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.83.1">
     Another major benefit of Bash functions is that they make your code more testable.
    </span>
    <span class="koboSpan" id="kobo.83.2">
     It’s much easier to write unit tests for individual functions than for a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.84.1">
      whole script.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.85.1">
     You can write test cases that call your functions with different arguments and verify that they produce the expected
    </span>
    <a id="_idIndexMarker262">
    </a>
    <span class="koboSpan" id="kobo.86.1">
     output or side effects.
    </span>
    <span class="koboSpan" id="kobo.86.2">
     This gives you more confidence that your code is correct and helps prevent regressions when you
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.87.1">
      make changes.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.88.1">
     There are several popular frameworks for
    </span>
    <a id="_idIndexMarker263">
    </a>
    <span class="koboSpan" id="kobo.89.1">
     unit testing Bash code, such as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.90.1">
      Bats
     </span>
    </strong>
    <span class="koboSpan" id="kobo.91.1">
     and
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.92.1">
      shUnit2
     </span>
    </strong>
    <span class="koboSpan" id="kobo.93.1">
     .
    </span>
    <span class="koboSpan" id="kobo.93.2">
     These allow
    </span>
    <a id="_idIndexMarker264">
    </a>
    <span class="koboSpan" id="kobo.94.1">
     you to write concise, readable test cases in a
    </span>
    <a id="_idIndexMarker265">
    </a>
    <span class="koboSpan" id="kobo.95.1">
     familiar
    </span>
    <span class="No-Break">
     <strong class="bold">
      <span class="koboSpan" id="kobo.96.1">
       xUnit
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.97.1">
      style.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.98.1">
     Without functions, your Bash code is much harder to test in an automated fashion.
    </span>
    <span class="koboSpan" id="kobo.98.2">
     You might have to resort to clunky end-to-end tests that invoke your whole script with different arguments.
    </span>
    <span class="koboSpan" id="kobo.98.3">
     These tests are slower, more brittle, and harder
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.99.1">
      to maintain.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-94">
    <a id="_idTextAnchor096">
    </a>
    <span class="koboSpan" id="kobo.100.1">
     Performance
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.101.1">
     Finally, using Bash functions
    </span>
    <a id="_idIndexMarker266">
    </a>
    <span class="koboSpan" id="kobo.102.1">
     can also improve the performance of your scripts, especially if you’re calling the same code
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.103.1">
      multiple times.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.104.1">
     When you call a function, Bash doesn’t have to spawn a new process or reparse the function definition each time.
    </span>
    <span class="koboSpan" id="kobo.104.2">
     The function code is already loaded in memory, so the overhead of calling a function is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.105.1">
      very low.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.106.1">
     In contrast, if you put the same code in a separate script and invoke it with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.107.1">
      bash myscript.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.108.1">
     , Bash has to fork a new process and parse the script from disk each time.
    </span>
    <span class="koboSpan" id="kobo.108.2">
     For code that’s called in a tight loop, this overhead can really
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.109.1">
      add up.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.110.1">
     Of course, the performance gains of functions are usually pretty small in absolute terms.
    </span>
    <span class="koboSpan" id="kobo.110.2">
     Spawning processes in Bash are already fast.
    </span>
    <span class="koboSpan" id="kobo.110.3">
     But in scripts that prioritize performance, using functions instead of separate scripts can give you a little
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.111.1">
      extra boost.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.112.1">
     Now that you have an understanding of
    </span>
    <a id="_idIndexMarker267">
    </a>
    <span class="koboSpan" id="kobo.113.1">
     why functions are useful, let’s explore how to define and call
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.114.1">
      a function.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-95">
    <a id="_idTextAnchor097">
    </a>
    <span class="koboSpan" id="kobo.115.1">
     Defining and calling a function
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.116.1">
     To define a function in Bash, you use the
    </span>
    <a id="_idIndexMarker268">
    </a>
    <span class="koboSpan" id="kobo.117.1">
     following syntax (the code
    </span>
    <a id="_idIndexMarker269">
    </a>
    <span class="koboSpan" id="kobo.118.1">
     can be found in this chapter’s folder in the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.119.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.120.1">
       ch05_function_
      </span>
      <a id="_idTextAnchor098">
      </a>
      <a id="_idTextAnchor099">
      </a>
      <span class="koboSpan" id="kobo.121.1">
       definition.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.122.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.123.1">
function_name() {
  # commands go here
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.124.1">
     Alternatively, you can use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.125.1">
      function
     </span>
    </strong>
    <span class="koboSpan" id="kobo.126.1">
     keyword before the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.127.1">
      function name:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.128.1">
function function_name {
   # commands go here
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.129.1">
     Let’s break down the components of a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.130.1">
      function definition:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.131.1">
       function_name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.132.1">
      : This is the name you give to your function.
     </span>
     <span class="koboSpan" id="kobo.132.2">
      It should be descriptive and follow the same naming conventions as variables (alphanumeric characters and underscores, starting with a letter
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.133.1">
       or underscore).
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.134.1">
       ()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.135.1">
      : The parentheses after the function name
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.136.1">
       are required.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.137.1">
       {
      </span>
     </strong>
     <span class="koboSpan" id="kobo.138.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.139.1">
       }
      </span>
     </strong>
     <span class="koboSpan" id="kobo.140.1">
      : The curly braces enclose the body of the function, where you put the commands that make up
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.141.1">
       the function.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.142.1">
     Here’s a simple example of a function that prints
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.143.1">
      a greeting:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.144.1">
greet() {
  echo "Hello, world!"
</span><span class="koboSpan" id="kobo.144.2">}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.145.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.146.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.147.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.148.1">
      is the name of the function.
     </span>
     <span class="koboSpan" id="kobo.148.2">
      The function name must be followed
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.149.1">
       by parentheses.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.150.1">
      The curly braces,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.151.1">
       {}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.152.1">
      , enclose the body of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.153.1">
       the function.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.154.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.155.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.156.1">
      command inside the
     </span>
     <a id="_idIndexMarker270">
     </a>
     <span class="koboSpan" id="kobo.157.1">
      function body prints the string
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.158.1">
       Hello, world!
      </span>
     </strong>
     <span class="koboSpan" id="kobo.159.1">
      to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.160.1">
       the console.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.161.1">
     Once you’ve defined a function, you
    </span>
    <a id="_idIndexMarker271">
    </a>
    <span class="koboSpan" id="kobo.162.1">
     can call it by simply using its name followed by any arguments (if required).
    </span>
    <span class="koboSpan" id="kobo.162.2">
     Here’s an example with a function definition for th
    </span>
    <a id="_idTextAnchor100">
    </a>
    <a id="_idTextAnchor101">
    </a>
    <span class="koboSpan" id="kobo.163.1">
     e
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.164.1">
       greet
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.165.1">
      function:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.166.1">
greet() {
  echo "Hello, world!"
</span><span class="koboSpan" id="kobo.166.2">}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.167.1">
     The following is how we call
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.168.1">
      the function:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.169.1">
greet</span></pre>
   <p>
    <span class="koboSpan" id="kobo.170.1">
     The output is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.171.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.172.1">
Hello, world!</span></pre>
   <p>
    <span class="koboSpan" id="kobo.173.1">
     This code can be found in the book’s GitHub repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.174.1">
      ch05_greet.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.175.1">
     , and we can explain it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.176.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.177.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.178.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.179.1">
      function is defined with the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.180.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.181.1">
      command, which prints
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.182.1">
        Hello, world!
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.183.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.184.1">
      To call the function, we simply use its name,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.185.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.186.1">
      , on a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.187.1">
       new line.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.188.1">
      When the script is executed, the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.189.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.190.1">
      function is called, and the output
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.191.1">
       Hello, world!
      </span>
     </strong>
     <span class="koboSpan" id="kobo.192.1">
      is printed to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.193.1">
       the console.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.194.1">
     You can call a function multiple times within
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.195.1">
      your script.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.196.1">
     Having learned how to declare and call functions, let’s move on to the next section where you’ll learn all about
    </span>
    <a id="_idIndexMarker272">
    </a>
    <span class="koboSpan" id="kobo.197.1">
     passing arguments to functions
    </span>
    <a id="_idIndexMarker273">
    </a>
    <span class="koboSpan" id="kobo.198.1">
     and how to apply this to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.199.1">
      practical applications.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-96">
    <a id="_idTextAnchor102">
    </a>
    <span class="koboSpan" id="kobo.200.1">
     Passing arguments to functions
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.201.1">
     Bash functions are a powerful tool for automating repetitive tasks and creating reusable code blocks.
    </span>
    <span class="koboSpan" id="kobo.201.2">
     They allow you to encapsulate a series of commands into a single, named unit that can be called from anywhere in
    </span>
    <a id="_idIndexMarker274">
    </a>
    <span class="koboSpan" id="kobo.202.1">
     your script.
    </span>
    <span class="koboSpan" id="kobo.202.2">
     However, functions become even more versatile and flexible when you can pass arguments
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.203.1">
      to them.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.204.1">
     Passing arguments to Bash functions is a technique that enables you to provide dynamic input to your functions, making them more adaptable and reusable across different scenarios.
    </span>
    <span class="koboSpan" id="kobo.204.2">
     By accepting arguments, functions can perform actions based on the specific values passed to them, rather than relying on hardcoded or predefined values within the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.205.1">
      function itself.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.206.1">
     Here are a few reasons why passing arguments to Bash functions
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.207.1">
      is beneficial:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.208.1">
       Flexibility
      </span>
     </strong>
     <span class="koboSpan" id="kobo.209.1">
      : Functions that accept arguments can be used in a variety of contexts.
     </span>
     <span class="koboSpan" id="kobo.209.2">
      Instead of creating multiple
     </span>
     <a id="_idIndexMarker275">
     </a>
     <span class="koboSpan" id="kobo.210.1">
      functions with slight variations, you can create a single function that adapts its behavior based on the arguments provided.
     </span>
     <span class="koboSpan" id="kobo.210.2">
      This promotes code reuse and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.211.1">
       reduces duplication.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.212.1">
       Parameterization
      </span>
     </strong>
     <span class="koboSpan" id="kobo.213.1">
      : Arguments allow you to parameterize your functions, meaning you can pass different values to the function to control its behavior.
     </span>
     <span class="koboSpan" id="kobo.213.2">
      This enables you to customize the function’s actions based on specific requirements or inputs, making it more versatile and applicable to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.214.1">
       different situations.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.215.1">
       Modularity
      </span>
     </strong>
     <span class="koboSpan" id="kobo.216.1">
      : By accepting arguments, functions become self-contained modules that can operate independently of the surrounding code.
     </span>
     <span class="koboSpan" id="kobo.216.2">
      They can be easily moved or reused in other scripts without requiring significant modifications.
     </span>
     <span class="koboSpan" id="kobo.216.3">
      This modularity enhances code organization
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.217.1">
       and maintainability.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.218.1">
       Readability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.219.1">
      : When functions accept arguments, it makes the code more readable and self-explanatory.
     </span>
     <span class="koboSpan" id="kobo.219.2">
      The arguments provide a clear indication of what values the function expects and how it will use them.
     </span>
     <span class="koboSpan" id="kobo.219.3">
      This improves code comprehension and makes it easier for other developers to understand and maintain
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.220.1">
       the script.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.221.1">
       Efficiency
      </span>
     </strong>
     <span class="koboSpan" id="kobo.222.1">
      : Passing arguments to functions can help optimize your code by avoiding the need for global variables or complex logic within the function.
     </span>
     <span class="koboSpan" id="kobo.222.2">
      Instead of relying on external
     </span>
     <a id="_idIndexMarker276">
     </a>
     <span class="koboSpan" id="kobo.223.1">
      variables, the function can receive the necessary data directly through its arguments, making the code more efficient
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.224.1">
       and focused.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.225.1">
     Throughout this tutorial, we will explore the different ways to pass arguments to Bash functions and demonstrate how to effectively utilize this technique in your scripts.
    </span>
    <span class="koboSpan" id="kobo.225.2">
     By mastering the art of passing
    </span>
    <a id="_idIndexMarker277">
    </a>
    <span class="koboSpan" id="kobo.226.1">
     arguments, you’ll be able to create more flexible, reusable, and maintainable Bash functions that can greatly enhance your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.227.1">
      scripting capabilities.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.228.1">
     So, let’s dive in and learn how to harness the power of passing arguments to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.229.1">
      Bash functions!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.230.1">
     Let’s start with a basic example of a Bash function that
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.231.1">
      accepts arguments:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.232.1">
greet() {
  echo "Hello, $1!"
</span><span class="koboSpan" id="kobo.232.2">}
greet "John"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.233.1">
     When you run this script and call the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.234.1">
      greet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.235.1">
     function, it will output
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.236.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.237.1">
Hello, John!</span></pre>
   <p>
    <span class="koboSpan" id="kobo.238.1">
     Bash functions can accept multiple arguments.
    </span>
    <span class="koboSpan" id="kobo.238.2">
     Let’s modify the previous example to handle multiple arguments (this code can be found in the book’s GitHub repository
    </span>
    <a id="_idTextAnchor103">
    </a>
    <a id="_idTextAnchor104">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.239.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.240.1">
       ch05_greet_args.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.241.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.242.1">
greet() {
  echo "Hello, $1 $2!"
</span><span class="koboSpan" id="kobo.242.2">}
greet "John" "Doe"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.243.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.244.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.245.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.246.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.247.1">
      function now expects
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.248.1">
       two arguments.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.249.1">
      Inside the function,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.250.1">
       $1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.251.1">
      refers to the first argument, and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.252.1">
       $2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.253.1">
      refers to the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.254.1">
       second argument.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.255.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.256.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.257.1">
      command is updated to include both arguments in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.258.1">
       greeting message.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.259.1">
      We call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.260.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.261.1">
      function with two arguments:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.262.1">
       John
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.263.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.264.1">
        Doe
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.265.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.266.1">
     The output will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.267.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.268.1">
Hello, John Doe!</span></pre>
   <p>
    <span class="koboSpan" id="kobo.269.1">
     Having learned the basics of
    </span>
    <a id="_idIndexMarker278">
    </a>
    <span class="koboSpan" id="kobo.270.1">
     passing arguments, let’s move on to learn more advanced use cases for passing arguments
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.271.1">
      to functions.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-97">
    <a id="_idTextAnchor105">
    </a>
    <span class="koboSpan" id="kobo.272.1">
     Handling a variable number of arguments
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.273.1">
     Sometimes, you may want to create a function that can handle a variable number of arguments.
    </span>
    <span class="koboSpan" id="kobo.273.2">
     Bash provides a special variable,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.274.1">
      $@
     </span>
    </strong>
    <span class="koboSpan" id="kobo.275.1">
     , that represents all the arguments passed to the function.
    </span>
    <span class="koboSpan" id="kobo.275.2">
     Here’s an
    </span>
    <a id="_idIndexMarker279">
    </a>
    <span class="koboSpan" id="kobo.276.1">
     example where we use this concept to loop through usernames (this code can be found in the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.277.1">
      a
     </span>
     <a id="_idTextAnchor106">
     </a>
     <a id="_idTextAnchor107">
     </a>
     <span class="koboSpan" id="kobo.278.1">
      s
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.279.1">
       ch05_variable_args.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.280.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.281.1">
print_arguments() {
  for arg in "$@"
  do
    echo "Argument: $arg"
  done
}
print_arguments "tsmith" "sjones" "mknight"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.282.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.283.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.284.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.285.1">
       print_arguments
      </span>
     </strong>
     <span class="koboSpan" id="kobo.286.1">
      function is defined to handle a variable number
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.287.1">
       of arguments.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.288.1">
      Inside the function, a
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.289.1">
       for
      </span>
     </strong>
     <span class="koboSpan" id="kobo.290.1">
      loop is used to iterate over all the arguments passed to the function using
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.291.1">
       $@
      </span>
     </strong>
     <span class="koboSpan" id="kobo.292.1">
      , which represents the array
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.293.1">
       of arguments.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.294.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.295.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.296.1">
      command is used to
     </span>
     <a id="_idIndexMarker280">
     </a>
     <span class="koboSpan" id="kobo.297.1">
      print each argument on a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.298.1">
       separate line.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.299.1">
      We call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.300.1">
       print_arguments
      </span>
     </strong>
     <span class="koboSpan" id="kobo.301.1">
      function with three arguments:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.302.1">
       apple
      </span>
     </strong>
     <span class="koboSpan" id="kobo.303.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.304.1">
       banana
      </span>
     </strong>
     <span class="koboSpan" id="kobo.305.1">
      ,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.306.1">
       and
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.307.1">
        cherry
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.308.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.309.1">
     The output will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.310.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.311.1">
Argument: tsmith
Argument: sjones
Argument: mknight</span></pre>
   <p>
    <span class="koboSpan" id="kobo.312.1">
     While the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.313.1">
      $@
     </span>
    </strong>
    <span class="koboSpan" id="kobo.314.1">
     variable represents the array of arguments passed to a script or function, it’s also helpful to know about the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.315.1">
      $#
     </span>
    </strong>
    <span class="koboSpan" id="kobo.316.1">
     variable, which represents the count of arguments.
    </span>
    <span class="koboSpan" id="kobo.316.2">
     You should always ensure that the user has entered the correct number of arguments if the script or function requires them.
    </span>
    <span class="koboSpan" id="kobo.316.3">
     This is shown in the following code, and it can also be found in the book’s GitHub reposit
    </span>
    <a id="_idTextAnchor108">
    </a>
    <a id="_idTextAnchor109">
    </a>
    <span class="koboSpan" id="kobo.317.1">
     ory
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.318.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.319.1">
       ch05_count_args.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.320.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.321.1">
if [ "$#" -ne 2 ]; then
  echo "Usage: $0 &lt;arg1&gt; &lt;arg2&gt;"
  exit 1
fi</span></pre>
   <p>
    <span class="koboSpan" id="kobo.322.1">
     This
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.323.1">
      if
     </span>
    </strong>
    <span class="koboSpan" id="kobo.324.1">
     statement checks that the number of arguments is not equal to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.325.1">
      2
     </span>
    </strong>
    <span class="koboSpan" id="kobo.326.1">
     .
    </span>
    <span class="koboSpan" id="kobo.326.2">
     If the test is true, it prints a helpful usage statement and exits.
    </span>
    <span class="koboSpan" id="kobo.326.3">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.327.1">
      $0
     </span>
    </strong>
    <span class="koboSpan" id="kobo.328.1">
     variable represents the name of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.329.1">
      the script.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-98">
    <a id="_idTextAnchor110">
    </a>
    <span class="koboSpan" id="kobo.330.1">
     Default values for arguments
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.331.1">
     You can assign default values to
    </span>
    <a id="_idIndexMarker281">
    </a>
    <span class="koboSpan" id="kobo.332.1">
     function arguments in case they are not provided when calling the function.
    </span>
    <span class="koboSpan" id="kobo.332.2">
     Here’s an example (this code can be found in the book’s GitHub repositor
    </span>
    <a id="_idTextAnchor111">
    </a>
    <a id="_idTextAnchor112">
    </a>
    <a id="_idTextAnchor113">
    </a>
    <span class="koboSpan" id="kobo.333.1">
     y
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.334.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.335.1">
       ch05_default_args.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.336.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.337.1">
greet() {
  local name=${1:-"Guest"}
  echo "Hello, $name!"
</span><span class="koboSpan" id="kobo.337.2">}
greet
greet "John"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.338.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.339.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.340.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.341.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.342.1">
      function is defined with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.343.1">
       one argument.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.344.1">
      Inside the function, a local variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.345.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.346.1">
      , is assigned the value of the first argument using
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.347.1">
       ${1:-"Guest"}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.348.1">
      .
     </span>
     <span class="koboSpan" id="kobo.348.2">
      If the first argument is not provided, it defaults to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.349.1">
       Guest
      </span>
     </strong>
     <span class="koboSpan" id="kobo.350.1">
      .
     </span>
     <span class="koboSpan" id="kobo.350.2">
      This is broken down
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.351.1">
       further here:
      </span>
     </span>
     <ul>
      <li>
       <span class="koboSpan" id="kobo.352.1">
        Local variables will be explained later in this chapter.
       </span>
       <span class="koboSpan" id="kobo.352.2">
        Basically, a variable declared as local is valid only while the function is executing.
       </span>
       <span class="koboSpan" id="kobo.352.3">
        Once the local variable returns control back to the main script or function that called it, the local variable can no longer
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.353.1">
         be referenced.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.354.1">
         1
        </span>
       </strong>
       <span class="koboSpan" id="kobo.355.1">
        refers to the first argument (
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.356.1">
         $1
        </span>
       </strong>
       <span class="koboSpan" id="kobo.357.1">
        ).
       </span>
       <span class="koboSpan" id="kobo.357.2">
        The second argument (
       </span>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.358.1">
         $2
        </span>
       </strong>
       <span class="koboSpan" id="kobo.359.1">
        ) would be referred to
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.360.1">
         as
        </span>
       </span>
       <span class="No-Break">
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.361.1">
          2
         </span>
        </strong>
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.362.1">
         .
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.363.1">
         :-
        </span>
       </strong>
       <span class="koboSpan" id="kobo.364.1">
        is the default
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.365.1">
         value operator.
        </span>
       </span>
      </li>
      <li>
       <strong class="source-inline">
        <span class="koboSpan" id="kobo.366.1">
         Guest
        </span>
       </strong>
       <span class="koboSpan" id="kobo.367.1">
        is the
       </span>
       <span class="No-Break">
        <span class="koboSpan" id="kobo.368.1">
         default value.
        </span>
       </span>
      </li>
     </ul>
    </li>
    <li>
     <span class="koboSpan" id="kobo.369.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.370.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.371.1">
      command is used to print the greeting message with the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.372.1">
        name
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.373.1">
       variable.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.374.1">
      We call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.375.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.376.1">
      function twice: once without an argument and once with the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.377.1">
       argument
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.378.1">
        John
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.379.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.380.1">
     The output will be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.381.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.382.1">
Hello, Guest!
</span><span class="koboSpan" id="kobo.382.2">Hello, John!</span></pre>
   <p>
    <span class="koboSpan" id="kobo.383.1">
     By including a default value for a function variable, you can write less code to cover cases when no parameter is passed to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.384.1">
      your function.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.385.1">
     This wraps up a thorough
    </span>
    <a id="_idIndexMarker282">
    </a>
    <span class="koboSpan" id="kobo.386.1">
     review of passing arguments to functions.
    </span>
    <span class="koboSpan" id="kobo.386.2">
     In the next section, you’ll discover why it’s important to understand the scope and lifetime of variables in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.387.1">
      Bash code.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-99">
    <a id="_idTextAnchor114">
    </a>
    <span class="koboSpan" id="kobo.388.1">
     The scope and lifetime of variables in functions
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.389.1">
     When writing Bash scripts, it’s important to understand how variable scope and lifetime work, especially when dealing with functions.
    </span>
    <span class="koboSpan" id="kobo.389.2">
     Properly managing variables can help avoid bugs, make your code more maintainable, and prevent unintended
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.390.1">
      side effects.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.391.1">
      Variable scope
     </span>
    </strong>
    <span class="koboSpan" id="kobo.392.1">
     refers to the
    </span>
    <a id="_idIndexMarker283">
    </a>
    <span class="koboSpan" id="kobo.393.1">
     visibility and accessibility of a variable within a script.
    </span>
    <span class="koboSpan" id="kobo.393.2">
     It determines where a variable can be
    </span>
    <a id="_idIndexMarker284">
    </a>
    <span class="koboSpan" id="kobo.394.1">
     accessed and modified.
    </span>
    <span class="koboSpan" id="kobo.394.2">
     Understanding variable scope is crucial for writing clean, modular, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.395.1">
      reusable code.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.396.1">
      Lifetime
     </span>
    </strong>
    <span class="koboSpan" id="kobo.397.1">
     , on the other hand, refers to how long a variable exists and retains its value during the execution of a script.
    </span>
    <span class="koboSpan" id="kobo.397.2">
     Variables
    </span>
    <a id="_idIndexMarker285">
    </a>
    <span class="koboSpan" id="kobo.398.1">
     with different lifetimes can have different implications on
    </span>
    <a id="_idIndexMarker286">
    </a>
    <span class="koboSpan" id="kobo.399.1">
     resource usage and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.400.1">
      data persistence.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.401.1">
     Properly managing variable scope and lifetime becomes particularly important when working with functions.
    </span>
    <span class="koboSpan" id="kobo.401.2">
     Functions allow you to encapsulate reusable code blocks, but they also introduce their own scope.
    </span>
    <span class="koboSpan" id="kobo.401.3">
     Understanding how variables behave within and across functions is essential for writing robust and maintainable
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.402.1">
      Bash scripts.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.403.1">
     In this tutorial, we’ll explore Bash variable scope and lifetime within functions, using examples to illustrate
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.404.1">
      variable lifetime.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-100">
    <a id="_idTextAnchor115">
    </a>
    <span class="koboSpan" id="kobo.405.1">
     Global variables
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.406.1">
     By default, variables declared in
    </span>
    <a id="_idIndexMarker287">
    </a>
    <span class="koboSpan" id="kobo.407.1">
     a Bash script have global scope, meaning they can be
    </span>
    <a id="_idIndexMarker288">
    </a>
    <span class="koboSpan" id="kobo.408.1">
     accessed and modified from anywhere within the script, including
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.409.1">
      inside functions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.410.1">
     Here’s an example (this code can be found in the book’s GitHub
    </span>
    <a id="_idTextAnchor116">
    </a>
    <a id="_idTextAnchor117">
    </a>
    <span class="koboSpan" id="kobo.411.1">
     repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.412.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.413.1">
       ch05_global_var.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.414.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.415.1">
#!/bin/bash
name="John"
greet() {
  echo "Hello, $name!"
</span><span class="koboSpan" id="kobo.415.2">}
greet
echo "Name: $name"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.416.1">
     The following is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.417.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.418.1">
Hello, John!
</span><span class="koboSpan" id="kobo.418.2">Name: John</span></pre>
   <p>
    <span class="koboSpan" id="kobo.419.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.420.1">
      an
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker289">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.421.1">
      explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.422.1">
       Line 3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.423.1">
      : We declare a global
     </span>
     <a id="_idIndexMarker290">
     </a>
     <span class="koboSpan" id="kobo.424.1">
      variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.425.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.426.1">
      , and assign it the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.427.1">
       value
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.428.1">
        John
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.429.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.430.1">
       Lines 5-7
      </span>
     </strong>
     <span class="koboSpan" id="kobo.431.1">
      : We define a function called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.432.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.433.1">
      that prints a greeting message using the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.434.1">
        name
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.435.1">
       variable.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.436.1">
       Line 9
      </span>
     </strong>
     <span class="koboSpan" id="kobo.437.1">
      : We call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.438.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.439.1">
      function, which accesses the global
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.440.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.441.1">
      variable and prints
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.442.1">
        Hello, John!
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.443.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.444.1">
       Line 10
      </span>
     </strong>
     <span class="koboSpan" id="kobo.445.1">
      : We print the value of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.446.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.447.1">
      variable, which is still accessible outside
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.448.1">
       the function.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.449.1">
     In this example, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.450.1">
      name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.451.1">
     variable is global and can be accessed both inside the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.452.1">
      greet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.453.1">
     function and in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.454.1">
      main script.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-101">
    <a id="_idTextAnchor118">
    </a>
    <span class="koboSpan" id="kobo.455.1">
     Local variables
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.456.1">
     To limit the scope of a variable to a specific function, you can declare it as a local variable using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.457.1">
      local
     </span>
    </strong>
    <span class="koboSpan" id="kobo.458.1">
     keyword.
    </span>
    <span class="koboSpan" id="kobo.458.2">
     Local variables
    </span>
    <a id="_idIndexMarker291">
    </a>
    <span class="koboSpan" id="kobo.459.1">
     are only accessible within the function where
    </span>
    <a id="_idIndexMarker292">
    </a>
    <span class="koboSpan" id="kobo.460.1">
     they are declared.
    </span>
    <span class="koboSpan" id="kobo.460.2">
     If the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.461.1">
      local
     </span>
    </strong>
    <span class="koboSpan" id="kobo.462.1">
     keyword is not used, then the variable is global.
    </span>
    <span class="koboSpan" id="kobo.462.2">
     Here’s an example (this code is found in the book’s Gi
    </span>
    <a id="_idTextAnchor119">
    </a>
    <a id="_idTextAnchor120">
    </a>
    <span class="koboSpan" id="kobo.463.1">
     tHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.464.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.465.1">
       ch05_local_var.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.466.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.467.1">
#!/bin/bash
greet() {
  local name="Alice"
  echo "Hello, $name!"
</span><span class="koboSpan" id="kobo.467.2">}
greet
echo "Name: $name"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.468.1">
     The following is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.469.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.470.1">
Hello, Alice!
</span><span class="koboSpan" id="kobo.470.2">Name:</span></pre>
   <p>
    <span class="koboSpan" id="kobo.471.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.472.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.473.1">
       Lines 3-6
      </span>
     </strong>
     <span class="koboSpan" id="kobo.474.1">
      : We define a function called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.475.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.476.1">
      that declares a local variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.477.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.478.1">
      , using the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.479.1">
       local
      </span>
     </strong>
     <span class="koboSpan" id="kobo.480.1">
      keyword, and assigns it the value
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.481.1">
       Alice
      </span>
     </strong>
     <span class="koboSpan" id="kobo.482.1">
      .
     </span>
     <span class="koboSpan" id="kobo.482.2">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.483.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.484.1">
      variable is only accessible within the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.485.1">
        greet
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.486.1">
       function.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.487.1">
       Line 5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.488.1">
      : We print a greeting message using the local
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.489.1">
        name
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.490.1">
       variable.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.491.1">
       Line 8
      </span>
     </strong>
     <span class="koboSpan" id="kobo.492.1">
      : We call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.493.1">
       greet
      </span>
     </strong>
     <span class="koboSpan" id="kobo.494.1">
      function, which prints
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.495.1">
        Hello, Alice!
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.496.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.497.1">
       Line 9
      </span>
     </strong>
     <span class="koboSpan" id="kobo.498.1">
      : We attempt to print the value of the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.499.1">
       name
      </span>
     </strong>
     <span class="koboSpan" id="kobo.500.1">
      variable outside the function, but it is not accessible, resulting in an
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.501.1">
       empty output.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.502.1">
     In this example, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.503.1">
      name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.504.1">
     variable is local to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.505.1">
      greet
     </span>
    </strong>
    <span class="koboSpan" id="kobo.506.1">
     function and cannot be accessed outside of it.
    </span>
    <span class="koboSpan" id="kobo.506.2">
     Attempting to use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.507.1">
      $name
     </span>
    </strong>
    <span class="koboSpan" id="kobo.508.1">
     outside the function results in an
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.509.1">
      empty value.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-102">
    <a id="_idTextAnchor121">
    </a>
    <span class="koboSpan" id="kobo.510.1">
     Variable lifetime
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.511.1">
     The lifetime of a variable depends on its scope.
    </span>
    <span class="koboSpan" id="kobo.511.2">
     Global variables have a lifetime that spans the entire script execution, while
    </span>
    <a id="_idIndexMarker293">
    </a>
    <span class="koboSpan" id="kobo.512.1">
     local variables have a lifetime limited to the function in which they
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.513.1">
      are declared.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.514.1">
     Here’s an example that demonstrates variable lifetime (this code is found in the book’s GitH
    </span>
    <a id="_idTextAnchor122">
    </a>
    <a id="_idTextAnchor123">
    </a>
    <span class="koboSpan" id="kobo.515.1">
     ub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.516.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.517.1">
       ch05_var_lifetime.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.518.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.519.1">
#!/bin/bash
global_var="I'm global"
my_function() {
  local local_var="I'm local"
  echo "Inside function:"
  echo "Global variable: $global_var"
  echo "Local variable: $local_var"
}
my_function
echo "Outside function:"
echo "Global variable: $global_var"
echo "Local variable: $local_var"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.520.1">
     The following is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.521.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.522.1">
Inside function:
Global variable: I'm global
Local variable: I'm local
Outside function:
Global variable: I'm global
Local variable:</span></pre>
   <p>
    <span class="koboSpan" id="kobo.523.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.524.1">
      an
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker294">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.525.1">
      explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.526.1">
       Line 3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.527.1">
      : We declare a global variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.528.1">
       global_var
      </span>
     </strong>
     <span class="koboSpan" id="kobo.529.1">
      , and assign it the value
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.530.1">
        I'm global
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.531.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.532.1">
       Lines 5-10
      </span>
     </strong>
     <span class="koboSpan" id="kobo.533.1">
      : We define a function called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.534.1">
       my_function
      </span>
     </strong>
     <span class="koboSpan" id="kobo.535.1">
      that declares a local variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.536.1">
       local_var
      </span>
     </strong>
     <span class="koboSpan" id="kobo.537.1">
      , and assigns it the value
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.538.1">
       I'm local
      </span>
     </strong>
     <span class="koboSpan" id="kobo.539.1">
      .
     </span>
     <span class="koboSpan" id="kobo.539.2">
      Inside the function, we print the values of both the global and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.540.1">
       local variables.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.541.1">
       Line 12
      </span>
     </strong>
     <span class="koboSpan" id="kobo.542.1">
      : We call the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.543.1">
        my_function
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.544.1">
       function.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.545.1">
       Lines 14-16
      </span>
     </strong>
     <span class="koboSpan" id="kobo.546.1">
      : Outside the function, we print the values of the global and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.547.1">
       local variables.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.548.1">
     In this example, the global variable,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.549.1">
      global_var
     </span>
    </strong>
    <span class="koboSpan" id="kobo.550.1">
     , is accessible both inside and outside the function, demonstrating its lifetime throughout the script.
    </span>
    <span class="koboSpan" id="kobo.550.2">
     On the other hand, the local variable,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.551.1">
      local_var
     </span>
    </strong>
    <span class="koboSpan" id="kobo.552.1">
     , is only accessible within the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.553.1">
      my_function
     </span>
    </strong>
    <span class="koboSpan" id="kobo.554.1">
     function and has no value outside
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.555.1">
      of it.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-103">
    <a id="_idTextAnchor124">
    </a>
    <span class="koboSpan" id="kobo.556.1">
     Modifying global variables inside functions
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.557.1">
     If you need to
    </span>
    <a id="_idIndexMarker295">
    </a>
    <span class="koboSpan" id="kobo.558.1">
     modify a global variable inside a function, you can do so by referencing the variable without any special declaration.
    </span>
    <span class="koboSpan" id="kobo.558.2">
     Because Bash lacks a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.559.1">
      global
     </span>
    </strong>
    <span class="koboSpan" id="kobo.560.1">
     keyword, any variable that lacks the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.561.1">
      local
     </span>
    </strong>
    <span class="koboSpan" id="kobo.562.1">
     keyword is effectively global.
    </span>
    <span class="koboSpan" id="kobo.562.2">
     It’s generally
    </span>
    <a id="_idIndexMarker296">
    </a>
    <span class="koboSpan" id="kobo.563.1">
     recommended to minimize the modification of global variables inside functions to avoid unexpected side effects and maintain
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.564.1">
      code clarity.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.565.1">
     Here’s an example that modifies a global variable inside a function (this code can be found in the book’s GitHub
    </span>
    <a id="_idTextAnchor125">
    </a>
    <a id="_idTextAnchor126">
    </a>
    <span class="koboSpan" id="kobo.566.1">
     repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.567.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.568.1">
       ch05_modify_global_var.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.569.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.570.1">
#!/bin/bash
count=0
increment() {
  count=$((count + 1))
}
echo "Before: count = $count"
increment
echo "After: count = $count"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.571.1">
     The following is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.572.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.573.1">
Before: count = 0
After: count = 1</span></pre>
   <p>
    <span class="koboSpan" id="kobo.574.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.575.1">
      an
     </span>
    </span>
    <span class="No-Break">
     <a id="_idIndexMarker297">
     </a>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.576.1">
      explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.577.1">
       Line 3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.578.1">
      : We declare a global variable,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.579.1">
       count
      </span>
     </strong>
     <span class="koboSpan" id="kobo.580.1">
      , and initialize it
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.581.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.582.1">
        0
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.583.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.584.1">
       Lines 5-7
      </span>
     </strong>
     <span class="koboSpan" id="kobo.585.1">
      : We define a function called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.586.1">
       increment
      </span>
     </strong>
     <span class="koboSpan" id="kobo.587.1">
      that modifies the global
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.588.1">
       count
      </span>
     </strong>
     <span class="koboSpan" id="kobo.589.1">
      variable by incrementing its value
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.590.1">
       by
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.591.1">
        1
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.592.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.593.1">
       Line 9
      </span>
     </strong>
     <span class="koboSpan" id="kobo.594.1">
      : We print the value of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.595.1">
       count
      </span>
     </strong>
     <span class="koboSpan" id="kobo.596.1">
      before calling the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.597.1">
        increment
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.598.1">
       function.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.599.1">
       Line 10
      </span>
     </strong>
     <span class="koboSpan" id="kobo.600.1">
      : We call the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.601.1">
       increment
      </span>
     </strong>
     <span class="koboSpan" id="kobo.602.1">
      function, which modifies the global
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.603.1">
        count
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.604.1">
       variable.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.605.1">
       Line 11
      </span>
     </strong>
     <span class="koboSpan" id="kobo.606.1">
      : We print the value of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.607.1">
       count
      </span>
     </strong>
     <span class="koboSpan" id="kobo.608.1">
      after calling the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.609.1">
        increment
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.610.1">
       function.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.611.1">
     In this example, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.612.1">
      increment
     </span>
    </strong>
    <span class="koboSpan" id="kobo.613.1">
     function directly modifies the global
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.614.1">
      count
     </span>
    </strong>
    <span class="koboSpan" id="kobo.615.1">
     variable, incrementing its value by
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.616.1">
      1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.617.1">
     .
    </span>
    <span class="koboSpan" id="kobo.617.2">
     The modification
    </span>
    <a id="_idIndexMarker298">
    </a>
    <span class="koboSpan" id="kobo.618.1">
     is reflected outside the function, as evidenced by
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.619.1">
      the output.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.620.1">
     Understanding variable scope and lifetime is crucial for writing clean, maintainable, and bug-free Bash scripts.
    </span>
    <span class="koboSpan" id="kobo.620.2">
     Global variables have a scope that spans the entire script, while local variables are limited to the function in which they are declared.
    </span>
    <span class="koboSpan" id="kobo.620.3">
     The lifetime of a variable depends on its scope, with global variables existing throughout the script execution and local variables existing only within their
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.621.1">
      respective functions.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.622.1">
     By properly managing variable scope and lifetime, you can create modular and reusable code, avoid naming conflicts, and maintain better control over your script’s behavior.
    </span>
    <span class="koboSpan" id="kobo.622.2">
     It’s generally recommended to use local variables within functions to encapsulate data and prevent unintended
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.623.1">
      side effects.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.624.1">
     Remember to be cautious
    </span>
    <a id="_idIndexMarker299">
    </a>
    <span class="koboSpan" id="kobo.625.1">
     when modifying global variables inside functions, as it can lead to unexpected behavior and make your code harder to reason about.
    </span>
    <span class="koboSpan" id="kobo.625.2">
     Whenever possible, aim for a clear separation of concerns and minimize the reliance on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.626.1">
      global variables.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.627.1">
     With a solid understanding of Bash variable scope and lifetime, you’ll be well equipped to write more robust and maintainable scripts, making your Bash programming experience more enjoyable
    </span>
    <a id="_idIndexMarker300">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.628.1">
      and productive.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.629.1">
     Having gained a thorough understanding of functions, in the next section, we’ll build on that knowledge to explore advanced function techniques that I’m confident you’ll find useful in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.630.1">
      Bash scripting.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-104">
    <a id="_idTextAnchor127">
    </a>
    <span class="koboSpan" id="kobo.631.1">
     Advanced function techniques
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.632.1">
     In this section, we’ll explore some advanced techniques for working with Bash functions, including return values and
    </span>
    <a id="_idIndexMarker301">
    </a>
    <span class="koboSpan" id="kobo.633.1">
     recursive functions.
    </span>
    <span class="koboSpan" id="kobo.633.2">
     We’ll provide code examples and thorough explanations to help you master
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.634.1">
      these concepts.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-105">
    <a id="_idTextAnchor128">
    </a>
    <span class="koboSpan" id="kobo.635.1">
     Function return values
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.636.1">
     In Bash, functions don’t return
    </span>
    <a id="_idIndexMarker302">
    </a>
    <span class="koboSpan" id="kobo.637.1">
     values in the same way that functions in most programming languages do.
    </span>
    <span class="koboSpan" id="kobo.637.2">
     Instead, they return an exit status, also known as a
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.638.1">
      return code
     </span>
    </strong>
    <span class="koboSpan" id="kobo.639.1">
     , which is
    </span>
    <a id="_idIndexMarker303">
    </a>
    <span class="koboSpan" id="kobo.640.1">
     an integer where
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.641.1">
      0
     </span>
    </strong>
    <span class="koboSpan" id="kobo.642.1">
     typically indicates success and any non-zero value indicates an error or some type
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.643.1">
      of failure.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.644.1">
     Returning an exit status
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.645.1">
     A Bash function returns an exit status using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.646.1">
      return
     </span>
    </strong>
    <span class="koboSpan" id="kobo.647.1">
     command.
    </span>
    <span class="koboSpan" id="kobo.647.2">
     By default, a Bash function will return the exit
    </span>
    <a id="_idIndexMarker304">
    </a>
    <span class="koboSpan" id="kobo.648.1">
     status of the last command executed within the function.
    </span>
    <span class="koboSpan" id="kobo.648.2">
     Here’s a basic example (this code is provided in the
    </span>
    <a id="_idTextAnchor129">
    </a>
    <a id="_idTextAnchor130">
    </a>
    <span class="koboSpan" id="kobo.649.1">
     book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.650.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.651.1">
       ch05_exit_status.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.652.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.653.1">
function check_file {
    ls "$1"
    return $?
</span><span class="koboSpan" id="kobo.653.2">}
check_file "example.txt"
echo "The function returned with exit code $?"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.654.1">
     In this example, the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.655.1">
      check_file
     </span>
    </strong>
    <span class="koboSpan" id="kobo.656.1">
     function attempts to list a file provided as an argument to the function.
    </span>
    <span class="koboSpan" id="kobo.656.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.657.1">
      $?
     </span>
    </strong>
    <span class="koboSpan" id="kobo.658.1">
     special variable captures the exit status of the last command executed, which in this case is
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.659.1">
      ls
     </span>
    </strong>
    <span class="koboSpan" id="kobo.660.1">
     .
    </span>
    <span class="koboSpan" id="kobo.660.2">
     After the function is called,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.661.1">
      $?
     </span>
    </strong>
    <span class="koboSpan" id="kobo.662.1">
     will contain the return status of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.663.1">
      the function.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.664.1">
     You can explicitly set a return value from a function using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.665.1">
      return
     </span>
    </strong>
    <span class="koboSpan" id="kobo.666.1">
     command followed by an integer.
    </span>
    <span class="koboSpan" id="kobo.666.2">
     Here’s an example (this code is provided in the book’s G
    </span>
    <a id="_idTextAnchor131">
    </a>
    <a id="_idTextAnchor132">
    </a>
    <span class="koboSpan" id="kobo.667.1">
     itHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.668.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.669.1">
       ch05_explicit_exit_status.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.670.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.671.1">
function is_even {
    local num=$1
    if (( num % 2 == 0 )); then
        return 0  # Success, number is even
    else
        return 1  # Failure, number is odd
    fi
}
is_even 4
result=$?
</span><span class="koboSpan" id="kobo.671.2">if [ $result -eq 0 ]; then
    echo "Number is even."
</span><span class="koboSpan" id="kobo.671.3">else
    echo "Number is odd."
</span><span class="koboSpan" id="kobo.671.4">fi</span></pre>
   <p>
    <span class="koboSpan" id="kobo.672.1">
     In the preceding script,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.673.1">
      is_even
     </span>
    </strong>
    <span class="koboSpan" id="kobo.674.1">
     checks whether a number is even.
    </span>
    <span class="koboSpan" id="kobo.674.2">
     If the number is even, it returns
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.675.1">
      0
     </span>
    </strong>
    <span class="koboSpan" id="kobo.676.1">
     ; otherwise, it
    </span>
    <a id="_idIndexMarker305">
    </a>
    <span class="koboSpan" id="kobo.677.1">
     returns
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.678.1">
      1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.679.1">
     .
    </span>
    <span class="koboSpan" id="kobo.679.2">
     The result of the function call is then checked to print whether the number is even
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.680.1">
      or odd.
     </span>
    </span>
   </p>
   <h3>
    <span class="koboSpan" id="kobo.681.1">
     Using output instead of return codes
    </span>
   </h3>
   <p>
    <span class="koboSpan" id="kobo.682.1">
     If you need to capture output from a function rather than just an exit status, you can use command substitution.
    </span>
    <span class="koboSpan" id="kobo.682.2">
     Here’s an example
    </span>
    <a id="_idIndexMarker306">
    </a>
    <span class="koboSpan" id="kobo.683.1">
     of setting a return value by using both a variable and the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.684.1">
      echo
     </span>
    </strong>
    <span class="koboSpan" id="kobo.685.1">
     command (this code is provided in the book’s
    </span>
    <a id="_idTextAnchor133">
    </a>
    <a id="_idTextAnchor134">
    </a>
    <span class="koboSpan" id="kobo.686.1">
     GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.687.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.688.1">
       ch05_command_substitution.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.689.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.690.1">
square() {
  local result=$(($1 * $1))
  echo "$result"
}
squared=$(square 5)
echo "The square of 5 is $squared"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.691.1">
     The following is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.692.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.693.1">
25
The square of 5 is 25</span></pre>
   <p>
    <span class="koboSpan" id="kobo.694.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.695.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.696.1">
      In this example, we define a function called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.697.1">
       square
      </span>
     </strong>
     <span class="koboSpan" id="kobo.698.1">
      that takes one argument and calculates
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.699.1">
       its square.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.700.1">
      Inside the function, we perform the calculation
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.701.1">
       $1 * $1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.702.1">
      and assign the result to a local variable
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.703.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.704.1">
        result
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.705.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.706.1">
      The math expression
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.707.1">
       $1 * $1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.708.1">
      is enclosed in Bash shell arithmetic expansion by enclosing the factors as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.709.1">
       $(($1 * $
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.710.1">
        1))
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.711.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.712.1">
      We then use
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.713.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.714.1">
      to output the value
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.715.1">
       of
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.716.1">
        result
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.717.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.718.1">
      To capture the return
     </span>
     <a id="_idIndexMarker307">
     </a>
     <span class="koboSpan" id="kobo.719.1">
      value of the function, we use command substitution,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.720.1">
       $()
      </span>
     </strong>
     <span class="koboSpan" id="kobo.721.1">
      , when calling
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.722.1">
       the function.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.723.1">
      We assign the output of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.724.1">
       square 5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.725.1">
      to a variable
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.726.1">
       called
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.727.1">
        squared
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.728.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.729.1">
      Finally, we print a message that includes the value of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.730.1">
       squared
      </span>
     </strong>
     <span class="koboSpan" id="kobo.731.1">
      , which
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.732.1">
       is
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.733.1">
        25
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.734.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.735.1">
     For what you have learned, it’s important that you remember
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.736.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.737.1">
       Exit status range
      </span>
     </strong>
     <span class="koboSpan" id="kobo.738.1">
      : The exit status should be an integer from 0 to 255.
     </span>
     <span class="koboSpan" id="kobo.738.2">
      Any value outside this range might wrap around (e.g., 256
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.739.1">
       becomes 0).
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.740.1">
       Using output
      </span>
     </strong>
     <span class="koboSpan" id="kobo.741.1">
      : Functions can output data to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.742.1">
       stdout
      </span>
     </strong>
     <span class="koboSpan" id="kobo.743.1">
      , which can be captured with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.744.1">
       command substitution.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.745.1">
       Return early
      </span>
     </strong>
     <span class="koboSpan" id="kobo.746.1">
      : You can use multiple return statements in a function to exit the function under different
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.747.1">
       conditions early.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.748.1">
     Having gained a thorough knowledge of using functions in Bash code, let’s take a brief look at how to use them recursively in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.749.1">
      your code.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-106">
    <a id="_idTextAnchor135">
    </a>
    <span class="koboSpan" id="kobo.750.1">
     Recursive functions
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.751.1">
     Bash supports
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.752.1">
      recursive functions
     </span>
    </strong>
    <span class="koboSpan" id="kobo.753.1">
     , which are functions that call themselves.
    </span>
    <span class="koboSpan" id="kobo.753.2">
     Recursive functions are useful for
    </span>
    <a id="_idIndexMarker308">
    </a>
    <span class="koboSpan" id="kobo.754.1">
     solving problems that can be divided into smaller subproblems.
    </span>
    <span class="koboSpan" id="kobo.754.2">
     Here’s an example that calculates the factorial of a number using recursion (this code is provided in the bo
    </span>
    <a id="_idTextAnchor136">
    </a>
    <a id="_idTextAnchor137">
    </a>
    <span class="koboSpan" id="kobo.755.1">
     ok’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.756.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.757.1">
       ch05_recursive_function.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.758.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.759.1">
factorial() {
  if [ "$1" -eq 0 ]; then
    echo 1
  else
    local prev=$(factorial $(($1 - 1)))
    echo $(($1 * prev))
  fi
}
result=$(factorial 5)
echo "The factorial of 5 is $result"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.760.1">
     The following is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.761.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.762.1">
The factorial of 5 is 120</span></pre>
   <p>
    <span class="koboSpan" id="kobo.763.1">
     The following provides
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.764.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.765.1">
      In this example, we
     </span>
     <a id="_idIndexMarker309">
     </a>
     <span class="koboSpan" id="kobo.766.1">
      define a function called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.767.1">
       factorial
      </span>
     </strong>
     <span class="koboSpan" id="kobo.768.1">
      that takes one argument, the number for which we want to calculate the factorial.
     </span>
     <span class="koboSpan" id="kobo.768.2">
      The function uses an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.769.1">
       if
      </span>
     </strong>
     <span class="koboSpan" id="kobo.770.1">
      statement to check whether the argument is equal to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.771.1">
       0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.772.1">
      .
     </span>
     <span class="koboSpan" id="kobo.772.2">
      If it is, the function returns
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.773.1">
       1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.774.1">
      , which is the base case of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.775.1">
       the recursion.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.776.1">
      If the argument is not
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.777.1">
       0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.778.1">
      , the function calls itself with the argument decremented by
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.779.1">
       1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.780.1">
      .
     </span>
     <span class="koboSpan" id="kobo.780.2">
      This recursive call continues until the base case is reached.
     </span>
     <span class="koboSpan" id="kobo.780.3">
      The result of each recursive call is stored in a local variable called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.781.1">
       prev
      </span>
     </strong>
     <span class="koboSpan" id="kobo.782.1">
      .
     </span>
     <span class="koboSpan" id="kobo.782.2">
      Finally, the function multiplies the current argument by the result of the previous recursive call and returns the product
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.783.1">
       using
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.784.1">
        echo
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.785.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.786.1">
      To use the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.787.1">
       factorial
      </span>
     </strong>
     <span class="koboSpan" id="kobo.788.1">
      function, we call it with an argument of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.789.1">
       5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.790.1">
      and capture the result using command substitution.
     </span>
     <span class="koboSpan" id="kobo.790.2">
      We assign the result to a variable called
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.791.1">
       result
      </span>
     </strong>
     <span class="koboSpan" id="kobo.792.1">
      and print a message that includes the factorial of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.793.1">
       5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.794.1">
      , which
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.795.1">
       is
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.796.1">
        120
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.797.1">
       .
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.798.1">
     One example of a good use case for a recursive function is when performing file and directory enumeration in a web application.
    </span>
    <span class="koboSpan" id="kobo.798.2">
     You would want to create an array of discovered directories and begin anew inside each directory to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.799.1">
      discover files.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.800.1">
     Recursive functions can be powerful, but they can also be difficult to understand and debug.
    </span>
    <span class="koboSpan" id="kobo.800.2">
     It’s important to ensure that the recursive function has a well-defined base case to prevent infinite recursion and to carefully consider the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.801.1">
      termination condition.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.802.1">
     In the next section, we’ll continue
    </span>
    <a id="_idIndexMarker310">
    </a>
    <span class="koboSpan" id="kobo.803.1">
     building on everything you’ve learned in this chapter by learning how to import functions to reduce the amount of code you write and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.804.1">
      reuse code.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-107">
    <a id="_idTextAnchor138">
    </a>
    <span class="koboSpan" id="kobo.805.1">
     Importing functions
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.806.1">
     I previously stated that one of the nice features of Bash functions is code reuse.
    </span>
    <span class="koboSpan" id="kobo.806.2">
     You can solve a problem once by
    </span>
    <a id="_idIndexMarker311">
    </a>
    <span class="koboSpan" id="kobo.807.1">
     writing a function and calling that function repeatedly.
    </span>
    <span class="koboSpan" id="kobo.807.2">
     In programmer lingo, that’s
    </span>
    <a id="_idIndexMarker312">
    </a>
    <span class="koboSpan" id="kobo.808.1">
     referred to as
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.809.1">
      don’t repeat yourself
     </span>
    </strong>
    <span class="koboSpan" id="kobo.810.1">
     , or
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.811.1">
      DRY
     </span>
    </strong>
    <span class="koboSpan" id="kobo.812.1">
     .
    </span>
    <span class="koboSpan" id="kobo.812.2">
     Now, let’s take that a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.813.1">
      step further.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.814.1">
     Let’s imagine for a moment that you previously solved a problem by implementing a function that you can call as many times as you need.
    </span>
    <span class="koboSpan" id="kobo.814.2">
     What happens when you find the need to use that function in a new Bash script?
    </span>
    <span class="koboSpan" id="kobo.814.3">
     Do you go searching through your scripts to find that function and copy and paste it into your new script?
    </span>
    <span class="koboSpan" id="kobo.814.4">
     This is really
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.815.1">
      not necessary.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.816.1">
     Make it a habit to start putting your functions into one script, such as a library or module.
    </span>
    <span class="koboSpan" id="kobo.816.2">
     When you need to use a function that you’ve previously defined, simply
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.817.1">
      source
     </span>
    </em>
    <span class="koboSpan" id="kobo.818.1">
     it before you call that function in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.819.1">
      new script.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.820.1">
     The following example code can be found in this chapter’s folder in
    </span>
    <a id="_idTextAnchor139">
    </a>
    <a id="_idTextAnchor140">
    </a>
    <a id="_idTextAnchor141">
    </a>
    <span class="koboSpan" id="kobo.821.1">
     the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.822.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.823.1">
       ch05_importing_funcs_1.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.824.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.825.1">
function greet() {
  echo "Hello, $1!"
</span><span class="koboSpan" id="kobo.825.2">}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.826.1">
     Next, source the script from another script
    </span>
    <a id="_idTextAnchor142">
    </a>
    <a id="_idTextAnchor143">
    </a>
    <span class="koboSpan" id="kobo.827.1">
     before you call the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.828.1">
      function (
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.829.1">
       ch05_importing_funcs_2.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.830.1">
      ):
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.831.1">
source script1.sh
greet "John"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.832.1">
     You should be aware that sourcing a file may add a very small amount of time to the startup of the script that sources another script since it has to load the sourced script into memory.
    </span>
    <span class="koboSpan" id="kobo.832.2">
     It has to do this one time only.
    </span>
    <span class="koboSpan" id="kobo.832.3">
     If you use more than one function from a function library file, you source it only one time since the whole script is loaded into memory when
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.833.1">
      it’s sourced.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.834.1">
     Having learned how to use functions, from basics through to advanced usage, I want to briefly discuss the differences
    </span>
    <a id="_idIndexMarker313">
    </a>
    <span class="koboSpan" id="kobo.835.1">
     and use cases to help you choose between functions and aliases, in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.836.1">
      next section.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-108">
    <a id="_idTextAnchor144">
    </a>
    <span class="koboSpan" id="kobo.837.1">
     Functions versus aliases
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.838.1">
     Functions are essential building blocks in programming that allow developers to encapsulate a set of instructions into a reusable block of code.
    </span>
    <span class="koboSpan" id="kobo.838.2">
     By defining functions, programmers can streamline their code, improve readability, and promote code reusability.
    </span>
    <span class="koboSpan" id="kobo.838.3">
     Functions are designed to
    </span>
    <a id="_idIndexMarker314">
    </a>
    <span class="koboSpan" id="kobo.839.1">
     perform specific tasks when called upon, making it easier to manage and maintain code bases.
    </span>
    <span class="koboSpan" id="kobo.839.2">
     They are a fundamental concept in programming languages such as Python, JavaScript, and Java, enabling developers to break
    </span>
    <a id="_idIndexMarker315">
    </a>
    <span class="koboSpan" id="kobo.840.1">
     down complex problems into smaller, more
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.841.1">
      manageable components.
     </span>
    </span>
   </p>
   <p>
    <strong class="bold">
     <span class="koboSpan" id="kobo.842.1">
      Aliases
     </span>
    </strong>
    <span class="koboSpan" id="kobo.843.1">
     , on the other hand, serve a different purpose in programming.
    </span>
    <span class="koboSpan" id="kobo.843.2">
     An alias is a symbolic name given to an entity, such as a variable, function, or command.
    </span>
    <span class="koboSpan" id="kobo.843.3">
     Aliases provide a way to create shortcuts or alternative names for existing elements in a program.
    </span>
    <span class="koboSpan" id="kobo.843.4">
     They can help simplify the syntax of commands or make code more concise and easier to understand.
    </span>
    <span class="koboSpan" id="kobo.843.5">
     In Unix-based systems, aliases are commonly used to define custom commands or shorten lengthy commands
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.844.1">
      for convenience.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.845.1">
     While functions and aliases both play important roles in programming, they serve distinct purposes and have different applications.
    </span>
    <span class="koboSpan" id="kobo.845.2">
     Functions are primarily used to encapsulate a set of instructions into a reusable block of code, promoting modularity and code organization.
    </span>
    <span class="koboSpan" id="kobo.845.3">
     On the other hand, aliases are used to create symbolic names for entities, providing shortcuts or alternative names for convenience.
    </span>
    <span class="koboSpan" id="kobo.845.4">
     Understanding the differences between functions and aliases can help you leverage these programming concepts to improve code quality
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.846.1">
      and efficiency.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.847.1">
     Now that we’ve explored functions in depth, I want to introduce you to how you can use functions outside of scripts to simplify your pentesting workflow.
    </span>
    <span class="koboSpan" id="kobo.847.2">
     Aliases are great for simplifying a workflow because they allow you to create a named command you can enter to replace more
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.848.1">
      complicated commands.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.849.1">
     For example, I have an alias in my
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.850.1">
      ~/.bashrc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.851.1">
     file that simplifies a very long, complex command to run a Docker container that provides information about a web application.
    </span>
    <span class="koboSpan" id="kobo.851.2">
     I run this command at the beginning of every web application pentest to give me information related to the frameworks in use by
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.852.1">
      the application:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.853.1">
zapit='docker run -it --rm softwaresecurityproject/zap-stable zap.sh -cmd -addonupdate -addoninstall wappalyzer -addoninstall pscanrulesBeta -zapit'</span></pre>
   <p>
    <span class="koboSpan" id="kobo.854.1">
     That’s a lot to remember, isn’t it?!
    </span>
    <span class="koboSpan" id="kobo.854.2">
     Thankfully, we have aliases for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.855.1">
      this purpose.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.856.1">
     While aliases are very handy, they lack
    </span>
    <a id="_idIndexMarker316">
    </a>
    <span class="koboSpan" id="kobo.857.1">
     one crucial feature that we need; they don’t accept parameters such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.858.1">
      $1 $2 $3
     </span>
    </strong>
    <span class="koboSpan" id="kobo.859.1">
     .
    </span>
    <span class="koboSpan" id="kobo.859.2">
     In the preceding alias, when we enter the alias in our terminal, anything appended after the alias name is included with the command when Bash expands the
    </span>
    <a id="_idIndexMarker317">
    </a>
    <span class="koboSpan" id="kobo.860.1">
     alias to the full command and executes it in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.861.1">
      the shell.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.862.1">
     Essentially, Bash expands the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.863.1">
      zapit www.example.com
     </span>
    </strong>
    <span class="koboSpan" id="kobo.864.1">
     command to the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.865.1">
      Docker
     </span>
    </strong>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.866.1">
      run
     </span>
    </strong>
    <span class="koboSpan" id="kobo.867.1">
     command shown previously with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.868.1">
      www.example.com
     </span>
    </strong>
    <span class="koboSpan" id="kobo.869.1">
     appended to it.
    </span>
    <span class="koboSpan" id="kobo.869.2">
     What if we wanted to run a command that requires multiple parameters in a particular order, so we can’t simply append them after the alias name?
    </span>
    <span class="koboSpan" id="kobo.869.3">
     This is where functions
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.870.1">
      are helpful.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.871.1">
     Let’s use generating shellcode with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.872.1">
      msfvenom
     </span>
    </strong>
    <span class="koboSpan" id="kobo.873.1">
     as an example.
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.874.1">
      msfvenom
     </span>
    </strong>
    <span class="koboSpan" id="kobo.875.1">
     is a command that’s included with the
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.876.1">
      Metasploit Framework
     </span>
    </strong>
    <span class="koboSpan" id="kobo.877.1">
     to generate shellcode in various formats.
    </span>
    <span class="koboSpan" id="kobo.877.2">
     This
    </span>
    <a id="_idTextAnchor145">
    </a>
    <a id="_idTextAnchor146">
    </a>
    <span class="koboSpan" id="kobo.878.1">
     tool is
    </span>
    <a id="_idIndexMarker318">
    </a>
    <span class="koboSpan" id="kobo.879.1">
     used frequently in pentesting and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.880.1">
      exploit development:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.881.1">
gen_shellcode() {
  if [[ $# -eq 0 ]]; then
    echo "Usage: gen_shellcode [payload] [LPORT] [output format]"
    return 1
  fi
  msfvenom -p $1 LHOST=$(ip -o -4 a show tun0 | awk '{print $4}' | cut -d/ -f1) LPORT=$2 -f $3;
 }</span></pre>
   <p>
    <span class="koboSpan" id="kobo.882.1">
     This code is provided in the book’s GitHub repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.883.1">
      ch05_gen_shellcode.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.884.1">
     .
    </span>
    <span class="koboSpan" id="kobo.884.2">
     We can explain it
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.885.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.886.1">
      We declare a function
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.887.1">
       named
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.888.1">
        gen_shellcode
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.889.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.890.1">
      If the number of arguments equals
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.891.1">
       0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.892.1">
      , print the usage
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.893.1">
       and exit.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.894.1">
      In the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.895.1">
       msfvenom
      </span>
     </strong>
     <span class="koboSpan" id="kobo.896.1">
      command, the first argument,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.897.1">
       $1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.898.1">
      , is inserted as the payload,
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.899.1">
       after
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.900.1">
        -p
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.901.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.902.1">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.903.1">
       LHOST=$(ip -o -4 a show tun0 | awk '{print $4}'
      </span>
     </strong>
     <span class="koboSpan" id="kobo.904.1">
      code gets your IP address for the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.905.1">
       tun0
      </span>
     </strong>
     <span class="koboSpan" id="kobo.906.1">
      network interface and inserts it in place
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.907.1">
       of
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.908.1">
        $()
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.909.1">
       .
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.910.1">
      The second argument,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.911.1">
       $2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.912.1">
      , is assigned to the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.913.1">
        LPORT
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.914.1">
       variable.
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.915.1">
      The third argument,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.916.1">
       $3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.917.1">
      , is for the output format
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.918.1">
       -
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.919.1">
        f
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.920.1">
       argument.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.921.1">
     Finally, add this code at the end of your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.922.1">
      ~/.bashrc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.923.1">
     file and you will be able to use this function any time you need to generate shellcode with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.924.1">
      msfvenom
     </span>
    </strong>
    <span class="koboSpan" id="kobo.925.1">
     .
    </span>
    <span class="koboSpan" id="kobo.925.2">
     If you forget which options are required, simply enter
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.926.1">
      gen_shellcode
     </span>
    </strong>
    <span class="koboSpan" id="kobo.927.1">
     without arguments and press the Enter key and it will print the
    </span>
    <a id="_idIndexMarker319">
    </a>
    <span class="koboSpan" id="kobo.928.1">
     usage example
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.929.1">
      for you.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.930.1">
     In summary, aliases are
    </span>
    <a id="_idIndexMarker320">
    </a>
    <span class="koboSpan" id="kobo.931.1">
     expanded to represent the command inside the quotes, but you’re limited to appending extra arguments after the alias name.
    </span>
    <span class="koboSpan" id="kobo.931.2">
     With functions, there are no limitations.
    </span>
    <span class="koboSpan" id="kobo.931.3">
     In addition to the great value you get from using functions in your scripts, any valid Bash function code can be placed in your
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.932.1">
      .bashrc
     </span>
    </strong>
    <span class="koboSpan" id="kobo.933.1">
     file to call on the command line with arguments that are interpolated in the function code on execution.
    </span>
    <span class="koboSpan" id="kobo.933.2">
     Imagine the possibilities for creating automation for your pentesting workflow!
    </span>
    <span class="koboSpan" id="kobo.933.3">
     We’ll be diving into that topic in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.934.1">
      later chapters.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-109">
    <a id="_idTextAnchor147">
    </a>
    <span class="koboSpan" id="kobo.935.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.936.1">
     In this chapter, we dove deep into the world of Bash functions and how they can revolutionize your scripting game.
    </span>
    <span class="koboSpan" id="kobo.936.2">
     By mastering functions, you’ll write cleaner, more organized, and more efficient scripts that save you time
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.937.1">
      and headaches.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.938.1">
     We started with the basics, understanding what functions are and why they’re so helpful.
    </span>
    <span class="koboSpan" id="kobo.938.2">
     Then we got into the nitty-gritty of passing arguments to functions, making them flexible and reusable.
    </span>
    <span class="koboSpan" id="kobo.938.3">
     We explored the scope and lifetime of variables inside functions, so you know exactly what’s happening under
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.939.1">
      the hood.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.940.1">
     Things got really exciting when we hit the advanced techniques.
    </span>
    <span class="koboSpan" id="kobo.940.2">
     You learned how to use recursion to elegantly solve complex problems and how to use callbacks to make your functions even more powerful.
    </span>
    <span class="koboSpan" id="kobo.940.3">
     Finally, we compared functions to aliases and showed how functions are the clear winner for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.941.1">
      pentesting workflows.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.942.1">
     Now, you have some serious tools in your scripting toolbox.
    </span>
    <span class="koboSpan" id="kobo.942.2">
     You can now write modular, organized scripts that are easy to read, debug, and maintain.
    </span>
    <span class="koboSpan" id="kobo.942.3">
     And, most importantly, you can use functions to streamline your pentesting process, saving you valuable time and effort.
    </span>
    <span class="koboSpan" id="kobo.942.4">
     So, go forth and script like
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.943.1">
      a pro!
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.944.1">
     In the next chapter, we’ll explore using Bash commands
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.945.1">
      for networking.
     </span>
    </span>
   </p>
  </div>
 </body></html>