<html><head></head><body>
  <div id="_idContainer066">
   <h1 class="chapter-number" id="_idParaDest-125">
    <a id="_idTextAnchor165">
    </a>
    <span class="koboSpan" id="kobo.1.1">
     7
    </span>
   </h1>
   <h1 id="_idParaDest-126">
    <a id="_idTextAnchor166">
    </a>
    <span class="koboSpan" id="kobo.2.1">
     Parallel Processing
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.3.1">
     In this chapter, we will explore the powerful capabilities of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.4.1">
      parallel processing
     </span>
    </strong>
    <span class="koboSpan" id="kobo.5.1">
     within the realm of Bash scripting.
    </span>
    <span class="koboSpan" id="kobo.5.2">
     As tasks become more data-intensive and time-sensitive, leveraging parallelism can significantly enhance the efficiency and effectiveness of Bash scripts.
    </span>
    <span class="koboSpan" id="kobo.5.3">
     This chapter is designed to progressively build your understanding and skills in parallel processing, starting with fundamental concepts and advancing to practical applications and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.6.1">
      best practices.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.7.1">
     By the end of this chapter, you will have a comprehensive understanding of how to harness the power of parallel processing in Bash scripts, enabling you to handle tasks more efficiently and effectively in various cybersecurity and data
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.8.1">
      processing scenarios.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.9.1">
     In this chapter, we’re going to cover the following
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.10.1">
      main topics:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <span class="koboSpan" id="kobo.11.1">
      Understanding parallel processing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.12.1">
       in Bash
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.13.1">
      Implementing basic
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.14.1">
       parallel execution
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.15.1">
      Advanced parallel processing with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.16.1">
       xargs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.17.1">
      and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.18.1">
       GNU parallel
      </span>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.19.1">
      Practical applications and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.20.1">
       best practices
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.21.1">
     The code for this chapter can be found
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.22.1">
      at
     </span>
    </span>
    <a href="https://github.com/PacktPublishing/Bash-Shell-Scripting-for-Pentesters/tree/main/Chapter07">
     <span class="No-Break">
      <span class="koboSpan" id="kobo.23.1">
       https://github.com/PacktPublishing/Bash-Shell-Scripting-for-Pentesters/tree/main/Chapter07
      </span>
     </span>
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.24.1">
      .
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-127">
    <a id="_idTextAnchor167">
    </a>
    <span class="koboSpan" id="kobo.25.1">
     Understanding parallel processing in Bash
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.26.1">
     Parallel processing in Bash involves executing multiple tasks simultaneously, rather than sequentially, to improve efficiency and reduce execution time.
    </span>
    <span class="koboSpan" id="kobo.26.2">
     This concept is particularly useful in scenarios where
    </span>
    <a id="_idIndexMarker410">
    </a>
    <span class="koboSpan" id="kobo.27.1">
     tasks are independent of each other and can be performed concurrently.
    </span>
    <span class="koboSpan" id="kobo.27.2">
     Understanding the foundational principles of parallel processing is crucial for effectively leveraging this technique in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.28.1">
      Bash scripting.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.29.1">
     This section will cover the basics of parallel processing, including its benefits and drawbacks.
    </span>
    <span class="koboSpan" id="kobo.29.2">
     So, let’s begin with understanding some of the key concepts of parallel processing, which are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.30.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.31.1">
       Serial execution
      </span>
     </strong>
     <span class="koboSpan" id="kobo.32.1">
      : Tasks are executed one after another in a sequence.
     </span>
     <span class="koboSpan" id="kobo.32.2">
      Each task must be completed before the next one begins.
     </span>
     <span class="koboSpan" id="kobo.32.3">
      This approach is straightforward but can be time-consuming
     </span>
     <a id="_idIndexMarker411">
     </a>
     <span class="koboSpan" id="kobo.33.1">
      for large or
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.34.1">
       complex tasks.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.35.1">
       Parallel execution
      </span>
     </strong>
     <span class="koboSpan" id="kobo.36.1">
      : Multiple tasks are executed at the same time, independently of each other.
     </span>
     <span class="koboSpan" id="kobo.36.2">
      This can
     </span>
     <a id="_idIndexMarker412">
     </a>
     <span class="koboSpan" id="kobo.37.1">
      significantly reduce the overall execution time, especially for tasks that can run concurrently
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.38.1">
       without dependencies.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.39.1">
       Concurrency versus parallelism
      </span>
     </strong>
     <span class="koboSpan" id="kobo.40.1">
      : Concurrency refers to the ability to handle multiple tasks by switching
     </span>
     <a id="_idIndexMarker413">
     </a>
     <span class="koboSpan" id="kobo.41.1">
      between them, giving the illusion that they’re running simultaneously.
     </span>
     <span class="koboSpan" id="kobo.41.2">
      Parallelism involves actually running multiple tasks simultaneously, typically utilizing multiple
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.42.1">
       CPU cores.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.43.1">
       Separate processes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.44.1">
      : In Bash, parallel
     </span>
     <a id="_idIndexMarker414">
     </a>
     <span class="koboSpan" id="kobo.45.1">
      tasks are typically executed as separate processes.
     </span>
     <span class="koboSpan" id="kobo.45.2">
      Each process runs independently, with its own
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.46.1">
       memory space.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.47.1">
       Background processes
      </span>
     </strong>
     <span class="koboSpan" id="kobo.48.1">
      : Running tasks
     </span>
     <a id="_idIndexMarker415">
     </a>
     <span class="koboSpan" id="kobo.49.1">
      in the background allows the shell to execute other commands while the background task continues to run.
     </span>
     <span class="koboSpan" id="kobo.49.2">
      This is a common technique for achieving parallelism
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.50.1">
       in Bash.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.51.1">
     The benefits of parallel processing include
    </span>
    <a id="_idIndexMarker416">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.52.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.53.1">
       Improved performance
      </span>
     </strong>
     <span class="koboSpan" id="kobo.54.1">
      : By utilizing multiple processors or cores, parallel processing can speed up the execution of scripts, making them
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.55.1">
       more efficient
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.56.1">
       Resource utilization
      </span>
     </strong>
     <span class="koboSpan" id="kobo.57.1">
      : Parallel processing allows for better utilization of system resources, such as CPU and memory, by distributing the workload across
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.58.1">
       multiple processes
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.59.1">
       Scalability
      </span>
     </strong>
     <span class="koboSpan" id="kobo.60.1">
      : Scripts that use
     </span>
     <a id="_idIndexMarker417">
     </a>
     <span class="koboSpan" id="kobo.61.1">
      parallel processing can handle larger datasets and more complex tasks without a linear increase in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.62.1">
       execution time
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.63.1">
     There are drawbacks to parallel processing.
    </span>
    <span class="koboSpan" id="kobo.63.2">
     They are
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.64.1">
      as follows:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.65.1">
       Complexity
      </span>
     </strong>
     <span class="koboSpan" id="kobo.66.1">
      : Writing and debugging parallel scripts can be more complex than serial scripts due to the need for
     </span>
     <a id="_idIndexMarker418">
     </a>
     <span class="koboSpan" id="kobo.67.1">
      synchronization and coordination
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.68.1">
       between tasks
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.69.1">
       Resource exhaustion
      </span>
     </strong>
     <span class="koboSpan" id="kobo.70.1">
      : Multiple processes may compete for the same resources (e.g., CPU, memory), which can lead to contention and reduced performance if not
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.71.1">
       managed properly
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.72.1">
       Error management
      </span>
     </strong>
     <span class="koboSpan" id="kobo.73.1">
      : Managing errors in parallel tasks can be challenging, as failures in one task may not immediately impact others, making it harder to detect and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.74.1">
       handle issues
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.75.1">
     By understanding these fundamental concepts, you will be well-equipped to explore and implement parallel processing techniques in Bash, enhancing their scripts’ performance
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.76.1">
      and efficiency.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-128">
    <a id="_idTextAnchor168">
    </a>
    <span class="koboSpan" id="kobo.77.1">
     Implementing basic parallel execution
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.78.1">
     So far, this chapter has been
    </span>
    <a id="_idIndexMarker419">
    </a>
    <span class="koboSpan" id="kobo.79.1">
     completely theoretical.
    </span>
    <span class="koboSpan" id="kobo.79.2">
     This section will dive into the practical side and teach you how to implement basic parallel processing in Bash.
    </span>
    <span class="koboSpan" id="kobo.79.3">
     Practical examples will be used to help you understand and learn
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.80.1">
      this topic.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.81.1">
     In Bash scripting, the ability to run commands or scripts in the background is a fundamental aspect of parallel processing.
    </span>
    <span class="koboSpan" id="kobo.81.2">
     When a process is sent to the background, it allows the user to continue other work in the foreground.
    </span>
    <span class="koboSpan" id="kobo.81.3">
     This is especially useful in a cybersecurity context where certain tasks such as network scans or data monitoring need to run continuously without tying up
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.82.1">
      the terminal.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.83.1">
     The simplest way to send a process to the background in Bash is by appending an ampersand (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.84.1">
      &amp;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.85.1">
     ) to the end of a command, as in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.86.1">
      this example:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.87.1">
$ ping google.com &amp;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.88.1">
     This command starts pinging
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.89.1">
      google.com
     </span>
    </strong>
    <span class="koboSpan" id="kobo.90.1">
     and immediately returns the command prompt to the user, allowing further commands to be entered without waiting for the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.91.1">
      ping
     </span>
    </strong>
    <span class="koboSpan" id="kobo.92.1">
     process
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.93.1">
      to finish.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.94.1">
     Once a process is running in the
    </span>
    <a id="_idIndexMarker420">
    </a>
    <span class="koboSpan" id="kobo.95.1">
     background, it’s managed by the shell without any user interface.
    </span>
    <span class="koboSpan" id="kobo.95.2">
     However, Bash provides several commands to manage these
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.96.1">
      background processes:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.97.1">
       jobs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.98.1">
      : Lists all current background processes running in the current
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.99.1">
       shell session.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.100.1">
       fg
      </span>
     </strong>
     <span class="koboSpan" id="kobo.101.1">
      : Brings a background process to the foreground.
     </span>
     <span class="koboSpan" id="kobo.101.2">
      You can specify a job using its number (e.g.,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.102.1">
       fg %1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.103.1">
      brings the first job back to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.104.1">
       the foreground).
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.105.1">
       bg
      </span>
     </strong>
     <span class="koboSpan" id="kobo.106.1">
      : Resumes a paused background process, keeping it in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.107.1">
       the background.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.108.1">
     For instance, imagine you started a script that captures network packets and sent it to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.109.1">
      the bac
     </span>
     <a id="_idTextAnchor169">
     </a>
     <a id="_idTextAnchor170">
     </a>
     <span class="koboSpan" id="kobo.110.1">
      kground:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.111.1">
$ sudo tcpdump -i eth0 -w packets.cap &amp;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.112.1">
     You can list this process with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.113.1">
      jobs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.114.1">
     , pause it with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.115.1">
      kill -s STOP %1
     </span>
    </strong>
    <span class="koboSpan" id="kobo.116.1">
     , and resume it with
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.117.1">
       bg %1
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.118.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.119.1">
     Here’s an example of running
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.120.1">
      this command:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer064">
     <span class="koboSpan" id="kobo.121.1">
      <img alt="Figure 7.1 – An example of controlling jobs" src="image/B22229_07_1.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.122.1">
     Figure 7.1 – An example of controlling jobs
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.123.1">
     Background processes are
    </span>
    <a id="_idIndexMarker421">
    </a>
    <span class="koboSpan" id="kobo.124.1">
     extremely useful in cybersecurity for tasks that are time-consuming and do not require immediate interaction, such as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.125.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.126.1">
       Long-term monitoring
      </span>
     </strong>
     <span class="koboSpan" id="kobo.127.1">
      : Setting a network monitoring tool to run in the background to log traffic patterns or detect anomalies
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.128.1">
       over time
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.129.1">
       Automated scripts
      </span>
     </strong>
     <span class="koboSpan" id="kobo.130.1">
      : Running custom scripts that periodically check system logs or scan directories for changes without blocking access to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.131.1">
       the terminal
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.132.1">
     Here’s a simple script that monitors the system logs for specific security events, running in the background.
    </span>
    <span class="koboSpan" id="kobo.132.2">
     You can find the script in this chapter’s folder in the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.133.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.134.1">
       ch07_backgr
      </span>
      <a id="_idTextAnchor171">
      </a>
      <a id="_idTextAnchor172">
      </a>
      <span class="koboSpan" id="kobo.135.1">
       ound_1.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.136.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.137.1">
#!/bin/bash
grep -i "failed password" /var/log/auth.log &gt; /tmp/failed-login-attempts.log &amp;</span></pre>
   <p>
    <span class="koboSpan" id="kobo.138.1">
     This script filters the authentication log for failed login attempts and outputs the results to a temporary file, all while running in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.139.1">
      the background.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.140.1">
     While background processing is a powerful tool, it should be used judiciously, keeping in mind the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.141.1">
      following aspects:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.142.1">
       Monitor resource usage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.143.1">
      : Background processes consume system resources.
     </span>
     <span class="koboSpan" id="kobo.143.2">
      Use tools such as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.144.1">
       top
      </span>
     </strong>
     <span class="koboSpan" id="kobo.145.1">
      or
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.146.1">
       htop
      </span>
     </strong>
     <span class="koboSpan" id="kobo.147.1">
      to monitor resource usage and ensure that background tasks do not adversely affect
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.148.1">
       system performance.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.149.1">
       Use nohup for unattended tasks
      </span>
     </strong>
     <span class="koboSpan" id="kobo.150.1">
      : If you start a background process and then log out, the process will terminate unless you use
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.151.1">
       nohup
      </span>
     </strong>
     <span class="koboSpan" id="kobo.152.1">
      to allow it to continue running:
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.153.1">
       $ nohup ./
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.154.1">
        your-script.sh &amp;
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.155.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.156.1">
       Error handling
      </span>
     </strong>
     <span class="koboSpan" id="kobo.157.1">
      : Redirect error messages to a file or a logging service to keep track of any issues that might occur during the execution of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.158.1">
       background processes.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.159.1">
     Using background processes
    </span>
    <a id="_idIndexMarker422">
    </a>
    <span class="koboSpan" id="kobo.160.1">
     effectively allows pentesters to perform multiple tasks simultaneously, enhancing productivity and efficiency.
    </span>
    <span class="koboSpan" id="kobo.160.2">
     By understanding and implementing the techniques discussed, you can optimize your Bash scripts for parallel processing tasks, essential in the field
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.161.1">
      of cybersecurity.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.162.1">
     In Bash, you can parallelize loops by running iterations in the background using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.163.1">
      &amp;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.164.1">
     , and then synchronizing them with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.165.1">
      wait
     </span>
    </strong>
    <span class="koboSpan" id="kobo.166.1">
     .
    </span>
    <span class="koboSpan" id="kobo.166.2">
     This method is particularly useful when the tasks within each iteration do not depend on the completion
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.167.1">
      of others.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.168.1">
     Here’s a basic example that can be found in this chapter’s folder in the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.169.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.170.1">
       ch07_backg
      </span>
      <a id="_idTextAnchor173">
      </a>
      <a id="_idTextAnchor174">
      </a>
      <span class="koboSpan" id="kobo.171.1">
       round_2.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.172.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.173.1">
#!/usr/bin/env bash
for i in {1..5}; do
  echo "Processing item $i"
  sleep 1 &amp;
done
wait
echo "All processes complete."</span></pre>
   <p>
    <span class="koboSpan" id="kobo.174.1">
     In this example,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.175.1">
      sleep 1 &amp;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.176.1">
     simulates a task being processed in the background.
    </span>
    <span class="koboSpan" id="kobo.176.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.177.1">
      wait
     </span>
    </strong>
    <span class="koboSpan" id="kobo.178.1">
     command is used after the loop to ensure that the script waits for all background processes to complete before
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.179.1">
      moving on.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.180.1">
     This example script for scanning multiple IP addresses concurrently can be found in the book’s GitHub repository
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.181.1">
      as
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.182.1">
       ch07_backg
      </span>
      <a id="_idTextAnchor175">
      </a>
      <a id="_idTextAnchor176">
      </a>
      <span class="koboSpan" id="kobo.183.1">
       round_3.sh
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.184.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.185.1">
#!/usr/bin/env bash
ips=("192.168.1.1" "192.168.1.2" "192.168.1.3")
for ip in "${ips[@]}"; do
  nmap -sS "$ip" &gt; "scan_$ip.txt" &amp;
done
wait
echo "Scanning complete."</span></pre>
   <p>
    <span class="koboSpan" id="kobo.186.1">
     Each
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.187.1">
      nmap
     </span>
    </strong>
    <span class="koboSpan" id="kobo.188.1">
     scan runs in the background, and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.189.1">
      scan_$ip.txt
     </span>
    </strong>
    <span class="koboSpan" id="kobo.190.1">
     captures the output.
    </span>
    <span class="koboSpan" id="kobo.190.2">
     Once all scans are initiated,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.191.1">
      wait
     </span>
    </strong>
    <span class="koboSpan" id="kobo.192.1">
     ensures that the script only proceeds once all scans
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.193.1">
      are complete.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.194.1">
     Simple parallel loops with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.195.1">
      &amp;
     </span>
    </strong>
    <span class="koboSpan" id="kobo.196.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.197.1">
      wait
     </span>
    </strong>
    <span class="koboSpan" id="kobo.198.1">
     in Bash provide a straightforward way to implement parallel processing for repetitive tasks, particularly useful in cybersecurity for tasks such as network scanning or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.199.1">
      log processing.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.200.1">
     Up to this point, we have been
    </span>
    <a id="_idIndexMarker423">
    </a>
    <span class="koboSpan" id="kobo.201.1">
     using very basic parallel processing using built-in Bash features.
    </span>
    <span class="koboSpan" id="kobo.201.2">
     The next section will demonstrate how to use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.202.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.203.1">
     and GNU parallel for more advanced
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.204.1">
      parallel processing.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-129">
    <a id="_idTextAnchor177">
    </a>
    <span class="koboSpan" id="kobo.205.1">
     Advanced parallel processing with xargs and GNU parallel
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.206.1">
     This section will jump ahead from the
    </span>
    <a id="_idIndexMarker424">
    </a>
    <span class="koboSpan" id="kobo.207.1">
     basic, and therefore, limited
    </span>
    <a id="_idIndexMarker425">
    </a>
    <span class="koboSpan" id="kobo.208.1">
     background processing you
    </span>
    <a id="_idIndexMarker426">
    </a>
    <span class="koboSpan" id="kobo.209.1">
     have seen thus far.
    </span>
    <span class="koboSpan" id="kobo.209.2">
     You will learn more robust parallel processing
    </span>
    <a id="_idIndexMarker427">
    </a>
    <span class="koboSpan" id="kobo.210.1">
     with the more capable
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.211.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.212.1">
     and Gnu parallel to implement performance-critical
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.213.1">
      Bash code.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-130">
    <a id="_idTextAnchor178">
    </a>
    <span class="koboSpan" id="kobo.214.1">
     Introducing xargs for robust parallel processing
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.215.1">
     The
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.216.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.217.1">
     application is a powerful command-line utility in Linux.
    </span>
    <span class="koboSpan" id="kobo.217.2">
     It is used to build and execute command lines from
    </span>
    <a id="_idIndexMarker428">
    </a>
    <span class="koboSpan" id="kobo.218.1">
     standard input.
    </span>
    <span class="koboSpan" id="kobo.218.2">
     By default,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.219.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.220.1">
     reads items from the standard input and executes the command specified, one or more times, with
    </span>
    <a id="_idIndexMarker429">
    </a>
    <span class="koboSpan" id="kobo.221.1">
     the input provided.
    </span>
    <span class="koboSpan" id="kobo.221.2">
     This tool is particularly useful for handling a large number of arguments or for processing items in parallel to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.222.1">
      improve efficiency.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.223.1">
     The basic syntax of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.224.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.225.1">
     is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.226.1">
      as follows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.227.1">
command | xargs [options] [command [initial-arguments]]</span></pre>
   <p>
    <span class="koboSpan" id="kobo.228.1">
     Here’s a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.229.1">
      simple example:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.230.1">
$ echo "file1 file2 file3" | xargs rm</span></pre>
   <p>
    <span class="koboSpan" id="kobo.231.1">
     In this case,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.232.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.233.1">
     takes the output of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.234.1">
      echo
     </span>
    </strong>
    <span class="koboSpan" id="kobo.235.1">
     (which lists three filenames) and constructs a command to remove those files, executing
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.236.1">
      rm file1
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.237.1">
       file2 file3
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.238.1">
      .
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.239.1">
     One of the most powerful features of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.240.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.241.1">
     is its ability to execute commands in parallel using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.242.1">
      -P
     </span>
    </strong>
    <span class="koboSpan" id="kobo.243.1">
     option, which specifies the number of processes to run simultaneously.
    </span>
    <span class="koboSpan" id="kobo.243.2">
     This can significantly speed up operations that can be
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.244.1">
      performed independently.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.245.1">
     Imagine you have a list of files to compress.
    </span>
    <span class="koboSpan" id="kobo.245.2">
     Instead of compressing them one by one, you can use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.246.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.247.1">
     to process them
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.248.1">
      in parallel:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.249.1">
$ ls *.log | xargs -P 4 -I {} gzip {}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.250.1">
     Here’s what each part of this
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.251.1">
      command does:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.252.1">
       ls *.log
      </span>
     </strong>
     <span class="koboSpan" id="kobo.253.1">
      lists all
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.254.1">
       .log
      </span>
     </strong>
     <span class="koboSpan" id="kobo.255.1">
      files in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.256.1">
       current directory
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.257.1">
       xargs -P 4
      </span>
     </strong>
     <span class="koboSpan" id="kobo.258.1">
      tells
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.259.1">
       xargs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.260.1">
      to use up to four
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.261.1">
       parallel processes
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.262.1">
       -I {}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.263.1">
      is a placeholder for the argument from the input (
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.264.1">
       each filename)
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.265.1">
       gzip {}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.266.1">
      compresses each file listed
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.267.1">
       by
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.268.1">
        ls
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.269.1">
     This command will compress up to four log files simultaneously, making the operation much faster than processing each
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.270.1">
      file sequentially.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.271.1">
     In cybersecurity,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.272.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.273.1">
     is extremely useful for parallelizing tasks such as scanning multiple hosts, analyzing large sets of log files, or executing commands across many systems.
    </span>
    <span class="koboSpan" id="kobo.273.2">
     Here’s an example
    </span>
    <a id="_idIndexMarker430">
    </a>
    <span class="koboSpan" id="kobo.274.1">
     of using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.275.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.276.1">
     for parallel
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.277.1">
      network scanning:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.278.1">
$ cat hosts.txt | xargs -P 5 -I {} nmap -sS -oN {}_scan.txt {}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.279.1">
     This command does
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.280.1">
      the following:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.281.1">
       cat hosts.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.282.1">
      reads a list of hostnames or IP addresses from the
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.283.1">
        hosts.txt
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.284.1">
       file
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.285.1">
       xargs -P 5
      </span>
     </strong>
     <span class="koboSpan" id="kobo.286.1">
      runs up to five parallel instances of the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.287.1">
       following command
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.288.1">
       -I {}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.289.1">
      inserts the hostname or IP address from
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.290.1">
       hosts.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.291.1">
      into
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.292.1">
       the command
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.293.1">
       nmap -sS -oN {}_scan.txt {}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.294.1">
      runs an
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.295.1">
       nmap
      </span>
     </strong>
     <span class="koboSpan" id="kobo.296.1">
      scan on each host, saving the output to a file named after
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.297.1">
       the host
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.298.1">
     Managing output from
    </span>
    <a id="_idIndexMarker431">
    </a>
    <span class="koboSpan" id="kobo.299.1">
     parallel processes can be tricky.
    </span>
    <span class="koboSpan" id="kobo.299.2">
     Here are a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.300.1">
      few tips:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.301.1">
       Separate output files
      </span>
     </strong>
     <span class="koboSpan" id="kobo.302.1">
      : As shown in the examples, direct each command’s output to a
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.303.1">
       unique file
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.304.1">
       Combine outputs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.305.1">
      : Use
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.306.1">
       cat
      </span>
     </strong>
     <span class="koboSpan" id="kobo.307.1">
      or similar tools to combine output files
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.308.1">
       after processing
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.309.1">
       Logging
      </span>
     </strong>
     <span class="koboSpan" id="kobo.310.1">
      : Redirect both standard output and error to log files for each process to ensure you capture all relevant information, as shown in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.311.1">
       following code:
      </span>
     </span>
     <pre class="source-code">
<strong class="bold"><span class="koboSpan" id="kobo.312.1">cat hosts.txt | xargs -P 5 -I {} sh -c 'nmap -sS {} &gt; {}_scan.txt 2&gt;&amp;1'</span></strong></pre>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.313.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.314.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.315.1">
     command is a versatile tool that can greatly enhance the efficiency of your Bash scripts by enabling parallel execution.
    </span>
    <span class="koboSpan" id="kobo.315.2">
     Its ability to handle large numbers of arguments and process them in parallel makes it invaluable for various cybersecurity tasks, from network scanning to log file analysis.
    </span>
    <span class="koboSpan" id="kobo.315.3">
     By mastering
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.316.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.317.1">
     , you can significantly reduce the time required for many repetitive tasks, improving both productivity and effectiveness in your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.318.1">
      cybersecurity operations.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-131">
    <a id="_idTextAnchor179">
    </a>
    <span class="koboSpan" id="kobo.319.1">
     Using GNU parallel for enhanced control
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.320.1">
     Before diving into the usage of
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.321.1">
      GNU parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.322.1">
     , ensure that it is installed on your system.
    </span>
    <span class="koboSpan" id="kobo.322.2">
     On most Linux
    </span>
    <a id="_idIndexMarker432">
    </a>
    <span class="koboSpan" id="kobo.323.1">
     distributions, you can install it using the package manager.
    </span>
    <span class="koboSpan" id="kobo.323.2">
     For example, on Debian-based systems, use
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.324.1">
      the following:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.325.1">
$ sudo apt-get update &amp;&amp; sudo apt-get install parallel</span></pre>
   <p>
    <span class="koboSpan" id="kobo.326.1">
     GNU parallel allows you to run commands in parallel by reading input from standard input, files, or
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.327.1">
      command-line arguments:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.328.1">
$ parallel echo ::: A B C D</span></pre>
   <p>
    <span class="koboSpan" id="kobo.329.1">
     Here is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.330.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.331.1">
       parallel
      </span>
     </strong>
     <span class="koboSpan" id="kobo.332.1">
      : The command to invoke
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.333.1">
       GNU parallel
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.334.1">
       echo
      </span>
     </strong>
     <span class="koboSpan" id="kobo.335.1">
      : The command to be executed
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.336.1">
       in parallel
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.337.1">
       :::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.338.1">
      : A separator indicating the start of input values from the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.339.1">
       command line
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.340.1">
       A B C D
      </span>
     </strong>
     <span class="koboSpan" id="kobo.341.1">
      : The input values that will be processed
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.342.1">
       in parallel
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.343.1">
     In this example, GNU parallel runs the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.344.1">
      echo
     </span>
    </strong>
    <span class="koboSpan" id="kobo.345.1">
     command four times concurrently, each time with one of the input values (
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.346.1">
      A
     </span>
    </strong>
    <span class="koboSpan" id="kobo.347.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.348.1">
      B
     </span>
    </strong>
    <span class="koboSpan" id="kobo.349.1">
     ,
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.350.1">
       C
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.351.1">
      ,
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.352.1">
       D
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.353.1">
      ).
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.354.1">
     GNU parallel shines when dealing with more complex tasks, such as processing files or executing scripts on multiple targets.
    </span>
    <span class="koboSpan" id="kobo.354.2">
     Suppose you have a directory with multiple text files and you want to count the number of lines in each file simultaneously, use the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.355.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.356.1">
$ ls *.txt | parallel wc -l</span></pre>
   <p>
    <span class="koboSpan" id="kobo.357.1">
     Here is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.358.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.359.1">
       ls *.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.360.1">
      : Lists all text files in the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.361.1">
       current directory
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.362.1">
       | parallel
      </span>
     </strong>
     <span class="koboSpan" id="kobo.363.1">
      : Pipes the list of files to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.364.1">
       GNU parallel
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.365.1">
       wc -l
      </span>
     </strong>
     <span class="koboSpan" id="kobo.366.1">
      : The command to count the lines in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.367.1">
       each file
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.368.1">
     Here, GNU parallel runs
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.369.1">
      wc -l
     </span>
    </strong>
    <span class="koboSpan" id="kobo.370.1">
     on each file concurrently, significantly speeding up the process compared to running the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.371.1">
      command sequentially.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.372.1">
     GNU parallel can handle more complex scenarios involving scripts and multiple input arguments.
    </span>
    <span class="koboSpan" id="kobo.372.2">
     Imagine you have a
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.373.1">
      scan.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.374.1">
     script that performs network scans, and you need to run this script on multiple IP addresses.
    </span>
    <span class="koboSpan" id="kobo.374.2">
     The following code demonstrates basic
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.375.1">
      parallel usage:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.376.1">
$ cat ips.txt | parallel ./scan.sh</span></pre>
   <p>
    <span class="koboSpan" id="kobo.377.1">
     Here is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.378.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.379.1">
       cat ips.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.380.1">
      : Outputs the contents of
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.381.1">
       ips.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.382.1">
      , which contains a list of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.383.1">
       IP addresses
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.384.1">
       | parallel
      </span>
     </strong>
     <span class="koboSpan" id="kobo.385.1">
      : Pipes the list of IP addresses to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.386.1">
       GNU parallel
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.387.1">
       ./scan.sh
      </span>
     </strong>
     <span class="koboSpan" id="kobo.388.1">
      : The script to be executed on each
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.389.1">
       IP address
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.390.1">
     In this example, GNU parallel runs
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.391.1">
      scan.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.392.1">
     for each IP address listed in
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.393.1">
      ips.txt
     </span>
    </strong>
    <span class="koboSpan" id="kobo.394.1">
     concurrently, enhancing
    </span>
    <a id="_idIndexMarker433">
    </a>
    <span class="koboSpan" id="kobo.395.1">
     the efficiency of your network
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.396.1">
      scanning operations.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.397.1">
     GNU parallel offers advanced options for controlling the number of concurrent jobs, handling input from multiple sources, and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.398.1">
      managing output.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.399.1">
     You can limit the number of jobs running simultaneously using the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.400.1">
      -
     </span>
    </strong>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.401.1">
       j
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.402.1">
      option:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.403.1">
$ cat ips.txt | parallel -j 4 ./scan.sh</span></pre>
   <p>
    <span class="koboSpan" id="kobo.404.1">
     Here,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.405.1">
      -j 4
     </span>
    </strong>
    <span class="koboSpan" id="kobo.406.1">
     limits the number of concurrent jobs to
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.407.1">
      4
     </span>
    </strong>
    <span class="koboSpan" id="kobo.408.1">
     .
    </span>
    <span class="koboSpan" id="kobo.408.2">
     This command ensures that no more than four instances of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.409.1">
      scan.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.410.1">
     run at the same time, which can be useful for managing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.411.1">
      system resources.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.412.1">
     Parallel can also handle multiple input sources, enabling more
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.413.1">
      complex workflows:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.414.1">
$ parallel -a ips.txt -a ports.txt ./ch07_parallel_1.sh</span></pre>
   <p>
    <span class="koboSpan" id="kobo.415.1">
     Here is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.416.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.417.1">
       -a ips.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.418.1">
      : Specifies
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.419.1">
       ips.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.420.1">
      as an
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.421.1">
       input file
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.422.1">
       -a ports.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.423.1">
      : Specifies
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.424.1">
       ports.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.425.1">
      as another
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.426.1">
       input file
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.427.1">
       ./scan.sh
      </span>
     </strong>
     <span class="koboSpan" id="kobo.428.1">
      : The script to be executed with
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.429.1">
       combined inputs
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.430.1">
     Here,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.431.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.432.1">
     combines inputs from both
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.433.1">
      ips.txt
     </span>
    </strong>
    <span class="koboSpan" id="kobo.434.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.435.1">
      ports.txt
     </span>
    </strong>
    <span class="koboSpan" id="kobo.436.1">
     , running
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.437.1">
      scan.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.438.1">
     with pairs of IP addresses and ports.
    </span>
    <span class="koboSpan" id="kobo.438.2">
     In the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.439.1">
      ch07_parallel_1.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.440.1">
     script, the input from
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.441.1">
      ips.txt
     </span>
    </strong>
    <span class="koboSpan" id="kobo.442.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.443.1">
      ports.txt
     </span>
    </strong>
    <span class="koboSpan" id="kobo.444.1">
     are referenced as
    </span>
    <a id="_idTextAnchor180">
    </a>
    <a id="_idTextAnchor181">
    </a>
    <a id="_idTextAnchor182">
    </a>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.445.1">
      positional variables:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.446.1">
#!/usr/bin/env bash
IP_ADDRESS=$1
PORT=$2
echo "Scanning IP: $IP_ADDRESS on Port: $PORT"</span></pre>
   <p>
    <span class="koboSpan" id="kobo.447.1">
     This code can be found in
    </span>
    <a id="_idIndexMarker434">
    </a>
    <span class="koboSpan" id="kobo.448.1">
     the book
    </span>
    <a id="_idTextAnchor183">
    </a>
    <a id="_idTextAnchor184">
    </a>
    <span class="koboSpan" id="kobo.449.1">
     ’s GitHub repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.450.1">
      ch07_parallel_1.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.451.1">
     .
    </span>
    <span class="koboSpan" id="kobo.451.2">
     Here’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.452.1">
      the output:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.453.1">
Scanning IP: 192.168.1.1 on Port: 80
Scanning IP: 192.168.1.1 on Port: 443
Scanning IP: 192.168.1.1 on Port: 8080
Scanning IP: 192.168.1.2 on Port: 80
Scanning IP: 192.168.1.2 on Port: 443
Scanning IP: 192.168.1.2 on Port: 8080
Scanning IP: 192.168.1.3 on Port: 80
Scanning IP: 192.168.1.3 on Port: 443
Scanning IP: 192.168.1.3 on Port: 8080</span></pre>
   <p>
    <span class="koboSpan" id="kobo.454.1">
     Managing errors and outputs from parallel processes can be challenging, but
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.455.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.456.1">
     provides mechanisms to handle these scenarios, as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.457.1">
      shown here:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.458.1">
$ parallel ./scan.sh {} '&gt;' results/{#}.out '2&gt;' errors/{#}.err :::: ips.txt</span></pre>
   <p>
    <span class="koboSpan" id="kobo.459.1">
     Here is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.460.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.461.1">
       {}'&gt;'
      </span>
     </strong>
     <span class="koboSpan" id="kobo.462.1">
      : Redirects standard output to a file.
     </span>
     <span class="koboSpan" id="kobo.462.2">
      Note that the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.463.1">
       &gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.464.1">
      character is quoted.
     </span>
     <span class="koboSpan" id="kobo.464.2">
      Other special shell characters (such as
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.465.1">
       *
      </span>
     </strong>
     <span class="koboSpan" id="kobo.466.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.467.1">
       ;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.468.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.469.1">
       $
      </span>
     </strong>
     <span class="koboSpan" id="kobo.470.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.471.1">
       &gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.472.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.473.1">
       &lt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.474.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.475.1">
       |
      </span>
     </strong>
     <span class="koboSpan" id="kobo.476.1">
      ,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.477.1">
       &gt;&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.478.1">
      , and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.479.1">
       &lt;&lt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.480.1">
      ) also need to be put in quotes, as they may otherwise be interpreted by the shell and not given
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.481.1">
       to parallel.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.482.1">
       results/{#}.out
      </span>
     </strong>
     <span class="koboSpan" id="kobo.483.1">
      : The file to store standard output, with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.484.1">
       {#}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.485.1">
      representing the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.486.1">
       job number.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.487.1">
       2&gt;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.488.1">
      : Redirects standard error to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.489.1">
       a file.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.490.1">
       errors/{#}.err
      </span>
     </strong>
     <span class="koboSpan" id="kobo.491.1">
      : The file to store standard error, with
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.492.1">
       {#}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.493.1">
      representing the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.494.1">
       job number.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.495.1">
       :::: ips.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.496.1">
      : Specifies
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.497.1">
       ips.txt
      </span>
     </strong>
     <span class="koboSpan" id="kobo.498.1">
      as the input file.
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.499.1">
       ::::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.500.1">
      is used to specify that the following arguments are filenames containing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.501.1">
       input items.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.502.1">
     This command redirects the
    </span>
    <a id="_idIndexMarker435">
    </a>
    <span class="koboSpan" id="kobo.503.1">
     output and errors of each job to separate files, making it easier to review results and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.504.1">
      debug issues.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.505.1">
     Input to GNU parallel can be specified in four
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.506.1">
      different ways:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.507.1">
       :::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.508.1">
      : Direct input list,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.509.1">
       parallel echo ::: A
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.510.1">
        B C
       </span>
      </strong>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.511.1">
       ::::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.512.1">
      : Input from a file,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.513.1">
       parallel echo ::::
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.514.1">
        input.txt
       </span>
      </strong>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.515.1">
       |
      </span>
     </strong>
     <span class="koboSpan" id="kobo.516.1">
      : Standard input,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.517.1">
       cat input.txt |
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.518.1">
        parallel echo
       </span>
      </strong>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.519.1">
       --arg-file
      </span>
     </strong>
     <span class="koboSpan" id="kobo.520.1">
      or
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.521.1">
       -a
      </span>
     </strong>
     <span class="koboSpan" id="kobo.522.1">
      : Specify a file,
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.523.1">
       parallel --arg-file
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.524.1">
        input.txt echo
       </span>
      </strong>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.525.1">
     Keep in mind that multiple inputs can be specified.
    </span>
    <span class="koboSpan" id="kobo.525.2">
     The following example includes multiple fil
    </span>
    <a id="_idTextAnchor185">
    </a>
    <a id="_idTextAnchor186">
    </a>
    <span class="koboSpan" id="kobo.526.1">
     e and
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.527.1">
      argument inputs:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.528.1">
$ parallel -a file1 -a file2 ::: arg1 arg2 :::: file3 :::: file4 command</span></pre>
   <p>
    <span class="koboSpan" id="kobo.529.1">
     Let’s break down this complex
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.530.1">
      parallel command:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.531.1">
       -a file1 -a file2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.532.1">
      : The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.533.1">
       -a
      </span>
     </strong>
     <span class="koboSpan" id="kobo.534.1">
      option specifies input sources.
     </span>
     <span class="koboSpan" id="kobo.534.2">
      This tells
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.535.1">
       parallel
      </span>
     </strong>
     <span class="koboSpan" id="kobo.536.1">
      to read input lines from both
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.537.1">
       file1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.538.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.539.1">
       file2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.540.1">
      .
     </span>
     <span class="koboSpan" id="kobo.540.2">
      Each line from these files will be used as an argument to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.541.1">
       the command.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.542.1">
       ::: arg1 arg2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.543.1">
      : The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.544.1">
       :::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.545.1">
      separator introduces command-line arguments.
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.546.1">
       arg1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.547.1">
      and
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.548.1">
       arg2
      </span>
     </strong>
     <span class="koboSpan" id="kobo.549.1">
      are literal arguments that will be used in
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.550.1">
       each job.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.551.1">
       :::: file3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.552.1">
      : The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.553.1">
       ::::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.554.1">
      separator introduces another input source.
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.555.1">
       file3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.556.1">
      will be read, and each of its lines will be used as
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.557.1">
       an argument.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.558.1">
       :::: file4
      </span>
     </strong>
     <span class="koboSpan" id="kobo.559.1">
      : Another input source, similar to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.560.1">
       file3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.561.1">
      .
     </span>
     <span class="koboSpan" id="kobo.561.2">
      Each line from
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.562.1">
       file4
      </span>
     </strong>
     <span class="koboSpan" id="kobo.563.1">
      will be used as
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.564.1">
       an argument.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.565.1">
       command
      </span>
     </strong>
     <span class="koboSpan" id="kobo.566.1">
      : This is the actual command that will be executed in parallel for each combination
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.567.1">
       of inputs.
      </span>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.568.1">
     Here’s how
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.569.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.570.1">
     will process
    </span>
    <a id="_idIndexMarker436">
    </a>
    <span class="koboSpan" id="kobo.571.1">
     this command.
    </span>
    <span class="koboSpan" id="kobo.571.2">
     It will create a job for each combination of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.572.1">
      the following:
     </span>
    </span>
   </p>
   <ol>
    <li>
     <span class="koboSpan" id="kobo.573.1">
      A line
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.574.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.575.1">
        file1
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.576.1">
      A line
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.577.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.578.1">
        file2
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.579.1">
      Either
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.580.1">
       arg1
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.581.1">
       or
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.582.1">
        arg2
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.583.1">
      A line
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.584.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.585.1">
        file3
       </span>
      </strong>
     </span>
    </li>
    <li>
     <span class="koboSpan" id="kobo.586.1">
      A line
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.587.1">
       from
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.588.1">
        file4
       </span>
      </strong>
     </span>
    </li>
   </ol>
   <p>
    <span class="koboSpan" id="kobo.589.1">
     For each of these combinations, it will execute
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.590.1">
      command
     </span>
    </strong>
    <span class="koboSpan" id="kobo.591.1">
     , substituting the arguments in order.
    </span>
    <span class="koboSpan" id="kobo.591.2">
     The number of jobs that run simultaneously depends on the number of CPU cores available, unless
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.592.1">
      specified otherwise.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.593.1">
     Let’s create a real-world example where we use the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.594.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.595.1">
     command to perform a series of automated security checks on multiple servers using different tools and configurations.
    </span>
    <span class="koboSpan" id="kobo.595.2">
     This could be part of a pentesting or security
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.596.1">
      audit exercise.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.597.1">
     Here are the contents
    </span>
    <a id="_idTextAnchor187">
    </a>
    <a id="_idTextAnchor188">
    </a>
    <a id="_idTextAnchor189">
    </a>
    <a id="_idTextAnchor190">
    </a>
    <span class="koboSpan" id="kobo.598.1">
     of the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.599.1">
       servers.txt
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.600.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.601.1">
10.2.10.10
10.2.10.11</span></pre>
   <p>
    <span class="koboSpan" id="kobo.602.1">
     Here are the conten
    </span>
    <a id="_idTextAnchor191">
    </a>
    <a id="_idTextAnchor192">
    </a>
    <span class="koboSpan" id="kobo.603.1">
     ts of the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.604.1">
       ports.txt
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.605.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.606.1">
80,445
22,3389</span></pre>
   <p>
    <span class="koboSpan" id="kobo.607.1">
     Here are the contents of
    </span>
    <a id="_idTextAnchor193">
    </a>
    <a id="_idTextAnchor194">
    </a>
    <span class="koboSpan" id="kobo.608.1">
     the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.609.1">
       scan_types.txt
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.610.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.611.1">
quick
thorough</span></pre>
   <p>
    <span class="koboSpan" id="kobo.612.1">
     Here are the contents of the
    </span>
    <a id="_idTextAnchor195">
    </a>
    <a id="_idTextAnchor196">
    </a>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.613.1">
       output_formats.txt
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.614.1">
      file:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.615.1">
txt
json</span></pre>
   <p>
    <span class="koboSpan" id="kobo.616.1">
     Now, let’s create a script that will perform these security checks.
    </span>
    <span class="koboSpan" id="kobo.616.2">
     You can find this file in the book’s GitHub repository
    </span>
    <a id="_idIndexMarker437">
    </a>
    <span class="koboSpan" id="kobo.617.1">
     as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.618.1">
      ch07_parallel_3.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.619.1">
     .
    </span>
    <span class="koboSpan" id="kobo.619.2">
     The purpose of this script is to automate and parallelize a series of simulated security checks across
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.620.1">
      multiple servers:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.621.1">
#!/usr/bin/env bash
perform_security_check() {
    server="$1"
    ports="$2"
    scan_type="$3"
    output_format="$4"
    echo "Performing $scan_type security check on $server (ports: $ports) with $output_format output"
    # Simulating nmap scan
    nmap_options=""
    if [ "$scan_type" == "quick" ]; then
        nmap_options="-T4 -F"
    else
        nmap_options="-sV -sC -O"
    fi
    output_file="scan_${server//./}_${scan_type}_${output_format}.${output_format}"
    nmap $nmap_options -p $ports $server -oN $output_file
    # Simulating additional security checks
    echo "Running vulnerability scan on $server" &gt;&gt; $output_file
    echo "Checking for misconfigurations on $server" &gt;&gt; $output_file
    echo "Performing brute force attack simulation on $server" &gt;&gt; $output_file
    echo "Security check completed for $server. </span><span class="koboSpan" id="kobo.621.2">Results saved in $output_file"
    echo "-----"
}
export -f perform_security_check
parallel -a servers.txt -a ports.txt :::: scan_types.txt :::: output_formats.txt perform_security_check</span></pre>
   <p>
    <span class="koboSpan" id="kobo.622.1">
     Here’s the partial output
    </span>
    <a id="_idIndexMarker438">
    </a>
    <span class="koboSpan" id="kobo.623.1">
     of running
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.624.1">
      the script:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.625.1">
$ ./ch07_parallel_3.sh
Performing quick security check on 10.2.10.10 (ports: 80,445) with txt output
Security check completed for 10.2.10.10. </span><span class="koboSpan" id="kobo.625.2">Results saved in scan_1021010_quick_txt.txt
-----
Performing quick security check on 10.2.10.10 (ports: 80,445) with json output
Security check completed for 10.2.10.10. </span><span class="koboSpan" id="kobo.625.3">Results saved in scan_1021010_quick_json.json
-----
Performing thorough security check on 10.2.10.10 (ports: 80,445) with txt output
Security check completed for 10.2.10.10. </span><span class="koboSpan" id="kobo.625.4">Results saved in scan_1021010_thorough_txt.txt
-----
Performing thorough security check on 10.2.10.10 (ports: 80,445) with json output
Security check completed for 10.2.10.10. </span><span class="koboSpan" id="kobo.625.5">Results saved in scan_1021010_thorough_json.json
-----
Performing quick security check on 10.2.10.10 (ports: 22,3389) with txt output
Security check completed for 10.2.10.10. </span><span class="koboSpan" id="kobo.625.6">Results saved in scan_1021010_quick_txt.txt
-----
Performing quick security check on 10.2.10.10 (ports: 22,3389) with json output
Security check completed for 10.2.10.10. </span><span class="koboSpan" id="kobo.625.7">Results saved in scan_1021010_quick_json.json
-----</span></pre>
   <p>
    <span class="koboSpan" id="kobo.626.1">
     This command structure is particularly useful when you need to process data from multiple sources in combination, allowing for complex parallel
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.627.1">
      processing tasks.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.628.1">
     Now that you’ve been introduced to both
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.629.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.630.1">
     and parallel, I’ll explain in the next section when to choose
    </span>
    <a id="_idIndexMarker439">
    </a>
    <span class="koboSpan" id="kobo.631.1">
     one over
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.632.1">
      the other.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-132">
    <a id="_idTextAnchor197">
    </a>
    <span class="koboSpan" id="kobo.633.1">
     Comparing xargs and parallel
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.634.1">
     What are the key differences
    </span>
    <a id="_idIndexMarker440">
    </a>
    <span class="koboSpan" id="kobo.635.1">
     between
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.636.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.637.1">
     and parallel and how do you know when
    </span>
    <a id="_idIndexMarker441">
    </a>
    <span class="koboSpan" id="kobo.638.1">
     either one is the right tool for the job?
    </span>
    <span class="koboSpan" id="kobo.638.2">
     The following table should help you choose the right tool for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.639.1">
      the job:
     </span>
    </span>
   </p>
   <table class="No-Table-Style _idGenTablePara-1" id="table001-1">
    <colgroup>
     <col/>
     <col/>
     <col/>
    </colgroup>
    <tbody>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.640.1">
           Aspect
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.641.1">
           xargs
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.642.1">
           GNU parallel
          </span>
         </strong>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.643.1">
           Execution
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.644.1">
         Serial by default.
        </span>
        <span class="koboSpan" id="kobo.644.2">
         Can run parallel with the
        </span>
        <strong class="source-inline">
         <span class="koboSpan" id="kobo.645.1">
          -P
         </span>
        </strong>
        <span class="koboSpan" id="kobo.646.1">
         option, but is
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.647.1">
          less flexible.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.648.1">
         Designed for efficient parallel execution out of
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.649.1">
          the box.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.650.1">
           Complexity
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.651.1">
         Simpler, lightweight.
        </span>
        <span class="koboSpan" id="kobo.651.2">
         Good for
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.652.1">
          straightforward tasks.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.653.1">
         Feature-rich.
        </span>
        <span class="koboSpan" id="kobo.653.2">
         Handles complex scenarios, job control, and
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.654.1">
          load balancing.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.655.1">
           Error handling
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.656.1">
         Basic.
        </span>
        <span class="koboSpan" id="kobo.656.2">
         May stop
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.657.1">
          on errors.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.658.1">
         Robust.
        </span>
        <span class="koboSpan" id="kobo.658.2">
         Can continue
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.659.1">
          despite failures.
         </span>
        </span>
       </p>
      </td>
     </tr>
     <tr class="No-Table-Style">
      <td class="No-Table-Style">
       <p>
        <span class="No-Break">
         <strong class="bold">
          <span class="koboSpan" id="kobo.660.1">
           Availability
          </span>
         </strong>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.661.1">
         Installed by default on most
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.662.1">
          Unix systems.
         </span>
        </span>
       </p>
      </td>
      <td class="No-Table-Style">
       <p>
        <span class="koboSpan" id="kobo.663.1">
         Requires
        </span>
        <span class="No-Break">
         <span class="koboSpan" id="kobo.664.1">
          separate installation.
         </span>
        </span>
       </p>
      </td>
     </tr>
    </tbody>
   </table>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.665.1">
     Table 7.1 – A comparison of xargs and parallel features
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.666.1">
     Having learned how Bash parallel processing works, in the next section, we’ll explore using these concepts in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.667.1">
      practical applications.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-133">
    <a id="_idTextAnchor198">
    </a>
    <span class="koboSpan" id="kobo.668.1">
     Achieving parallelism using screen
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.669.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.670.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.671.1">
     command is a
    </span>
    <a id="_idIndexMarker442">
    </a>
    <span class="koboSpan" id="kobo.672.1">
     Linux utility that allows users to
    </span>
    <a id="_idIndexMarker443">
    </a>
    <span class="koboSpan" id="kobo.673.1">
     manage multiple terminal sessions within a single window.
    </span>
    <span class="koboSpan" id="kobo.673.2">
     It’s particularly useful for running long processes, managing remote sessions, and achieving parallelism in
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.674.1">
      Bash scripts.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.675.1">
     Before proceeding, ensure you have
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.676.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.677.1">
     installed by running the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.678.1">
      following command:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.679.1">
$ sudo apt update &amp;&amp; sudo apt install -y screen</span></pre>
   <p>
    <span class="koboSpan" id="kobo.680.1">
     Here’s how you can use
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.681.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.682.1">
     to run multiple tasks in parallel.
    </span>
    <span class="koboSpan" id="kobo.682.2">
     You can find the code in the book’s GitHub
    </span>
    <a id="_idIndexMarker444">
    </a>
    <span class="koboSpan" id="kobo.683.1">
     repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.684.1">
      ch07_screen_1.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.685.1">
     :
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.686.1">
perform_task() {
    echo "Starting task $1"
    sleep 5  # Simulating work
    echo "Finished task $1"
}</span></pre>
   <p>
    <span class="koboSpan" id="kobo.687.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.688.1">
      perform_task
     </span>
    </strong>
    <span class="koboSpan" id="kobo.689.1">
     function simply
    </span>
    <a id="_idIndexMarker445">
    </a>
    <span class="koboSpan" id="kobo.690.1">
     sleeps for five seconds to simulate
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.691.1">
      performing work.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.692.1">
     The following code creates a new detached
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.693.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.694.1">
     session
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.695.1">
      named
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.696.1">
       parallel_tasks
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.697.1">
      :
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.698.1">
screen -dmS parallel_tasks</span></pre>
   <p>
    <span class="koboSpan" id="kobo.699.1">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.700.1">
      -d
     </span>
    </strong>
    <span class="koboSpan" id="kobo.701.1">
     flag starts the session in detached mode, and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.702.1">
      m
     </span>
    </strong>
    <span class="koboSpan" id="kobo.703.1">
     creates a
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.704.1">
      new session.
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.705.1">
for i in {1..5}; do
    screen -S parallel_tasks -X screen -t "Task $i" bash -c "perform_task $i; exec bash"
done</span></pre>
   <p>
    <span class="koboSpan" id="kobo.706.1">
     The preceding
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.707.1">
      for
     </span>
    </strong>
    <span class="koboSpan" id="kobo.708.1">
     loop starts multiple tasks in separate
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.709.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.710.1">
     windows.
    </span>
    <span class="koboSpan" id="kobo.710.2">
     This command creates a new window within the
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.711.1">
      parallel_tasks
     </span>
    </strong>
    <span class="koboSpan" id="kobo.712.1">
     session.
    </span>
    <span class="koboSpan" id="kobo.712.2">
     The
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.713.1">
      -X
     </span>
    </strong>
    <span class="koboSpan" id="kobo.714.1">
     flag sends a command to the session,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.715.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.716.1">
     creates a new window,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.717.1">
      -t
     </span>
    </strong>
    <span class="koboSpan" id="kobo.718.1">
     sets the window title, and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.719.1">
      bash -c
     </span>
    </strong>
    <span class="koboSpan" id="kobo.720.1">
     executes the specified command in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.721.1">
      new window.
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.722.1">
screen -S parallel_tasks -X windowlist -b</span></pre>
   <p>
    <span class="koboSpan" id="kobo.723.1">
     The preceding command waits for all windows in the session to close.
    </span>
    <span class="koboSpan" id="kobo.723.2">
     It’s useful for synchronizing the completion of
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.724.1">
      parallel tasks.
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.725.1">
screen -S parallel_tasks -X quit</span></pre>
   <p>
    <span class="koboSpan" id="kobo.726.1">
     The preceding command terminates the entire screen session once all tasks
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.727.1">
      are complete.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.728.1">
     Now that we have a solid
    </span>
    <a id="_idIndexMarker446">
    </a>
    <span class="koboSpan" id="kobo.729.1">
     foundation on the use of
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.730.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.731.1">
     ,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.732.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.733.1">
     , and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.734.1">
      screen
     </span>
    </strong>
    <span class="koboSpan" id="kobo.735.1">
     , let’s move on to the next section and look at some
    </span>
    <a id="_idIndexMarker447">
    </a>
    <span class="koboSpan" id="kobo.736.1">
     practical applications and review best practices for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.737.1">
      their use.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-134">
    <a id="_idTextAnchor199">
    </a>
    <span class="koboSpan" id="kobo.738.1">
     Practical applications and best practices
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.739.1">
     This section will further solidify your understanding of parallel processing in Bash by showing practical applications.
    </span>
    <span class="koboSpan" id="kobo.739.2">
     This will be followed by best practices to help you get the most out of learning
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.740.1">
      these concepts.
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-135">
    <a id="_idTextAnchor200">
    </a>
    <span class="koboSpan" id="kobo.741.1">
     Practical applications of Bash parallel processing
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.742.1">
     In this section, we will use
    </span>
    <a id="_idIndexMarker448">
    </a>
    <span class="koboSpan" id="kobo.743.1">
     examples to show the real-world usage of Bash parallel processing
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.744.1">
      in pentesting.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.745.1">
     The first example uses
    </span>
    <a id="_idIndexMarker449">
    </a>
    <span class="koboSpan" id="kobo.746.1">
     GNU parallel for
    </span>
    <strong class="bold">
     <span class="koboSpan" id="kobo.747.1">
      SQL injection
     </span>
    </strong>
    <span class="koboSpan" id="kobo.748.1">
     testing, as shown in the
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.749.1">
      followin
     </span>
     <a id="_idTextAnchor201">
     </a>
     <a id="_idTextAnchor202">
     </a>
     <span class="koboSpan" id="kobo.750.1">
      g code:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.751.1">
#!/usr/bin/env bash
urls=("http://example.com/login.php" "http://test.com/index.php" "http://site.com/search.php")
echo "${urls[@]}" | parallel -j 3 'sqlmap -u {} --batch --crawl=2'
echo "All SQL injection tests completed."</span></pre>
   <p>
    <span class="koboSpan" id="kobo.752.1">
     The code can be found in the book’s GitHub repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.753.1">
      ch07_parallel_2.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.754.1">
     .
    </span>
    <span class="koboSpan" id="kobo.754.2">
     Here’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.755.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.756.1">
       urls
      </span>
     </strong>
     <span class="koboSpan" id="kobo.757.1">
      is an array of URLs
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.758.1">
       to test
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.759.1">
       echo "${urls[@]}"
      </span>
     </strong>
     <span class="koboSpan" id="kobo.760.1">
      outputs the list
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.761.1">
       of URLs
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.762.1">
       parallel -j 3 'sqlmap -u {} --batch --crawl=2'
      </span>
     </strong>
     <span class="koboSpan" id="kobo.763.1">
      runs
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.764.1">
       sqlmap
      </span>
     </strong>
     <span class="koboSpan" id="kobo.765.1">
      on each URL with up to three
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.766.1">
       concurrent jobs
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.767.1">
     The next example shows
    </span>
    <a id="_idIndexMarker450">
    </a>
    <span class="koboSpan" id="kobo.768.1">
     how to do network TCP port scanning in parallel, as
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.769.1">
      sho
     </span>
     <a id="_idTextAnchor203">
     </a>
     <a id="_idTextAnchor204">
     </a>
     <span class="koboSpan" id="kobo.770.1">
      wn here:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.771.1">
#!/usr/bin/env bash
ips=$(seq 1 254 | awk '{print "192.168.1." </span><span class="koboSpan" id="kobo.771.2">$1}')
echo "$ips" | xargs -n 1 -P 10 -I {} bash -c 'nmap -sP {}'
echo "Network scan completed."</span></pre>
   <p>
    <span class="koboSpan" id="kobo.772.1">
     The code can be found in the book’s GitHub repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.773.1">
      ch07_xargs_1.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.774.1">
     .
    </span>
    <span class="koboSpan" id="kobo.774.2">
     Here’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.775.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.776.1">
       seq 1 254 | awk '{print "192.168.1."
      </span>
      <span class="koboSpan" id="kobo.776.2">
       $1}'
      </span>
     </strong>
     <span class="koboSpan" id="kobo.777.1">
      generates IP addresses from
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.778.1">
       192.168.1.1
      </span>
     </strong>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.779.1">
       to
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.780.1">
        192.168.1.254
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.781.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.782.1">
       echo "$ips"
      </span>
     </strong>
     <span class="koboSpan" id="kobo.783.1">
      outputs the list
     </span>
     <a id="_idTextAnchor205">
     </a>
     <a id="_idTextAnchor206">
     </a>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.784.1">
       of IPs.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.785.1">
       xargs -n 1 -P 10 -I {} bash -c 'nmap -sP {}'
      </span>
     </strong>
     <span class="koboSpan" id="kobo.786.1">
      runs
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.787.1">
       nmap
      </span>
     </strong>
     <span class="koboSpan" id="kobo.788.1">
      ’s ping scan (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.789.1">
       -sP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.790.1">
      ) on each IP, with up to 10 parallel jobs.
     </span>
     <span class="koboSpan" id="kobo.790.2">
      The
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.791.1">
       -n 1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.792.1">
      option tells
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.793.1">
       xargs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.794.1">
      to use, at most, one argument per command line.
     </span>
     <span class="koboSpan" id="kobo.794.2">
      In this context, it means that
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.795.1">
       xargs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.796.1">
      will run the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.797.1">
       nmap
      </span>
     </strong>
     <span class="koboSpan" id="kobo.798.1">
      command once for each IP address or hostname it receives
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.799.1">
       as input.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.800.1">
     While the preceding is an example of performing port scanning in parallel,
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.801.1">
      nmap
     </span>
    </strong>
    <span class="koboSpan" id="kobo.802.1">
     already has this capability.
    </span>
    <span class="koboSpan" id="kobo.802.2">
     Therefore, let’s explore how to do this in Bash.
    </span>
    <span class="koboSpan" id="kobo.802.3">
     You may find yourself in a shell on a system you have exploited and can’t install tools such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.803.1">
      nmap
     </span>
    </strong>
    <span class="koboSpan" id="kobo.804.1">
     for one reason or another so you should be prepared to use the system as a pivot into
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.805.1">
      other networks.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.806.1">
     The following Bash script has no external dependencies and scans for live hosts, then port-scans the top 100 TCP ports.
    </span>
    <span class="koboSpan" id="kobo.806.2">
     It’s not nearly as fast as it could be if
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.807.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.808.1">
     or
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.809.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.810.1">
     were used.
    </span>
    <span class="koboSpan" id="kobo.810.2">
     Just keep in mind that, someday, you’ll need something that doesn’t require any external dependencies and you can’t be assured that
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.811.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.812.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.813.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.814.1">
     will always be available.
    </span>
    <span class="koboSpan" id="kobo.814.2">
     This script should work anywhere with Bash and the
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.815.1">
       ping
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.816.1">
      appl
     </span>
     <a id="_idTextAnchor207">
     </a>
     <a id="_idTextAnchor208">
     </a>
     <span class="koboSpan" id="kobo.817.1">
      ication:
     </span>
    </span>
   </p>
   <pre class="source-code"><span class="koboSpan" id="kobo.818.1">
#!/usr/bin/env bash
IP_RANGE="10.2.10.{1..20}"
PORTS=(21 22 23 25 53 80 110 143 443 587 3306 3389 5900 8000 8080 9000 49152 49153 49154 49155 49156 49157 49158 49159 49160 49161 49162 49163 49164 49165 49166 49167 49168 49169 49170 49171 49172 49173 49174 49175 49176 49177 49178 49179 49180 49181 49182 49183 49184 49185 49186 49187 49188 49189 49190 49191 49192 49193 49194 49195 49196 49197 49198 49199 49200 49201 49202 49203 49204 49205 49206 49207 49208 49209 49210 49211 49212 49213 49214 49215 49216 49217 49218 49219 49220 49221 49222 49223 49224 49225 49226 49227 49228 49229 49230 49231)
LIVE_HOSTS=()
for IP in $(eval echo $IP_RANGE); do
    if ping -c 1 -W 1 $IP &gt; /dev/null 2&gt;&amp;1; then
        LIVE_HOSTS+=($IP)
    fi
done
scan_ports() {
    local IP=$1
    for PORT in "${PORTS[@]}"; do
        (echo &gt;/dev/tcp/$IP/$PORT) &gt; /dev/null 2&gt;&amp;1 &amp;&amp; echo "$IP:$PORT"
    done
}
# Export the function to use in subshells
export -f scan_ports
# Loop through live hosts and scan ports in parallel
for IP in "${LIVE_HOSTS[@]}"; do
    scan_ports $IP &amp;
done
echo "Waiting for port scans to complete…"
wait</span></pre>
   <p>
    <span class="koboSpan" id="kobo.819.1">
     The code can be found in the book’s GitHub repository as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.820.1">
      ch07_no_dependencies_scan.sh
     </span>
    </strong>
    <span class="koboSpan" id="kobo.821.1">
     .
    </span>
    <span class="koboSpan" id="kobo.821.2">
     Here’s
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.822.1">
      an explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.823.1">
       #!/usr/bin/env bash
      </span>
     </strong>
     <span class="koboSpan" id="kobo.824.1">
      : The usual
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.825.1">
       shebang
      </span>
     </strong>
     <span class="koboSpan" id="kobo.826.1">
      that we’ve
     </span>
     <a id="_idIndexMarker451">
     </a>
     <span class="koboSpan" id="kobo.827.1">
      covered in earlier chapters.
     </span>
     <span class="koboSpan" id="kobo.827.2">
      This basically tells the
     </span>
     <a id="_idIndexMarker452">
     </a>
     <span class="koboSpan" id="kobo.828.1">
      shell what program to use to execute the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.829.1">
       following code.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.830.1">
       IP_RANGE
      </span>
     </strong>
     <span class="koboSpan" id="kobo.831.1">
      : Defines the range of IP addresses to scan using brace expansion (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.832.1">
       {1..20}
      </span>
     </strong>
     <span class="koboSpan" id="kobo.833.1">
      ), which denotes the last octet ranging from 1 to 20 for the base
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.834.1">
       IP
      </span>
     </span>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.835.1">
        192.168.1
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.836.1">
       .
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.837.1">
       PORTS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.838.1">
      : An array holding the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.839.1">
       nmap
      </span>
     </strong>
     <span class="koboSpan" id="kobo.840.1">
      top 100
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.841.1">
       TCP ports.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.842.1">
       LIVE_HOSTS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.843.1">
      : An empty array to store the IP addresses of live hosts that respond
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.844.1">
       to pings.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.845.1">
       for IP in $(eval echo $IP_RANGE)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.846.1">
      : Iterates through the expanded list of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.847.1">
       IP addresses.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.848.1">
       ping -c 1 -W 1 $IP &gt; /dev/null 2&gt;&amp;1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.849.1">
      : Sends one ICMP echo request (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.850.1">
       -c 1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.851.1">
      ) with a 1-second timeout (
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.852.1">
       -W 1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.853.1">
      ) to check whether the host is up.
     </span>
     <span class="koboSpan" id="kobo.853.2">
      The output is redirected to
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.854.1">
       /dev/null
      </span>
     </strong>
     <span class="koboSpan" id="kobo.855.1">
      to
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.856.1">
       suppress it.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.857.1">
       LIVE_HOSTS+=($IP)
      </span>
     </strong>
     <span class="koboSpan" id="kobo.858.1">
      : Adds the IP address to the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.859.1">
       LIVE_HOSTS
      </span>
     </strong>
     <span class="koboSpan" id="kobo.860.1">
      array if the host
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.861.1">
       is up.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.862.1">
       scan_ports $IP
      </span>
     </strong>
     <span class="koboSpan" id="kobo.863.1">
      : A function that takes an IP address as
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.864.1">
       an argument.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.865.1">
       (echo &gt;/dev/tcp/$IP/$PORT) &gt; /dev/null 2&gt;&amp;1
      </span>
     </strong>
     <span class="koboSpan" id="kobo.866.1">
      : Attempts to open a TCP connection to the specified port on the IP address.
     </span>
     <span class="koboSpan" id="kobo.866.2">
      If successful, it prints the IP address
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.867.1">
       and port.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.868.1">
       Export the function
      </span>
     </strong>
     <span class="koboSpan" id="kobo.869.1">
      : Using
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.870.1">
       export -f scan_ports
      </span>
     </strong>
     <span class="koboSpan" id="kobo.871.1">
      allows the function to be used
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.872.1">
       in subshells.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.873.1">
       for IP in "${LIVE_HOSTS[@]}"
      </span>
     </strong>
     <span class="koboSpan" id="kobo.874.1">
      : Iterates through the list of
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.875.1">
       live hosts.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.876.1">
       scan_ports $IP &amp;
      </span>
     </strong>
     <span class="koboSpan" id="kobo.877.1">
      : Calls the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.878.1">
       scan_ports
      </span>
     </strong>
     <span class="koboSpan" id="kobo.879.1">
      function in the background for each IP address, allowing
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.880.1">
       concurrent execution.
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.881.1">
       wait
      </span>
     </strong>
     <span class="koboSpan" id="kobo.882.1">
      : Waits for all background jobs to
     </span>
     <a id="_idIndexMarker453">
     </a>
     <span class="koboSpan" id="kobo.883.1">
      complete before exiting
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.884.1">
       the script.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.885.1">
     The script checks 20 consecutive IP addresses for live hosts and then scans the top 100 TCP ports and completes in 10 seconds on
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.886.1">
      my system:
     </span>
    </span>
   </p>
   <div>
    <div class="IMG---Figure" id="_idContainer065">
     <span class="koboSpan" id="kobo.887.1">
      <img alt="Figure 7.2 – A Bash TCP port scanner that should work on any system" src="image/B22229_07_2.jpg"/>
     </span>
    </div>
   </div>
   <p class="IMG---Caption" lang="en-US" xml:lang="en-US">
    <span class="koboSpan" id="kobo.888.1">
     Figure 7.2 – A Bash TCP port scanner that should work on any system
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.889.1">
     Here’s an example of downloading multiple files
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.890.1">
      in parallel:
     </span>
    </span>
   </p>
   <pre class="console"><span class="koboSpan" id="kobo.891.1">
$ parallel -j 3 wget ::: http://example.com/file1 http://example.com/file2 http://example.com/file3</span></pre>
   <p>
    <span class="koboSpan" id="kobo.892.1">
     Here is
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.893.1">
      the explanation:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.894.1">
       parallel -j 3
      </span>
     </strong>
     <span class="koboSpan" id="kobo.895.1">
      : Executes three
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.896.1">
       parallel jobs
      </span>
     </span>
    </li>
    <li>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.897.1">
       wget :::
      </span>
     </strong>
     <span class="koboSpan" id="kobo.898.1">
      : The three URLs following the series of colon characters are
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.899.1">
       the input
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.900.1">
     This command downloads
    </span>
    <a id="_idIndexMarker454">
    </a>
    <span class="koboSpan" id="kobo.901.1">
     three files concurrently
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.902.1">
      using
     </span>
    </span>
    <span class="No-Break">
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.903.1">
       wget
      </span>
     </strong>
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.904.1">
      .
     </span>
    </span>
   </p>
   <h2 id="_idParaDest-136">
    <a id="_idTextAnchor209">
    </a>
    <span class="koboSpan" id="kobo.905.1">
     Best practices for parallel execution in Bash
    </span>
   </h2>
   <p>
    <span class="koboSpan" id="kobo.906.1">
     This section explores best practices for using
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.907.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.908.1">
     and
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.909.1">
      parallel
     </span>
    </strong>
    <span class="koboSpan" id="kobo.910.1">
     to execute tasks concurrently, leveraging the full potential of your
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.911.1">
      system’s resources.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.912.1">
     The following are the best
    </span>
    <a id="_idIndexMarker455">
    </a>
    <span class="koboSpan" id="kobo.913.1">
     practices for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.914.1">
      parallel execution:
     </span>
    </span>
   </p>
   <ul>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.915.1">
       Determine the optimal number of jobs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.916.1">
      : The ideal number of parallel jobs depends on your system’s CPU and memory capacity.
     </span>
     <span class="koboSpan" id="kobo.916.2">
      Start with the number of CPU cores and adjust based on performance.
     </span>
     <span class="koboSpan" id="kobo.916.3">
      If you don’t specify a number of jobs, the defaults are one job for
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.917.1">
       xargs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.918.1">
      and one job per CPU core for
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.919.1">
       GNU parallel.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.920.1">
       Monitor resource usage
      </span>
     </strong>
     <span class="koboSpan" id="kobo.921.1">
      : Use tools such as
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.922.1">
       htop
      </span>
     </strong>
     <span class="koboSpan" id="kobo.923.1">
      or
     </span>
     <strong class="bold">
      <span class="koboSpan" id="kobo.924.1">
       vmstat
      </span>
     </strong>
     <span class="koboSpan" id="kobo.925.1">
      to monitor CPU and memory usage during parallel execution, ensuring your system remains responsive.
     </span>
     <span class="koboSpan" id="kobo.925.2">
      See the man entry for these tools
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.926.1">
       for examples.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.927.1">
       Make a dry run
      </span>
     </strong>
     <span class="koboSpan" id="kobo.928.1">
      : You can check what will be run with parallel by including the
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.929.1">
       --
      </span>
     </strong>
     <span class="No-Break">
      <strong class="source-inline">
       <span class="koboSpan" id="kobo.930.1">
        dry-run
       </span>
      </strong>
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.931.1">
       option.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.932.1">
       Handle errors gracefully
      </span>
     </strong>
     <span class="koboSpan" id="kobo.933.1">
      : Both
     </span>
     <strong class="source-inline">
      <span class="koboSpan" id="kobo.934.1">
       xargs
      </span>
     </strong>
     <span class="koboSpan" id="kobo.935.1">
      and GNU parallel can capture and log errors.
     </span>
     <span class="koboSpan" id="kobo.935.2">
      Use these features to identify and debug issues without halting the
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.936.1">
       entire process.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.937.1">
       Redirect output appropriately
      </span>
     </strong>
     <span class="koboSpan" id="kobo.938.1">
      : Redirect the output of each job to separate files or a log system to avoid interleaved and
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.939.1">
       confusing outputs.
      </span>
     </span>
    </li>
    <li>
     <strong class="bold">
      <span class="koboSpan" id="kobo.940.1">
       Use meaningful job names
      </span>
     </strong>
     <span class="koboSpan" id="kobo.941.1">
      : When using GNU Parallel, you can assign meaningful names to jobs to easily track
     </span>
     <span class="No-Break">
      <span class="koboSpan" id="kobo.942.1">
       their progress.
      </span>
     </span>
    </li>
   </ul>
   <p>
    <span class="koboSpan" id="kobo.943.1">
     Parallel execution with
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.944.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.945.1">
     and GNU parallel can vastly improve the efficiency of Bash scripts, particularly in cybersecurity and pentesting tasks.
    </span>
    <span class="koboSpan" id="kobo.945.2">
     By following best practices such as optimizing job numbers, monitoring resources, handling errors, and managing output, you can
    </span>
    <a id="_idIndexMarker456">
    </a>
    <span class="koboSpan" id="kobo.946.1">
     harness the full potential of parallel processing to enhance your scripts
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.947.1">
      and workflows.
     </span>
    </span>
   </p>
   <h1 id="_idParaDest-137">
    <a id="_idTextAnchor210">
    </a>
    <span class="koboSpan" id="kobo.948.1">
     Summary
    </span>
   </h1>
   <p>
    <span class="koboSpan" id="kobo.949.1">
     In this chapter, we learned about parallel processing techniques in Bash scripting.
    </span>
    <span class="koboSpan" id="kobo.949.2">
     This helped you gain knowledge on the basics of parallel execution using background processes and job control.
    </span>
    <span class="koboSpan" id="kobo.949.3">
     We also learned about advanced parallel processing using tools such as
    </span>
    <strong class="source-inline">
     <span class="koboSpan" id="kobo.950.1">
      xargs
     </span>
    </strong>
    <span class="koboSpan" id="kobo.951.1">
     and GNU parallel and covered managing errors and output in parallel tasks.
    </span>
    <span class="koboSpan" id="kobo.951.2">
     The chapter also covered applying parallel processing to
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.952.1">
      pentesting workflows.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.953.1">
     This chapter will help you significantly speed up tasks that involve processing large amounts of data or executing multiple commands simultaneously.
    </span>
    <span class="koboSpan" id="kobo.953.2">
     Parallel processing can greatly reduce the time required for network scans, brute-force attacks, or analyzing multiple targets concurrently.
    </span>
    <span class="koboSpan" id="kobo.953.3">
     Understanding how to manage parallel tasks helps in creating more efficient and robust scripts for various pentesting scenarios.
    </span>
    <span class="koboSpan" id="kobo.953.4">
     The skills learned can be applied to optimize resource usage and improve overall productivity during
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.954.1">
      security assessments.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.955.1">
     By mastering parallel processing in Bash, pentesters can create more powerful and efficient scripts, allowing them to handle complex tasks and large-scale assessments
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.956.1">
      more effectively.
     </span>
    </span>
   </p>
   <p>
    <span class="koboSpan" id="kobo.957.1">
     In the next chapter,
    </span>
    <em class="italic">
     <a id="_idTextAnchor211">
     </a>
    </em>
    <span class="koboSpan" id="kobo.958.1">
     we dive into
    </span>
    <em class="italic">
     <span class="koboSpan" id="kobo.959.1">
      Part 2,
     </span>
    </em>
    <span class="koboSpan" id="kobo.960.1">
     where we put all of the Bash goodness that you’ve learned to work for
    </span>
    <span class="No-Break">
     <span class="koboSpan" id="kobo.961.1">
      a pentest.
     </span>
    </span>
   </p>
  </div>
 </body></html>