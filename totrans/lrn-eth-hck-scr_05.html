<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Pre-Connection Attacks</h1>
                </header>
            
            <article>
                
<p><span>In this chapter, we will focus on the first part of network penetration testing—that is, pre-connection attacks. In order to perform these attacks, we will look at the fundamentals; we will study the concept of sniffing. Once we have a good idea of what sniffing is, we will look at targeted packet sniffing, and an important tool for sniffing—the Wireshark tool. Then, we will launch our first attack: the deauthentication attack. Finally, we will create a fake access point.</span></p>
<p>In this chapter, we will look at the following topics:</p>
<ul>
<li class="mce-root">Packet sniffing basics</li>
<li class="mce-root">Targeted packet sniffing </li>
<li class="mce-root">Deauthentication attacks</li>
<li>What is a fake access point?</li>
<li class="mce-root">Creating fake access points with the MANA Toolkit</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Packet sniffing basics</h1>
                </header>
            
            <article>
                
<p class="mce-root">In the last chapter, we set the Wi-Fi card into monitor mode, so that we can sniff packets that are within our Wi-Fi range, even if they're not directly connected to our device, and even if we are not connected to a network with a username and password. Now, we're going to use a tool called <kbd>airodump-ng</kbd>, part of the Aircrack-ng suite. It's a packet sniffer, and it allows us to capture all of the packets around us. We can run it against all of the networks around us and collect any packets within our range. We can also run it against a certain <strong>access point</strong> (<strong>AP</strong>) so that we only collect packets from a certain Wi-Fi network.</p>
<p>First, let's look at how to run the program. You'll need your Wi-Fi card in monitor mode; in our case, the name of the Wi-Fi card is <kbd>wlan0</kbd>. So, we'll run the <kbd>airodump-ng wlan0</kbd> command—it's as simple as that. The name of the Wi-Fi card that has monitor mode enabled on it is <kbd>wlan0</kbd>. As you can see in the following screenshot, this will list all of the networks around us:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1076 image-border" src="assets/0eac5225-a0b6-45c8-b340-83dc8eecd243.png" style="width:42.83em;height:42.17em;"/></div>
<p>Another use of <kbd>airodump-ng</kbd> is to identify all of the devices connected to the networks around us.</p>
<p>We can press <em>Ctrl + C</em> to stop sniffing. We didn't save the packets that we sniffed, so there was no point in analyzing them—we just ran <kbd>airodump-ng</kbd> against the APs around us to see what networks there were and to gather information about them. From the preceding screenshot, we can see that there are quite a few networks around.</p>
<p>In the preceding screenshot, there are a few parameters we have to familiarize ourselves with, so that we can analyze the output: </p>
<ul>
<li>The <kbd>BSSID</kbd> is the MAC address for the AP; as we know, each network device has a MAC address.</li>
<li><kbd>PWR</kbd> is the power—how far the AP is from our Wi-Fi card. <kbd>Test</kbd> is the test router that we will be running a few attacks against. As you go down, you can see that the networks are further and further away. The closer the network is, the easier it will be for you to sniff the packets. The closer the network is, the more effective the attack will be, and the quicker you will gain access and achieve your goal.</li>
<li><kbd>Beacons</kbd> are the signals that the AP sends; each AP sends a certain type of packets, to tell the clients around that it exists. So, even if the network is hidden, it will still send these beacons, to tell everyone around that it is there. Our <kbd>BSSID</kbd> is <kbd>EC:1A:59:5A:E1:46</kbd>, and we are running on <kbd>-34</kbd> information. So, <kbd>50</kbd> is the number of <kbd>Beacons</kbd> that each AP is sending.</li>
<li>The <kbd>Data</kbd> is the number of useful packets that we have sniffed; we'll talk about this in detail later on, when we study WEP decryption and encryption.</li>
<li><kbd>S</kbd> is the number of data packets that we have collected in the past 10 seconds; as we can see, we have a <kbd>0</kbd> here, so 0 data packets have been collected in the past 10 seconds.</li>
<li>The <kbd>Channel</kbd> is the number of channels that the AP is broadcasting on. Each AP broadcasts on a certain channel, used so that there will be no interference between APs that are beside each other. Suppose that we have an AP, and five meters away, there's another one; if both of them are running on the same channel, there will be interference between those two APs, and the signal between them will be shorter, so their range will be shorter.</li>
<li><kbd>MB</kbd> is the maximum speed supported by this AP; it can go up to <kbd>54</kbd>.</li>
<li><kbd>ENC</kbd> is the encryption that's used in the AP; we have WEP, WPA, WPA2 <span>encryptions</span>. If it's an open network we will see <kbd>OPN</kbd> in the encryption.</li>
<li><kbd>CIPHER</kbd> is the cipher that's used to decrypt the packets. For WEP it's <kbd>WEP</kbd> but for WPA2, it can be <kbd>CCMP</kbd> or <kbd>TKIP</kbd>; we'll talk about these later when we get into WPA cracking.</li>
</ul>
<ul>
<li><kbd>AUTH</kbd> is the type of authentication that's required for this AP. We can see <strong>pre-shared key</strong> (<strong>PSK</strong>), and also <kbd>MGT</kbd>. We'll also talk about these later when we get into WPA cracking.</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Targeted packet sniffing </h1>
                </header>
            
            <article>
                
<p>You have now seen the basics of sniffing. Once we have a network (or a group of networks) to target, it's useful to run <kbd>airodump-ng</kbd> on that network only, instead of running it on all of the networks around us. In this section, we'll see how to do that.</p>
<p>We are currently running <kbd>airodump-ng</kbd> on all of the networks around us; we are going to target the network with the <kbd>BSSID</kbd>, <kbd>EC:1A:59:5A:E1:46</kbd>. That's our test network, the <kbd>Test</kbd>. We are going to sniff on that network only.</p>
<p>To do this, we're going to use the same program. The command will be as follows:</p>
<pre class="mce-root"><strong>airodump-ng --channel 10 --bssid <span>EC:1A:59:5A:E1:46</span> --write test-upc wlan0</strong></pre>
<p>We need to specify the channel. The <kbd>--channel</kbd> here is number <kbd>10</kbd>, as you can see in the preceding code snippet; the <kbd>--bssid</kbd> should be the MAC address of the target network. We are going to add a <kbd>--write</kbd> option; this tells <kbd>airodump-ng</kbd> to log all of the packets that it captures into a file. We also need a filename, so let's call it <kbd>test-upc</kbd>. We then put the name of our Wi-Fi card (in monitor mode), and it's <kbd>wlan0</kbd>.</p>
<p>Then, we press <em>Enter</em>, and, as you can see, the only network that shows up is <kbd>Test</kbd>; we don't have any other networks listed. In the previous screenshot (in the <em>Targeted packet sniffing</em> section), we had too many networks, so not all of the information was visible.</p>
<p>In the following screenshot, as we can see, all the parameters that we saw in the previous part of this chapter contains all the APs that are within our Wi-Fi range, this section here:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1079 image-border" src="assets/c798daf9-d8ae-45fd-83d5-f8305a53a2fe.png" style="width:40.58em;height:9.58em;"/></div>
<p>Now, the preceding screenshot contains all of the clients that are associated with the APs; when we see <kbd><span>EC:1A:59:5A:E1:46</span></kbd>, that's the MAC address of the network that the client is connected to. The MAC address in the first section is the same as the MAC address in the second section. That means that this client is connected to network <kbd><span>EC:1A:59:5A:E1:46</span></kbd>. The <kbd>STATION</kbd> is the MAC address of the client—the MAC address of the device that is connected to the network. The <kbd>PWR</kbd> is the distance between us and the device, and the <kbd>Rate</kbd> is the maximum speed that the device is running on. <kbd>Lost</kbd> is the number of packets that we have lost (that we couldn't capture from the target device), and <kbd>Frames</kbd> is the number of useful packets that we collected from that device. We will talk more about frames and data when we study WEP cracking in <a href="c3f79613-de23-4825-9b88-b2f5dc16479c.xhtml" target="_blank">Chapter 6</a>, <em>Network Penetration Testing – Gaining Access</em><em>.</em></p>
<p>The first main part of <kbd>airodump-ng</kbd> is the APs that are within our Wi-Fi range, and the second part is the clients that are associated with those APs. We also have the MAC address of the AP and the MAC address of the actual client. Now, we are going to use <em>Ctrl</em> + <em>C</em> to stop sniffing. All of the data has been logged into a file called <kbd>test-upc</kbd>, and we will use <kbd>ls</kbd>, which is a command to list files in Linux; if we add <kbd>*</kbd> after it, we will see that <kbd>airodump-ng</kbd> automatically created four file formats:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1081 image-border" src="assets/ee6c4bef-c23c-43d7-ac96-81eb5bdd40e3.png" style="width:50.00em;height:3.75em;"/></div>
<p>In our command, we only specified the filename as <kbd>test-upc</kbd>; <kbd>airodump-ng</kbd> automatically added a <kbd>01</kbd> to the filename, just in case there was another file that had the same name. We can see four different file formats—<kbd>CAP</kbd>, <kbd>CSV</kbd>, <kbd>KISMET</kbd>, and <kbd>KIDMET XML</kbd>.</p>
<p>If we execute <kbd>pwd</kbd>, we will see that we're in the <kbd>root</kbd> directory. After we sniff the packets, we can use a program, such as Wireshark, to analyze the packets and see what information was gathered. The problem with this specific network is that it uses WPA2 encryption, so all of the packets are encrypted, and we can't decrypt them unless we have a key. We're going to discuss how to crack the key in later chapters of this book.</p>
<p>We're going to discuss how to use Wireshark in <a href="ed450616-a95c-4c35-b9a6-7e5362e39198.xhtml" target="_blank">Chapter 7</a>, <em>Post Connection Attacks</em>, of this book, so for now, we are just going to run Wireshark to give you a quick look at how the packets show up. They're not going to be useful, because they're encrypted.</p>
<p>We'll open the Wireshark tool by implementing the <kbd>wireshark</kbd> command, then go to the option <span class="packt_screen">File</span> | <span class="packt_screen">Open</span>, as shown in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1113 image-border" src="assets/38088be9-b927-4c79-a5b5-2afd45068b2a.png" style="width:40.92em;height:6.92em;"/></div>
<p>Look for the <kbd>test-upc.cap</kbd> file in the <kbd>/root</kbd> directory:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1083 image-border" src="assets/7ad6f2ca-f0dd-498d-8c4a-7498a65a2426.png" style="width:32.42em;height:24.67em;"/></div>
<p>After opening the capture file, we can see some information—for example, that the source device is a Belkin device in the following screenshot:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1084 image-border" src="assets/d2348cf2-b6c2-46fe-81c6-fdfc4a041f64.png" style="width:57.75em;height:38.08em;"/></div>
<p>We can also see (in the preceding screenshot) that there is a device communicating with Belkin; the MAC addresses; the devices; and the manufacturers. This is very simple information, because the network is encrypted. If it were an open network, we could connect straight away, and jump to further sections about penetration testing. For now, we just wanted you to see how the packets look when the network is encrypted. In the future, you will learn more about it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Deauthentication attack</h1>
                </header>
            
            <article>
                
<p>In this part of the book, all we will discuss are attacks that we can launch on any network in our Wi-Fi range, even if the network has encryption or uses a key. We don't have to connect to a network to launch these attacks.</p>
<p>Deauthentication attacks are very useful; they allow us to disconnect any device from any network that is within our Wi-Fi range. To perform the attacks, we spoof our MAC address to get the target MAC address (the target being the client that we want to disconnect). We pretend to be the client, and then we send a deauthentication packet to the router, telling the router that we want to disconnect. At the same time, we spoof our MAC address to the AP MAC address, and tell the target client that it needs to re-authenticate itself. Then, the connection will be lost.</p>
<p>Let's see how to do it, using a tool called <kbd>aireplay-ng</kbd>:</p>
<ol>
<li>First of all, we need to run <kbd>airodump-ng</kbd> on the target network, because we want to see which clients are connected to it. This time, we will not need the <kbd>--write</kbd> option, so we are just going to remove it. All we need are <kbd>airodump-ng</kbd>, the <kbd>--channel</kbd> (we put the channel of the target network), and the <kbd>--bssid</kbd> (the MAC address of the target network). The command will be as follows:</li>
</ol>
<pre style="padding-left: 60px"><strong>airodump-ng --channel 10 --bssid 00:10:18:90:2D:EE wlan0</strong></pre>
<p style="padding-left: 60px"><span>We hit <em>Enter</em>, and we're sniffing on the target network, <kbd>Test</kbd>. This method will work on any device, whether it's a Linux, Windows, Mac, or Android device—it doesn't matter; they all use the same method of transferring packets:</span></p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1085 image-border" src="assets/7e93c7ab-58aa-4f17-8a06-4aae11c98750.png" style="width:37.33em;height:8.50em;"/></div>
<p style="padding-left: 60px">Now, we're going to run <kbd>aireplay-ng</kbd>, to disassociate one of the devices from the network. We can run it to disassociate all devices, but I have found that when we do that, it doesn't really disassociate all of them, because there are too many targets to disassociate. So, we will choose one target, which will be the device <kbd>6C:C4:D5:6F:A6:DC</kbd>.</p>
<ol start="2">
<li>Using <kbd>aireplay-ng</kbd>, we will add <kbd>--deauth</kbd> (for a deauthentication attack), and then put the number of deauthentication packets that we're going to send; we will just put a very large number, to keep the device disconnected. Then, we will put the target AP (the MAC address of our target AP), and the source (or the client's MAC address), which is the device that we want to disconnect. We will also include <kbd>wlan0</kbd>, our Wi-Fi card in monitor mode. If we hit <em>Enter,</em> <kbd>aireplay-ng</kbd> will now send the deauthentication packets. The command will look as follows:</li>
</ol>
<pre style="padding-left: 60px"><strong>aireplay-ng --deauth 10000 -a EC:1A:59:5A:E1:46 -c 6C:C4:D5:6F:A6:DC wlan0</strong></pre>
<p style="padding-left: 60px">The output will be something like this:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1087 image-border" src="assets/cf64a606-db58-4561-9360-6264d574c642.png" style="width:41.00em;height:5.75em;"/></div>
<p style="padding-left: 60px">Go to the target device and see if it still has an internet connection. We'll be able to see that it has lost connection, and it's trying to reconnect; it won't be able to, because we are still sending our deauthentication packets. We can launch this attack on any network that we choose; we don't need to know the password or key.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What is a fake access point?</h1>
                </header>
            
            <article>
                
<p>Basically, a fake AP is an AP that looks normal to users and doesn't have encryption on it, so people can connect without having to enter a key. It's an open network, and it should have an internet connection to attract people to it. Why would we create a fake AP? Well, if we create one, we will attract a large number of people to connect to the network and access the internet. They will log in to their accounts, and we can use packet sniffing to capture anything that they log.</p>
<p>Creating an AP is simple; it just needs to be set up correctly, so that the AP can function. The first things we will need are two cards:</p>
<ul>
<li>A card needs to be connected to the internet. It doesn't matter what card it is—3G, wired, wireless—all we need is a card that is connected to the internet. </li>
</ul>
<ul>
<li>The second card has to be a Wi-Fi card. This Wi-Fi card will be used as the AP, to broadcast the AP's signal.</li>
</ul>
<p><span>In the following diagram, <span class="packt_screen">Hacker</span> is our hacker device; we will need the two preceding cards connected to our device. The second card is going to broadcast, telling all of the devices around it that it is an AP for the internet:</span></p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1111 image-border" src="assets/42e34b3d-224e-429f-b558-6adabd8f099c.png" style="width:29.00em;height:16.33em;"/></div>
<p>How are we going to do this, and how is it going to work? Suppose that <span class="packt_screen">Client 1</span> wants to access Google; it's going to ask for our Wi-Fi card because our Wi-Fi card is pretending to be the AP. Now, the Wi-Fi card doesn't have an internet connection, so we're going to have to set it up in a way such that once it gets a request, it talks to the second card, which <em>is</em> connected to the internet. Now, the second card will break the request, forward it back through our device to the Wi-Fi card, and send it back to <span class="packt_screen">Client 1</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1112 image-border" src="assets/ca235352-4a62-4487-9f66-4fda63048d48.png" style="width:28.17em;height:15.83em;"/></div>
<p>The preceding is the theory of how the fake AP is going to work. In the next part, we're going to implement it, so as to see the commands that need to be used.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Creating fake access points with the MANA Toolkit</h1>
                </header>
            
            <article>
                
<p>In this section, we'll discuss a tool called the MANA Toolkit. The MANA Toolkit allows us to create fake APs. It is very easy to use, and it automatically creates fake APs for us, so that we don't have to manually type commands. The tool also has a few scripts, allowing us to run a number of tools to sniff traffic in the fake AP, bypass HTTPS, and even attempt to bypass HSTS.</p>
<p>The tool comes with three main scripts:</p>
<ol>
<li><kbd>start-noupstream.sh</kbd>: Basically, this script will create a fake AP. This AP will not have an internet connection, so, when someone connects to this fake AP, they will not be able to connect to the internet.</li>
<li><kbd>start-nat-simple.sh</kbd>: This creates a fake AP with an internet connection. So, when someone connects to this AP, they will be able to access the internet, and all of the packets will be flowing through our device (because we are the router), so we'll be able to analyze, capture, and read the packets.</li>
<li><kbd>start-nat-full.sh</kbd>: This script will create an AP with an internet connection, and it will also automatically start sniffing and recording the packets that are flowing through the fake AP; it will attempt to bypass HTTPS and HSTS.</li>
</ol>
<p>We are not going to use the <kbd>start-nat-full.sh</kbd> script, because it actually fails a lot of the time. We're only going to use the <kbd>start-nat-simple.sh</kbd> script, for creating an AP with an internet connection. In the future, we'll see how to capture and analyze the packets.</p>
<p>Before getting into more detail, let's take a look at the settings for the Kali machine. Go to <span class="packt_screen">Settings</span> | <span class="packt_screen">Network</span>, and make sure that you're using a NAT network. This is exactly what we saw in <a href="3e16cd79-e639-4851-81e9-9dcd6c29c5dc.xhtml" target="_blank">Chapter 3</a>, <em>Linux Basics</em>.</p>
<p>Run the following command to install the MANA Toolkit:</p>
<pre><strong>apt-get install mana-toolkit</strong></pre>
<p>If it is already installed, it will tell us that it is, along with its version. If we use <kbd>ifconfig</kbd>, we'll see that we have an interface called <kbd>eth0</kbd>; this interface is actually used by VirtualBox in the NAT network, so it's a virtual interface that is connected to that network:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1088 image-border" src="assets/0edfa88f-9dfa-44f6-92e4-1b9eeaab6e45.png" style="width:34.67em;height:17.33em;"/></div>
<p>It's supplying an internet connection to the machine. At the moment, we don't have a wireless card connected to it. If we use <kbd>iwconfig</kbd>, we will see that the internet connection comes from <kbd>eth0</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1089 image-border" src="assets/a66ac1a2-8d38-4203-b83e-227c1182b4b7.png" style="width:33.42em;height:10.08em;"/></div>
<p>If we try to ping using the <kbd>ping www.google.com -c 5</kbd> command, we will get responses back from Google, which means that the machine has an internet connection:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1090 image-border" src="assets/2d08c9e0-39c3-4236-9503-a66cf637b99f.png" style="width:42.08em;height:10.67em;"/></div>
<p>We will now connect the wireless card to the Kali machine; go to <span class="packt_screen">Devices | USB</span>, and pick our card. The card should now show up when we run <kbd>iwconfig</kbd>:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1091 image-border" src="assets/352c33e2-0099-43e2-9375-d7c15ab9022e.png" style="width:33.92em;height:10.25em;"/></div>
<p>So, the <kbd>wlan0</kbd> card is only used to broadcast the signal; it's not used to provide the internet connection. This card is in the managed mode, and it's not connected to any network.</p>
<p>Now, we're going to set up MANA's configuration and start the fake AP:</p>
<ol>
<li>First, we need to modify the <kbd>hostapd-mana.conf</kbd> file, which is located at <kbd>/etc/mana-toolkit</kbd>, using Leafpad editor. We are using Leafpad because this is the editor that we want to modify the file with. We will type the location where the file is located:</li>
</ol>
<pre style="padding-left: 60px"><strong><span>leafpad /etc/mana-toolkit/hostapd-mana.conf</span></strong></pre>
<ol start="2">
<li>Here, we can modify the settings of the fake AP that we're using. The most important thing is the interface that we're going to use to broadcast the signal; for us, it was called <kbd>wlan0</kbd>. Remember that when we run <kbd>iwconfig</kbd>, <kbd>wlan0</kbd> is our wireless card that's going to broadcast the signal, and it's not connected to anything. Now, we can modify the MAC address (or the name of the network); the name of the network, in our case, is going to be <kbd>Internet</kbd>, and the <kbd>channel</kbd> is going to be set to <kbd>6</kbd>. We will not be modifying anything else; this was just to illustrate how to check the name:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1092 image-border" src="assets/40adef8a-48bc-49ea-8b13-6aeaa6aae14a.png" style="width:50.17em;height:25.33em;"/></div>
<ol start="3">
<li>The other file that we want to modify is the <kbd>start-nat-simple.sh</kbd> script; this is the file that will launch the AP. Again, we're going to use Leafpad, and the command is as follows:</li>
</ol>
<pre style="padding-left: 60px"><strong>leafpad /usr/share/mana-toolkit/run-mana/start-nat-simple.sh</strong></pre>
<ol start="4">
<li class="mce-root">The first thing to do is make sure that you correctly set <kbd>phy</kbd> parameter; this will be your wireless card. We already know that the wireless card was called <kbd>wlan0</kbd>. Next, the <kbd>upstream</kbd> parameter is very important; we should specify the card that has an internet connection. In our case, it was called <kbd>eth0</kbd>, the virtual card made by VirtualBox. Again, if everything is set up correctly, we will not modify anything. Save the file:</li>
</ol>
<div class="mce-root CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1093 image-border" src="assets/15afeb17-6f75-4531-a5fe-7444187af37a.png" style="width:22.00em;height:6.83em;"/></div>
<ol start="5">
<li>Our last step will be to run MANA, and it will be running the <kbd>start-nat-simple.sh script</kbd>. Instead of using <kbd>leafpad</kbd>, this time, we're going to use <kbd>bash</kbd>, in order to execute the file. Our command will be as follows:</li>
</ol>
<pre><strong>bash /usr/share/mana-toolkit/run-mana/start-nat-simple.sh</strong></pre>
<p class="mce-root" style="padding-left: 60px">Sometimes, we will get an error that says it cannot configure the file; in this case, just run the command again, and it should work the second time, as shown in the following screenshot:</p>
<div class="mce-root CDPAlignCenter CDPAlign" style="padding-left: 30px"><img class="aligncenter size-full wp-image-1094 image-border" src="assets/1f559752-9c0f-4c9c-a626-16422ec73a03.png" style="width:46.08em;height:21.67em;"/></div>
<p style="padding-left: 60px">After this AP is running, we will go to our Windows machine and try to connect from it. We will be using another wireless card for the Windows machine, because the Windows machine will be a virtual machine as well. We can try to connect from our phone or from another laptop; do not connect from the host machine, because it will not have an internet connection (it is hosting the internet connection for everything). Either test the connection from your phone, from a separate laptop, or from a virtual Windows machine, but make sure to use a different wireless card.</p>
<ol start="6">
<li>Going back to our Windows device, we are going to search for networks to connect to. As we can see in the following screenshot, we have an extra network, called <span class="packt_screen">Internet</span>, and it has no password:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1095 image-border" src="assets/f02f1e55-bc12-460c-9b46-88ca8ea7fb49.png" style="width:24.50em;height:23.50em;"/></div>
<ol start="7">
<li>We're going to try to connect to this network. Once we have successfully connected, we will see that we have an internet connection through the fake AP, and all packets are now flowing through this device:</li>
</ol>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1096 image-border" src="assets/a704b06d-84d1-4e51-9c59-5297802b6142.png" style="width:24.75em;height:9.58em;"/></div>
<p>The device is the AP, so it's like the router. We can actually use Wireshark (or any other tool), <kbd>tcpdump</kbd>, or TShark, to capture and analyze the packets.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p><span>In this chapter, you took a step toward learning about network penetration testing. We started with the fundamentals of sniffing, and we used <kbd>airodump-ng</kbd> to see all of the networks that were within our Wi-Fi range. We collected information about the networks, including the <kbd>BSSID</kbd>, the channel, the distance between us and the AP, and the encryption used. We then discussed targeted packet sniffing, giving an overview of the Wireshark tool. Then, we illustrated how to launch a deauthentication attack. Toward the end of the chapter, we studied fake APs, showing how to create one using the MANA Toolkit.</span></p>
<p>In the next chapter we will be attacking the target by connecting to the network this will allow us to  launch more powerful attacks.</p>


            </article>

            
        </section>
    </body></html>