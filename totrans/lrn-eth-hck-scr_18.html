<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Website Pentesting - Information Gathering</h1>
                </header>
            
            <article>
                
<p>In this chapter, we are going to focus on various techniques to gather information about the client using the <kbd>Whois</kbd> command, Netcraft, and Robtex. Then, we will see how we can attack a server by targeting websites that are hosted on that server. Moving toward the information gathering section, we are going to learn about subdomains and how they they can be useful for performing attacks. Later, we are going to look for files on the target system to gather some information and also analyze that data.</p>
<p>The following topics are covered in this chapter:</p>
<ul>
<li>Information gathering</li>
<li>Website on the same server</li>
<li>Information gathering form target websites</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Information gathering using tools</h1>
                </header>
            
            <article>
                
<p>Now, as we saw in the previous chapter how gathering information about the client will help us to launch attacks on victims, in this section, we are going to be using commands such as Whois, and tools such as Netcraft and Robtex to gather information from target systems.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The Whois Lookup</h1>
                </header>
            
            <article>
                
<p>The first thing we do before we start trying to exploit or find any vulnerabilities is information gathering. Therefore, we try to gather as much information as possible about the target, and web applications are no different. We're going to start by trying to get as much information as we can about the target IP address, the domain name info, the technology that is used on the website, which programming language is used, what kind of server is installed on it, and what kind of database is being used. We're going to gather information about the company and its DNS records, and we'll also see if we can find any files that are not listed, or any subdomains that are not visible to other people. Now, we can use any of the information gathering tools that we used before; for example, we can use Maltego and just insert an entity as a website, and then start running actions. It's exactly the same as we did with a normal person, in <a href="ed4df884-d2d6-4c71-a1a4-28e4a508ed19.xhtml" target="_blank">Chapter 11</a>, <em>Client Side Attacks - Social Engineering</em>. We can also use Nmap, or even Nexpose, and test the infrastructure of the website and see what information we can gather from that. Again, we won't be going over that because we've seen it in previous chapters. There is no difference between a website or a normal computer—as we know, a website is just another computer. So, what we are going to be focusing on are technologies that we will only see on websites, such as domain names, DNS records, and stuff like that, that we either won't be able to use or haven't seen before in the previous chapters.</p>
<p>Now, the first thing that we're going to have a look at is Whois Lookup. Whois Lookup is a protocol that's used to find the owners of internet resources, for example, a server, an IP address, or a domain. So, we're not actually hacking; we're literally just retrieving info from a database that contains information about owners of stuff on the internet. So, for example, when we sign up for a domain name, if we wanted to register a domain name, for example, za1d.com, when we do that, we have to supply information about the person who is signing in, the address, and then the domain name will be stored in our name and people will see that Zaid owns the domain name. That is all we're going to do.</p>
<p>If we google Whois Lookup, we will see a lot of websites providing the service, so we will use <a href="http://whois.domaintools.com/" target="_blank">http://whois.domaintools.com/</a>, <a href="http://whois.domaintools.com/" target="_blank">enter our target domain name, <kbd>isecurity.org</kbd>, and press <span class="packt_screen">Search</span>:</a></p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/7fb19dd6-55dd-4948-84cf-8afbf703b6c2.png" style="width:35.33em;height:8.58em;"/></div>
<p>As we can see in the following screenshot, we get a lot of information about our target website:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/a03e1a73-2e8e-4f98-88e2-897643826552.png"/></div>
<p>We can see the email address that we can use to contact the domain name info. Usually, we will be able to see the address of the company that has registered the domain name, but we can see that this company is using privacy on their domain; but if they haven't, that is, if they're not using privacy, we will be able to see their address and more information about the actual company.</p>
<p>We can see when the domain name was created, and we can see the <span class="packt_screen">IP Address</span> of <kbd>isecur1ty.org</kbd>. If we <span class="packt_screen">ping</span> the IP, we should get the same IP address as mentioned in the preceding screenshot.</p>
<p><span><span>I</span></span>f we run <kbd>ping www.isecur1ty.org</kbd>, the same IP address is returned:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1400 image-border" src="assets/cac971d0-c79f-42cf-bb77-064ad109ad0f.png" style="width:34.58em;height:5.92em;"/></div>
<p><span><span>W</span></span>e can see the <span class="packt_screen">IP Location</span>, we can see the <span class="packt_screen">Domain Status</span>, and we can also access the <span class="packt_screen">History</span>, but we need to register for that. Now, again, we can use this information to find exploits.</p>
<p>In the following screenshot, in the <span class="packt_screen">Whois Record</span>, we can find more information about the company that registered this domain:</p>
<div class="CDPAlignCenter CDPAlign"><img src="assets/b6464299-a43d-4903-ba99-283d6dd2c3f1.png"/></div>
<p>This is basic information, but it's very helpful in the long run, just to know what our target is, what their IP is, and what services they are using. We can also see the name servers that are being used and we can see which company they are provided by.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Netcraft</h1>
                </header>
            
            <article>
                
<p>In this section, we are going to learn how to get information about the technologies used by the target website. We're going to use a website called Netcraft (<a href="https://www.netcraft.com" target="_blank">https://www.netcraft.com</a>), and we're going to put the target address, select our target as <kbd>isecur1ty.org</kbd>, and click on the arrow:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1402 image-border" src="assets/fe67198d-5022-43e7-a2f6-36a78a804572.png" style="width:24.17em;height:8.75em;"/></div>
<p>After, click on <span class="packt_screen">Site Report</span>:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1403 image-border" src="assets/214d352f-8b3e-4596-9304-3fe6339e6bda.png" style="width:77.42em;height:17.17em;"/></div>
<p>In the following screenshot, we can see some basic information, such as the <span class="packt_screen">Site title</span>, a <span class="packt_screen">Description</span>, <span class="packt_screen">Keywords</span>, and when the website was created:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1405 image-border" src="assets/7e4ec4da-8a0b-4727-93a1-5959939b1b06.png" style="width:75.50em;height:27.58em;"/></div>
<p>Scrolling down further, we can see the website itself, the <span class="packt_screen">Domain</span>, the <span class="packt_screen">IP address</span>, and just as we saw in the previous section, the <span class="packt_screen">Domain registrar</span>, which is the company who registered the domain for isecur1ty:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1404 image-border" src="assets/49278c3f-45b5-498f-8d00-3e0feb81c2d6.png" style="width:75.92em;height:26.00em;"/></div>
<p>In the preceding screenshot, we would normally see information about the organization, but here, we can't , because isecur1ty is using privacy protection. Usually, we should be able to see such information and even more.</p>
<p class="mce-root"/>
<p>In the preceding screenshot we can see that it's hosted in the <span>UK</span>, we can see the <strong>Nameserver</strong>, which is <kbd><span>ns1.digitalocean.com</span></kbd>, and again, if we just go to <kbd><span>ns1.digitalocean.com</span></kbd>, we will discover that this is a website for web hosting.</p>
<p>Now, we know this is a web hosting company, and in worst-case scenarios we can use this or try to hack into <kbd><span>ns1.digitalocean.com</span></kbd> itself to gain access to isecur1ty.</p>
<p>Scrolling down further, we will see the <span class="packt_screen">Hosting</span> <span class="packt_screen">History</span> of the hosting companies that isecur1ty used, and we can see that the latest one is running on Linux with Apache, the same server that we saw in the previous section, 2.2.31 with <span class="packt_screen">Unix mod_ssl</span> and all the other add-ons:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1406 image-border" src="assets/917674b4-4c65-4f39-be3c-79926dce3069.png" style="width:75.67em;height:43.83em;"/></div>
<p>Again, this is very important to find vulnerabilities and exploits on our target computer:</p>
<p>Scrolling down to <span class="packt_screen">Web Track</span><span class="packt_screen">ers</span>, it will show us the third-party resources or applications used on our target, so we can see that our target uses <span class="packt_screen">Google</span>, <span class="packt_screen">MaxCDN</span>, and other Google services. This could also help us to find or gain access to the target computer:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1407 image-border" src="assets/9fdc3766-d29f-4749-86ff-ade16326c583.png" style="width:75.58em;height:52.17em;"/></div>
<p>The <span class="packt_screen">Technology</span> tab is one of the most important tabs or sections in here, because it shows us the technologies used on the target website:</p>
<div class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1409 image-border" src="assets/3c6f3dbb-1b71-4549-8407-ad4d007b5f72.png" style="width:80.50em;height:48.75em;"/></div>
<p>We can see in the preceding screenshot it's using the Apache web server, and on the <span class="packt_screen">Server-Side</span>, we can see that the website uses PHP, which means the website can understand and run PHP code. This is very important because, in the future, if we manage to run any kind of code on our target, then we know the code should be sent as PHP code. To create payloads on Metasploit or on Veil-Evasion, we should create them in PHP format and the target website will be able to run them because it supports PHP. On the <span class="packt_screen">Client-Side</span>, we can see in the preceding screenshot that the website supports JavaScript, so if we run JavaScript, or if we manage to run JavaScript code on the website, it won't be executed on the website; it will be executed on the users side who are viewing the website, because JavaScript is a client-side language and PHP is server-side. If we manage to run PHP code, it will be executed on the server itself. If we manage to run JavaScript, it will be executed on the users or the peoples machine who visit the website. It's the same with jQuery. This is just a framework for JavaScript.</p>
<p>Scrolling down, we can see in the following screenshot that the website uses <span class="packt_screen">WordPress Self-Hosted</span> software. This is very important. Netcraft will also show any web applications being used on the website:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1410 image-border" src="assets/ad727726-d9a1-45b8-bafd-d08f64dac3f0.png" style="width:76.58em;height:52.75em;"/></p>
<p class="mce-root"/>
<p>WordPress is just a web application, so we could see other examples in our case, and it's an open source web application, there are a lot of other websites might have. The good thing is we can go and find exploits or vulnerabilities within the web application. If we are lucky enough to find an existing one, then we can go ahead and exploit it on the target website. For example, we have WordPress in our example, so if we go to <a href="https://www.exploit-db.com/" target="_blank">https://www.exploit-db.com/</a> and search for WordPress, we'll manage to find lot of exploits related to WordPress.</p>
<p>There are different versions of WordPress. We need to make sure that we have the same version as our target. We'll look at examples to see how to use exploits, but it just shows how powerful information gathering is. Scrolling further, we can also find other information, such as that the website uses HTML5 and CSS, and all that kind of stuff:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1581 image-border" src="assets/d11444af-49be-4359-b930-797edecd4d73.png" style="width:76.92em;height:34.83em;"/></p>
<p>Hence, Netcraft is really useful for getting to know the website. We gathered information regarding the site—that it runs on PHP, and runs JavaScript. It uses WordPress, so we can use WordPress to hack into the website, and if we scroll up, we also discovered the web hosting of the website. Therefore, in worst-case scenarios, we can try to hack into a web hosting server and gain access to our target website.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Robtex</h1>
                </header>
            
            <article>
                
<p>In this section, we'll learn how we can get comprehensive DNS information about the target website. Just to give a quick review on what DNS is, when we type <strong>FACEBOOK.COM</strong>, a <strong>DNS SERVER</strong> will convert the name into an IP address. The <strong>DNS SERVER</strong> contains a number of records, each pointing to a different domain or to a different IP. Sometimes, they point to the same IP, but in general, they request the domain name, it gets converted into an IP address, and, depending on the address, the information needs to be stored somewhere. We're going to query the <strong>DNS SERVER</strong> and see what information we can get through it. The process is illustrated in the following diagram:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5dbbe6fd-a15b-4fcc-9a1b-b942941bd753.png" style="width:35.33em;height:20.92em;"/></p>
<p><span>We're going to be using a website called Robtex (<a href="https://www.robtex.com/" target="_blank">https://www.robtex.com/</a>), searching <kbd>isecur1ty.org</kbd>. Next, just click on <span class="packt_screen">GO</span> and select the first result on the website.</span></p>
<p>Now, we can see here that this report contains a lot of information, but we have a nice little index that will help us navigate through it. A lot of this information is a little bit advanced, so we will be skipping through a lot of it because we want to keep this as basic as possible. Web penetration testing is a vast topic in itself. Hence, we're going to keep this a little bit basic, and we'll see what information we can see in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1706 image-border" src="assets/e0892665-f7a8-46c3-a26a-a1044ce50d3c.png" style="width:36.67em;height:33.17em;"/></p>
<p>Firstly, we get information about the website. We can see the <span class="packt_screen">DNS</span> records, we can see the <span class="packt_screen">Name servers</span> that have been used, and we can see some <span class="packt_screen">Mail servers</span>. We can also see the <span class="packt_screen">RECORDS</span> that we were talking about and the DNS server:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/dc06dc78-30cd-4c86-8dab-b606746be790.png" style="width:35.67em;height:23.17em;"/></p>
<p>Here, we can see all of these records. We can see the <span class="packt_screen">a</span> record, the one that converts a domain name to an IP address, and if we remember, when we were performing DNS spoofing, we added an <kbd>A</kbd> record in our <kbd>dns.conf</kbd> and <kbd>iter.conf</kbd> files. The <span class="packt_screen">a</span> record is actually what's used in the DNS servers to link <span class="packt_screen">isecur1ty.org</span> to its IP address, but again, there is another type of record; for example, we have the <span class="packt_screen">ns</span> record, which links the domain, the name server. We can also see the <span class="packt_screen">mx</span> record in the following screenshot, which links it to the mail server, and we can see that the website uses a <span class="packt_screen">Google</span> mail server, so it's probably using Gmail to provide mail services:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1708 image-border" src="assets/2558e0a1-502b-485d-83b1-90aac18463ee.png" style="width:18.25em;height:15.33em;"/></p>
<p>Scrolling further, we have a graph of how all of the services interact with each other, how the services use the records, and how they are translated into IP addresses:</p>
<div class="CDPAlignCenter CDPAlign packt_figref"><img class="aligncenter size-full wp-image-1709 image-border" src="assets/342d8404-bdc8-49fa-8e4c-b2c4b087530d.png" style="width:83.00em;height:40.67em;"/></div>
<div class="CDPAlignCenter CDPAlign packt_figref">Services interacting with each other</div>
<p>In the <span class="packt_screen">Shared</span> tab, we will see if any of these resources are being shared:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1710 image-border" src="assets/ec927cd9-dcf1-4d6d-9db8-a421a8b73a6c.png" style="width:81.50em;height:50.92em;"/></p>
<p>We can also see that it's using three <span class="packt_screen">Name servers</span>. We can see the <span class="packt_screen">Mail servers</span>, and we can also see a number of websites pointing to the same IP address, and a number of domain names, pointing to the same IP address. Therefore, the preceding websites are stored on the same web server. Now, again, there is more information about the name servers and websites that are <span class="packt_screen">Sharing mail servers</span>. It doesn't mean that these websites are on the same server, but the most important thing is that we have the websites pointing to the same IP, which means that these websites exist on the same server. Now<span>, if you gain access to any of the websites mentioned, it will be very easy to gain access to <a href="http://www.isecur1ty.org/">isecur1ty.org</a>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Websites on the same server</h1>
                </header>
            
            <article>
                
<p>Websites are installed on web servers on normal computers, as we said before. These normal computers have IP addresses and, using the IP address, we can access our target website. Now, in many scenarios, our target website, or our target server, will contain a large number of websites, hence it'll have the website that we are targeting, but it will also contain other websites on the same server, hence on the same filesystem. For example, if we could not find any vulnerabilities in our target website, we can still try to hack into any other website that is installed on the same server. If we can do that, then we will be able to gain access to the server. Gaining access to the server basically means that we have access to all the other websites, because the server is just a computer, and we can navigate to the website that we want to hack and gain access to that website. Suppose we are trying to hack into a website and we can't find an exploit, then the next step will be trying to hack any other website that existing on the same server. Hence, what we mean by exist on the same server is they have the same IP address.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Information gathering from target websites</h1>
                </header>
            
            <article>
                
<p>So far, we have just been using commands and tools to gather information about the victim. Now, we will make use you information that we get from URLs the victims browses, also how we can analyze the files from the targets machine to which we have access to and what useful information we can gather through them. We will then see how to use the gathered information to launch attacks.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Finding subdomains</h1>
                </header>
            
            <article>
                
<p>In this section we're going to study subdomains. We see <span><span>subdomains</span></span> everywhere, for example, <kbd>subdomain.target.com</kbd>. Now, if we have <kbd>beta.facebook.com</kbd>, we would have <kbd>mobile.facebook.com</kbd>, or we might have <span class="packt_screen">user.facebook.com</span>. Suppose we google <kbd>mail.google.com</kbd>, which just takes us to Gmail. Why subdomains are important is, in a lot of cases, websites have subdomains for their own users, for example, for employees or for certain customers, so they're not advertised unless it's some sort of a VIP customer or we are an employee. We will not see these subdomains on search engines and we will never see a link leading to them, so they might contain vulnerabilities or exploits that will help us gain access to the whole website, but we just never knew about them because they're not advertised. Another thing is, a lot of the big websites, when they're trying to install a new update or add a new feature to the website, install it in a subdomain, so we have <kbd>beta.facebook.com</kbd>, which actually contains a beta version of Facebook, which contains experimental features. Now, experimental features are great because they're still under development, and there's a really high chance of finding exploits in them. This is actually true, not so long ago, someone was able to brute-force the restore password key for any Facebook user and was able to gain access to any Facebook user's account. This was only possible through <kbd>beta.facebook.com</kbd> because Facebook used to check for a number of attempts or failed attempts, and they just didn't implement that security feature in beta because they didn't think anyone was going to go there. Beta usually contains more problems than the normal website, so it is very useful to try and hack into it. In this section, we will see how we can find any subdomains that have not been advertised, or even advertised ones, so we'll be able to get subdomains of our target.</p>
<p>We're going to use a tool called knock. The tool is very simple. We don't really need to install it; all we have to do is download it using a <kbd>git</kbd> command. The command is <kbd>git clone</kbd>, and then we put the URL of the tool as follows:</p>
<pre><strong>git clone https://github.com/guelfoweb/knock.git </strong></pre>
<p>Once it's downloaded, navigate to it using the <kbd>cd</kbd> command and we'll see that we have the <kbd>.py</kbd> file. We are going to run it using the <kbd>python knockpy.py</kbd> command, and then we will enter the website that we want to get the subdomains of, which is <kbd>isecur1ty.org</kbd>. The following is the command:</p>
<pre><strong>python knockpy.py isecur1ty.org</strong></pre>
<p>After execution, the command will show some information about the website, as seen in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/405732dc-6b54-4b9a-babd-2dd77937fb2e.png" style="width:52.67em;height:41.67em;"/></p>
<p>It will perform a brute-force and a Google-based subdomain search for isecur1ty, and it will show us any subdomain that isecur1ty might have that we could try and test the security of and see what's installed on it. Maybe we will be able to gain access to the website through that subdomain. Once the scan is complete, as we can see in the following screenshot, we managed to find seven subdomains that were not advertised:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9e3557f2-7e80-4e4b-809c-ebb31c12126c.png" style="width:38.08em;height:20.92em;"/></p>
<p>Now, one of them is <kbd>ftp.isecur1ty.org</kbd>. We already know about <kbd>isecurity.org</kbd>, <kbd>localhost.isecur1ty.org</kbd> is just a local subdomain. We can see that the mail server <kbd>mail.isercur1ty.org</kbd> has its own subdomain as well, and we can see a very interesting one, <kbd>news.isecur1ty.org</kbd>. It actually did contain a beta version of a script that was been worked on. Hence, if someone was trying to hack into our website, they'd actually see that there is a script under development, and there's a high chance that they would have been able to find a vulnerability in it and gain access to the whole website.</p>
<p>This just shows us again how important information gathering is, which can be used to gain access to websites. If we don't do it, we will be missing a lot of things. For example, we might be missing a whole script with a whole number of vulnerabilities, or we could be missing an admin login page or an employee login page.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Information gathering using files</h1>
                </header>
            
            <article>
                
<p>So far, we have learned how to find any subdomains that exist within our target website that have not been listed. In this section, we're going to see how we can find files and directories that are stored on our target computer or our target website. Again, these could be useful because these files could contain passwords, they could contain config information, or they could contain information about the actual server, which will help us further exploit our target.</p>
<p>Let's just first see what is meant by files and directories, just to show the structure of directories on a web server. We have our Metasploitable machine and, as we know, usually the web server stuff is stored in <kbd>var/www/</kbd> directory. If we run <kbd>ls</kbd>, we will see <span>that we have a number of files and directories, as shown in the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1958 image-border" src="assets/799aad7d-757f-498a-b8a6-5accc9bed102.png" style="width:31.50em;height:2.92em;"/></p>
<div class="packt_infobox">If we run the <kbd>ls -la</kbd> command, it gives us a list of precise information about files and directories.</div>
<p>We can see in the preceding screenshot that we have a directory called <kbd>mutillidae</kbd>. Mutillidae is a web application that is designed to behave just like Metasploitable. It is designed so that it has a number of exploits so that we can learn how to hack using it. You will see that it's installed in a directory called <kbd>mutillidae</kbd>.</p>
<p>Now, if we go to the IP address of the Metasploitable machine <kbd>10.0.2.4</kbd>, there is easy access for us to Mutillidae. If we click on the URL, <kbd>10.0.2.15 /mutillidae</kbd>, we should see the following:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1959 image-border" src="assets/43b422ac-3d9e-4244-95ba-4c028b0d85a3.png" style="width:45.08em;height:20.00em;"/></p>
<p>That means we are inside the <kbd>mutillidae</kbd> directory. So, every time we see a forward slash, that usually means we are inside a directory. Now, if we run <kbd>cd mutillidae</kbd> and we also run the <kbd>ls</kbd> command, we will see that we have a large number of files:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/8beb301b-5799-482d-99af-f1a3ffd987a0.png" style="width:33.92em;height:23.08em;"/></p>
<p>For example, <span>let's say</span> we wanted to open one of these files and we have <kbd>index.php</kbd>. If we do <kbd>index.php</kbd>, then this is our current file on the browser, it's called <kbd>index.php</kbd>, we will be able to see it in the URL .</p>
<p>Now, what we learned from this is that <kbd>mutillidae</kbd> is just a directory inside our web root. So, at the moment, the Metasploitable web application is stored in <kbd>/var/www/mutillidae</kbd> directory and then the file that we are accessing is <kbd>index.php</kbd>. If we run the <kbd>pwd</kbd> command, we will see that we're in <kbd>/var/www/mutillidae</kbd>:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1961 image-border" src="assets/113ead2a-be0a-4cfc-97dc-e4720dd7389b.png" style="width:29.33em;height:2.08em;"/></p>
<p>The IP address kind of hides where our <kbd>www</kbd> route is, it hides the <kbd>/var/www</kbd> route, and then everything after that will be displayed after the IP address.</p>
<p>Therefore, what we're looking to find is all the directories and the files that we cannot see. So, through the links, we will be able to access different types and different pages. This is the same with any other website, but there are always files and directories hidden that we just never see. We'll see how we can get URLs for the files and access them, and read the information in them. To do that, we're going to use a tool called <kbd>dirb</kbd>, and to see how to use that tool we're going to run the <kbd>man dirb</kbd> command to see all the options associated with that tool. In the following screenshot, we can see the syntax. To use the tool, we just type in <kbd>dirb</kbd>, the URL of our target, and then output a wordlist. The way it works is based on a brute-force attack, and just uses a wordlist of names and it sends requests with those names. Any time it finds something it tells us, then we will find a file with a name from the wordlist. So, it is only able to find names and directories based on the wordlist that we provide:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1962 image-border" src="assets/62ffa452-7c12-427b-89c5-8bdbd7e8ea35.png" style="width:42.25em;height:35.58em;"/></p>
<p>We can create a wordlist using <kbd>crunch</kbd> or we can use wordlists that come with the <kbd>dirb</kbd> tool. The options here allow us to configure how the tool works. We can change things around the way we want them. For example, we can disable the recursive nests of the tools so it just runs on one directory instead of trying a number of directories. We can get it to ask us if we want it to access the directory or not, instead of automatically accessing directories and trying to find files within those directories, because this could be exhaustive if our target is a big website; there might be a lot of directories and then the tool would try to access all of them and find files within all of them. We can see how big the tree could go. We can also set it to use a username and a password if the target websites use some sort of authentication, and we can use <kbd>-v</kbd> for verbose output and <kbd>-o</kbd> to output the results to a file.</p>
<p>Now, let's look at a very simple example. We are just going to run <kbd>dirb</kbd> on our target, which is <kbd>http://10.0.2.4</kbd>. We inserted <kbd>http://</kbd> because, remember, we're targeting a website not an IP address. Then, we are going to put the directory, in our case the <kbd>mutillidae</kbd> directory, that we want to find files and directories within. We don't want it to access anything within other directories, because we have a number of scripts installed on the Metasploitable web server; we only want it to work on the <kbd>mutillidae</kbd> directory. So, the command is as follows:</p>
<pre><strong>dirb http://10.0.2.4/mutillidae/</strong></pre>
<p>After writing the command in the Terminal and hitting <em>Enter</em>, it will start to find URLs and files within the web application. We can see the command in action in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1963 image-border" src="assets/b1bb987c-84ae-4082-8534-bc8ffc81b281.png" style="width:34.83em;height:35.92em;"/></p>
<p>It will take a while for it to process <kbd>dirb</kbd> will use a wordlist file and it will use a default small wordlist file that is stored in <kbd>usr/share/dirb/wordlists/common.txt</kbd>.</p>
<p>We can have a look at the <kbd>usr/share/dirb/wordlists/common.txt</kbd> directory and see if there are any other wordlists that we would like to use, but we can use them only by placing the full path to the wordlist after the command. Therefore, instead of the way we wrote the command, just state the path where our wordlist is placed. For example, let's say, if it's in the <kbd>root</kbd> directory, we type it as <kbd>root/wordlist.txt</kbd>, but at the moment, it's using the default one, which is stored in the <kbd>usr/share/dirb/wordlists/common.txt</kbd> directory. In the next section, we'll see how to analyze the files we downloaded using the <kbd>dirb</kbd> tool.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Analyzing file results </h1>
                </header>
            
            <article>
                
<p>We can see in the following screenshot of the result that the <kbd>dirb</kbd> tool was able to find a number of files. Some of them we already know:</p>
<p class="mce-root CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1964 image-border" src="assets/ff8cb731-a24f-46fe-89c5-02cdd64126ff.png" style="width:34.83em;height:31.17em;"/></p>
<p>Now, as we can see in the preceding screenshot, <kbd>favicon.ico</kbd> is just an icon; <kbd>footer</kbd> and <kbd>header</kbd> are probably only style files; and <kbd>index.php</kbd> is the index that we usually see. We can see that we discovered a <kbd>login</kbd> page that allows people to log in.</p>
<p>Now, in many scenarios, we would be able to find the username and password of a target by exploiting a really complex vulnerability, and then end up not being able to log in because we couldn't find where to log in. In such cases, tools like <kbd>dirb</kbd> can be very useful. We can see that the <kbd>phpinfo.php</kbd> file is usually very useful because it displays a lot of information about the PHP interpreter running on the web server, and as we can see in the following screenshot, the file contains a lot of information:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/82eac66f-f25a-4b8a-a8d7-22d42af11275.png"/></p>
<p>Preceding information's are useful, and we can get to know some of the directories. From the preceding screenshot, we know that it's running <span class="packt_screen">php5</span>, the configuration is stored in the <kbd>.cgi</kbd> file. <kbd>.ini</kbd> files are usually the config files for PHP, so we can see all the places where they are stored.</p>
<p>When we scroll down further, we will see the permissions installed. We will also see that it has MySQL, so it's using MySQL:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1967 image-border" src="assets/10120ce0-c178-4092-990f-cd4c19b59e3e.png" style="width:36.83em;height:30.17em;"/></p>
<p>We can see in the preceding screenshot the directories where different types of configurations are stored. We can also see all the modules and extensions that are being used with PHP, so the <kbd>phpinfo.php</kbd> file is very useful. We can see in the following screenshot that we managed to find where the <kbd>phpMyAdmin</kbd> login is, and that's basically the login that's used to log in to the database:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1968 image-border" src="assets/001b5255-cf84-443a-97bc-69fdfa0b41bd.png" style="width:34.42em;height:4.83em;"/></p>
<p>Another very useful file is the <kbd>robots.txt</kbd> file, which tells search engines, such as Google, how to deal with the website. Hence, it usually contains files that we don't want the website or Google to see or to read. Now, if we can read the <kbd>robots.txt</kbd> file, then we'll be able to see what the web admin is trying to hide. We can see in the following screenshot that the web admin doesn't want Google to see a directory called <kbd>passwords</kbd>, and it doesn't want us to see a file called <kbd>config.inc</kbd> either. Niether does it want it to see these other files:</p>
<p class="CDPAlignCenter CDPAlign"><img class="aligncenter size-full wp-image-1969 image-border" src="assets/c6ca8df1-5f24-43bf-8e89-3de25f5f3d32.png" style="width:18.25em;height:15.17em;"/></p>
<p>Now, let's see the <kbd>./passwords</kbd> and <kbd>./config.inc</kbd> files:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b9c3c79b-8417-43dc-9735-c2d64bbf28c8.png" style="width:34.25em;height:19.50em;"/></p>
<p>We can see in the preceding screenshot that there is a file called <kbd>accounts.txt</kbd> and, clicking on the file, we can see that we've got some usernames and passwords. So, we can see that there is a <kbd>admin</kbd> user, with the <kbd>adminpass</kbd> password and we can see that we have a password for the <kbd>adrian</kbd> user, which is <kbd>somepassword</kbd>. So, we managed to find usernames and passwords, as seen in the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ab225073-98cd-4ba1-b961-aac580787ffa.png" style="width:28.83em;height:12.17em;"/></p>
<p>Now, we're still not sure what the preceding usernames and passwords are for, but we're sure that we were able to find very useful information. Another useful file is the <kbd>config.inc</kbd> file, and we can see in the following screenshot that we have information that allows us to connect to the database, because they have <kbd>$dbhost</kbd>, <kbd>$dbuser</kbd>, <kbd>$dbpass</kbd>, and <kbd>$dbname</kbd> parameters:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e04713ec-0376-44f0-95ad-6f7f83118eba.png" style="width:44.92em;height:16.50em;"/></p>
<p>We can see that the username is <kbd>root</kbd> and the password is blank, so we can go ahead and try to connect to the database based on the commands from the preceding screenshot, and then we should be able to get access to the database.</p>
<p>Also, we're still not sure where we can use them, but we can add them to a list to try to log in to the admin, or just store them in a list so that we can use them if we carry out a brute-force attack. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>This chapter focused on gathering information. Firstly, we used tools such as WhoIs Lookup, Netcraft, and Robtex. Then, we focused on how we can use the websites hosted on a server to exploit that particular server. We then learned about domains and how they can act as an important source of information that can we use to attack a victim. Later, we studied how to access files on a target system or target websites, and also how to analyze important information from various files.</p>
<p><span>Now, in the next chapter, we are going to see how important and powerful information gathering can be to launch attacks on victims.</span></p>


            </article>

            
        </section>
    </body></html>