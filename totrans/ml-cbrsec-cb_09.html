<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Appendix</h1>
                </header>
            
            <article>
                
<p>In this chapter, we offer the reader a guide to creating infrastructure to handle the challenges of machine learning on cybersecurity data. In particular, we provide a recipe for setting up a virtual lab environment to allow for safe and effective malware analysis. We also provide a guide to using virtual Python environments, which allow users to seamlessly work on different Python projects while avoiding package conflicts. </p>
<p>The following recipes will be covered in this chapter:</p>
<ul>
<li>Setting up a virtual lab environment</li>
<li>Using Python virtual environments</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Setting up a virtual lab environment</h1>
                </header>
            
            <article>
                
<p>To protect yourself and your network, it is imperative to take preventative steps when handling and analyzing malware. One of the best ways to do so is to set up an isolated <em>virtual lab environment</em>. A virtual lab environment consists of one or more <strong>Virtual Machines</strong> (<strong>VMs</strong>) in an isolated network. Isolating the network prevents malware from spreading through the network, at the cost of less realistic malware behavior.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>In preparation for this recipe, do the following:</p>
<ol>
<li>Install a hypervisor.</li>
</ol>
<p style="padding-left: 60px">A hypervisor is software that allows you to control VMs. One instance is VirtualBox, available for download for free at <a href="https://www.virtualbox.org/">https://www.virtualbox.org/</a>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/61f8a83c-89d4-4263-bfef-2bfbdd14e712.png"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="2">
<li>Download a virtual image.</li>
</ol>
<p style="padding-left: 60px">A virtual image is a template for a VM. Several Windows virtual images may be found at <a href="https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/">https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/</a>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/17d5ce89-c7a4-4597-b778-b09e494f02cf.png"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>The following steps will guide you through setting up and using a simple virtual lab environment:</p>
<ol>
<li>Create a VM using the virtual image.</li>
</ol>
<p style="padding-left: 60px">Your screen when opening the VM image should look something like this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c6c742ab-81f8-4898-949b-e9e2e63547b5.png"/></p>
<ol start="2">
<li>Configure the VM for performance and safety. For instance, you may disconnect it all together from the network.</li>
</ol>
<p style="padding-left: 60px">The following screenshot shows how to disconnect your VM from the network:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a64e87de-b7af-4127-9c8c-af1684c652fe.png"/></p>
<ol start="3">
<li> Create a snapshot.</li>
</ol>
<p style="padding-left: 60px">You can see what menu option allows you to take a snapshot here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/85935f0f-7ca4-4edf-a932-54ff0877dbfc.png"/></p>
<ol start="4">
<li>(Optional) Detonate and analyze malware in the VM.</li>
</ol>
<p style="padding-left: 60px">For instance, I ran ransomware in my VM here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/670790c6-2e3f-4727-85f4-59a566e3290f.png"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="5">
<li>(Optional) Revert the VM to your previous snapshot.</li>
</ol>
<p style="padding-left: 60px">Press the <span class="packt_screen">Restore</span> button, as shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2584b35e-3136-42c0-a3fb-8be3ddf8ae56.png"/></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>We began this recipe by creating a VM from an image (<em>step 1</em>). The creation of a VM depends on the format in which the image is given. For the referenced virtual images, double-clicking the <kbd>.ovf</kbd> file of the virtual image will allow you to set up a VM. Other times, you may need to create a brand new installation of an operating system and then mount the virtual image. Next, in <em>step 2</em>, we configured our VM for malware analysis. There are several configuration changes you are likely to want to make. These include setting base memory, the number of processors, video memory, and a virtual optical drive; selecting an appropriate network setting; and creating a shared folder.</p>
<p class="mce-root"/>
<p>Having done so, in <em>step 3</em>, we saved a snapshot, which allowed us to save all important state information. The great thing about snapshots is that they allow a user to easily roll back changes made to the VM. So, if you make a mistake, it's no big deal—just revert to a previous snapshot. Next, in <em>step 4</em>, we detonated malware in our VM. We recommend exercising caution in this step, and only doing it if you know what you are doing. In that case, you will find a dataset of malware in the repository for this book. Finally, in <em>step 5</em>, we clicked the <span class="packt_screen">Restore</span> button in VirtualBox to roll back our VM to the state it was in when you created the snapshot.</p>
<p>Finally, we note and credit Yasser Ali with the following advice: when installing VirtualBox on macOS, users should make security exceptions for Adobe Software to use the security settings.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Using Python virtual environments</h1>
                </header>
            
            <article>
                
<p>Imagine that you have two projects—project A and project B<span>—</span>whose Python library requirements conflict. For instance, project A needs scikit-learn version 0.21, while project B requires scikit-learn versions &gt;0.22. Or maybe one project requires Python 3.6 and the other Python 3.7. You could uninstall and then install the appropriate libraries or Python as you switch from one project to the other, but that can get tedious and impractical. To solve the problem of conflicting requirements, we recommend using Python virtual environments. You will see how to use a Python virtual environment in this recipe.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Getting ready</h1>
                </header>
            
            <article>
                
<p>The module for virtual environments, <kbd>venv</kbd>, is included in the Python standard library on Python 3.3 and later.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How to do it...</h1>
                </header>
            
            <article>
                
<p>To create and activate a virtual Python environment, follow these steps:</p>
<ol>
<li>In a Terminal, run the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>python -m venv "name-of-your-environment"</strong></pre>
<ol start="2">
<li>In a Linux or macOS Terminal, run the following command:</li>
</ol>
<pre style="padding-left: 60px"><strong>source "name-of-your-environment"/bin/activate</strong></pre>
<p style="padding-left: 60px">On Windows, run this command:</p>
<pre style="padding-left: 60px"><strong>"name-of-your-environment"/Scripts/activate.bat</strong></pre>
<ol start="3">
<li>Install your desired packages.</li>
</ol>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">How it works...</h1>
                </header>
            
            <article>
                
<p>We began <em>step 1</em> by creating a virtual Python environment. The <kbd>-m</kbd> flag indicated the module to be used, which, in this case, is <kbd>venv</kbd>. Next, in <em>step 2</em>, we activated our Python environment, so we can use it and make changes to it. Note that the folder structure of a Python environment is different on Windows than Linux or Mac. An indication that the environment is currently active is seeing the name of the environment in the Terminal, like so:</p>
<pre><strong>("name-of-your-environment")</strong></pre>
<p>In <em>step 3</em>, you may install packages as usual, as in this example:</p>
<pre><strong>pip install numpy</strong></pre>
<p>And rest assured that it will not affect your packages outside of this environment. Sweet!</p>


            </article>

            
        </section>
    </body></html>