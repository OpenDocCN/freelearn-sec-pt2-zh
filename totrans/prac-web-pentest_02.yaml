- en: Kali Linux Installation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'So, you are new to the Kali Linux world, right? (If you have ever installed
    Kali Linux before, you can skip this chapter.) Welcome to the toy of hackers:
    Kali Linux. Are you excited? You haven''t seen anything yet! This amazing operating
    system will take you to a higher level of security achievements.'
  prefs: []
  type: TYPE_NORMAL
- en: By the end of this chapter, you will know how to install Kali Linux; in the
    next chapter, you will delve deeply into using the operating system.
  prefs: []
  type: TYPE_NORMAL
- en: 'We have already created the victim machine (Mutillidae host), so now it''s
    time to create the attacking machine. In this chapter, we will cover:'
  prefs: []
  type: TYPE_NORMAL
- en: An introduction to Kali Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to install Kali Linux from scratch
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to install Kali on VMware
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to install Kali on VirtualBox
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introducing Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: What exactly is Kali Linux?
  prefs: []
  type: TYPE_NORMAL
- en: Kali Linux (previously called BackTrack) is a free, open source, Debian-based
    Linux distribution. This operating system has hundreds of applications installed,
    which can help us to conduct a successful penetration test.
  prefs: []
  type: TYPE_NORMAL
- en: And, guess what? Kali Linux is used by bad hackers (also known as black hat
    hackers), too. This means that we (security professionals) will have more accurate
    results, because we are using the same tools that the bad guys use to compromise
    systems.
  prefs: []
  type: TYPE_NORMAL
- en: You can install this beast on any virtualization host (VMware, VirtualBox, or
    HyperV). Also, you can install it on an ARM processor-based computer, like the
    Raspberry Pi.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, you need to know that Kali Linux is developed, funded, and maintained
    by Offensive Security, and you can visit their site at [https://www.Kali.org](https://www.Kali.org).
  prefs: []
  type: TYPE_NORMAL
- en: Installing Kali Linux from scratch
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let''s suppose that you have a laptop or a dedicated host, and you want to
    install Kali Linux. Follow the steps in this section, and you can install this
    monster on your machine. Also, you can install a fresh copy on a virtual machine
    (if you want to learn the details of the installation process yourself), but Kali
    Linux offers pre-built VMs, which we will learn about later in this chapter:'
  prefs: []
  type: TYPE_NORMAL
- en: First, you need to download Kali. Simply browse to [https://www.kali.org/downloads](https://www.kali.org/downloads),
    and you will land on the download page for this operating system (OS).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'I will choose the 2018.1 64 bit version, and will click on the HTTP link to
    download it directly to my machine. After the download has completed, you will
    need to copy the ISO file to a bootable USB drive. You''re probably asking yourself
    this question: how do I make my USB bootable? There is a Windows tool that I always
    use for creating a bootable USB, called **Win32 Disk Imager**. You can download
    a copy of this tool at [https://sourceforge.net/projects/win32diskimager](https://sourceforge.net/projects/win32diskimager),
    and it''s free!'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'I''m assuming that you have created your bootable USB copy of Kali, and that
    you have just booted your physical machine. On the first screen, you will need
    to choose the Graphical install option:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/beb67bf8-79c0-4f1f-b566-3b44d4405e05.png)'
  prefs: []
  type: TYPE_IMG
- en: When you press *Enter*, you will have to choose the Language;I will choose English,
    and click on the Continue button. After that, you will need to choose your Country,
    so I will pick Canada, since it's my homeland, and click on the Continue button.
    Next, you have to choose the **keyboard layout**. In my case, it's going to be
    American English. We can then proceed to the next step.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: At this stage, you will be prompted to enter the Hostname of your Kali machine.
    It's your choice; name it whatever you'd like.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Next, enter your local Domain name. If you don''t have one, that''s fine; just
    write `workgroup`, or anything that is meaningful to you (I have a local domain
    called `home.lan`):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/a5b1b035-cb96-480d-b143-082f35a1d46d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'In the next step, you will enter the Password for your Kali root account; confirm
    it twice, and click on Continue. After this, you will be asked to configure the
    clock. I''m living in the Eastern time zone; yours might be different, depending
    on where your city is located:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/0bce572f-bb60-487d-8f3d-3335ab7f81ac.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, it''s time to set up the partitions for the installation. I always use
    either Guided – use entire disk (for a non-encrypted setup) or Guided – use entire
    disk and set up encrypted LVM (for an encrypted installation—this setup will encrypt
    your disk drive). I will choose the first one, but I highly encourage you to choose
    the encrypted setup if you''re installing this on a physical machine, especially
    if it''s a laptop:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/ecead080-499d-4ef4-aebc-f8a2c616fe04.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, you will need to choose the partition disk where you''ll install Kali.
    Most of the time, you will see only one big partition; select it to Continue:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/81b51498-fa72-49ad-88ab-6c6e383f647c.png)'
  prefs: []
  type: TYPE_IMG
- en: On the next screen, select All files in one partition; this is what I always
    choose for Kali. If you're a sophisticated geek and would like to separate the partitions,
    feel free to do so.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: After this step, you will be asked to Finish partitioning and write changes
    to disk; what else are you going to choose, right?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select Yes to write the changes to disk.
  prefs: []
  type: TYPE_NORMAL
- en: Finally! The installation will start, and, depending on your machine, it will
    take a few minutes to finish.
  prefs: []
  type: TYPE_NORMAL
- en: Don't party yet; there are still a few more steps before you can start to use
    Kali. When the installation has finished, you will be asked to choose a Network
    Mirror. Select Yes and continue (you will need the network mirror for updating
    your Kali Linux).
  prefs: []
  type: TYPE_NORMAL
- en: 'After this step, leave the proxy textbox empty, unless you have a proxy inside
    of your network:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/3463260f-2d3c-4f34-8094-bf06fbf897a9.png)'
  prefs: []
  type: TYPE_IMG
- en: We're not too far from the finish line. On the next screen, you will be asked
    to choose whether to install the GRUB boot loader. I will say Yes, since I like
    this feature. This option will allow GRUB to be installed on the master boot record
    (the first screen that you will see when you boot your machine).
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, you will choose the disk partition for the GRUB boot loader. In this
    case, you will see only one option, so select it to Continue:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/60c9eaad-3cf1-492e-ab03-aed96e863e47.png)'
  prefs: []
  type: TYPE_IMG
- en: At this stage, a final installation will be executed (to finish the setup process),
    and you will be greeted with a message saying that Kali is ready. Hooray!
  prefs: []
  type: TYPE_NORMAL
- en: Click on Continue, and your system will reboot. When you get to the login screen,
    enter `root` for the username, and then enter the password that you chose during
    the installation process.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Installing Kali on VMware
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'If you have **VMware** and you want to install Kali Linux on it, then this
    section is for you. In the previous section, you saw how to install Kali from
    scratch, but you don''t need to do that if you have VMware. All you need to do
    is download the image file and import it into VMware, and you''re good to go:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To download the VMware image file, go to [https://www.kali.org/downloads](https://www.kali.org/downloads)
    and scroll down a little bit, until you see the following section:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/c2baa722-9f46-462a-a37c-69969aa0c637.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Follow the link to the Offensive Security Download Page. On this page, you
    will see a table that contains the virtual image copies of VMware:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/8d59b52f-422a-4133-852b-41dacde91b47.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Choose either the 32- or 64-bit version, and download it locally to your machine.
    Then, you will need to import it into VMware, so locate the File menu (click on
    it) and then click on Open:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/e43a3134-82f9-4a44-8b7d-e470784975c1.png)'
  prefs: []
  type: TYPE_IMG
- en: 'A dialog window will show up, and you should select your downloaded image file. Once
    Kali is imported into VMware, you will need to alter its default settings. To
    accomplish that, click on Edit virtual machine settings:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/088ba853-61b7-4ded-aa9b-cef91db0c0b2.png)'
  prefs: []
  type: TYPE_IMG
- en: 'First, you need to check the Memory settings. Click on the Memory device, and
    make sure that you have at least 2,048 MB (2 GB) of memory. If you have a good
    host machine, it will be much better if you increase it to 4 GB:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/ffef4e4d-5020-4dcb-952b-86783dacc8d0.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, click on the Processors device, and make sure that you have enough processing
    power for your Kali Linux host. Be generous with your new baby machine:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/8c12b917-ec68-4fb9-9353-1dd28b20c915.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, it''s time to set the network settings. If you want to separate your virtual
    machine from your **local area network** (**LAN**), then you need to choose the
    NAT option. If you choose NAT, then your VM will automatically be assigned a dynamic
    IP address, using a virtual DHCP server (check the following section, *Bridged
    versus NAT versus Internal Network*, for more details):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/8467db57-68de-41dd-9016-a53c54ddd0e8.png)'
  prefs: []
  type: TYPE_IMG
- en: 'When you use a virtual machine, you need to share files between Kali Linux
    and your local machine. To accomplish this, you need a shared folder. To add one,
    click on the Options tab and select the Always enabled radio button. Then, click
    on the Add... button to point to your local machine folder. This setup is specific
    to Windows, but it looks very similar on macOS:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/365f3fad-956e-4e1a-93f8-afcfb533b2c3.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, you can boot your Kali VM, but on the first boot, I recommend that you
    install the VMware tools. To do so, open your Terminal window and execute the
    following commands:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Sometimes, shared folders do not work out of the box. To enable them, you need
    to execute the following script in your Terminal window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'If you wish to make it a little easier, you can add a shortcut to the desktop
    by executing the following script in your Terminal window:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Installing Kali on VirtualBox
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**VirtualBox** is a very popular virtualization product, because it''s free
    and it offers professional features. You will probably use VirtualBox for your
    virtualization environment. My base machine is either Windows or macOS, and I
    have VirtualBox installed on top of it, so I can use Kali Linux for my penetration
    testing tasks.'
  prefs: []
  type: TYPE_NORMAL
- en: 'Kali offers us pre-built images for VirtualBox, so all we need to do is import
    them and start using Kali right away. Amazing, right? See the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To download the VirtualBox image file, go to [https://www.kali.org/downloads](https://www.kali.org/downloads)
    and scroll down a little bit, until you see the following section:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/2a6d04ac-b11d-4f30-9b61-71586ab52913.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Follow the link to the Offensive Security Download page. On that page, you
    will see a table that contains the virtual image copies for VirtualBox:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/1ff2ee38-a493-40c5-9a35-faed1f3fe028.png)'
  prefs: []
  type: TYPE_IMG
- en: Choose either the 32- or the 64-bit version, and download it locally to your
    machine. Then, you will need to import it into VirtualBox, so open it and locate
    the File menu (and click on it), and then click on Import Appliance (I'm using
    macOS for this demo, and Windows should be very similar).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Once Kali has been imported into VirtualBox, you will need to alter its default
    settings. To accomplish this, select the new VM, and click on the Settings button.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'First, we need to check the Memory settings. Click on the System tab, then
    click on the Motherboard sub-tab. Make sure that you have at least 2,048 MB (2
    GB) of memory. If you have a good host machine, it is preferable to increase it
    to 4 GB:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/a66f7983-2405-4eca-9c07-15a832c65a3d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Next, click on the Processor sub-tab, and make sure that the CPU cursor is
    between the green area and the orange area, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/ec18ddeb-f8b4-4db2-8ed1-d946d614311f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, it''s time to set the Network settings. If you want to separate your virtual
    machine from your **local area network** (**LAN**), then you need to choose either NAT
    or NAT Network. Choosing NAT will always assign the same IP address, but if you
    choose NAT Network, your VM will automatically be assigned a dynamic IP address,
    using a virtual DHCP server:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/86b9c797-68cc-485d-bde9-a4a2b1ddcaeb.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you choose the NAT Network option, then you have to exit the settings window
    and select the VirtualBox menu, then click on Preferences. Next, select the Network
    tab, and click on the NAT Networks sub-tab. Finally, click on the Add button on
    the right-hand side, where the plus sign is (see the following screenshot), and
    a new network will automatically be created for you:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/d5e6446e-6515-4ffb-8efc-099726221272.png)'
  prefs: []
  type: TYPE_IMG
- en: 'If you''re a geek and would like to rename the network or assign a specific
    IP address range, you will have to click on the Edit button (below the Add button;
    it has a brush icon). You will see a pop-up window where you can adjust the settings
    to your preferences:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/bbdbf3e7-a608-49fc-915a-2df4b2198262.png)'
  prefs: []
  type: TYPE_IMG
- en: 'When you use a virtual machine, you need to share files between Kali Linux
    and your local machine. To accomplish this, you need a shared folder. Let''s go
    back to the VM settings and select the Shared Folders tab. Then, click on the
    Add button on the right-hand side. A pop-up window will open, in which you can
    enter the path to the folder locally to your physical machine (Windows or macOS)
    and give your shared folder a name. I personally use the Auto-mount option, as
    well, to make sure that this feature always works when I boot up my Kali host:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/a6fc0d7e-8345-4d56-87d8-055e64ecee6d.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, you can boot your Kali VM. On the first boot, I recommend that you install
    the VirtualBox Guest Additions. To do so, open your Terminal window and execute
    the following three commands:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: After the `reboot` command, your VM will restart. You will be set to start using
    the fantastic OS Kali Linux!
  prefs: []
  type: TYPE_NORMAL
- en: Bridged versus NAT versus Internal Network
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: People are totally confused regarding how the network configurations in VirtualBox
    and VMware work. The three most popular configurations are **Bridged**, **NAT**,
    and **Internal Network**.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s start with the easiest option, which is the Bridged network. This architecture
    will let your Kali Linux connect directly to your network (LAN), and will get
    an automatic IP address from your home router. So, if your network is `192.168.0.0`,
    then your Kali IP address will be something like `192.168.0.x` (for example, `192.168.0.101`).
    Now, you can interact with the machines on your network by using Kali Linux:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/12e7e5c4-d76a-4d7d-98dd-70cd19ef1fc9.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Some people are afraid of connecting Kali to the network, because it''s open
    to personal computers. If you''re anxious about it, you can choose NAT or NAT
    Network (on VirtualBox). If you''re using VirtualBox, then use an NAT Network
    instead of NAT, because an NAT Network will automatically assign IP addresses
    (see the section of *Installing Kali on VirtualBox* for more details on the implementation
    of this architecture). When you choose NAT (or NAT Network), your Kali host will
    be assigned a different set of IP addresses. For example, if your home network
    IP addresses use the range of `192.168.0.0`, then with NAT, you should use a different
    **virtual LAN** (**VLAN**), such as `10.0.0.0`:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/92cc69f7-a1cb-47b0-98b2-7eae696e307c.png)'
  prefs: []
  type: TYPE_IMG
- en: 'An Internal Network is for particular people, who want the machine to be completely
    isolated from LAN and WAN. You''re probably asking yourself the following question:
    what is the purpose of all this? You will use this architecture if you know ahead
    of time that you''re testing a VM with malware installed on it. Also, this architecture
    is used by security professionals when they interact with a **C****apture the
    Flag** (**CTF**) machine that they don''t trust:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/522fc808-f233-4e2f-8402-5461d2abdef1.png)'
  prefs: []
  type: TYPE_IMG
- en: Updating Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Before you start using your Kali Linux machine, you need to make sure that
    you''re up to date. The command to update Kali Linux is straightforward, and you
    will get used to it, since you will have to execute it at least once a week, or
    before installing any new application:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: The `-y` in the `upgrade` command will accept the prompts automatically. You
    will not need to press the letter *Y* every time the upgrade asks you a question.
  prefs: []
  type: TYPE_NORMAL
- en: 'You are probably curious to know where the configuration file for the update
    repositories is located in Kali. The path to the configuration file is `/etc/apt/sources.list`
    (the `#` at the beginning of a line means it''s commented):'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/6d03104d-a252-4610-82cf-c7f4e524bc94.png)'
  prefs: []
  type: TYPE_IMG
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: At this stage, you're ready to start using Kali Linux. In the next chapter,
    you will take your skills to the next level by starting to master the use of this
    operating system.
  prefs: []
  type: TYPE_NORMAL
- en: I like to keep the summary short and not bore you with useless details. I hope
    that you enjoyed this chapter, and that you learned how to download and install
    Kali Linux from scratch. I'm assuming that you learned how to install Kali on
    VMware, or VirtualBox; don't forget to install the additional tools for both.
  prefs: []
  type: TYPE_NORMAL
- en: As a final note, don't forget to update your Kali Linux host before moving onto
    the next chapter.
  prefs: []
  type: TYPE_NORMAL
