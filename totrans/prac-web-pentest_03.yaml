- en: Delving Deep into the Usage of Kali Linux
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I have been so excited to write this chapter and share all of the information
    that you will need to master the usage of Kali Linux. A lot of the content in
    this chapter will be common among Debian Linux distributions, and by the end of
    the chapter, you will be able to handle Kali Linux with ease, like a real hacker.
    Speaking of hackers, it's good to know that Kali Linux is used by both black hat
    hackers and professional penetration testers. I've always used it during my engagements,
    and I occasionally (but rarely) use Microsoft Windows OS.
  prefs: []
  type: TYPE_NORMAL
- en: Kali Linux contains tons of tools dedicated to penetration testing, and it would
    be a big challenge to get used to all of them at once. In this chapter, I will
    show you my most often used commands. I keep them with me when I'm on an engagement,
    in order to manipulate the operating system of Kali Linux. You will see a lot
    of commands in this chapter; use them as a cheat sheet to help you achieve your
    goals. This is just the beginning of how to use Kali Linux as an operating system,and
    in upcoming chapters, you will learn about the penetration testing tools installed
    on Kali.
  prefs: []
  type: TYPE_NORMAL
- en: Before you start reading this chapter, I want to emphasize the importance of
    using the **Terminal window**. If you want to be good at using Kali Linux, you
    should focus all of your efforts on mastering the ins and outs of the Terminal
    window. In fact, I never use the GUI, unless the tool is made for something like
    Burp, for example; and that is an exception, my friends.
  prefs: []
  type: TYPE_NORMAL
- en: 'Are you thrilled? In this chapter, you will learn about the following:'
  prefs: []
  type: TYPE_NORMAL
- en: The Kali Linux filesystem structure
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Handling applications and packages
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Managing the filesystem in Kali
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Kali security management
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Handling the secure shell
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Configuring the network services in Kali
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Process management commands
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: System info commands
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The Kali filesystem structure
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The first thing that you need to start to understand is the Kali Linux **filesystem
    structure**, which is based on the Debian distribution filesystem. If you have
    used Microsoft Windows OS before, then the Linux structure will be a bit similar to
    it. For example, Windows starts with the `C:\` directory, while the Linux OS starts
    with `**/**`, which is called the `root` directory.
  prefs: []
  type: TYPE_NORMAL
- en: The `root` directory (`**/**`) and the root `home` directory (`/root`) that
    you use in Kali are not the same. The latter is used as a home directory for the
    root user.
  prefs: []
  type: TYPE_NORMAL
- en: In Kali, we always use the root user to log in to our machine, and that means
    that you have no limits to what you can do in the OS. Every single piece in the Linux system
    is based on files; it's okay to look around, but be careful if you decide to change
    any of the configuration files.
  prefs: []
  type: TYPE_NORMAL
- en: 'The directory structure in Kali is based on the Unix **Filesystem Hierarchy
    Standard** (**FHS**), which defines the Linux directories, and their contents,
    as well:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/edbe0eca-8c0f-4d3a-8613-4a93bfa65ffe.png)'
  prefs: []
  type: TYPE_IMG
- en: '| Directory | Contents description |'
  prefs: []
  type: TYPE_TB
- en: '| `/bin` | Essential system commands binaries for all users. (For example,
    `grep`, `ls`, `cat`. This is like `c:\Windows\System32` in Windows.) |'
  prefs: []
  type: TYPE_TB
- en: '| `/boot` | Contains the boot loader, Kernels, and `initrd` files. |'
  prefs: []
  type: TYPE_TB
- en: '| `/dev` | This directory contains the pointer locations to various devices.
    |'
  prefs: []
  type: TYPE_TB
- en: '| `/etc` | This folder contains all of the `administration`/`configuration`
    files and passwords. |'
  prefs: []
  type: TYPE_TB
- en: '| `/lib` | The libraries essential for the binaries in `/bin/` and `/sbin/`.
    |'
  prefs: []
  type: TYPE_TB
- en: '| `/lost+found` | Files that were recovered previously. |'
  prefs: []
  type: TYPE_TB
- en: '| `/mnt` | Contains temporarily mounted directories. |'
  prefs: []
  type: TYPE_TB
- en: '| `/media` | Mount folder for removable media, such as CD-ROMs. |'
  prefs: []
  type: TYPE_TB
- en: '| `/opt` | Add-on application software packages (pre-compiled, non-`.deb` binary
    distribution (tar''ed..) goes here). |'
  prefs: []
  type: TYPE_TB
- en: '| `/proc` | Contains Kernel and processes status (as usual, in text files,
    for example, uptime and network). |'
  prefs: []
  type: TYPE_TB
- en: '| `/root` | The root user home directory. |'
  prefs: []
  type: TYPE_TB
- en: '| `/sbin` | Contains system binaries that are dedicated to administrative commands
    (for example, `daemons`, `init`, `route`, and many more). |'
  prefs: []
  type: TYPE_TB
- en: '| `/tmp` | A temporary folder that contains files that are used for a short
    period of time. |'
  prefs: []
  type: TYPE_TB
- en: '| `/srv` | Some specific data that is served by the system. |'
  prefs: []
  type: TYPE_TB
- en: '| `/sys` | Very similar to `/proc`. |'
  prefs: []
  type: TYPE_TB
- en: '| `/home` | Contains the users'' home directories. |'
  prefs: []
  type: TYPE_TB
- en: '| `/usr` | Contains read-only data (formerly from the UNIX source repository;
    now from UNIX system **r**esources):'
  prefs: []
  type: TYPE_NORMAL
- en: '`/usr/bin/`: Same as for the top-level hierarchy'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/include/`: Standard include files'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/lib/`: Same as for the top-level hierarchy'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/sbin/`: Same as for the top-level hierarchy'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/share/`: Architecture-independent (shared) data'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/src/`: Source code (to build Debian packages - see `/usr/local/src/`)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/X11R6/`: X Window System, Version 11, Release 6'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/local/`: Tertiary hierarchy for local data installed by the system administrator'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/local/bin`: Locally compiled binaries, local shell script, and so on'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`/usr/local/src`: Source code (place to extract and build non-Debianized stuff)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '|'
  prefs: []
  type: TYPE_NORMAL
- en: '| `/var` | Contains variable data (for example, websites, logs, databases,
    and much more). |'
  prefs: []
  type: TYPE_TB
- en: Handling applications and packages
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kali Linux packages are stored in repositories and downloaded to the system
    to ensure the integrity of the package. Make sure to always update the system,
    as mentioned in the previous chapter. The repository configuration file is located
    at `/etc/apt/sources.list`.Make sure that this file is not empty (it will be if
    you didn't choose the network mirror option during the installation process);
    if it is, your Kali will not update.
  prefs: []
  type: TYPE_NORMAL
- en: The Advanced Packaging Tool
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The **Advanced Packaging Tool** (**APT**) is used for installing or upgrading
    packages, along with all of the required dependencies. The APT can also be used
    to upgrade a complete distribution of Kali:'
  prefs: []
  type: TYPE_NORMAL
- en: '`apt-get update` or `apt update`: This command is used to synchronize the local
    package index files with their sources, as defined in `/etc/apt/sources.list`.
    The `update` command should always be used first, before performing an `upgrade`
    or `dist-upgrade`.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`apt-get upgrade` or `apt upgrade`: This command is used to install the newest
    versions of all packages installed on the system using `/etc/apt/sources.list`.
    The `upgrade` command will not change or delete packages that are not being upgraded,
    and it will not install packages that are not already installed. The `-y` switch
    is used, with this command, to automatically accept the prompt messages.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`apt-get dist-upgrade` or `apt dist-upgrade`: This command upgrades all packages
    currently installed on the system, and their dependencies. It also removes obsolete
    packages from the system. The `-y` switch is used, along with this command, to
    automatically accept the prompt messages.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To fully upgrade your Kali Linux OS, use the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: You can combine the three preceding commands into one command by using `&& apt
    update && apt dist-upgrade -y && reboot`.
  prefs: []
  type: TYPE_NORMAL
- en: 'To show the full description of a package and identify its dependencies, use
    the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'To remove a package from Kali, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'To install an application from the repository, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'Sometimes, you will download applications from the web, and you will need to
    install them using the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '`./configure && make && make install`'
  prefs: []
  type: TYPE_NORMAL
- en: 'If you want to download a tool package from the GitHub repository, use the
    following command (to get the URL, on the repo homepage, click the Clone or download
    button, and the URL will be revealed):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: Debian's package management system
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This packaging system uses the `dpkg` command to install, remove, and query
    packages.
  prefs: []
  type: TYPE_NORMAL
- en: Using dpkg commands
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The upcoming commands are the most frequent ones that I use, but if you are
    curious and want to know more about all of the commands, then execute the following
    commands in your Terminal:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To get the `help` instructions for the `dpkg` command, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'You can use `--help` to see the instructions of any command you like. Also,
    you have the option to use the manual command:'
  prefs: []
  type: TYPE_NORMAL
- en: '`man [application name]`'
  prefs: []
  type: TYPE_NORMAL
- en: 'To list all of the packages installed on Kali, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: You can use the `dpkg -l` command in your post-exploitation phase to list all
    of the applications installed on the compromised Linux box.
  prefs: []
  type: TYPE_NORMAL
- en: 'To find a specific application already installed on the system, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'To install a newly downloaded `.deb` application, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'To remove an installed application, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: Handling the filesystem in Kali
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I could write a whole book for this section, but I will do my best to show you
    the commands that you're going to need in your arsenal as a penetration tester.
  prefs: []
  type: TYPE_NORMAL
- en: Before I start listing all of the commands, I would like to share a unique command-line
    utility that you'll need to master before starting with any of the utilities in
    this chapter. You can probably guess it; it's called the Help switch! This option
    will give you a handful of information regarding the command that you are going
    to execute.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, if you want to list the contents of a directory and you''re not
    sure of the options for the command, all you need to do is append the `--help`
    switch, and you can visualize all of the possible functionalities of the command:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/ef990674-55b4-4876-ad71-85c986a8b631.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Are you ready? This is going to be a long list (a sort of cheat sheet). Let''s
    start:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To list the directory and files, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'To list hidden items (`-a`) in a formatted way (`-l`), use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'To list files and directories in a human-readable form, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'To change the current directory to a new one, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'To print the working directory, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'To make a new directory, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'To remove (delete) a file, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'To delete a directory, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: 'To copy a file to a new location, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'To copy a directory to a new location, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'To move/rename a file or a directory, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'To create an empty file, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: 'To display the contents of a file, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'To open a text file for editing, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: 'To find files on your Kali box, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE24]'
  prefs: []
  type: TYPE_PRE
- en: 'The command that will list the drives (partitions) on the system (for example, `/dev/sda1
    or /dev/sda2`) is as follows:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE25]'
  prefs: []
  type: TYPE_PRE
- en: 'To mount an unmounted partition, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE26]'
  prefs: []
  type: TYPE_PRE
- en: 'To check the type of a file, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE27]'
  prefs: []
  type: TYPE_PRE
- en: 'To add the execute permission to a file (sometimes you will need it because
    by default you cannot execute it), use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE28]'
  prefs: []
  type: TYPE_PRE
- en: 'To redirect the output of the Terminal window to a file, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE29]'
  prefs: []
  type: TYPE_PRE
- en: 'To filter text in a text file or in a command Terminal output, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE30]'
  prefs: []
  type: TYPE_PRE
- en: 'The `grep` command is most frequently used with the `Pipe` symbol, `|`, to
    filter text coming out from the Terminal window. For example, to filter the word
    `password` in a text file called `config.txt`, you would use the following command:'
  prefs: []
  type: TYPE_NORMAL
- en: '`cat config.txt | grep password`'
  prefs: []
  type: TYPE_NORMAL
- en: File compression commands
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You can use the following commands to manage your compressed files on any Linux Debian
    distribution:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The following creates `file.tar`, containing files:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE31]'
  prefs: []
  type: TYPE_PRE
- en: 'The following extracts files from a `tar`, `file.tar`:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE32]'
  prefs: []
  type: TYPE_PRE
- en: 'The following creates a `tar` with Gzip compression:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE33]'
  prefs: []
  type: TYPE_PRE
- en: 'The following extracts a `tar` using Gzip:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE34]'
  prefs: []
  type: TYPE_PRE
- en: 'The following creates a `tar` with bzip2 compression:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE35]'
  prefs: []
  type: TYPE_PRE
- en: 'The following extracts a bzip2 compressed file:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE36]'
  prefs: []
  type: TYPE_PRE
- en: 'The following compresses a file (or files) using `gzip` compression:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE37]'
  prefs: []
  type: TYPE_PRE
- en: 'The following decompresses a compressed `gz` file:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE38]'
  prefs: []
  type: TYPE_PRE
- en: 'The following unzips a ZIP file:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE39]'
  prefs: []
  type: TYPE_PRE
- en: Security management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Managing users in Kali is not an everyday task, but you will probably use it
    occasionally. Personally, I rarely use the following commands, but sometimes,
    you might need to handle user management:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To `add` a user with `sudo` capabilities in Kali, use the following command:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE40]'
  prefs: []
  type: TYPE_PRE
- en: 'If you''re logged in and you want to elevate your privilege to a root user,
    try this command:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE41]'
  prefs: []
  type: TYPE_PRE
- en: 'If you''re logged in and you want to `execute` a root command, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE42]'
  prefs: []
  type: TYPE_PRE
- en: 'To change the root (or any user''s) password, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE43]'
  prefs: []
  type: TYPE_PRE
- en: 'The `shadow` file is important in Kali, because it stores the hashed passwords
    and some useful information about users. For example, I created a user called
    `gus` on Kali, so, to get his information, I should execute the following command:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE44]'
  prefs: []
  type: TYPE_PRE
- en: 'Let''s look at each field of the output that is separated by a `:` :'
  prefs: []
  type: TYPE_NORMAL
- en: The first field is self-explanatory; it's the username (`gus`)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The second field is the hashed password (the `$6` means it's using the SHA-512
    algorithm)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The third field (`17515`) is the days in Unix time that the password was changed
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Field number four (`0`) specifies the number of days that are required between
    password changes
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Field five (`9999`) specifies the number of days after which it's necessary
    to change the password
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The next field (`7`) is the number of days before the required password change,
    and that the user gets a warning
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Secure shell protocol
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Secure shell** (**SSH**) protocol is a network protocol that is used to establish
    an encrypted communication between a server and a client, using the TCP protocol.
    The SSH service is TCP-based, and listens, by default, on port `22`. In general,
    a public-private key pair allows users to log in to a system without requiring
    a password. The public key is present on all systems that require a secure connection,
    while the user keeps the private key in a secure place. On the target systems,
    the public key is verified against a list of authorized keys that are allowed
    to remotely access the server. SSH can be compromised when the public key is not
    cryptographically strong enough, and can be guessed.'
  prefs: []
  type: TYPE_NORMAL
- en: 'To start the ssh service, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE45]'
  prefs: []
  type: TYPE_PRE
- en: 'To check whether the service is running properly, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE46]'
  prefs: []
  type: TYPE_PRE
- en: 'To enable the service to start on boot, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE47]'
  prefs: []
  type: TYPE_PRE
- en: 'To stop the SSH service, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE48]'
  prefs: []
  type: TYPE_PRE
- en: 'To connect to a remote SSH server, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE49]'
  prefs: []
  type: TYPE_PRE
- en: 'To connect to an SSH server that is using a custom `port number` (not `22`),
    use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE50]'
  prefs: []
  type: TYPE_PRE
- en: 'To generate a new SSH key, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE51]'
  prefs: []
  type: TYPE_PRE
- en: 'To allow root remote login into SSH, perform the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Open the file, `/etc/ssh/sshd_config`
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: Change the PermitRootLogin parameter to Yes, and restart the SSH server
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
- en: 'As you may have guessed, to manage any service, you can use the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '`service [service name] start (To start the service)`'
  prefs: []
  type: TYPE_NORMAL
- en: '`service [service name] stop (To stop the service)`'
  prefs: []
  type: TYPE_NORMAL
- en: '`service [service name] restart (To restart the service)`'
  prefs: []
  type: TYPE_NORMAL
- en: '`service [service name] status (To get the status of the service)`'
  prefs: []
  type: TYPE_NORMAL
- en: Configuring network services in Kali
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I'm doing my best to show you the necessary commands in each section. You don't
    need to know all of the commands for managing network services in Kali, but you
    are surely going to use some of them. In this section, I will show you my favorite
    commands related to the network services in Kali Linux.
  prefs: []
  type: TYPE_NORMAL
- en: To operate Kali properly, you need to ensure that it has connectivity to either
    a wired or a wireless network. You may need to obtain an IP address through **Dynamic
    Host Configuration Protocol** (**DHCP**), or assign one statically.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first important command is `ifconfig`, which you will use to check the
    IP address on your Kali machine:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](Images/37b3dbfe-b48e-4d45-bf4d-f2ab892d18a9.png)'
  prefs: []
  type: TYPE_IMG
- en: You can see my Kali IP address, `10.0.0.197`, after executing this command (in
    the preceding screenshot). Also, you need to pay attention to the network interface
    names—`eth0` represents the Ethernet cable, and the OS gives it a number (which
    is `0`, in this case). If you had another Ethernet cable connected to your Kali,
    you would probably see another interface, called `eth1`. If you connected a wireless
    adapter (or if you had it built in), Kali would show another interface, called
    `wlan0`.
  prefs: []
  type: TYPE_NORMAL
- en: 'In the preceding example, we received a dynamic IP address from the DHCP server.
    If, for any reason, you want to refresh the IP address, you can execute the following
    commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE52]'
  prefs: []
  type: TYPE_PRE
- en: Setting a static IP on Kali
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Sometimes, you need to have a dedicated static LAN IP address for your Kali
    Linux. A very practical scenario is when you're on duty and you want to go under
    the radar, by not communicating with the DHCP server of your client (or your employer).
    Another purpose for a static IP address is if you have a separate VLAN, and you
    want to join it manually.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s look at the implementation of a static IP address:'
  prefs: []
  type: TYPE_NORMAL
- en: 'First, open the file `/etc/network/interfaces` using your favorite text editor:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/e20de616-ce9a-435b-9fbf-1ca4e77c622a.png)'
  prefs: []
  type: TYPE_IMG
- en: 'I will add a new static IP address, `10.0.0.99`, to the network `10.0.0.0/24`,
    at the end of the file. In your case, the network will probably be `192.168.0.0/24`.
    As for me, I use the `10.0.0.0` network addressing architecture:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE53]'
  prefs: []
  type: TYPE_PRE
- en: 'Save the file (*Ctrl* + *S*), and restart your Kali machine. (Hint: I will
    use the `reboot` command in the Terminal window to restart my Kali.) After the
    reboot, execute the `ifconfig` command, and you should see your new IP address
    set. Then, you will be ready to go:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](Images/cdbe9be3-0819-456e-8962-62cede42f6a6.png)'
  prefs: []
  type: TYPE_IMG
- en: Checking active connections in Kali
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Network statistics** (`netstat`) is a command-line tool that displays the
    active network connections on your Kali. It is used for finding problems (like
    Malware that are listening to incoming connections, for example, or malware that
    are trying to contact external (outgoing) servers). `netstat` can be used for
    many reasons. Most of the time, `netstat` is combined with the `grep` command,
    to filter the output results:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE54]'
  prefs: []
  type: TYPE_PRE
- en: '`-a`: Shows both the listening and non-listening sockets.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`-n`: Shows numerical addresses, instead of trying to determine symbolic hosts,
    ports, or usernames.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`-t`: Shows TCP connections.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`-p`: Shows the **process identifier** (**PID**) and the name of the program
    to which each socket belongs:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '![](Images/229ce190-a996-4ef8-931a-72b8e309475c.png)'
  prefs: []
  type: TYPE_IMG
- en: As you can see in the preceding screenshot, my Kali host is listening on port
    `80`, because I already started the Apache web server service.
  prefs: []
  type: TYPE_NORMAL
- en: To start the Apache web server on Kali, execute the command `service apache2
    start`.
  prefs: []
  type: TYPE_NORMAL
- en: Process management commands
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In general, Kali Linux is a stable system. However, things may occasionally
    go wrong, and sometimes, we will wish to tweak the system to better suit our needs.
    In this section, we will take a brief look at how we can manage processes on a
    Kali Linux system.
  prefs: []
  type: TYPE_NORMAL
- en: Htop utility
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Before I start listing all of the built-in commands for managing the processes
    in Kali, there is a handy tool that I always use. Unfortunately, it''s not preinstalled
    on Kali. It''s called `htop`. This command-line tool lists all of the running
    processes in the Terminal window, in a nice, user-friendly layout:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE55]'
  prefs: []
  type: TYPE_PRE
- en: '![](Images/1acfd970-a9fc-4138-bcf1-56acea7a2b36.png)Through using `htop`, I
    can see that I have a memory issue which is approximately full. This tells me
    that I should increase my memory settings for this VM.'
  prefs: []
  type: TYPE_NORMAL
- en: Popular commands for process management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We''re not done yet; here are some more process management commands that can
    be very useful when using Kali Linux:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To display all active processes, execute the following command:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE56]'
  prefs: []
  type: TYPE_PRE
- en: The `ps` command is very useful if you have a remote shell to a Linux box, and
    you want to list all of the current processes for privilege escalation.
  prefs: []
  type: TYPE_NORMAL
- en: 'To display all running processes, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE57]'
  prefs: []
  type: TYPE_PRE
- en: 'To kill a process with an ID (`PID`), use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE58]'
  prefs: []
  type: TYPE_PRE
- en: 'To kill all processes named `hello`, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE59]'
  prefs: []
  type: TYPE_PRE
- en: 'To force killing a process, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE60]'
  prefs: []
  type: TYPE_PRE
- en: System info commands
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This section will be very useful in the post-exploitation phase.
  prefs: []
  type: TYPE_NORMAL
- en: 'Suppose that you just escalated your privileges on a Linux box; how can you
    know if you''re really an admin? Just execute the `id` command, and you''ll get
    the results. Don''t underestimate this section! Review it carefully, and see the
    commands that you can take advantage of during the post-exploitation phase on
    a Linux machine:'
  prefs: []
  type: TYPE_NORMAL
- en: 'To show the current host `uptime`, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE61]'
  prefs: []
  type: TYPE_PRE
- en: 'To show who''s logged in, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE62]'
  prefs: []
  type: TYPE_PRE
- en: 'To show who you are (as a user), use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE63]'
  prefs: []
  type: TYPE_PRE
- en: 'To display information about a user, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE64]'
  prefs: []
  type: TYPE_PRE
- en: 'To show kernel information, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE65]'
  prefs: []
  type: TYPE_PRE
- en: 'To show CPU information, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE66]'
  prefs: []
  type: TYPE_PRE
- en: 'To show memory information, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE67]'
  prefs: []
  type: TYPE_PRE
- en: 'To show disk usage, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE68]'
  prefs: []
  type: TYPE_PRE
- en: 'To show memory and swap usage, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE69]'
  prefs: []
  type: TYPE_PRE
- en: 'To search all of the commands that were previously executed, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE70]'
  prefs: []
  type: TYPE_PRE
- en: 'To detect the GPU model, use the following:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE71]'
  prefs: []
  type: TYPE_PRE
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Another chapter has been completed. You are now smarter than you were yesterday.
    So many commands, right? Don't worry; you don't need to memorize all of these
    commands. You can always come back to this chapter and use it as a reference for
    your Terminal window ninja skills.
  prefs: []
  type: TYPE_NORMAL
- en: As you may have realized, I get straight to the point, without wasting your
    time on useless information and nitty-gritty details that you will never use in
    your career. I hope that you enjoyed this chapter, and that you learned something
    new, so that you can start using your Kali Linux baby machine.
  prefs: []
  type: TYPE_NORMAL
