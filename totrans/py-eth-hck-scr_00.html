<html><head></head><body>
		<div id="_idContainer036">
			<h1 id="_idParaDest-53"><em class="italic"><a id="_idTextAnchor054"/>Chapter 2</em>: Getting Started – Setting Up a Lab Environment</h1>
			<p>Before we start going into the details of how to start ethical hacking, we need to configure a couple of things. In this section, we will learn what tools are needed to complete this book. Most of the tools we will be using in this book are available for free. </p>
			<p>We will start by selecting the Python version used in this book. Then, we will shift our focus to the <strong class="bold">Integrated Development Environments</strong> (<strong class="bold">IDEs</strong>) used in this book. We will also learn how to set up virtual environments and understand how they can be useful. Later, we will dive into selecting <strong class="bold">Operating Systems</strong> (<strong class="bold">OSes</strong>) both for the attacker as well as the target/victim. We will explore different OSes and finally settle on the ones we will use in this book. We will also test a sample Python script at the end to check that everything is configured properly and see whether we are good to go. </p>
			<p>In this chapter, we'll go through the following topics: </p>
			<ul>
				<li>Setting up VirtualBox</li>
				<li>Installing Python</li>
				<li>Exploring IDEs</li>
				<li>Setting up networking</li>
				<li>Updating Kali Linux</li>
				<li>Using virtual environments</li>
			</ul>
			<h1 id="_idParaDest-54"><a id="_idTextAnchor055"/>Technical requirements</h1>
			<p>In order to complete this chapter, you will need a decent working PC with sufficient hard disk space and memory to run two virtual OSes. As a rough estimate, 100 GB storage and 8 GB RAM should be sufficient. </p>
			<p>The source code for the project is located at the following link: <a href="https://github.com/PacktPublishing/Python-Ethical-Hacking">https://github.com/PacktPublishing/Python-Ethical-Hacking</a>.</p>
			<h1 id="_idParaDest-55"><a id="_idTextAnchor056"/>Setting up VirtualBox</h1>
			<p>As mentioned earlier, we will be configuring our setup for <strong class="bold">penetration testing</strong> (<strong class="bold">pen testing</strong>) in this chapter. The first thing we will need is virtualization software. Virtualization software helps us to run a complete OS on top of our existing OS. The main advantage of virtualization is that you can run a complete OS without needing to buy additional physical hardware, such as a PC, while enjoying all the features that come with such hardware. Once we move forward, you will understand these advantages in more detail. Here's a list of popular virtualization software:</p>
			<ul>
				<li><strong class="bold">VMware Workstation Player</strong></li>
				<li><strong class="bold">VirtualBox</strong></li>
			</ul>
			<p>Though there are other options available, I recommend using one of these. I will be using VirtualBox in this book since it is free. VMware Player is also free, but it can't be used commercially without proper licensing. </p>
			<p>To download VirtualBox, go to the following link: <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a>.</p>
			<p>There you will find the link to download it. Follow these steps:</p>
			<ol>
				<li>Choose the VirtualBox installation package for Windows and download it. </li>
				<li>Once downloaded, open the installer and follow the instructions to install it on your system. <p>The installation process should be fairly simple. During installation, it may ask you for permission to install certain drivers. Please allow the installer to install these drivers as well. </p><p>Once installed, the interface should look something like this:</p></li>
			</ol>
			<div>
				<div id="_idContainer015" class="IMG---Figure">
					<img src="image/B14788_02_01.jpg" alt="Figure 2.1 – VirtualBox interface&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.1 – VirtualBox interface</p>
			<p>Setting up the virtualization software gives us a foundation on which to build our lab. Going forward, we'll use this foundation to build the components needed to run the lab. Up next, we'll look at OSes and choose and configure what we need.</p>
			<h1 id="_idParaDest-56"><a id="_idTextAnchor057"/>Installing virtual OSes</h1>
			<p>We will need one OS to be used as an attack machine and one to be used as a target machine. In practical cases, most of the time, the attack machine is mostly a Linux distribution-based system and the target/victim machine will be a Windows-based system. We will use the term target and victim interchangeably throughout this book. </p>
			<h2 id="_idParaDest-57"><a id="_idTextAnchor058"/>Attack machine OS</h2>
			<p>There are a lot of options for a pen testing machine. However, there are a few Linux-based distributions that stand out: </p>
			<ul>
				<li>Kali Linux</li>
				<li>Parrot OS</li>
			</ul>
			<p>There are other options as well. However, I recommend using Kali Linux, since it's stable and widely used for pen testing. Kali has a lot of tools preconfigured, which can save a lot of time. </p>
			<h3>Kali Linux</h3>
			<p>To download a virtual image for Kali Linux, go to Kali's download page: <a href="https://www.kali.org/downloads/">https://www.kali.org/downloads/</a>.</p>
			<p>Let's begin the installation process:</p>
			<ol>
				<li value="1">In the <strong class="bold">Download</strong> section, select <strong class="bold">Kali Linux 64-bit VirtualBox</strong>. This is a complete image of an already-installed Kali OS, so you will not need to install anything: <div id="_idContainer016" class="IMG---Figure"><img src="image/B14788_02_02.jpg" alt="Figure 2.2 – Kali Linux VirtualBox image&#13;&#10;"/></div><p class="figure-caption"> Figure 2.2 – Kali Linux VirtualBox image</p></li>
				<li>The download should take some time depending on your internet speed. Once the image is downloaded, simply import the downloaded image into VirtualBox. To import the Kali machine, click on the <strong class="bold">Import</strong> button in the <strong class="bold">Tools</strong> tab, as shown in the following screenshot: <div id="_idContainer017" class="IMG---Figure"><img src="image/B14788_02_03.jpg" alt="Figure 2.3 – Importing the Kali virtual machine &#13;&#10;"/></div><p class="figure-caption">Figure 2.3 –<a id="_idTextAnchor059"/> Importing the Kali virtual machine </p></li>
				<li>This will open a <a id="_idIndexMarker118"/>dialog box and you can <a id="_idIndexMarker119"/>select the <strong class="source-inline">kali machine ova</strong> file you just downloaded. </li>
			</ol>
			<p>During boot, you will be asked for the password to log in to the Kali Linux system. The default credentials for the image are as follows:</p>
			<div>
				<div id="_idContainer018" class="IMG---Figure">
					<img src="image/Table_01.jpg" alt=""/>
				</div>
			</div>
			<p class="callout-heading">Important note</p>
			<p class="callout">You may need to disable USB 2 support in the settings to properly start the machine.</p>
			<p>Once the system is started, it should look like this:</p>
			<div>
				<div id="_idContainer019" class="IMG---Figure">
					<img src="image/B14788_02_04.jpg" alt="Figure 2.4 – Kali Linux home screen&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.4 – Kali Linux home screen</p>
			<p>Now that we've set up our attacker machine, let's move on to the machine for the victim.</p>
			<h3>Victim machine OS</h3>
			<p>For the victim machine, we will use Windows 10 as our OS. Here you have two options; either you can install a Windows 10 OS from scratch using an ISO file or you can download a prebuilt image for VirtualBox. The second option is easier, and I recommend using that. However, the downside of this is that it is quite large, around 20 GB, and can only be used for 90 days, after which it expires. This time should be enough for most purposes, however. If your needs go beyond the 90-day period, you can manually install Windows 10 on VirtualBox. There are a lot of tutorials available on the internet for this purpose. </p>
			<p>Let's go with the prebuilt option for this chapter. Use the following link to download the prebuilt image: <a href="http://ebay.co.uk">https://developer.microsoft.com/en-us/windows/downloads/virtual-machines/</a>.</p>
			<p>Let's look at how to use this in VirtualBox:</p>
			<ol>
				<li value="1">Once you have downloaded the Windows 10 VirtualBox image, go to VirtualBox and click on <strong class="bold">Add</strong>. </li>
				<li>A dialog box will open; select the Windows 10 image you just downloaded. <p>If you performed the steps properly, your Windows 10 should be up and running now. The VirtualBox interface for virtual Windows should look like this:</p></li>
			</ol>
			<div>
				<div id="_idContainer020" class="IMG---Figure">
					<img src="image/B14788_02_05.jpg" alt="Figure 2.5 – Windows virtual machine&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.5 – Windows virtual machine</p>
			<p>The topology of our system will look like this:</p>
			<div>
				<div id="_idContainer021" class="IMG---Figure">
					<img src="image/B14788_02_06.jpg" alt="Figure 2.6 – Host Windows 10 OS&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.6 – Host Windows 10 OS</p>
			<p>Once the virtual OSes are installed, the VirtualBox software will look like this: </p>
			<div>
				<div id="_idContainer022" class="IMG---Figure">
					<img src="image/B14788_02_07.jpg" alt="Figure 2.7 – VirtualBox &#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.7 – VirtualBox </p>
			<p>Until now, we have installed the virtual OSes on our host machines. Next, we will focus on configuring these machines to our liking so we can use them for the remainder of this book. In the next section, we will download and install Python 3 on these virtual machines.</p>
			<h1 id="_idParaDest-58"><a id="_idTextAnchor060"/>Installing Python</h1>
			<p>The <a id="_idTextAnchor061"/>next thing we will need to set up in this chapter is Python. We will be using Python version 3, or <strong class="source-inline">python3</strong>, in this book. Python 3 is a <em class="italic">major</em> version of Python and it is incompatible with the older version 2. To download Python, go to <a href="https://www.python.org/">https://www.python.org/</a> and download the latest version. At the time of writing, Python 3.8 is the recommended version; however, every Python version above 3.2 should be fine for this book. The 64-bit version of Python is recommended. I will be assuming that you are using Windows as the main OS; however, the code mentioned in this book should work on Linux and macOS as well since we will be running virtual machines. </p>
			<h2 id="_idParaDest-59"><a id="_idTextAnchor062"/>Installing Python on Windows</h2>
			<p>The procedure for installing Python on Windows is fairly simple. Open the Windows 10 virtual machine you just installed in the <em class="italic">Installing virtual OSes</em> section. Note that from now on, most of the work will be done on these virtual machines and not the guest OS hosting these virtual machines. During installation, just check the <strong class="bold">Add Python 3.8 to PATH</strong> option (the version number will depend on the version you downloaded) so that you can access Python from anywhere in Command Prompt: </p>
			<div>
				<div id="_idContainer023" class="IMG---Figure">
					<img src="image/B14788_02_08.jpg" alt="Figure 2.8 – Python installation&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption"> Figure 2.8 – Python installation</p>
			<p>Once you've <a id="_idIndexMarker120"/>selected this option highlighted in <em class="italic">Figure 2.8</em>, click on <strong class="bold">Install Now</strong>. Once the installation is complete, close the installation <a id="_idIndexMarker121"/>window and open a terminal/Command Prompt. Inside Command Prompt, just enter the <strong class="source-inline">python</strong> command. You should see the following output in the terminal. The Python shell should be open now:</p>
			<div>
				<div id="_idContainer024" class="IMG---Figure">
					<img src="image/B14788_02_09.jpg" alt="Figure 2.9 – Python shell&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.9 – Python shell</p>
			<p>Now that we've set up Python in Windows, let's move on to the Kali installation and set it up there as well.</p>
			<h2 id="_idParaDest-60"><a id="_idTextAnchor063"/>Installing Python on Kali Linux</h2>
			<p>Most pen <a id="_idIndexMarker122"/>testing OSes come with Python already installed. To check whether <a id="_idIndexMarker123"/>your distribution has Python installed, open Kali and search for <strong class="source-inline">Terminal</strong>. Open terminal and write the following command in the terminal: </p>
			<p class="source-code">python --version</p>
			<p>You should see the following output: </p>
			<div>
				<div id="_idContainer025" class="IMG---Figure">
					<img src="image/B14788_02_10.jpg" alt="Figure 2.10 – Python version&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.10 – Python version</p>
			<p>The preceding result shows that Python version 2 is already installed; however, we need Python 3. Let's check again with the following command: </p>
			<p class="source-code">python3 --version</p>
			<p>You should see the following output: </p>
			<div>
				<div id="_idContainer026" class="IMG---Figure">
					<img src="image/B14788_02_11.jpg" alt="Figure 2.11 – Python 3 version number&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.11 – Python 3 version number</p>
			<p>The preceding screenshot shows that Python 3 is also installed in Kali, so we don't have to install it again.</p>
			<h1 id="_idParaDest-61"><a id="_idTextAnchor064"/>Integrated development environment</h1>
			<p>An IDE is a piece of <a id="_idIndexMarker124"/>software that helps us to write code efficiently. You can write Python script in a notepad as well; however, IDEs provide functionalities that help us to write code easily. There are a lot of options available. We will focus on free IDEs. The best option I found is <strong class="bold">Visual Studio Code</strong> (<strong class="bold">VS Code</strong>), which is completely free. Go ahead and download <a id="_idIndexMarker125"/>VS Code for both virtual OSes, Windows 10 and Kali: <a href="https://code.visualstudio.com/download">https://code.visualstudio.com/download</a>.</p>
			<p>Installation in <a id="_idIndexMarker126"/>Windows is simple: you need to follow the installer. Installation in Linux requires you to download a Debian package file. Open terminal and navigate to the location of the downloaded file. Then, run this command:</p>
			<p class="source-code">sudo dpkg -i /path/to/file</p>
			<p>Here's what it'll look like:</p>
			<div>
				<div id="_idContainer027" class="IMG---Figure">
					<img src="image/B14788_02_12.jpg" alt="Figure 2.12 – VS Code installation in Kali&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.12 – VS Code installation in Kali</p>
			<p>Note that it will prompt you for a password to install. </p>
			<p>Once it is installed, you will have to install the extension. Open VS Code and click on the <strong class="bold">Extensions</strong> tab to the left of VS Code and search for <strong class="source-inline">Python</strong>. It should look like this:</p>
			<div>
				<div id="_idContainer028" class="IMG---Figure">
					<img src="image/B14788_02_13.jpg" alt="Figure 2.13 – Python extension&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.13 – Python extension</p>
			<p>Click on the <strong class="bold">Install</strong> button and it should take a <a id="_idIndexMarker127"/>few seconds to install. Now you have everything almost set up to begin your ethical hacking journey. Until now, we have set up our virtual OS, installed Python on these machines, and installed VS Code with relevant extensions that will help us along our journey. In the next section, we will make some network configurations to help us along. </p>
			<h1 id="_idParaDest-62"><a id="_idTextAnchor065"/>Setting up networking</h1>
			<p>By default, all <a id="_idIndexMarker128"/>virtual machines create a separate virtual interface for networking. This means that the virtual OS devices are in a separate subnet as compared to your host OS. To make sure that all the OSes are in the same subnet, do the following: </p>
			<ol>
				<li value="1">Go to the settings of each virtual machine.</li>
				<li>In the network settings, select <strong class="bold">Bridged Adapter</strong> for the <strong class="bold">Attached to</strong> option. <p>Make sure you do it both for the Windows and the Kali installation: </p></li>
			</ol>
			<div>
				<div id="_idContainer029" class="IMG---Figure">
					<img src="image/B14788_02_14.jpg" alt="Figure 2.14 – Setting the network adapter&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.14 – Setting the network adapter</p>
			<p>Now all your <a id="_idIndexMarker129"/>devices will be in the same subnet. You should be able to ping the Kali installation from the Windows 10 installation.</p>
			<h1 id="_idParaDest-63"><a id="_idTextAnchor066"/>Updating Kali</h1>
			<p>Before proceeding, it is a <a id="_idIndexMarker130"/>good idea to update Kali so that everything is up to date. Kali can be updated with the following commands: </p>
			<p class="source-code">sudo apt-get update</p>
			<p class="source-code">sudo apt-get upgrade </p>
			<p>The update process will take some time as it will update all repositories. </p>
			<h1 id="_idParaDest-64"><a id="_idTextAnchor067"/>Using virtual environments</h1>
			<p>Python has a very neat feature <a id="_idIndexMarker131"/>called virtual environments. Using these virtual environments, you can keep track of dependencies of different Python projects and keep different projects separate from the main environment. </p>
			<p>Let's create a new folder in Kali where all our project files will be present: </p>
			<ol>
				<li value="1">Open your Kali home directory and create a new folder called <strong class="source-inline">python-hacking</strong>. All our future work will be done here. </li>
				<li>Open this folder in VS Code: <div id="_idContainer030" class="IMG---Figure"><img src="image/B14788_02_15.jpg" alt="Figure 2.15 – Folder structure inside VS Code&#13;&#10;"/></div><p class="figure-caption">Figure 2.15 – Folder structure inside VS Code</p></li>
				<li>Inside the <strong class="source-inline">python-hacking</strong> folder, create a new folder called <strong class="source-inline">m1-hello-world</strong>. Here we will test our virtual environment. Inside the <strong class="source-inline">m1-hello-world</strong> folder, create a new file called <strong class="source-inline">main.py</strong>.</li>
				<li>Check whether the Python package manager, <strong class="source-inline">pip</strong>, is installed properly in Kali using the following command in terminal:<p class="source-code"><strong class="bold">pip3 –version</strong></p><p>You should see the following output:</p><div id="_idContainer031" class="IMG---Figure"><img src="image/B14788_02_16.jpg" alt="Figure 2.16 – pip not installed&#13;&#10;"/></div><p class="figure-caption">Figure 2.16 – pip not installed</p></li>
				<li>If you see an output similar to the preceding one, it means that <strong class="source-inline">pip</strong> is not installed on the system. To install <strong class="source-inline">pip</strong>, run the following command. Make sure that the system is updated:<p class="source-code"><strong class="bold">sudo apt install python3-pip</strong></p><p>Once <strong class="source-inline">pip</strong> is installed properly, the output will be like this:</p><div id="_idContainer032" class="IMG---Figure"><img src="image/B14788_02_17.jpg" alt="Figure 2.17 – pip installation&#13;&#10;"/></div><p class="figure-caption">Figure 2.17 – pip installation</p><p>Also install <strong class="source-inline">pip3</strong> in Windows if it doesn't exist already. </p></li>
				<li>Now open the <strong class="source-inline">main.py</strong> file and write some Python code. We will just use the following code. To open a terminal in VS Code, press <em class="italic">Ctrl</em> + <em class="italic">`</em>.</li>
				<li>Now we will install a <a id="_idIndexMarker132"/>Python virtual environment module. Run the following command to install it:<p class="source-code"><strong class="bold">apt-get install python3-venv</strong></p></li>
				<li>Once the Python virtual environment module is installed, we can create a <strong class="source-inline">virtual-env</strong> folder by simply running the following command in the terminal:<p class="source-code"><strong class="bold">python3 -m venv my-virtualenv</strong></p></li>
				<li>If the command runs successfully, you will see a new folder created with the name <strong class="source-inline">my-virtualenv</strong>. This folder contains a Python environment that is isolated from the system environment. To enable this environment, run the following command:<p class="source-code"><strong class="bold">source my-virtualenv/bin/activate</strong></p><p>It'll look like the output in <em class="italic">Figure 2.18</em>:</p></li>
			</ol>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/B14788_02_18.jpg" alt="Figure 2.18 – Activating an environment&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.18 – Activating an environment</p>
			<p>Once the <a id="_idIndexMarker133"/>environment is activated, you will see that the environment name, <strong class="source-inline">my-virtualenv</strong>, is shown at the start of every terminal line. Now every package you install using <strong class="source-inline">pip</strong> in this shell will be installed only in this environment and will be isolated from the main environment. </p>
			<p>Write the following code in the <strong class="source-inline">python</strong> file to test whether everything is working properly:</p>
			<p class="source-code">if __name__ == "__main__":</p>
			<p class="source-code">print("Hello world")</p>
			<p>You should see the following:</p>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/B14788_02_19.jpg" alt="Figure 2.19 – Sample Python script&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.19 – Sample Python script</p>
			<p>To run it, use the following command:</p>
			<p class="source-code">python3 main.py</p>
			<p>You should see the following:</p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/B14788_02_20.jpg" alt="Figure 2.20 – Running the Python script&#13;&#10;"/>
				</div>
			</div>
			<p class="figure-caption">Figure 2.20 – Running the Python script</p>
			<p>If you see the <a id="_idIndexMarker134"/>output <strong class="source-inline">hello world</strong> displayed, it means everything is installed properly.</p>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor068"/>Summary</h1>
			<p>Let's summarize what we did in this chapter. We started with downloading and installing virtual OSes on our host machine. Then we configured Python in our system, which we will use throughout the rest of the book. Then we configured our network for virtual machines, and at the end of this chapter, we learned how to use virtual environments in Python. These will be very helpful in later chapters when we want to create distributable binaries from our code. In the next chapter, we will cover an introduction to networking and how it can be used for ethical hacking. </p>
		</div>
	</body></html>