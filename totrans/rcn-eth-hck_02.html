<html><head></head><body>
		<div id="_idContainer071">
			<h1 id="_idParaDest-25" class="chapter-number"><a id="_idTextAnchor024"/>2</h1>
			<h1 id="_idParaDest-26"><a id="_idTextAnchor025"/>Setting Up a Reconnaissance Lab</h1>
			<p>Learning about various cybersecurity topics is always exciting as there are so many new technologies and content that are quite interesting, especially using various tools and techniques to discover sensitive details on vulnerable systems and applications. However, obtaining sensitive details about systems such as their operating systems, known vulnerabilities, open service ports, and running services requires the ethical hacker to send specially crafted probes to the target. To put it simply, the ethical hacker can create a script or use an automated software-based scanning tool to send probes and analyze the responses to determine whether security vulnerabilities exist on the target. However, scanning is illegal and should not be performed on any system without obtaining legal permission from the <span class="No-Break">necessary authorities.</span></p>
			<p>As an aspiring or seasoned ethical hacker, it’s important to set up your own lab environment as it enables you to perform intrusive security testing on your own devices, without worrying about causing harm or damage to someone <span class="No-Break">else’s systems.</span></p>
			<p>During this chapter, you will learn how to set up and build your personal lab environment to learn reconnaissance techniques and hone your skills as a cybersecurity professional. You will learn how to deploy a hypervisor to create virtual machines and implement virtual networking. Additionally, you’ll learn how to get both Kali Linux and Trace Labs OSINT virtual machines up and running. Lastly, you will learn how to set up both a vulnerable web application and server to learn active reconnaissance safely on your personal lab. Active reconnaissance requires the ethical hacker to perform various types of scans on a target that are considered to be intrusive and illegal due to the type of information that can be collected about <span class="No-Break">the target.</span></p>
			<p>In this chapter, we will cover the <span class="No-Break">following topics:</span></p>
			<ul>
				<li>Lab overview <span class="No-Break">and technologies</span></li>
				<li>Setting up a hypervisor and <span class="No-Break">virtual networking</span></li>
				<li>Deploying <span class="No-Break">Kali Linux</span></li>
				<li>Deploying an OSINT <span class="No-Break">virtual machine</span></li>
				<li>Implementing <span class="No-Break">vulnerable systems</span></li>
			</ul>
			<p>Let’s <span class="No-Break">dive in!</span></p>
			<h1 id="_idParaDest-27"><a id="_idTextAnchor026"/>Technical requirements</h1>
			<p>To follow along with the exercises in this chapter, please ensure that you have met the following hardware and <span class="No-Break">software requirements:</span></p>
			<ul>
				<li>Oracle VM <span class="No-Break">VirtualBox: </span><a href="https://www.virtualbox.org/"><span class="No-Break">https://www.virtualbox.org/</span></a></li>
				<li>Oracle VM VirtualBox Extension <span class="No-Break">Pack: </span><a href="https://www.virtualbox.org/wiki/Downloads"><span class="No-Break">https://www.virtualbox.org/wiki/Downloads</span></a></li>
				<li><span class="No-Break">7-zip: </span><a href="https://www.7-zip.org"><span class="No-Break">https://www.7-zip.org</span></a></li>
				<li>Kali Linux <span class="No-Break">2022.4: </span><a href="https://www.kali.org/get-kali/"><span class="No-Break">https://www.kali.org/get-kali/</span></a></li>
				<li>Trace Labs OSINT VM <span class="No-Break">2022.1: </span><a href="https://www.tracelabs.org/initiatives/osint-vm"><span class="No-Break">https://www.tracelabs.org/initiatives/osint-vm</span></a></li>
				<li><span class="No-Break">Vagrant: </span><a href="https://www.vagrantup.com/"><span class="No-Break">https://www.vagrantup.com/</span></a></li>
				<li>OWASP Juice <span class="No-Break">Shop: </span><a href="https://owasp.org/www-project-juice-shop/"><span class="No-Break">https://owasp.org/www-project-juice-shop/</span></a></li>
				<li>Metasploitable <span class="No-Break">3: </span><a href="https://app.vagrantup.com/rapid7/boxes/metasploitable3-win2k8"><span class="No-Break">https://app.vagrantup.com/rapid7/boxes/metasploitable3-win2k8</span></a></li>
			</ul>
			<h1 id="_idParaDest-28"><a id="_idTextAnchor027"/>Lab overview and technologies</h1>
			<p>Building a personal lab environment enables you to explore and improve your technical skills without the <a id="_idIndexMarker101"/>need to acquire expensive hardware or pay for a subscription service. A personal lab environment provides a lot of scalability and flexibility options such as enabling you to add and remove systems as needed based on your learning objectives and goals. For instance, by leveraging the power of virtualization technologies, you can create an entire virtual network with multiple virtual machines running on your personal computer without any hidden expenses or need for physical <span class="No-Break">hardware components.</span></p>
			<p>To better understand the components that are needed for our lab environment, let’s take a look at the role and function of each <span class="No-Break">major component:</span></p>
			<ul>
				<li><strong class="bold">Hypervisor</strong> – The hypervisor will enable you to create virtualized environments <a id="_idIndexMarker102"/>for installing and running multiple <a id="_idIndexMarker103"/>operating systems simultaneously on top of your existing hardware <a id="_idIndexMarker104"/>on your personal computer. In the lab environment, <strong class="bold">Oracle VM VirtualBox</strong> will be the preferred hypervisor as it’s free and works with many host operating systems <span class="No-Break">and hardware.</span></li>
				<li><strong class="bold">Virtual networking</strong> – The hypervisor <a id="_idIndexMarker105"/>contains virtual <a id="_idIndexMarker106"/>networking <a id="_idIndexMarker107"/>components such as a <strong class="bold">virtual Switch</strong> (<strong class="bold">vSwitch</strong>) and <strong class="bold">virtual Network Interface Card</strong> (<strong class="bold">vNIC</strong>), which <a id="_idIndexMarker108"/>enables a virtual machine to intercommunicate with other virtual machines on the same hypervisor and systems on the <span class="No-Break">physical network.</span></li>
				<li><strong class="bold">Attacker machine</strong> – The attacker machine(s) will be used to perform passive and active <a id="_idIndexMarker109"/>reconnaissance <a id="_idIndexMarker110"/>and scanning techniques. We’ll use <strong class="bold">Kali Linux 2022.4</strong> (not Kali Linux Purple) and <strong class="bold">Trace Labs OSINT VM</strong> as these are free and <a id="_idIndexMarker111"/>contain all the necessary tools you’ll need to learn and <a id="_idIndexMarker112"/>perform reconnaissance <span class="No-Break">and scanning.</span></li>
				<li><strong class="bold">Vulnerable server</strong> – To perform active reconnaissance and scanning on a target, a vulnerable server is <a id="_idIndexMarker113"/>needed within the <a id="_idIndexMarker114"/>lab environment. The preferred choice will be <strong class="bold">Metasploitable 3 Windows VM</strong> as it’s designed for learning about ethical hacking and <span class="No-Break">penetration testing.</span></li>
				<li><strong class="bold">Vulnerable web application</strong> – To safely perform active reconnaissance on a web <a id="_idIndexMarker115"/>application, we’ll set up <strong class="bold">OWASP Juice Shop</strong>, a vulnerable web application that’s <a id="_idIndexMarker116"/>designed to help cybersecurity professionals better understand the <strong class="bold">OWASP Top 10: 2021 Web Application Security Risks</strong> in <span class="No-Break">the industry.</span></li>
			</ul>
			<p>The following diagram <a id="_idIndexMarker117"/>shows the lab topology that will be built and run on your <span class="No-Break">personal computer:</span></p>
			<div>
				<div id="_idContainer013" class="IMG---Figure">
					<img src="image/Figure_2.01_B19448.jpg" alt="Figure 2.1 – Lab infrastructure"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.1 – Lab infrastructure</p>
			<p>The hypervisor will be installed on your host operating system, which enables you to create virtual machines. Kali Linux, Trace Labs OSINT VM, and Metasploitable 3 Windows VM will run as virtual machines on the hypervisor when needed. Additionally, the hypervisor will assign vNICs to each virtual machine to interface with the virtual and physical networks via vSwitches. The <strong class="bold">PentestNet</strong> (<strong class="source-inline">172.30.1.0/24</strong>) is a virtually isolated network between <a id="_idIndexMarker118"/>Kali Linux and the Metasploitable 3 Windows VM machines that will be strictly used for active reconnaissance. However, Kali Linux and the Trace Labs OSINT VM will be connected to <span class="No-Break">the internet.</span></p>
			<p>In the next section, you will learn how to set up the hypervisor and virtual network environments on <span class="No-Break">your computer.</span></p>
			<h1 id="_idParaDest-29"><a id="_idTextAnchor028"/>Setting up a hypervisor and virtual networking</h1>
			<p>There are many <a id="_idIndexMarker119"/>hypervisors that are available in the industry; however, we’ll <a id="_idIndexMarker120"/>be using Oracle VM VirtualBox as it’s free and simple to use while containing all the important features and components needed for our lab environment. In this section, you will learn how to set up a hypervisor and <span class="No-Break">virtual networking.</span></p>
			<p>Before getting started, please ensure your system meets the <span class="No-Break">following requirements:</span></p>
			<ul>
				<li>Ensure the <strong class="bold">VT-x</strong>/<strong class="bold">AMD-V</strong> feature is supported on <span class="No-Break">your processor</span></li>
				<li>Ensure the virtualization feature is enabled on the processor via <span class="No-Break">the BIOS/UEFI</span></li>
			</ul>
			<p>Most modern processors support VT-x (Intel) or AMD-V (AMD), a technology that enables the host operating system and applications to leverage the virtualization features of the <strong class="bold">Central Processing Unit</strong> (<strong class="bold">CPU</strong>). However, some computer vendors do not enable the <a id="_idIndexMarker121"/>operating system to leverage the virtualization <a id="_idIndexMarker122"/>feature of the processor. Hence, it’s important to manually <a id="_idIndexMarker123"/>access the BIOS/UEFI and ensure virtualization is enabled under the processor menu, or else the hypervisor may not work <span class="No-Break">as expected.</span></p>
			<h2 id="_idParaDest-30"><a id="_idTextAnchor029"/>Part 1 – setting up the hypervisor</h2>
			<p>To get started with <a id="_idIndexMarker124"/>setting up the hypervisor on your host operating system, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Firstly, to download the <strong class="bold">Oracle VM VirtualBox</strong> application, go to <a href="https://www.virtualbox.org/">https://www.virtualbox.org/</a> and click on <strong class="bold">Download VirtualBox</strong>, as <span class="No-Break">shown here:</span></li>
			</ol>
			<div>
				<div id="_idContainer014" class="IMG---Figure">
					<img src="image/Figure_2.02_B19448.jpg" alt="Figure 2.2 – VirtualBox website"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.2 – VirtualBox website</p>
			<ol>
				<li value="2">Next, you’ll be <a id="_idIndexMarker125"/>redirected to the <strong class="bold">Downloads</strong> page at <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a>. Click on <strong class="bold">Windows hosts</strong> to download the VirtualBox 7.0.4 platform package on <span class="No-Break">your computer:</span></li>
			</ol>
			<div>
				<div id="_idContainer015" class="IMG---Figure">
					<img src="image/Figure_2.03_B19448.jpg" alt="Figure 2.3 – VirtualBox platform packages"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.3 – VirtualBox platform packages</p>
			<ol>
				<li value="3">Once the platform package has been downloaded, scroll down on the same <strong class="bold">Downloads</strong> page to the <strong class="bold">VirtualBox 7.0.4 Oracle VM VirtualBox Extension Pack</strong> section and click on <strong class="bold">All supported platforms</strong> to download the extension pack onto <span class="No-Break">your system:</span></li>
			</ol>
			<div>
				<div id="_idContainer016" class="IMG---Figure">
					<img src="image/Figure_2.04_B19448.jpg" alt="Figure 2.4 – VirtualBox extension pack"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.4 – VirtualBox extension pack</p>
			<ol>
				<li value="4">Next, install the Oracle VM VirtualBox platform package that was downloaded during <em class="italic">Step 2</em>. During the <a id="_idIndexMarker126"/>installation process, use the default setting by the installer to complete <span class="No-Break">this step.</span></li>
				<li>Next, to install the VirtualBox 7.0.4 Oracle VM VirtualBox Extension Pack, right-click on the package and select <strong class="bold">Open With</strong> &gt; <strong class="bold">VirtualBox Manager</strong>. Accept the user agreement and proceed with <span class="No-Break">the installation.</span></li>
			</ol>
			<p>At this point, both VirtualBox Manager and VirtualBox Extension Pack are installed on the host operating system of your computer. Next, you will create the <em class="italic">PentestNet</em> virtual network using the networking capabilities <span class="No-Break">of VirtualBox.</span></p>
			<h2 id="_idParaDest-31"><a id="_idTextAnchor030"/>Part 2 – creating a virtual network</h2>
			<p>The <em class="italic">PentestNet</em> virtual network will enable Kali Linux to communicate with the Metasploitable 3 Windows <a id="_idIndexMarker127"/>VM within our lab environment. To get started with this exercise, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>On your Windows host operating system, open the <span class="No-Break">Command Prompt.</span></li>
				<li>Next, use the following commands to change the working directory to the installation <a id="_idIndexMarker128"/>location of VirtualBox and create a <strong class="bold">Dynamic Host Configuration Protocol</strong> (<strong class="bold">DHCP</strong>) server within <span class="No-Break">VirtualBox Manager:</span><pre class="source-code">
C:\Users\Glen&gt; <strong class="bold">cd C:\Program Files\Oracle\VirtualBox</strong></pre><pre class="source-code">
C:\Program Files\Oracle\VirtualBox&gt; <strong class="bold">vboxmanage dhcpserver add --network=PentestNet --server-ip=172.30.1.1 --lower-ip=172.30.1.20 --upper-ip=172.30.1.50 --netmask=255.255.255.0 --enable</strong></pre></li>
			</ol>
			<p>The following snippet shows the result of executing the preceding commands on the Windows <span class="No-Break">Command Prompt:</span></p>
			<div>
				<div id="_idContainer017" class="IMG---Figure">
					<img src="image/Figure_2.05_B19448.jpg" alt="Figure 2.5 – Configuring virtual networking"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.5 – Configuring virtual networking</p>
			<p>Once the commands are executed correctly, the <em class="italic">PentestNet</em> virtual network will be automatically <a id="_idIndexMarker129"/>created and VirtualBox Manager will enable us to connect any virtual machine on it and receive an IP address from the virtual <span class="No-Break">DHCP server.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">To learn more <a id="_idIndexMarker130"/>about VirtualBox networking commands, please <span class="No-Break">see </span><a href="https://www.virtualbox.org/manual/ch06.html"><span class="No-Break">https://www.virtualbox.org/manual/ch06.html</span></a><span class="No-Break">.</span></p>
			<p>Having completed this section, you have learned how to set up a hypervisor and create a virtual network using Oracle VM VirtualBox. Next, you will learn how to both deploy and get up and running with Kali Linux as a <span class="No-Break">virtual machine.</span></p>
			<h1 id="_idParaDest-32"><a id="_idTextAnchor031"/>Deploying Kali Linux</h1>
			<p>Kali Linux is the most popular <a id="_idIndexMarker131"/>Linux-based penetration testing operating system within the cybersecurity industry. It contains all the essential tools an ethical hacker and <a id="_idIndexMarker132"/>penetration tester would need to discover and exploit security vulnerabilities on systems, networks, <span class="No-Break">and applications.</span></p>
			<h2 id="_idParaDest-33"><a id="_idTextAnchor032"/>Part 1 – setting up Kali Linux as a virtual machine</h2>
			<p>To get started <a id="_idIndexMarker133"/>with deploying Kali Linux as a virtual <a id="_idIndexMarker134"/>machine, use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Firstly, go to the official Kali Linux website at <a href="https://www.kali.org/get-kali/">https://www.kali.org/get-kali/</a> and click on <strong class="bold">Virtual Machines</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer018" class="IMG---Figure">
					<img src="image/Figure_2.06_B19448.jpg" alt="Figure 2.6 – Kali Linux download page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.6 – Kali Linux download page</p>
			<ol>
				<li value="2">Next, click on <strong class="bold">VirtualBox 64</strong> to download the Kali Linux VirtualBox file, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer019" class="IMG---Figure">
					<img src="image/Figure_2.07_B19448.jpg" alt="Figure 2.7 – Kali Linux virtual file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.7 – Kali Linux virtual file</p>
			<p>This will be a compressed (zipped) file that contains the Kali Linux virtual hard disk and setup <a id="_idIndexMarker135"/>configurations and enables us <a id="_idIndexMarker136"/>to easily import it into <span class="No-Break">VirtualBox Manager.</span></p>
			<ol>
				<li value="3">After downloading the Kali Linux VirtualBox file, you will need an unzipping application such as <strong class="bold">7-Zip</strong> to extract the contents of the downloaded file. You can <a id="_idIndexMarker137"/>download 7-Zip from <a href="https://www.7-zip.org/">https://www.7-zip.org/</a> and <span class="No-Break">install it.</span></li>
				<li>Next, right-click on the Kali Linux zipped file and select <strong class="bold">Show more options</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer020" class="IMG---Figure">
					<img src="image/Figure_2.08_B19448.jpg" alt="Figure 2.8 – Displaying more options"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.8 – Displaying more options</p>
			<ol>
				<li value="5">Next, select <strong class="bold">7-Zip</strong> &gt; <strong class="bold">Extract Here</strong> to <a id="_idIndexMarker138"/>extract the contents <a id="_idIndexMarker139"/>within the present <span class="No-Break">working directory:</span></li>
			</ol>
			<div>
				<div id="_idContainer021" class="IMG---Figure">
					<img src="image/Figure_2.09_B19448.jpg" alt="Figure 2.9 – 7-Zip extract options"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.9 – 7-Zip extract options</p>
			<p>Once the extract process begins, the following window will appear showing the status <span class="No-Break">until completion:</span></p>
			<div>
				<div id="_idContainer022" class="IMG---Figure">
					<img src="image/Figure_2.10_B19448.jpg" alt="Figure 2.10 – Extraction status window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.10 – Extraction status window</p>
			<p>Once the <a id="_idIndexMarker140"/>extraction is completed, the <a id="_idIndexMarker141"/>contents will be available within the <span class="No-Break">same directory.</span></p>
			<ol>
				<li value="6">Next, open the <strong class="bold">VirtualBox Manager</strong> application, and click on <strong class="bold">Machine</strong> &gt; <strong class="bold">Add…</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer023" class="IMG---Figure">
					<img src="image/Figure_2.11_B19448.jpg" alt="Figure 2.11 – Adding a new virtual machine"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.11 – Adding a new virtual machine</p>
			<ol>
				<li value="7">A new window will appear. Navigate to the location of the extracted folder, select the <strong class="bold">kali-linux-2022.4-virtualbox-amd64</strong> file, and click on <strong class="bold">Open</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer024" class="IMG---Figure">
					<img src="image/Figure_2.12_B19448.jpg" alt="Figure 2.12 – Selecting the virtual machine file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.12 – Selecting the virtual machine file</p>
			<p>Once you’ve <a id="_idIndexMarker142"/>clicked on <strong class="bold">Open</strong>, the Kali Linux virtual <a id="_idIndexMarker143"/>machine will automatically be imported into <span class="No-Break">VirtualBox Manager.</span></p>
			<ol>
				<li value="8">Next, we need to assign one network adapter to our Kali Linux virtual machine for internet connectivity and another to access the <em class="italic">PentestNet</em> virtual network. Select the Kali Linux virtual machine and click <strong class="bold">Settings</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer025" class="IMG---Figure">
					<img src="image/Figure_2.13_B19448.jpg" alt="Figure 2.13 – Virtual machine settings"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.13 – Virtual machine settings</p>
			<ol>
				<li value="9">Next, select <a id="_idIndexMarker144"/>the <strong class="bold">Network</strong> category and <a id="_idIndexMarker145"/>use the following configurations for <span class="No-Break"><strong class="bold">Adapter 1</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Enable Network Adapter</strong>: Check the box <span class="No-Break">to enable</span></li><li><strong class="bold">Attached to</strong>: <span class="No-Break"><strong class="bold">Bridged Adapter</strong></span></li><li><strong class="bold">Name</strong>: Select the physical network adapter that is connected to <span class="No-Break">the internet</span></li><li><strong class="bold">Cable Connected</strong>: Yes – check <span class="No-Break">the box</span></li></ul></li>
			</ol>
			<p>The following snippet shows the configurations of <span class="No-Break"><strong class="bold">Adapter 1</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer026" class="IMG---Figure">
					<img src="image/Figure_2.14_B19448.jpg" alt="Figure 2.14 – Network Adapter 1 settings"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.14 – Network Adapter 1 settings</p>
			<ol>
				<li value="10">Next, select <strong class="bold">Adapter 2</strong> and <a id="_idIndexMarker146"/>use the <span class="No-Break">following </span><span class="No-Break"><a id="_idIndexMarker147"/></span><span class="No-Break">configurations:</span><ul><li><strong class="bold">Enable Network Adapter</strong>: Check the box <span class="No-Break">to enable</span></li><li><strong class="bold">Attached to</strong>: <span class="No-Break"><strong class="bold">Internal Network</strong></span></li><li><strong class="bold">Name</strong>: Manually type <strong class="source-inline">PentestNet</strong> into <span class="No-Break">the field</span></li><li><strong class="bold">Cable Connected</strong>: Yes – check <span class="No-Break">the box</span></li><li><strong class="bold">Promiscuous Mode</strong>: <span class="No-Break"><strong class="bold">Allow All</strong></span></li></ul></li>
			</ol>
			<p>The following snippet shows the configurations of <span class="No-Break"><strong class="bold">Adapter 2</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer027" class="IMG---Figure">
					<img src="image/Figure_2.15_B19448.jpg" alt="Figure 2.15 – Configuring Adapter 2"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.15 – Configuring Adapter 2</p>
			<ol>
				<li value="11">Lastly, click on <strong class="bold">OK</strong> to <a id="_idIndexMarker148"/>save the configurations <a id="_idIndexMarker149"/>of the <span class="No-Break">virtual machine.</span></li>
			</ol>
			<h2 id="_idParaDest-34"><a id="_idTextAnchor033"/>Part 2 – getting started with Kali Linux</h2>
			<p>In my years of experience in deploying Kali Linux as a virtual machine, sometimes there’s no internet connectivity when it’s connected to both an IPv4 and IPv6 network. Therefore, we’ll <a id="_idIndexMarker150"/>need to disable IPv6 within Kali Linux to bypass this issue for our future exercises. Additionally, it’s good practice to change the default user credentials, and verify whether <strong class="bold">Domain Name System</strong> (<strong class="bold">DNS</strong>) is working as expected <a id="_idIndexMarker151"/>and there’s internet connectivity on the <span class="No-Break">virtual machine.</span></p>
			<p>To get started with this exercise, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Let’s power on the Kali Linux virtual machine; select <strong class="bold">Kali Linux</strong> and click on <strong class="bold">Start</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer028" class="IMG---Figure">
					<img src="image/Figure_2.16_B19448.jpg" alt="Figure 2.16 – Booting Kali Linux"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.16 – Booting Kali Linux</p>
			<ol>
				<li value="2">Next, to log in <a id="_idIndexMarker152"/>to Kali Linux, use the default user credentials of <strong class="source-inline">kali</strong> for both <strong class="bold">Username</strong> and <strong class="bold">Password</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer029" class="IMG---Figure">
					<img src="image/Figure_2.17_B19448.jpg" alt="Figure 2.17 – Login interface"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.17 – Login interface</p>
			<ol>
				<li value="3">Once you’re logged in, the display of the guest operating system (Kali Linux) may not automatically scale to fit your monitor’s resolution. To automatically scale the display, select <strong class="bold">View</strong> and toggle with <strong class="bold">Auto-resize Guest Display</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer030" class="IMG---Figure">
					<img src="image/Figure_2.18_B19448.jpg" alt="Figure 2.18 – Scaling the display"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.18 – Scaling the display</p>
			<p>After toggling <a id="_idIndexMarker153"/>with the <strong class="bold">Auto-resize Guest Display</strong> option, the display will automatically scale to fit your monitor’s resolution onward, even <span class="No-Break">after reboots.</span></p>
			<ol>
				<li value="4">Next, to disable IPv6 on Kali Linux, click on the Kali Linux icon in the top-left corner to open the menu and select the <strong class="bold">Settings</strong> icon, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/Figure_2.19_B19448.jpg" alt="Figure 2.19 – Kali Linux menu"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.19 – Kali Linux menu</p>
			<p>As shown in <a id="_idIndexMarker154"/>the preceding snippet, the pre-installed tools are categorized based on the phases of ethical hacking and <span class="No-Break">penetration testing.</span></p>
			<ol>
				<li value="5">When the <strong class="bold">Settings</strong> menu appears, click on <strong class="bold">Advanced Network Configuration</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/Figure_2.20_B19448.jpg" alt="Figure 2.20 – Settings menu"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.20 – Settings menu</p>
			<ol>
				<li value="6">Next, the <strong class="bold">Network Connections</strong> window will appear; select <strong class="bold">Wired connection 1</strong> and <a id="_idIndexMarker155"/>click the <em class="italic">gear</em> icon as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/Figure_2.21_B19448.jpg" alt="Figure 2.21 – Network connections window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.21 – Network connections window</p>
			<p>If you recall on the virtual machine settings of Kali Linux, <strong class="bold">Adapter 1</strong> is connected to the physical network with the internet connection, hence we selected <strong class="bold">Wired connection 1</strong>, as these are the same <span class="No-Break">network interfaces.</span></p>
			<ol>
				<li value="7">Next, the <strong class="bold">Editing Wired connection 1</strong> window will appear; select the <strong class="bold">IPv6 Settings</strong> tab, change <strong class="bold">Method</strong> to <strong class="bold">Disabled</strong>, and click on <strong class="bold">Save</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/Figure_2.22_B19448.jpg" alt="Figure 2.22 – Disabling IPv6"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.22 – Disabling IPv6</p>
			<ol>
				<li value="8">Next, close <a id="_idIndexMarker156"/>both the <strong class="bold">Network Connections</strong> and <span class="No-Break"><strong class="bold">Settings</strong></span><span class="No-Break"> windows.</span></li>
				<li>Lastly, restart Kali Linux for the changes to take effect. The power options are located in the top-right corner of the Kali Linux <span class="No-Break">user interface.</span></li>
			</ol>
			<h2 id="_idParaDest-35"><a id="_idTextAnchor034"/>Part 3 – changing the password and testing connectivity</h2>
			<p>To get started <a id="_idIndexMarker157"/>with changing the default password and testing <a id="_idIndexMarker158"/>network connectivity, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Firstly, log in to Kali Linux by using the default user <span class="No-Break">credentials (</span><span class="No-Break"><strong class="source-inline">kali</strong></span><span class="No-Break">/</span><span class="No-Break"><strong class="source-inline">kali</strong></span><span class="No-Break">).</span></li>
				<li>Next, click on the Kali Linux icon in the top-left corner to expand the Kali Linux menu and select <strong class="bold">Terminal Emulator</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/Figure_2.23_B19448.jpg" alt="Figure 2.23 – Locating the Terminal"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.23 – Locating the Terminal</p>
			<ol>
				<li value="3">Next, use the following command to change the default password for the <strong class="source-inline">kali</strong> <span class="No-Break">user account:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">passwd</strong></pre></li>
			</ol>
			<p>When you’re entering passwords on a Linux Terminal interface, it’s invisible for security reasons, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer036" class="IMG---Figure">
					<img src="image/Figure_2.24_B19448.jpg" alt="Figure 2.24 – Changing passwords"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.24 – Changing passwords</p>
			<ol>
				<li value="4">Next, use the <a id="_idIndexMarker159"/>following commands to display the IP addresses, <strong class="bold">Media Access Control</strong> (<strong class="bold">MAC</strong>) addresses, and status of the network adapters on <span class="No-Break">Kali Linux:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">ip address</strong></pre></li>
			</ol>
			<p>The following <a id="_idIndexMarker160"/>snippet shows the two network adapters <a id="_idIndexMarker161"/>on Kali Linux – <strong class="source-inline">eth0</strong>, which is connected to the internet, and <strong class="source-inline">eth1</strong>, which is connected to the <em class="italic">PentestNet</em> network on the <span class="No-Break"><strong class="source-inline">172.30.1.0/24</strong></span><span class="No-Break"> subnet:</span></p>
			<div>
				<div id="_idContainer037" class="IMG---Figure">
					<img src="image/Figure_2.25_B19448.jpg" alt="Figure 2.25 – Checking network adapters"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.25 – Checking network adapters</p>
			<p>The <strong class="source-inline">eth0</strong> network adapter should have an IP address from your personal network, while <strong class="source-inline">eth1</strong> is assigned an IP address from the <em class="italic">PentestNet</em> <span class="No-Break">virtual network.</span></p>
			<ol>
				<li value="5">Next, to test DNS resolution and internet connectivity on Kali Linux, use the following <a id="_idIndexMarker162"/>command to send four <strong class="bold">Internet Control Message Protocol</strong> (<strong class="bold">ICMP</strong>) <strong class="bold">echo request</strong> messages to Google’s <span class="No-Break">web server:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">ping www.google.com -c 4</strong></pre></li>
			</ol>
			<p>The following snippet shows that Kali Linux was able to resolve the hostname to an IP address and successfully reach Google’s web server on <span class="No-Break">the internet:</span></p>
			<div>
				<div id="_idContainer038" class="IMG---Figure">
					<img src="image/Figure_2.26_B19448.jpg" alt="Figure 2.26 – Testing internet connectivity"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.26 – Testing internet connectivity</p>
			<ol>
				<li value="6">Next, use the <a id="_idIndexMarker163"/>following commands to update the <a id="_idIndexMarker164"/>package repository list on <span class="No-Break">Kali Linux:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre></li>
			</ol>
			<p>The following snippet shows the execution of the <span class="No-Break">preceding commands:</span></p>
			<div>
				<div id="_idContainer039" class="IMG---Figure">
					<img src="image/Figure_2.27_B19448.jpg" alt="Figure 2.27 – Updating package repository"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.27 – Updating package repository</p>
			<p>Updating the <a id="_idIndexMarker165"/>package repository list on Kali Linux <a id="_idIndexMarker166"/>ensures it will download both the latest software packages and updates from the <span class="No-Break">official sources.</span></p>
			<p>Having completed this section, you have learned how to deploy and set up Kali Linux as a virtual machine. In the next section, you will learn how to set up a dedicated virtual machine for collecting <strong class="bold">Open Source </strong><span class="No-Break"><strong class="bold">Intelligence</strong></span><span class="No-Break"> (</span><span class="No-Break"><strong class="bold">OSINT</strong></span><span class="No-Break">).</span></p>
			<h1 id="_idParaDest-36"><a id="_idTextAnchor035"/>Deploying an OSINT virtual machine</h1>
			<p>The Trace Labs OSINT VM is a customized version of Kali Linux that’s designed for learning and <a id="_idIndexMarker167"/>performing reconnaissance. It has all the essential pre-installed software-based tools an ethical hacker will need to collect information about their targets. In addition, the Trace Labs OSINT VM is free for everyone to download and set up as a virtual machine on <span class="No-Break">a hypervisor.</span></p>
			<h2 id="_idParaDest-37"><a id="_idTextAnchor036"/>Part 1 – setting up OSINT VM</h2>
			<p>To get started <a id="_idIndexMarker168"/>setting up Trace Lab OSINT VM, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Firstly, go to <a href="https://www.tracelabs.org/initiatives/osint-vm">https://www.tracelabs.org/initiatives/osint-vm</a> and click the <strong class="bold">Download OVA</strong> button, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer040" class="IMG---Figure">
					<img src="image/Figure_2.28_B19448.jpg" alt="Figure 2.28 – Trace Labs download page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.28 – Trace Labs download page</p>
			<ol>
				<li value="2">Next, select the <strong class="bold">TL OSINT VM 2022.1 OVA</strong> release file <span class="No-Break">to download:</span></li>
			</ol>
			<div>
				<div id="_idContainer041" class="IMG---Figure">
					<img src="image/Figure_2.29_B19448.jpg" alt="Figure 2.29 – OSINT VM OVA file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.29 – OSINT VM OVA file</p>
			<ol>
				<li value="3">After the OVA file <a id="_idIndexMarker169"/>has been downloaded onto your computer, open <strong class="bold">VirtualBox Manager</strong>, select <strong class="bold">Tools</strong>, and click on <strong class="bold">Import</strong>, as shown in the <span class="No-Break">following screenshot</span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer042" class="IMG---Figure">
					<img src="image/Figure_2.30_B19448.jpg" alt="Figure 2.30 – VirtualBox Manager"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.30 – VirtualBox Manager</p>
			<ol>
				<li value="4">Next, a new window will appear; simply navigate to the location where the <strong class="source-inline">OSINT VM OVA</strong> file is <a id="_idIndexMarker170"/>stored, select it, and click on <strong class="bold">Open</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer043" class="IMG---Figure">
					<img src="image/Figure_2.31_B19448.jpg" alt="Figure 2.31 – OSINT VM OVA file"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.31 – OSINT VM OVA file</p>
			<ol>
				<li value="5">Next, the <strong class="bold">Import Virtual Appliance</strong> window will appear; click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Next</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer044" class="IMG---Figure">
					<img src="image/Figure_2.32_B19448.jpg" alt="Figure 2.32 – Importing the virtual appliance"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.32 – Importing the virtual appliance</p>
			<ol>
				<li value="6">Next, the <a id="_idIndexMarker171"/>configurations window will appear; click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Import</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer045" class="IMG---Figure">
					<img src="image/Figure_2.33_B19448.jpg" alt="Figure 2.33 – Appliance settings window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.33 – Appliance settings window</p>
			<p>Once the import process begins, the following status window <span class="No-Break">will appear:</span></p>
			<div>
				<div id="_idContainer046" class="IMG---Figure">
					<img src="image/Figure_2.34_B19448.jpg" alt="Figure 2.34 – Importing status window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.34 – Importing status window</p>
			<p>After the import process is completed, the OSINT VM will appear within <span class="No-Break">VirtualBox Manager.</span></p>
			<ol>
				<li value="7">Next, let’s connect the OSINT VM to the physical network by bridging the vNIC of the virtual <a id="_idIndexMarker172"/>machine to the physical NIC of your computer. Select the OSINT VM and click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Settings</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer047" class="IMG---Figure">
					<img src="image/Figure_2.35_B19448.jpg" alt="Figure 2.35 – VirtualBox Manager"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.35 – VirtualBox Manager</p>
			<p class="callout-heading">Tip</p>
			<p class="callout">Within the OSINT VM settings, you can increase the allocated memory to the virtual machine. Within the virtual machine, go to <strong class="bold">Settings</strong> &gt; <strong class="bold">System</strong> &gt; <strong class="bold">Motherboard</strong> &gt; <strong class="bold">Base Memory</strong>. If you have additional memory on your host computer, consider increasing the memory allocation to 4,096 MB (4GB) <span class="No-Break">of RAM.</span></p>
			<ol>
				<li value="8">Next, click on <strong class="bold">Network</strong> and use the following settings for <span class="No-Break"><strong class="bold">Adapter 1</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Enable Network Adapter</strong>: Check the box <span class="No-Break">to enable</span></li><li><strong class="bold">Attached to</strong>: <span class="No-Break"><strong class="bold">Bridged Adapter</strong></span></li><li><strong class="bold">Name</strong>: Select the physical network adapter that is connected to <span class="No-Break">the internet</span></li><li><strong class="bold">Cable Connected</strong>: Yes – check <span class="No-Break">the box</span></li></ul></li>
			</ol>
			<p>The following <a id="_idIndexMarker173"/>snippet shows <span class="No-Break">the configurations:</span></p>
			<div>
				<div id="_idContainer048" class="IMG---Figure">
					<img src="image/Figure_2.36_B19448.jpg" alt="Figure 2.36 – Network adapter configurations"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.36 – Network adapter configurations</p>
			<ol>
				<li value="9">Next, click on <strong class="bold">OK</strong> to save the configurations for the <span class="No-Break">OSINT VM.</span></li>
			</ol>
			<h2 id="_idParaDest-38"><a id="_idTextAnchor037"/>Part 2 – getting started and testing connectivity</h2>
			<p>To get started <a id="_idIndexMarker174"/>with OSINT VM, please use the <span class="No-Break">following </span><span class="No-Break"><a id="_idIndexMarker175"/></span><span class="No-Break">steps:</span></p>
			<ol>
				<li>Open <strong class="bold">VirtualBox Manager</strong>, select the TL OSINT VM, and click on <strong class="bold">Start</strong> to power on the <span class="No-Break">virtual machine.</span></li>
				<li>Once the OSINT VM is powered on, log in using <strong class="source-inline">osint</strong> for both <strong class="bold">Username</strong> and <strong class="bold">Password</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer049" class="IMG---Figure">
					<img src="image/Figure_2.37_B19448.jpg" alt="Figure 2.37 – OSINT VM"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.37 – OSINT VM</p>
			<ol>
				<li value="3">Once you’re <a id="_idIndexMarker176"/>logged in, use the steps in the previous <a id="_idIndexMarker177"/>section to disable IPv6 on the OSINT VM and restart for the changes to <span class="No-Break">take effect.</span></li>
				<li>(Optional) To change the default password of the <strong class="source-inline">osint</strong> user account, open the Terminal and use the <span class="No-Break"><strong class="source-inline">passwd</strong></span><span class="No-Break"> command.</span></li>
				<li>Next, open the Terminal and use the following commands to identify the network adapters and their IP addresses, and test connectivity to <span class="No-Break">the internet:</span><pre class="source-code">
osint@osint:~$ <strong class="bold">ip address</strong></pre><pre class="source-code">
osint@osint:~$ <strong class="bold">ping www.google.com -c 4</strong></pre></li>
			</ol>
			<p>The following snippet shows the <span class="No-Break">expected results:</span></p>
			<div>
				<div id="_idContainer050" class="IMG---Figure">
					<img src="image/Figure_2.38_B19448.jpg" alt="Figure 2.38 – OSINT VM connectivity test"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.38 – OSINT VM connectivity test</p>
			<p>As shown in the preceding snippet, the <strong class="source-inline">eth0</strong> network adapter has an IP address from the <a id="_idIndexMarker178"/>DHCP server on the physical network. This IP <a id="_idIndexMarker179"/>address will be different based on your network settings. Additionally, the OSINT VM was able to successfully perform DNS resolution and was able to connect to Google’s web server on <span class="No-Break">the internet.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">Executing some commands on Kali Linux and OSINT VM requires the usage of <strong class="source-inline">sudo</strong> followed by the commands to invoke root privileges, such as <strong class="source-inline">sudo ip address</strong>. To use the root account, use the <strong class="source-inline">sudo su -</strong> command on <span class="No-Break">the Terminal.</span></p>
			<p>Having completed this <a id="_idIndexMarker180"/>section, you have deployed the OSINT VM as <a id="_idIndexMarker181"/>a virtual machine. In the next section, you will learn how to set up a vulnerable web application and server within the <span class="No-Break">lab environment.</span></p>
			<h1 id="_idParaDest-39"><a id="_idTextAnchor038"/>Implementing vulnerable systems</h1>
			<p>In this section, you’ll learn how to set up the OWASP Juice Shop vulnerable application on Kali Linux to <a id="_idIndexMarker182"/>safely learn how to perform active reconnaissance on web applications. Additionally, you will learn how to set up Metasploitable 3 Windows VM as a virtual machine within our <span class="No-Break">lab environment.</span></p>
			<h2 id="_idParaDest-40"><a id="_idTextAnchor039"/>Setting up a vulnerable web application</h2>
			<p>To get started with setting up OWASP Juice Shop <a id="_idIndexMarker183"/>on Kali Linux, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Firstly, power on the Kali Linux virtual machine within <span class="No-Break"><strong class="bold">VirtualBox Manager</strong></span><span class="No-Break">.</span></li>
				<li>Open the Terminal and use the following command to update the package <span class="No-Break">repository list:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre></li>
			</ol>
			<p>The following snippet shows the successful execution of <span class="No-Break">the command:</span></p>
			<div>
				<div id="_idContainer051" class="IMG---Figure">
					<img src="image/Figure_2.39_B19448.jpg" alt="Figure 2.39 – Updating package list"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.39 – Updating package list</p>
			<ol>
				<li value="3">Next, use the following command to install the Docker repository on <span class="No-Break">Kali Linux:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">printf '%s\n' "deb https://download.docker.com/linux/debian bullseye stable" |</strong></pre><pre class="source-code">
<strong class="bold">  sudo tee /etc/apt/sources.list.d/docker-ce.list</strong></pre></li>
			</ol>
			<p>The following snippet shows the preceding command when executed on <span class="No-Break">the Terminal:</span></p>
			<div>
				<div id="_idContainer052" class="IMG---Figure">
					<img src="image/Figure_2.40_B19448.jpg" alt="Figure 2.40 – Adding the Docker repository"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.40 – Adding the Docker repository</p>
			<ol>
				<li value="4">Next, use the <a id="_idIndexMarker184"/>following commands to <a id="_idIndexMarker185"/>import the <strong class="bold">GNU Privacy Guard</strong> (<strong class="bold">GPG</strong>) key on <span class="No-Break">Kali Linux:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">curl -fsSL https://download.docker.com/linux/debian/gpg |</strong></pre><pre class="source-code">
<strong class="bold">  sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/docker-ce-archive-keyring.gpg</strong></pre></li>
			</ol>
			<p>The following snippet shows the execution of the <span class="No-Break">preceding commands:</span></p>
			<div>
				<div id="_idContainer053" class="IMG---Figure">
					<img src="image/Figure_2.41_B19448.jpg" alt="Figure 2.41 – Importing the GPG key"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.41 – Importing the GPG key</p>
			<ol>
				<li value="5">Next, re-update the package repository list on <span class="No-Break">Kali Linux:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre></li>
			</ol>
			<p>The following snippet shows the package list was <span class="No-Break">updated again:</span></p>
			<div>
				<div id="_idContainer054" class="IMG---Figure">
					<img src="image/Figure_2.42_B19448.jpg" alt="Figure 2.42 – Package list updated"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.42 – Package list updated</p>
			<ol>
				<li value="6">Next, use <a id="_idIndexMarker186"/>the following commands to <span class="No-Break">install </span><span class="No-Break"><strong class="source-inline">docker-ce</strong></span><span class="No-Break">:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt install -y docker-ce docker-ce-cli containerd.io</strong></pre></li>
			</ol>
			<p>The following snippet shows the <span class="No-Break">installation process:</span></p>
			<div>
				<div id="_idContainer055" class="IMG---Figure">
					<img src="image/Figure_2.43_B19448.jpg" alt="Figure 2.43 – docker-ce installation"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.43 – docker-ce installation</p>
			<ol>
				<li value="7">Next, use the following commands to pull the OWASP Juice Shop Docker container and install it on <span class="No-Break">Kali Linux:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo docker pull bkimminich/juice-shop</strong></pre></li>
			</ol>
			<p>The following <a id="_idIndexMarker187"/>snippet shows the download and setup process of OWASP <span class="No-Break">Juice Shop:</span></p>
			<div>
				<div id="_idContainer056" class="IMG---Figure">
					<img src="image/Figure_2.44_B19448.jpg" alt="Figure 2.44 – Setting up OWASP Juice Shop"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.44 – Setting up OWASP Juice Shop</p>
			<ol>
				<li value="8">Next, to run the OWASP Juice Shop Docker container, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo docker run --rm -p 3000:3000 bkimminich/juice-shop</strong></pre></li>
			</ol>
			<p>The following snippet shows the execution of the <span class="No-Break">preceding commands:</span></p>
			<div>
				<div id="_idContainer057" class="IMG---Figure">
					<img src="image/Figure_2.45_B19448.jpg" alt="Figure 2.45 – Running OWASP Juice Shop"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.45 – Running OWASP Juice Shop</p>
			<ol>
				<li value="9">Lastly, open <a id="_idIndexMarker188"/>the web browser on Kali Linux and go to <a href="http://localhost:3000/">http://localhost:3000/</a> to view the OWASP Juice Shop web application, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer058" class="IMG---Figure">
					<img src="image/Figure_2.46_B19448.jpg" alt="Figure 2.46 – OWASP Juice Shop web interface"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.46 – OWASP Juice Shop web interface</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">The official instructions <a id="_idIndexMarker189"/>for setting up Docker on Kali Linux can be found <span class="No-Break">at: </span><a href="https://www.kali.org/docs/containers/installing-docker-on-kali/"><span class="No-Break">https://www.kali.org/docs/containers/installing-docker-on-kali/</span></a><span class="No-Break">.</span></p>
			<p>Having completed <a id="_idIndexMarker190"/>this exercise, you have learned how to set up Docker and OWASP Juice Shop on Kali Linux. Next, you will learn how to set up Metasploitable 3 Windows VM in our <span class="No-Break">lab environment.</span></p>
			<h2 id="_idParaDest-41"><a id="_idTextAnchor040"/>Setting up a vulnerable machine</h2>
			<p>To get started on <a id="_idIndexMarker191"/>setting up Metasploitable 3 Windows VM, please use the <span class="No-Break">following steps:</span></p>
			<ol>
				<li>Firstly, you will need to download and install Vagrant, an open source application that enables a user to build and maintain virtual machines and applications. On your host computer, open the web browser and go to <a href="https://developer.hashicorp.com/vagrant/downloads">https://developer.hashicorp.com/vagrant/downloads</a>, then download the <strong class="bold">Vagrant</strong> <strong class="bold">2.3.3 AMD64</strong> version on <span class="No-Break">your computer:</span></li>
			</ol>
			<div>
				<div id="_idContainer059" class="IMG---Figure">
					<img src="image/Figure_2.47_B19448.jpg" alt="Figure 2.47 – Vagrant download page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.47 – Vagrant download page</p>
			<ol>
				<li value="2">After downloading Vagrant, double-click on the installer package to install the application on <a id="_idIndexMarker192"/>your host computer. After the installation is complete, you’ll be prompted to restart your computer for the changes to <span class="No-Break">take effect.</span></li>
				<li>After restarting your computer, open the Windows Command Prompt and use the following commands to reload and install additional <span class="No-Break">Vagrant plugins:</span><pre class="source-code">
C:\Users\Glen&gt; <strong class="bold">vagrant plugin install vagrant-reload</strong></pre><pre class="source-code">
C:\Users\Glen&gt; <strong class="bold">vagrant plugin install vagrant-vbguest</strong></pre></li>
			</ol>
			<p>The following snippet shows the results of running the <span class="No-Break">preceding commands:</span></p>
			<div>
				<div id="_idContainer060" class="IMG---Figure">
					<img src="image/Figure_2.48_B19448.jpg" alt="Figure 2.48 – Installing Vagrant plugins"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.48 – Installing Vagrant plugins</p>
			<ol>
				<li value="4">Next, use the following commands to download the Metasploitable 3 Windows VM files from the <span class="No-Break">Vagrant repository:</span><pre class="source-code">
C:\Users\Glen&gt; <strong class="bold">vagrant box add rapid7/metasploitable3-win2k8</strong></pre></li>
			</ol>
			<p>Ensure you <a id="_idIndexMarker193"/>enter <strong class="source-inline">1</strong> to specify VirtualBox as the provider, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer061" class="IMG---Figure">
					<img src="image/Figure_2.49_B19448.jpg" alt="Figure 2.49 – Selecting the provider type"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.49 – Selecting the provider type</p>
			<p>Vagrant will begin to download the Metasploitable 3 Windows VM files, as shown in the <span class="No-Break">following screenshot:</span></p>
			<div>
				<div id="_idContainer062" class="IMG---Figure">
					<img src="image/Figure_2.50_B19448.jpg" alt="Figure 2.50 – Download status"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.50 – Download status</p>
			<ol>
				<li value="5">Next, open <strong class="bold">Windows Explorer</strong> and navigate to <strong class="source-inline">C:\Users\yourusername\.vagrant.d\boxes</strong>, where you will find the <strong class="source-inline">rapid7-VAGRANTSLASH-metasploitable3-win2k8</strong> folder. Rename the <strong class="source-inline">rapid7-VAGRANTSLASH-metasploitable3-win2k8</strong> folder <span class="No-Break">to </span><span class="No-Break"><strong class="source-inline">metasploitable3-win2k8</strong></span><span class="No-Break">.</span></li>
				<li>Next, on the Windows Command Prompt, use the following commands to change the <a id="_idIndexMarker194"/>working directory and initialize the build configurations for the Metasploitable 3 <span class="No-Break">Windows VM:</span><pre class="source-code">
C:\Users\Glen&gt; <strong class="bold">cd .vagrant.d\boxes</strong></pre><pre class="source-code">
C:\Users\Glen\.vagrant.d\boxes&gt; <strong class="bold">vagrant init metasploitable3-win2k8</strong></pre></li>
				<li>Next, use the following command to start the build process of the <span class="No-Break">virtual machine:</span><pre class="source-code">
C:\Users\Glen\.vagrant.d\boxes&gt; <strong class="bold">vagrant up</strong></pre></li>
			</ol>
			<p>The following snippet shows the <span class="No-Break">build process:</span></p>
			<div>
				<div id="_idContainer063" class="IMG---Figure">
					<img src="image/Figure_2.51_B19448.jpg" alt="Figure 2.51 – Vagrant build process"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.51 – Vagrant build process</p>
			<p class="callout-heading">Important note</p>
			<p class="callout">If the <strong class="source-inline">vagrant up</strong> command gives an error, execute <span class="No-Break">it again.</span></p>
			<p>This process usually takes a few minutes <span class="No-Break">to complete.</span></p>
			<ol>
				<li value="8">Once the <a id="_idIndexMarker195"/>process is completed, open <strong class="bold">VirtualBox Manager</strong>, where you will find the Metasploitable 3 Win VM running in the background. Select the virtual machine and click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Show</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer064" class="IMG---Figure">
					<img src="image/Figure_2.52_B19448.jpg" alt="Figure 2.52 – Metasploitable 3 Windows virtual machine"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.52 – Metasploitable 3 Windows virtual machine</p>
			<ol>
				<li value="9">Once the virtual <a id="_idIndexMarker196"/>machine window appears, click on <strong class="bold">Input</strong> &gt; <strong class="bold">Keyboard</strong> &gt; <strong class="bold">Insert Ctrl-Alt-Del</strong>, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer065" class="IMG---Figure">
					<img src="image/Figure_2.53_B19448.jpg" alt="Figure 2.53 – Boot screen"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.53 – Boot screen</p>
			<ol>
				<li value="10">Next, select the <strong class="bold">Administrator</strong> account and use the default password (<strong class="source-inline">vagrant</strong>) to log in, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer066" class="IMG---Figure">
					<img src="image/Figure_2.54_B19448.jpg" alt="Figure 2.54 – Login window"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.54 – Login window</p>
			<p>Once you’re <a id="_idIndexMarker197"/>logged in, simply close all the windows that appear and do not activate the <span class="No-Break">operating system.</span></p>
			<ol>
				<li value="11">Next, click on the Windows icon in the bottom-left corner and shut down the virtual machine, as shown in the <span class="No-Break">following screenshot:</span></li>
			</ol>
			<div>
				<div id="_idContainer067" class="IMG---Figure">
					<img src="image/Figure_2.55_B19448.jpg" alt="Figure 2.55 – Powering off the virtual machine"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.55 – Powering off the virtual machine</p>
			<ol>
				<li value="12">Once the virtual machine <a id="_idIndexMarker198"/>is powered off, select it and click <span class="No-Break">on </span><span class="No-Break"><strong class="bold">Settings</strong></span><span class="No-Break">:</span></li>
			</ol>
			<div>
				<div id="_idContainer068" class="IMG---Figure">
					<img src="image/Figure_2.56_B19448.jpg" alt="Figure 2.56 – VirtualBox Manager"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.56 – VirtualBox Manager</p>
			<ol>
				<li value="13">Next, select <strong class="bold">Network</strong> and <a id="_idIndexMarker199"/>use the following configurations on <span class="No-Break"><strong class="bold">Adapter 1</strong></span><span class="No-Break">:</span><ul><li><strong class="bold">Enable Network Adapter</strong>: Check the box <span class="No-Break">to enable</span></li><li><strong class="bold">Attached to</strong>: <span class="No-Break"><strong class="bold">Internal Network</strong></span></li><li><strong class="bold">Name</strong>: Manually type <strong class="source-inline">PentestNet</strong> into <span class="No-Break">the field</span></li><li><strong class="bold">Cable Connected</strong>: Yes – check <span class="No-Break">the box</span></li><li><strong class="bold">Promiscuous Mode</strong>: <span class="No-Break"><strong class="bold">Allow All</strong></span></li></ul></li>
			</ol>
			<p>The following snippet shows the configurations of <span class="No-Break"><strong class="bold">Adapter 1</strong></span><span class="No-Break">:</span></p>
			<div>
				<div id="_idContainer069" class="IMG---Figure">
					<img src="image/Figure_2.57_B19448.jpg" alt="Figure 2.57 – Network adapter settings"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.57 – Network adapter settings</p>
			<ol>
				<li value="14">Next, click on <strong class="bold">OK</strong> to save <span class="No-Break">the configurations.</span></li>
				<li>Lastly, power <a id="_idIndexMarker200"/>on and log in to the Metasploitable 3 Win VM with the <strong class="bold">Administrator</strong> user account, open the Command Prompt, and use the <strong class="source-inline">ipconfig</strong> command to verify the virtual machine is assigned an IP address from the <strong class="source-inline">172.30.1.0/24</strong> network, <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer070" class="IMG---Figure">
					<img src="image/Figure_2.58_B19448.jpg" alt="Figure 2.58 – Verifying network connectivity"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 2.58 – Verifying network connectivity</p>
			<ol>
				<li value="16">Lastly, power <a id="_idIndexMarker201"/>off the <span class="No-Break">virtual machine.</span></li>
			</ol>
			<p>Having completed this section, you have learned how to set up the Metasploitable 3 Windows VM as a vulnerable server within the <span class="No-Break">lab environment.</span></p>
			<h1 id="_idParaDest-42"><a id="_idTextAnchor041"/>Summary</h1>
			<p>During the course of this chapter, you have discovered the importance and benefits of building your personal lab environment for learning and gaining hands-on experience when learning about various cybersecurity topics. Additionally, you have learned how to set up a virtualized environment and network, how to deploy Kali Linux and OSINT VM, and how to set up vulnerable systems for <span class="No-Break">security testing.</span></p>
			<p>I hope this chapter has been informative for you and helpful in your journey in the cybersecurity industry. In the next chapter, <em class="italic">Understanding Passive Reconnaissance</em>, you will learn about the fundamentals and importance of using passive reconnaissance techniques to discover organizations’ assets that are exposed on <span class="No-Break">the internet.</span></p>
			<h1 id="_idParaDest-43"><a id="_idTextAnchor042"/>Further reading</h1>
			<ul>
				<li>Kali Linux official <span class="No-Break">documentation: </span><a href="https://www.kali.org/docs/"><span class="No-Break">https://www.kali.org/docs/</span></a></li>
				<li>VirtualBox <span class="No-Break">documentation: </span><a href="https://www.virtualbox.org/wiki/Documentation"><span class="No-Break">https://www.virtualbox.org/wiki/Documentation</span></a></li>
				<li>Trace Labs OSINT VM <span class="No-Break">documentation: </span><a href="https://github.com/tracelabs/tlosint-live/wiki"><span class="No-Break">https://github.com/tracelabs/tlosint-live/wiki</span></a></li>
				<li>OWASP Juice Shop <span class="No-Break">documentation: </span><a href="https://owasp.org/www-project-juice-shop/"><span class="No-Break">https://owasp.org/www-project-juice-shop/</span></a></li>
				<li>Metasploitable 3 <span class="No-Break">documentation: </span><a href="https://github.com/rapid7/metasploitable3/wiki"><span class="No-Break">https://github.com/rapid7/metasploitable3/wiki</span></a></li>
			</ul>
		</div>
	</body></html>