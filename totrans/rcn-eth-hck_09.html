<html><head></head><body>
		<div id="_idContainer394">
			<h1 id="_idParaDest-146" class="chapter-number"><a id="_idTextAnchor145"/>9</h1>
			<h1 id="_idParaDest-147"><a id="_idTextAnchor146"/>Delving into Website Reconnaissance</h1>
			<p>As the internet continues to grow, there are many websites created almost every day by organizations to help reach new and potential customers beyond traditional borders. Threat actors usually perform a lot of reconnaissance to gather as much information as possible and collect intelligence about their targets’ websites and domains. This information is valuable to threat actors in planning future cyber-attacks on a target. As an ethical hacker, it’s important to identify the attack surface and determine how web reconnaissance can be leveraged by real attackers in planning <span class="No-Break">a cyber-attack.</span></p>
			<p>During this chapter, you will learn how to use common tools and techniques to efficiently collect information about a target, such as its IP addresses and sub-domains, discover hidden directories, and identify the attack surface. Furthermore, you will learn how to use web vulnerability scanners to identify web application weaknesses and work with web reconnaissance frameworks to automate the collection and analysis <span class="No-Break">of data.</span></p>
			<p>In this chapter, we will cover the <span class="No-Break">following topics:</span></p>
			<ul>
				<li>Collecting <span class="No-Break">domain information</span></li>
				<li><span class="No-Break">Sub-domain enumeration</span></li>
				<li>Performing <span class="No-Break">directory enumeration</span></li>
				<li>Web <span class="No-Break">application vulnerabilities</span></li>
				<li>Web <span class="No-Break">reconnaissance frameworks</span></li>
			</ul>
			<p>Let’s <span class="No-Break">dive in!</span></p>
			<h1 id="_idParaDest-148"><a id="_idTextAnchor147"/>Technical requirements</h1>
			<p>To follow along with the exercises in this chapter, please ensure that you have met the following hardware and <span class="No-Break">software requirements:</span></p>
			<ul>
				<li>Kali Linux installed – <a href="https://www.kali.org/get-kali/"><span class="No-Break">https://www.kali.org/get-kali/</span></a></li>
			</ul>
			<h1 id="_idParaDest-149"><a id="_idTextAnchor148"/>Collecting domain information</h1>
			<p>As an ethical hacker, collecting the <strong class="bold">Domain Name System</strong> (<strong class="bold">DNS</strong>) information and IP addresses and determining<a id="_idIndexMarker909"/> the backend infrastructure helps you to better understand the attack surface and attack vectors of a target. For instance, if you’re performing an external network penetration test or <strong class="bold">Open Source Intelligence</strong> (<strong class="bold">OSINT</strong>) penetration test on an organization, finding the target’s domain<a id="_idIndexMarker910"/> and website are good starting points. A domain name can lead you to discover the website and the sub-domains and IP addresses assigned to servers owned by <span class="No-Break">the target.</span></p>
			<p>This section focuses on using various tactics and techniques to retrieve the IP addresses, discovering any infrastructure details, and running web technologies on a target’s web server <span class="No-Break">and domain.</span></p>
			<h2 id="_idParaDest-150"><a id="_idTextAnchor149"/>Retrieving IP addresses</h2>
			<p>By retrieving the IP addresses<a id="_idIndexMarker911"/> of a target domain and its sub-domain, ethical hackers are able to map the external network topology and identify potential security vulnerabilities that can be exploited by an attacker to gain unauthorized access. Furthermore, without identifying the IP addresses of a target, ethical hackers won’t be able to simulate real-world cyber-attacks to determine the security posture of <span class="No-Break">an organization.</span></p>
			<p>To get started with identifying the IP addresses for a domain name, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> virtual machine and ensure it has <span class="No-Break">internet connectivity.</span></li>
				<li>Next, open the Terminal and use the <strong class="source-inline">host &lt;domain-name&gt;</strong> command to retrieve the IPv4 and IPv6 addresses of a target, <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer356" class="IMG---Figure">
					<img src="image/Figure_9.01_B19448.jpg" alt="Figure 9.1 – host command"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.1 – host command</p>
			<p>A domain name<a id="_idIndexMarker912"/> is simply a namespace on a network such as the internet; however, the IP addresses that are associated with a domain or host indicate the network location of the target. As shown in the preceding snippet, performing an IP lookup on the addresses can reveal the geo-location of the hosting servers <span class="No-Break">or target.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">To identify<a id="_idIndexMarker913"/> the geo-location of the network address, go to <a href="https://whatismyipaddress.com/ip-lookup">https://whatismyipaddress.com/ip-lookup</a> to perform an IP lookup on any public <span class="No-Break">IP address.</span></p>
			<ol>
				<li value="3">Next, the <strong class="bold">nslookup</strong> tool is used to troubleshoot <strong class="bold">DNS</strong> issues and retrieve the IP<a id="_idIndexMarker914"/> addresses<a id="_idIndexMarker915"/> of a hostname. To get the IP addresses of a domain name, use the <strong class="source-inline">nslookup &lt;domain-name&gt; &lt;DNS-server&gt;</strong> command <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer357" class="IMG---Figure">
					<img src="image/Figure_9.02_B19448.jpg" alt="Figure 9.2 – The nslookup tool"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.2 – The nslookup tool</p>
			<p>As shown in the preceding<a id="_idIndexMarker916"/> snippet, <strong class="source-inline">nslookup</strong> sent the DNS queries to Google’s DNS server at <strong class="source-inline">8.8.8.8</strong> and the response provides the IP addresses shown in <span class="No-Break">the output.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">There are different DNS records, such as <strong class="source-inline">A</strong>, which resolves a hostname to an IPv4 address; <strong class="source-inline">AAAA</strong>, which resolves a hostname to an IPv6 address; <strong class="source-inline">MX</strong>, which specifies the mail exchange server; <strong class="source-inline">CNAME</strong>, which specifies a canonical name or alias for a domain; <strong class="source-inline">PTR</strong>, which resolves an IP address to a hostname; <strong class="source-inline">TXT</strong>, which specifies a text record; <strong class="source-inline">RP</strong>, which specifies the person responsible for the domain; and <strong class="source-inline">NS</strong>, which specifies the authoritative name server for <span class="No-Break">the domain.</span></p>
			<ol>
				<li value="4">The <strong class="bold">dig</strong> utility on Linux-based systems enables you to query a specific DNS server using the <strong class="source-inline">@</strong> syntax, then followed by the domain name. To retrieve the DNS records for a domain name, use the <strong class="source-inline">dig @&lt;dns-server&gt; &lt;target-domain&gt;</strong> command <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer358" class="IMG---Figure">
					<img src="image/Figure_9.03_B19448.jpg" alt="Figure 9.3 – The dig command"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.3 – The dig command</p>
			<p>To retrieve a specific DNS record<a id="_idIndexMarker917"/> type, simply append the <strong class="source-inline">A</strong>, <strong class="source-inline">AAAA</strong> <strong class="source-inline">MX</strong>, <strong class="source-inline">NS</strong>, <strong class="source-inline">PTR</strong>, <strong class="source-inline">CNAME</strong>, or <strong class="source-inline">RP</strong> record type at the end of the command <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer359" class="IMG---Figure">
					<img src="image/Figure_9.04_B19448.jpg" alt="Figure 9.4 – Retrieving specific DNS records"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.4 – Retrieving specific DNS records</p>
			<p>As shown in the preceding snippet, <strong class="source-inline">dig</strong> was able to retrieve the name servers for the <span class="No-Break">domain name.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">If an attacker is able to compromise the name servers of a domain, the hacker can manipulate the DNS records stored on the server. This enables the attacker to perform various types of DNS-based and <span class="No-Break">spoofing attacks.</span></p>
			<ol>
				<li value="5">Next, the <strong class="bold">dnsrecon</strong> tool enables you to automate the retrieval<a id="_idIndexMarker918"/> of public DNS records for a domain; use the <strong class="source-inline">dnsrecon -d &lt;domain-name&gt; -n &lt;dns-server&gt;</strong> command <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer360" class="IMG---Figure">
					<img src="image/Figure_9.05_B19448.jpg" alt="Figure 9.5 – The dnsrecon tool"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.5 – The dnsrecon tool</p>
			<p>Having completed<a id="_idIndexMarker919"/> this exercise, you have learned how to retrieve the IP addresses and DNS records of a target domain. Next, you’ll learn how to identify the target’s <span class="No-Break">domain infrastructure.</span></p>
			<h2 id="_idParaDest-151"><a id="_idTextAnchor150"/>Identifying domain infrastructure</h2>
			<p>Identifying the domain infrastructure<a id="_idIndexMarker920"/> helps ethical hackers to map the attack surface of a target. This enables the ethical hacker to determine what systems and applications are in use, and this data can be leveraged to identify security vulnerabilities and attack vectors for delivering an exploit to <span class="No-Break">the target.</span></p>
			<p>To get started with identifying domain infrastructure, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>It’s always recommended to implement a <strong class="bold">Web Application Firewall</strong> (<strong class="bold">WAF</strong>) in front of a web application<a id="_idIndexMarker921"/> server to prevent web application attacks. The <strong class="bold">WAFW00F</strong> tool helps ethical hackers to determine whether a target<a id="_idIndexMarker922"/> website is behind a WAF, so use the <strong class="source-inline">wafw00f &lt;target&gt;</strong> command <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer361" class="IMG---Figure">
					<img src="image/Figure_9.06_B19448.jpg" alt="Figure 9.6 – Detecting WAFs"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.6 – Detecting WAFs</p>
			<p>If the target is behind a WAF, you will not be able<a id="_idIndexMarker923"/> to retrieve the real public IP address of the target; instead, you’ll obtain the address of the WAF application due to the reverse proxy feature. In addition, the WAF will analyze all web traffic going to the targeted website and block any potentially <span class="No-Break">malicious traffic.</span></p>
			<ol>
				<li value="2">The <strong class="bold">WHOIS</strong> tool enables you to retrieve the public <a id="_idIndexMarker924"/>domain registrar records of the target; use the <strong class="source-inline">whois &lt;domain&gt;</strong> command <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer362" class="IMG---Figure">
					<img src="image/Figure_9.07_B19448.jpg" alt="Figure 9.7 – Collecting the domain registration details"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.7 – Collecting the domain registration details</p>
			<p>Sometimes, an organization may not pay for additional privacy protection when registering a domain name, and its sensitive information will be publicly available, which can be leveraged by threat actors in planning future attacks such as <span class="No-Break">social engineering.</span></p>
			<ol>
				<li value="3">Next, the site report tool on <strong class="bold">Netcraft</strong> helps ethical hackers to profile<a id="_idIndexMarker925"/> the infrastructure and technologies<a id="_idIndexMarker926"/> of a website on the internet. Go to <a href="https://sitereport.netcraft.com/">https://sitereport.netcraft.com/</a> and enter a domain <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer363" class="IMG---Figure">
					<img src="image/Figure_9.08_B19448.jpg" alt="Figure 9.8 – Netcraft"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.8 – Netcraft</p>
			<p>After a few seconds, Netcraft will provide<a id="_idIndexMarker927"/> the network and hosting details <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer364" class="IMG---Figure">
					<img src="image/Figure_9.09_B19448.jpg" alt="Figure 9.9 – Network infrastructure details"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.9 – Network infrastructure details</p>
			<p>Additionally, Netcraft provides the IP block information that can be used to geo-locate the physical server that’s hosting the domain and website <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer365" class="IMG---Figure">
					<img src="image/Figure_9.10_B19448.jpg" alt="Figure 9.10 – Network block details"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.10 – Network block details</p>
			<ol>
				<li value="4">Next, <strong class="bold">DNS Dumpster</strong> is an online tool that performs<a id="_idIndexMarker928"/> extensive DNS reconnaissance, research, and analysis<a id="_idIndexMarker929"/> on a targeted domain. Go to <a href="https://dnsdumpster.com/">https://dnsdumpster.com/</a> and enter a domain<a id="_idIndexMarker930"/> <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer366" class="IMG---Figure">
					<img src="image/Figure_9.11_B19448.jpg" alt="Figure 9.11 – DNS Dumpster"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.11 – DNS Dumpster</p>
			<p>After a few seconds, DNS Dumpster provides all the DNS records and name servers for the domain <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer367" class="IMG---Figure">
					<img src="image/Figure_9.12_B19448.jpg" alt="Figure 9.12 – DNS information"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.12 – DNS information</p>
			<p>Additionally, DNS Dumpster<a id="_idIndexMarker931"/> automatically creates a map of the domain to provide insights on the available DNS records, IP addresses, and name servers <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer368" class="IMG---Figure">
					<img src="image/Figure_9.13_B19448.jpg" alt="Figure 9.13 – Mapping of a domain"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.13 – Mapping of a domain</p>
			<p>Furthermore, DNS Dumpster<a id="_idIndexMarker932"/> provides a graphical representation showing the backend infrastructure and how the records are mapped to each other in <span class="No-Break">the domain:</span></p>
			<div>
				<div id="_idContainer369" class="IMG---Figure">
					<img src="image/Figure_9.14_B19448.jpg" alt="Figure 9.14 – DNS infrastructure graph"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.14 – DNS infrastructure graph</p>
			<p>As shown in the preceding snippet, the visual map helps ethical hackers to better understand how the DNS records of a domain are associated with IP addresses and whether<a id="_idIndexMarker933"/> there are any unintentionally exposed systems on the internet that are owned by <span class="No-Break">the target.</span></p>
			<h2 id="_idParaDest-152"><a id="_idTextAnchor151"/>Identifying web technologies</h2>
			<p>As an ethical hacker, it’s important<a id="_idIndexMarker934"/> to identify whether a website has any security vulnerabilities that can be exploited by a real attacker. Sometimes, an underlying web application or <strong class="bold">Content Management System</strong> (<strong class="bold">CMS</strong>) may be outdated or contain vulnerable plugins, which can be exploited to gain unauthorized<a id="_idIndexMarker935"/> access, steal data or manipulate the backend database. Additionally, this helps the ethical hacker better understand the web technologies that are running on the target and improve the attack plan to ensure the best suitable tactics and techniques are used to deliver the attack to <span class="No-Break">the target.</span></p>
			<p>While there are many web technologies in the industry, ethical hackers can leverage knowledge, experience, and research to find known security vulnerabilities in a web application just as a real attacker would. However, the intention is to discover security vulnerabilities before a real cyber-attack occurs and provide recommendations on mitigation and countermeasures to prevent future attacks <span class="No-Break">and threats.</span></p>
			<p>To get started with identifying the technologies of a website, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>The <strong class="bold">WhatWeb</strong> tools help ethical hackers<a id="_idIndexMarker936"/> to profile the web <a id="_idIndexMarker937"/>technologies that are found on a target website. To identify web technologies, use the <strong class="source-inline">whatweb &lt;domain&gt;</strong> command within the Terminal <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer370" class="IMG---Figure">
					<img src="image/Figure_9.15_B19448.jpg" alt="Figure 9.15 – Identifying web technologies"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.15 – Identifying web technologies</p>
			<p>As shown in the preceding snippet, WhatWeb was able to retrieve specific web application and technology versions, which can be used to identify security vulnerabilities on <span class="No-Break">the target.</span></p>
			<ol>
				<li value="3">Next, <strong class="bold">Wappalyzer</strong> is a browser add-on for identifying<a id="_idIndexMarker938"/> web technologies<a id="_idIndexMarker939"/> on a website. Open the <strong class="bold">Mozilla Firefox</strong> web browser, go to <a href="https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/">https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/</a>, and click on <strong class="bold">Add to Firefox</strong> to install the plugin <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer371" class="IMG---Figure">
					<img src="image/Figure_9.16_B19448.jpg" alt="Figure 9.16 – Wappalyzer"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.16 – Wappalyzer</p>
			<p>After the add-on is installed on Mozilla Firefox, the Wappalyzer icon will automatically appear on the <span class="No-Break">browser’s toolbar.</span></p>
			<p>Wappalyzer will analyze<a id="_idIndexMarker940"/> the web applications on any website that you visit to identify the web technologies; simply click on the Wappalyzer icon on the browser’s toolbar to view the website details <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer372" class="IMG---Figure">
					<img src="image/Figure_9.17_B19448.jpg" alt="Figure 9.17 – Wappalyzer details"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.17 – Wappalyzer details</p>
			<ol>
				<li value="4">Next, <strong class="bold">BuiltWith</strong> is another Mozilla Firefox<a id="_idIndexMarker941"/> add-on<a id="_idIndexMarker942"/> for profiling<a id="_idIndexMarker943"/> the web technologies of a website. Go to <a href="https://addons.mozilla.org/en-US/firefox/addon/builtwith/">https://addons.mozilla.org/en-US/firefox/addon/builtwith/</a> and click on <strong class="bold">Add to Firefox</strong> <span class="No-Break">as shown:</span></li>
			</ol>
			<div>
				<div id="_idContainer373" class="IMG---Figure">
					<img src="image/Figure_9.18_B19448.jpg" alt="Figure 9.18 – BuiltWith add-on page"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.18 – BuiltWith add-on page</p>
			<p>After the BuiltWith add-on is installed<a id="_idIndexMarker944"/> on Firefox, its icon will automatically appear on the browser’s toolbar. Simply visit any website and click on the BuiltWith icon to view the web technologies of the website <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer374" class="IMG---Figure">
					<img src="image/Figure_9.19_B19448.jpg" alt="Figure 9.19 – BuiltWith details"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.19 – BuiltWith details</p>
			<p>These add-ons are very useful and conveniently and quickly identify the technologies that are running<a id="_idIndexMarker945"/> on any web application or server that you visit and should be within your arsenal <span class="No-Break">of tools.</span></p>
			<p>Having completed this section, you have learned how to use various tools and techniques to collect information about a targeted domain name and website. Next, you will learn how to enumerate the sub-domains of <span class="No-Break">a target.</span></p>
			<h1 id="_idParaDest-153"><a id="_idTextAnchor152"/>Sub-domain enumeration</h1>
			<p>Threat actors such as hackers<a id="_idIndexMarker946"/> use both passive and active reconnaissance techniques to identify the sub-domains of a target. Usually, an organization will register a domain name (parent domain) and create additional sub-domains, where each sub-domain points to a different server that’s owned by the target. For instance, <a href="http://domain.local">domain.local</a> points to the IP address of the web server and <a href="http://mail.domain.local">mail.domain.local</a> points to the IP address of the email server. Therefore, enumerating the sub-domains and resolving their IP addresses helps attackers to identify security vulnerabilities and the attack surface of additional systems owned by <span class="No-Break">the target.</span></p>
			<p>Sometimes, a sub-domain is used to host a test environment for users that are misconfigured, running a vulnerable<a id="_idIndexMarker947"/> or less secure application, and connected to the internal corporate network. If an attacker were to compromise this system, they would be able to pivot their attacks through the compromised system to the internal network of the target. Furthermore, the sub-domains of a target are not always configured with the same security policies and posture, which can further lead to having different security vulnerabilities that can be exploited in multiple ways to gain unauthorized access. As an ethical hacker, it’s important to identify the sub-domains of an organization to better determine its security posture and identify <span class="No-Break">hidden vulnerabilities.</span></p>
			<h2 id="_idParaDest-154"><a id="_idTextAnchor153"/>Discovering sub-domains using Sublist3r</h2>
			<p><strong class="bold">Sublist3r</strong> is a popular tool that<a id="_idIndexMarker948"/> collects and analyzes<a id="_idIndexMarker949"/> OSINT to identify<a id="_idIndexMarker950"/> the sub-domains of <span class="No-Break">a target.</span></p>
			<p>To get started with using Sublist3r for sub-domain enumeration, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and use the following commands to update the software package <span class="No-Break">repository list:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre></li>
				<li>Next, download the Sublist3r setup files using the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">git clone https://github.com/huntergregal/Sublist3r.git</strong></pre></li>
			</ol>
			<p>The preceding GitHub repository is a working branch from the official repository at <a href="https://github.com/aboul3la/Sublist3r">https://github.com/aboul3la/Sublist3r</a>. Unfortunately, the packages from the official GitHub repository no longer work at the time <span class="No-Break">of writing.</span></p>
			<ol>
				<li value="4">Next, use the following commands to change the present working directory to the <strong class="source-inline">Sublist3r</strong> folder and install <span class="No-Break">its requirements:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">cd Sublist3r</strong></pre><pre class="source-code">
kali@kali:~/Sublist3r$ <strong class="bold">sudo pip install -r requirements.txt</strong></pre></li>
			</ol>
			<p>The following snippet<a id="_idIndexMarker951"/> shows the execution of the <span class="No-Break">preceding</span><span class="No-Break"><a id="_idIndexMarker952"/></span><span class="No-Break"> commands:</span></p>
			<div>
				<div id="_idContainer375" class="IMG---Figure">
					<img src="image/Figure_9.20_B19448.jpg" alt="Figure 9.20 – Installing the requirements"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.20 – Installing the requirements</p>
			<ol>
				<li value="5">Next, use the following commands to perform sub-domain enumeration on <span class="No-Break">a domain:</span><pre class="source-code">
kali@kali:~/Sublist3r$ <strong class="bold">python ./sublist3r.py -d &lt;domain-name&gt;</strong></pre></li>
			</ol>
			<p>The following snippet shows Sublist3r has searched through multiple data sources and discovered the sub-domains of <span class="No-Break">the target:</span></p>
			<div>
				<div id="_idContainer376" class="IMG---Figure">
					<img src="image/Figure_9.21_B19448.jpg" alt="Figure 9.21 – Discovering sub-domains"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.21 – Discovering sub-domains</p>
			<p>Having completed<a id="_idIndexMarker953"/> this exercise, you have learned how to set<a id="_idIndexMarker954"/> up and work with Sublist3r to enumerate the sub-domains of a target. Next, you will learn how to use theHarvester to find <span class="No-Break">additional sub-domains.</span></p>
			<h2 id="_idParaDest-155"><a id="_idTextAnchor154"/>Finding sub-domains with theHarvester</h2>
			<p><strong class="bold">theHarvester</strong> is a popular tool used by ethical hackers<a id="_idIndexMarker955"/> during passive<a id="_idIndexMarker956"/> reconnaissance<a id="_idIndexMarker957"/> to collect email addresses, hostnames, IP addresses, and sub-domains of a target from multiple online <span class="No-Break">data sources.</span></p>
			<p>To get started with using theHarvester to find sub-domains, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and use the following commands to view available options and syntax <span class="No-Break">for theHarvester:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">theHarvester -h</strong></pre></li>
			</ol>
			<p>The following snippet shows the various forms of syntax and <span class="No-Break">their usage:</span></p>
			<div>
				<div id="_idContainer377" class="IMG---Figure">
					<img src="image/Figure_9.22_B19448.jpg" alt="Figure 9.22 – theHarvester options"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.22 – theHarvester options</p>
			<ol>
				<li value="3">To gather<a id="_idIndexMarker958"/> the sub-domains, use the <strong class="source-inline">theHarvester -d &lt;target&gt; -b &lt;source&gt;</strong> command<a id="_idIndexMarker959"/> <span class="No-Break">as follows:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">theHarvester -d microsoft.com -b dnsdumpster</strong></pre></li>
			</ol>
			<p>The <strong class="source-inline">source</strong> specifies the data source to use when collecting information about the target. The following snippet shows that theHarvester was able to collect sub-domains and their IP addresses for <span class="No-Break">the target:</span></p>
			<div>
				<div id="_idContainer378" class="IMG---Figure">
					<img src="image/Figure_9.23_B19448.jpg" alt="Figure 9.23 – Sub-domains"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.23 – Sub-domains</p>
			<p>As an ethical hacker, ensure<a id="_idIndexMarker960"/> you use different data sources when collecting<a id="_idIndexMarker961"/> intelligence on a target, as some data sources will provide more information than others. Having completed this exercise, you have learned how to use theHarvester to collect sub-domains and their IP addresses. Next, you will learn how to use Knockpy to aggressively <span class="No-Break">enumerate sub-domains.</span></p>
			<h2 id="_idParaDest-156"><a id="_idTextAnchor155"/>Collecting sub-domains using Knockpy</h2>
			<p><strong class="bold">Knockpy</strong> is a passive, sub-domain<a id="_idIndexMarker962"/> enumeration tool that leverages<a id="_idIndexMarker963"/> OSINT and performs<a id="_idIndexMarker964"/> dictionary scanning to identify sub-domains of <span class="No-Break">a target.</span></p>
			<p>To get started with using Knockpy for sub-domain enumeration, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and use the following command to update the software package repository list and <span class="No-Break">install </span><span class="No-Break"><strong class="bold">Knockpy</strong></span><span class="No-Break">:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt-get install knockpy</strong></pre></li>
				<li>Next, to perform sub-domain enumeration on a target, use the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">knockpy &lt;domain&gt;</strong></pre></li>
			</ol>
			<p>The following snippet shows the Knockpy results when tested with a public <span class="No-Break">domain name:</span></p>
			<div>
				<div id="_idContainer379" class="IMG---Figure">
					<img src="image/Figure_9.24_B19448.jpg" alt="Figure 9.24 – Knockpy results"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.24 – Knockpy results</p>
			<p>As shown in the preceding snippet, Knockpy was able to retrieve IP addresses, hostnames, and server<a id="_idIndexMarker965"/> information about each sub-domain. Additionally, the HTTP status code<a id="_idIndexMarker966"/> indicates whether the resource was found (<strong class="source-inline">200</strong>) <span class="No-Break">or not.</span></p>
			<p>Having completed this section, you have learned how to set up and use various tools to efficiently identify the sub-domains of a target. In the next section, you will learn how to discover hidden directories on a <span class="No-Break">web application.</span></p>
			<h1 id="_idParaDest-157"><a id="_idTextAnchor156"/>Performing directory enumeration</h1>
			<p>Sometimes, web administrators<a id="_idIndexMarker967"/> and IT professionals unintentionally expose sensitive and restricted directories and files on their web applications and servers on the internet. If a threat actor were to find confidential data within a hidden directory on a target’s web server, it can be leveraged to plan and perform future attacks on <span class="No-Break">the target.</span></p>
			<p>This section focuses on using various<a id="_idIndexMarker968"/> tools and techniques to discover hidden directories and files as an <span class="No-Break">ethical hacker.</span></p>
			<h2 id="_idParaDest-158"><a id="_idTextAnchor157"/>Using GoBuster to find hidden directories</h2>
			<p><strong class="bold">GoBuster</strong> is a brute-force tool used<a id="_idIndexMarker969"/> to identify<a id="_idIndexMarker970"/> the sub-domains, directories, files, and hostnames<a id="_idIndexMarker971"/> of <span class="No-Break">a target.</span></p>
			<p>To get started with using GoBuster to find hidden directories and files of a domain, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and use the following commands to update the software package repository list and <span class="No-Break">install </span><span class="No-Break"><strong class="bold">GoBuster</strong></span><span class="No-Break">:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt install gobuster</strong></pre></li>
				<li>To perform DNS sub-domain enumeration on a target, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">gobuster dns -d microsoft.com -w /usr/share/wordlists/dirb/common.txt</strong></pre></li>
			</ol>
			<p><strong class="source-inline">dns</strong> is a syntax-specific DNS brute-force mode, and <strong class="source-inline">-w</strong> specifies an <span class="No-Break">offline wordlist.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">Within Kali Linux, there are many offline wordlists within the <strong class="source-inline">/usr/share/wordlists/</strong> directory that are commonly used for brute-force attacks and enumerating directories. Furthermore, you can download additional wordlist files <span class="No-Break">from </span><a href="https://github.com/danielmiessler/SecLists"><span class="No-Break">https://github.com/danielmiessler/SecLists</span></a><span class="No-Break">.</span></p>
			<p>The following snippet shows GoBuster enumerating the sub-domains of <span class="No-Break">a target:</span></p>
			<div>
				<div id="_idContainer380" class="IMG---Figure">
					<img src="image/Figure_9.25_B19448.jpg" alt="Figure 9.25 – Sub-domain enumeration"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.25 – Sub-domain enumeration</p>
			<ol>
				<li value="4">Next, to discover<a id="_idIndexMarker972"/> the hidden directories<a id="_idIndexMarker973"/> of a domain/website, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">gobuster dir -u https://github.com/ -w /usr/share/wordlists/dirb/common.txt</strong></pre></li>
			</ol>
			<p>The following snippet shows various directories that were found and a relevant HTTP <span class="No-Break">status code:</span></p>
			<div>
				<div id="_idContainer381" class="IMG---Figure">
					<img src="image/Figure_9.26_B19448.jpg" alt="Figure 9.26 – Directories"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.26 – Directories</p>
			<p>HTTP status code 301 means the resource<a id="_idIndexMarker974"/> has permanently changed its location and a new <strong class="bold">Uniform Resource Locator</strong> (<strong class="bold">URL</strong>) is given in the response from the web server. Additionally, the HTTP status code <strong class="source-inline">200</strong> means the resource was found, which is good for <span class="No-Break">ethical hackers.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">To learn more about HTTP status codes<a id="_idIndexMarker975"/> and their meaning, please <span class="No-Break">see </span><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status"><span class="No-Break">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</span></a><span class="No-Break">.</span></p>
			<p>As you saw in the preceding snippet, Gobuster performs an aggressive directory and file enumeration on a target. This tool can help ethical hackers identify sensitive and unintentionally<a id="_idIndexMarker976"/> exposed resources<a id="_idIndexMarker977"/> on a <span class="No-Break">web server.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">To learn more about GoBuster, please <span class="No-Break">see </span><a href="https://github.com/OJ/gobuster"><span class="No-Break">https://github.com/OJ/gobuster</span></a><span class="No-Break">.</span></p>
			<p>Having completed this exercise, you have learned how to use GoBuster to discover the sub-domains and hidden directories of a target. Next, you will learn how to perform directory enumeration <span class="No-Break">using Dirb.</span></p>
			<h2 id="_idParaDest-159"><a id="_idTextAnchor158"/>Directory enumeration with DIRB</h2>
			<p><strong class="bold">DIRB</strong> is a popular web application scanner that looks<a id="_idIndexMarker978"/> for hidden directories and files<a id="_idIndexMarker979"/> on a web server. DIRB uses a wordlist to perform a dictionary-based attack on a target, querying each word from the wordlist to identify <span class="No-Break">web resources.</span></p>
			<p>To get started with using DIRB<a id="_idIndexMarker980"/> to identify hidden web directories and files, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and run the <strong class="bold">OWASP JuiceShop</strong> Docker container using the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo docker run --rm -p 3000:3000 bkimminich/juice-shop</strong></pre></li>
				<li>Next, open a new Terminal window<a id="_idIndexMarker981"/> and use the following commands to perform a directory-based brute-force on the <strong class="bold">Open Web Application Security Project</strong> (<strong class="bold">OWASP</strong>) JuiceShop <span class="No-Break">web application:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">dirb http://127.0.0.1:3000/</strong></pre></li>
			</ol>
			<p>The following snippet shows hidden directories that were found on the target <span class="No-Break">using DIRB:</span></p>
			<div>
				<div id="_idContainer382" class="IMG---Figure">
					<img src="image/Figure_9.27_B19448.jpg" alt="Figure 9.27 – Directory enumeration"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.27 – Directory enumeration</p>
			<p>It’s important to manually visit every URL to determine whether the hidden resource is valuable and can be leveraged when planning future attacks on the target. For instance, the <strong class="source-inline">/assets</strong> directory may contain sensitive information such as the IP addresses of additional systems owned by the target, and the <strong class="source-inline">/robots.txt</strong> resource may contain<a id="_idIndexMarker982"/> <span class="No-Break">additional</span><span class="No-Break"><a id="_idIndexMarker983"/></span><span class="No-Break"> sub-directories.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">To learn more<a id="_idIndexMarker984"/> about DIRB, please <span class="No-Break">see </span><a href="https://www.kali.org/tools/dirb/"><span class="No-Break">https://www.kali.org/tools/dirb/</span></a><span class="No-Break">.</span></p>
			<p>Having completed this section, you have learned how to use various tools to assist when discovering hidden directories and files on a web server of a target. In the next section, you will learn how to get started with discovering <span class="No-Break">web vulnerabilities.</span></p>
			<h1 id="_idParaDest-160"><a id="_idTextAnchor159"/>Web application vulnerability</h1>
			<p>As an ethical hacker, it’s essential to understand<a id="_idIndexMarker985"/> web application security and the OWASP <strong class="bold">Top 10</strong> web application security<a id="_idIndexMarker986"/> risks. Web applications are special software that runs on a server to host websites and are easily accessible using a standard web browser. For instance, when you access<a id="_idIndexMarker987"/> your favorite search engine, your web browser creates a <strong class="bold">Hypertext Transfer Protocol</strong> (<strong class="bold">HTTP</strong>) or <strong class="bold">HTTP Secure</strong> (<strong class="bold">HTTPS</strong>) <strong class="source-inline">GET</strong> message to request the resource on the destination web<a id="_idIndexMarker988"/> server (the internet search engine). Once the web application receives the HTTP <strong class="source-inline">GET</strong> message (the request), it processes and provides a response with the requested data back to the <span class="No-Break">web browser:</span></p>
			<p>The following diagram <a id="_idIndexMarker989"/>shows the communication between the browser and a <span class="No-Break">web application:</span></p>
			<div>
				<div id="_idContainer383" class="IMG---Figure">
					<img src="image/Figure_9.28_B19448.jpg" alt="Figure 9.28 – Web communication"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.28 – Web communication</p>
			<p>Web applications are created with lots of code by developers. However, many web servers on the internet run outdated and insecure web applications that can be exploited by potential hackers. As with any software, web applications need to be regularly tested by developers and ethical hackers to identify any hidden security vulnerabilities and implement secure coding practices to resolve any issues. OWASP regularly updates its Top 10 web application security risks to help cybersecurity professionals, researchers, and software developers to better understand how to find security weaknesses using thorough security testing and recommends how to resolve these security flaws before a real hacker is able to discover and <span class="No-Break">exploit them.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">This book focuses on reconnaissance for ethical hackers and does not cover exploitation. If you’re interested in learning <a id="_idIndexMarker990"/>more about web application security risks, please visit the OWASP website <span class="No-Break">at </span><a href="https://owasp.org/www-project-top-ten/"><span class="No-Break">https://owasp.org/www-project-top-ten/</span></a><span class="No-Break">.</span></p>
			<p>There are many commercial web application scanners in the industry that work well. However, <strong class="bold">Nikto</strong> is a free web application scanner<a id="_idIndexMarker991"/> that’s designed to perform fast security checks on a target web application or server, which we will <span class="No-Break">use here.</span></p>
			<p>To get started with using Nikto to discover web application<a id="_idIndexMarker992"/> vulnerabilities, please use<a id="_idIndexMarker993"/> the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and execute the following commands to run the <strong class="bold">OWASP JuiceShop</strong> <span class="No-Break">Docker container:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo docker run --rm -p 3000:3000 bkimminich/juice-shop</strong></pre></li>
				<li>Next, open another Terminal and perform a web vulnerability scan on the OWASP JuiceShop web application using the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">nikto -h http://127.0.0.1:3000</strong></pre></li>
			</ol>
			<p>As shown in the following snippet, Nikto is able to identify common web application security vulnerabilities in <span class="No-Break">the target:</span></p>
			<div>
				<div id="_idContainer384" class="IMG---Figure">
					<img src="image/Figure_9.29_B19448.jpg" alt="Figure 9.29 – Nikto"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.29 – Nikto</p>
			<p>It’s important<a id="_idIndexMarker994"/> to thoroughly research each bullet point (<strong class="source-inline">+</strong>) listed in the Nikto results<a id="_idIndexMarker995"/> as it will provide brief details<a id="_idIndexMarker996"/> on a potential security issue. Additionally, Nikto provides <strong class="bold">Open Sourced Vulnerability Database</strong> (<strong class="bold">OSVDB</strong>) references for known <span class="No-Break">security vulnerabilities.</span></p>
			<p class="callout-heading">Tip</p>
			<p class="callout">For a list of web<a id="_idIndexMarker997"/> vulnerability scanning tools, please <span class="No-Break">see </span><a href="https://owasp.org/www-community/Vulnerability_Scanning_Tools"><span class="No-Break">https://owasp.org/www-community/Vulnerability_Scanning_Tools</span></a><span class="No-Break">.</span></p>
			<p>Having completed this section, you have learned how to use Nikto, a free web application vulnerability scanner, to identify common security flaws on a web application. Next, you will learn how to automate your web reconnaissance techniques using <span class="No-Break">reconnaissance frameworks.</span></p>
			<h1 id="_idParaDest-161"><a id="_idTextAnchor160"/>Web reconnaissance frameworks</h1>
			<p>Web reconnaissance frameworks help ethical <a id="_idIndexMarker998"/>hackers and penetration testers to simply automate many manual tasks, such as running multiple tools one after another, then collecting and consolidating the results to improve the analysis phase. With a reconnaissance framework, an ethical hacker can set the target domain and let the framework take care of thoroughly collecting information using passive and active techniques from multiple data sources and generating human-readable reports<a id="_idIndexMarker999"/> <span class="No-Break">for post-analysis.</span></p>
			<p>In this section, you will learn how to set up and use the following web <span class="No-Break">reconnaissance frameworks:</span></p>
			<ul>
				<li><span class="No-Break">Sn1per</span></li>
				<li><span class="No-Break">Amass</span></li>
			</ul>
			<p>I hope you’re excited – let’s <span class="No-Break">dive in.</span></p>
			<h2 id="_idParaDest-162"><a id="_idTextAnchor161"/>Automating reconnaissance with Sn1per</h2>
			<p><strong class="bold">Sn1per</strong> is designed to be an all-in-one web<a id="_idIndexMarker1000"/> reconnaissance framework that’s built to perform extensive information gathering<a id="_idIndexMarker1001"/> on discovering hidden<a id="_idIndexMarker1002"/> assets and security vulnerabilities on a target, hence helping cybersecurity professionals and organizations with <strong class="bold">Attack Surface Management</strong> (<strong class="bold">ASM</strong>). Rather than running multiple reconnaissance tools<a id="_idIndexMarker1003"/> for collecting and analyzing data from various sources, the Sn1per framework helps automate the entire process of data collection for a target, from analysis to providing a human-readable report at the end. Hence, it helps ethical hackers to automate time-consuming and mundane tasks to improve their reconnaissance phase and analyze data efficiently to create intelligence about <span class="No-Break">a target.</span></p>
			<p>To get started with using Sn1per for reconnaissance, use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and use the following command to update the software packages <span class="No-Break">repository list:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre></li>
				<li>Next, download the Sn1per files from their official <span class="No-Break">GitHub repository:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">git clone https://github.com/1N3/Sn1per</strong></pre></li>
				<li>Next, use the following command to change the present working directory to the <strong class="source-inline">Sn1per</strong> folder and execute the <span class="No-Break">installation script:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">cd Sn1per</strong></pre><pre class="source-code">
kali@kali:~/Sn1per$ <strong class="bold">sudo bash install.sh</strong></pre></li>
			</ol>
			<p>The installation process usually takes a few minutes <span class="No-Break">to complete.</span></p>
			<ol>
				<li value="5">To perform active reconnaissance (a normal scan) using Sn1per, use the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo sniper -t &lt;domain-name&gt;</strong></pre></li>
			</ol>
			<p>During a normal scan, Sn1per <a id="_idIndexMarker1004"/>will attempt to perform DNS enumeration, carry out sub-domain discovery, perform<a id="_idIndexMarker1005"/> multiple Nmap scans, scan HTTP/DNS scripts, grab HTTP banners, check for the presence of a WAF, and discover hidden files and directories on <span class="No-Break">the target.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">During active reconnaissance (normal scanning) using Sn1per, it will attempt to directly connect to the target to collect sensitive information. Keep in mind that active reconnaissance scanning can trigger security alerts and notify <span class="No-Break">the target.</span></p>
			<p>The following snippet shows an Nmap scan that was performed during a normal scan <span class="No-Break">with Sn1per:</span></p>
			<div>
				<div id="_idContainer385" class="IMG---Figure">
					<img src="image/Figure_9.30_B19448.jpg" alt="Figure 9.30 – Port scanning"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.30 – Port scanning</p>
			<p>Additionally, the following snippet shows that Sn1per was able to identify the hidden files and directories on <span class="No-Break">a target:</span></p>
			<div>
				<div id="_idContainer386" class="IMG---Figure">
					<img src="image/Figure_9.31_B19448.jpg" alt="Figure 9.31 – Discovering hidden files and directories"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.31 – Discovering hidden files and directories</p>
			<ol>
				<li value="6">To perform passive reconnaissance using Sn1per, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo sniper -t &lt;domain-name&gt; -m stealth -o -re</strong></pre></li>
			</ol>
			<p>The <strong class="source-inline">-o</strong> syntax specifies<a id="_idIndexMarker1006"/> to use OSINT and <strong class="source-inline">-re</strong> <span class="No-Break">specifies</span><span class="No-Break"><a id="_idIndexMarker1007"/></span><span class="No-Break"> reconnaissance.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">Passive reconnaissance techniques and tools do not directly connect to the target but rather collect and analyze OSINT to create a profile about the target. Passive reconnaissance is recommended if you’re interested in reducing your threat level in triggering alerts on <span class="No-Break">the target.</span></p>
			<ol>
				<li value="7">There are many types of modes and scans available in Sn1per; use the following command to view the <span class="No-Break">entire listing:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo sniper --help</strong></pre></li>
			</ol>
			<p>Sn1per scans can take a few<a id="_idIndexMarker1008"/> minutes to complete each task as it performs<a id="_idIndexMarker1009"/> extensive information gathering on the target. Once a scan is completed, the loot (collected data) is stored within the <strong class="source-inline">/usr/share/sn1per/loot/</strong> directory and a summary report in HTML format is generated and stored in the <strong class="source-inline">/</strong><span class="No-Break"><strong class="source-inline">usr/share/sn1per/loot/workspace/&lt;target-name&gt;/reports/</strong></span><span class="No-Break"> directory.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">To learn more about Sn1per, please see the following <span class="No-Break">link: </span><a href="https://github.com/1N3/Sn1per"><span class="No-Break">https://github.com/1N3/Sn1per</span></a><span class="No-Break">.</span></p>
			<p>Next, you will learn how to perform web reconnaissance <span class="No-Break">using Amass.</span></p>
			<h2 id="_idParaDest-163"><a id="_idTextAnchor162"/>Using Amass for web reconnaissance</h2>
			<p><strong class="bold">Amass</strong> is a web reconnaissance framework<a id="_idIndexMarker1010"/> developed by OWASP<a id="_idIndexMarker1011"/> to perform advanced DNS enumeration and help cybersecurity<a id="_idIndexMarker1012"/> professionals and organizations with attack surface mapping. Amass works by identifying the external assets of an organization by using both passive and active reconnaissance techniques and tools through automation. Hence, it helps ethical hackers to efficiently collect and analyze data from multiple sources to create a profile of <span class="No-Break">a target.</span></p>
			<p>Amass can collect<a id="_idIndexMarker1013"/> information from various online databases using <strong class="bold">Application Programming Interfaces</strong> (<strong class="bold">APIs</strong>), digital certificates, DNS information, public routing databases, WHOIS records, and <span class="No-Break">web-archiving databases.</span></p>
			<p>To get started using Amass<a id="_idIndexMarker1014"/> for web reconnaissance, please use the <span class="No-Break">following instructions:</span></p>
			<ol>
				<li>Firstly, power on the <strong class="bold">Kali Linux</strong> <span class="No-Break">virtual machine.</span></li>
				<li>Next, open the Terminal and use the following command to update the software package repository list and <span class="No-Break">install Amass:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt update</strong></pre><pre class="source-code">
kali@kali:~$ <strong class="bold">sudo apt install amass</strong></pre></li>
			</ol>
			<p>The installation process usually takes a few minutes <span class="No-Break">to complete.</span></p>
			<ol>
				<li value="3">To perform sub-domain enumeration using passive reconnaissance on a target, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">amass enum -d &lt;domain-name&gt;</strong></pre></li>
			</ol>
			<p>The following snippet shows that Amass was able to identify the sub-domains of <span class="No-Break">the target:</span></p>
			<div>
				<div id="_idContainer387" class="IMG---Figure">
					<img src="image/Figure_9.32_B19448.jpg" alt="Figure 9.32 – Sub-domain enumeration"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.32 – Sub-domain enumeration</p>
			<p>Once the task<a id="_idIndexMarker1015"/> is completed, Amass<a id="_idIndexMarker1016"/> provides the network block information showing where the sub-domains and their IP addresses <span class="No-Break">are associated:</span></p>
			<div>
				<div id="_idContainer388" class="IMG---Figure">
					<img src="image/Figure_9.33_B19448.jpg" alt="Figure 9.33 – Network block information"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.33 – Network block information</p>
			<p>The network block data<a id="_idIndexMarker1017"/> can be used to identify<a id="_idIndexMarker1018"/> the geo-location, hosting provider, country, <strong class="bold">Autonomous System</strong> (<strong class="bold">AS</strong>), and <strong class="bold">Internet Service Provider</strong> (<span class="No-Break"><strong class="bold">ISP</strong></span><span class="No-Break">) details.</span></p>
			<ol>
				<li value="4">To perform an intel<a id="_idIndexMarker1019"/> scan to discover targets <a id="_idIndexMarker1020"/>for enumeration, use the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">amass intel -whois -d microsoft.com -dir /home/kali/amass-target1</strong></pre></li>
			</ol>
			<p>The <strong class="source-inline">-dir</strong> syntax specifies where to store the output in a local folder on Kali Linux. The intel scan helps ethical hackers to collect OSINT about the target and identify additional root domain names that are associated with the target <span class="No-Break">as shown:</span></p>
			<div>
				<div id="_idContainer389" class="IMG---Figure">
					<img src="image/Figure_9.34_B19448.jpg" alt="Figure 9.34 – Intel scan"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.34 – Intel scan</p>
			<ol>
				<li value="5">Next, to perform passive DNS enumeration<a id="_idIndexMarker1021"/> and map the attack<a id="_idIndexMarker1022"/> surface of exposed assets to a target, use the <span class="No-Break">following command:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">amass enum -passive -d microsoft.com -src</strong></pre></li>
			</ol>
			<p>The following snippet shows Amass was able to identify the sub-domains of a target by collecting information from various <span class="No-Break">online sources:</span></p>
			<div>
				<div id="_idContainer390" class="IMG---Figure">
					<img src="image/Figure_9.35_B19448.jpg" alt="Figure 9.35 – DNS and attack surface mapping"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.35 – DNS and attack surface mapping</p>
			<ol>
				<li value="6">To perform active reconnaissance on a target, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">amass enum -d &lt;domain-name&gt; -src -ip -brute -dir /home/kali/amass-target1</strong></pre></li>
			</ol>
			<p>The following snippet<a id="_idIndexMarker1023"/> shows Amass was able to identify the associated IP addresses for each sub-domain of <span class="No-Break">the target:</span></p>
			<div>
				<div id="_idContainer391" class="IMG---Figure">
					<img src="image/Figure_9.36_B19448.jpg" alt="Figure 9.36 – Mapping IP addresses to sub-domains"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.36 – Mapping IP addresses to sub-domains</p>
			<ol>
				<li value="7">Next, to list the enumeration<a id="_idIndexMarker1024"/> data that was collected on a target using Amass, use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">amass db -dir /home/kali/amass-target1 -list</strong></pre></li>
			</ol>
			<p>The following snippet shows the reports that were created by Amass during the <span class="No-Break">enumeration process:</span></p>
			<div>
				<div id="_idContainer392" class="IMG---Figure">
					<img src="image/Figure_9.37_B19448.jpg" alt="Figure 9.37 – Listing reports"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.37 – Listing reports</p>
			<ol>
				<li value="8">To generate a visual graph of the collected data, please use the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">amass viz -d3 -dir /home/kali/amass-target1</strong></pre></li>
				<li>To open the visual<a id="_idIndexMarker1025"/> graph using the web browser, use<a id="_idIndexMarker1026"/> the <span class="No-Break">following commands:</span><pre class="source-code">
kali@kali:~$ <strong class="bold">firefox /home/kali/amass-target1/amass.html</strong></pre></li>
			</ol>
			<p>The following snippet shows the visual graph <span class="No-Break">from Amass:</span></p>
			<div>
				<div id="_idContainer393" class="IMG---Figure">
					<img src="image/Figure_9.38_B19448.jpg" alt="Figure 9.38 – Data visualization graph"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 9.38 – Data visualization graph</p>
			<p>The visual graph helps<a id="_idIndexMarker1027"/> ethical hackers to easily map<a id="_idIndexMarker1028"/> sub-domains and IP addresses and identify the attack surface of <span class="No-Break">a target.</span></p>
			<p class="callout-heading">Important note</p>
			<p class="callout">To learn more about Amass and its usage, please <span class="No-Break">see </span><a href="https://github.com/owasp-amass/amass/wiki/User-Guide"><span class="No-Break">https://github.com/owasp-amass/amass/wiki/User-Guide</span></a><span class="No-Break">.</span></p>
			<p>Having completed this section, you have learned how to automate web reconnaissance using both the Sn1per and <span class="No-Break">Amass frameworks.</span></p>
			<h1 id="_idParaDest-164"><a id="_idTextAnchor163"/>Summary</h1>
			<p>Over the course of this chapter, you learned how to perform web and domain reconnaissance using both passive and active information-gathering techniques. Additionally, you gained the hands-on skills that are needed by ethical hackers to identify the attack surface of a target and its sub-domains and discover hidden files and directories. Lastly, you explored how web reconnaissance frameworks can be used by ethical hackers to automate the discovery of an attack surface for <span class="No-Break">a target.</span></p>
			<p>I hope this chapter has been informative for you and helpful in your journey in the cybersecurity industry. In the next chapter, <em class="italic">Implementing Reconnaissance Monitoring and Detection Systems</em>, you will learn how to implement various open source threat monitoring tools to identify network intrusions and determine whether reconnaissance-based attacks are happening within <span class="No-Break">your organization.</span></p>
			<h1 id="_idParaDest-165"><a id="_idTextAnchor164"/>Further reading</h1>
			<ul>
				<li>OWASP Top 10 – <a href="https://owasp.org/www-project-top-ten/"><span class="No-Break">https://owasp.org/www-project-top-ten/</span></a></li>
				<li>OWASP web reconnaissance – <a href="https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/"><span class="No-Break">https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/</span></a></li>
			</ul>
		</div>
	</body></html>