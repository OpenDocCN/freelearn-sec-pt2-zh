- en: '1'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Getting Started with OWASP Zed Attack Proxy
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you will learn how to set up OWASP **Zed Attack Proxy** (**ZAP**)
    and the testing environments we will use throughout this book. We are going to
    cover what software is required to run ZAP and show you how to download and install
    it on your local machine. You will also learn how to install Docker and use it
    to set up OWASP Juice Shop, which we will use to perform the labs in this book.
  prefs: []
  type: TYPE_NORMAL
- en: Moreover, we will walk you through the process of downloading and installing
    ZAP, which we will use throughout the book. We will also cover various ways of
    installing ZAP on your computer and explain in what situation you might want to
    use one method rather than the other. Additionally, we will cover how to install
    Zed Attack Proxy directly from the JAR file as well as by using the Docker image
    of Zed Attack Proxy.
  prefs: []
  type: TYPE_NORMAL
- en: ZAP is an open source application built and maintained by the **Open Web Application
    Security Project** (**OWASP**). ZAP is built specifically for testing web applications
    for vulnerabilities. ZAP is a **man-in-the-middle** (**MITM**) proxy application.
    Once it is installed and configured, ZAP sits in the middle between the web application
    and the security tester’s browser, aka clientside. ZAP works by intercepting and
    inspecting the responses and the requests sent to or from the web application.
    After the interception, these requests and responses can be modified, if required,
    and sent on their way.
  prefs: []
  type: TYPE_NORMAL
- en: The two testing environments we will use in this book are used by many professionals
    to learn and practice their skills. OWASP **Juice Shop** is a locally hosted environment
    that you will learn how to deploy on your machine. You will also use **PortSwigger
    Academy** to learn about more complicated subjects that you can’t learn from a
    locally hosted environment.
  prefs: []
  type: TYPE_NORMAL
- en: At the end of this chapter, you will learn how to set up your browser to proxy
    the traffic from OWASP Juice Shop and the PortSwigger Academy. This will be the
    primary environment we will use to perform all the different testing explained
    in this book.
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, we will cover the following recipes:'
  prefs: []
  type: TYPE_NORMAL
- en: Downloading ZAP
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up the testing environment
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Setting up a browser proxy and certificate
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Testing ZAP setup
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Downloading ZAP
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will run through detailed instructions on installing ZAP
    on Windows and macOS and using the cross-platform package on both Windows and
    macOS. We will also cover ZAP requirements, installing Java, configuring the browser,
    and installing the certificate. In addition, we will cover installing and setting
    up Docker, setting up the testing environments, and testing to make sure everything
    is working as expected.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In order to proceed with this recipe, you need to ensure that you have administrator
    privileges on your laptop, desktop, or whichever environment is being used that
    has sufficient hard drive space and RAM for operating ZAP.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The first step, with any tool, is downloading the application. This requires
    several other applications to correctly run and use. In this recipe, you will
    learn the best approach for running ZAP on any common operating system and how
    to install Java.
  prefs: []
  type: TYPE_NORMAL
- en: Installing Java
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Take the following steps to install Java:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to the Java download page at [java.com/en/download/](http://java.com/en/download/).
    Click on **Agree and Start Free Download**, as shown in *Figure 1**.1*:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.1 – Java download agreement](image/Figure_1.01_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.1 – Java download agreement
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the installer once it’s downloaded, and click on **Install**, which is
    highlighted in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: "![Figure 1.2 – Java install prompt\uFEFF](image/Figure_1.02_B18829.jpg)"
  prefs: []
  type: TYPE_IMG
- en: Figure 1.2 – Java install prompt
  prefs: []
  type: TYPE_NORMAL
- en: This is how to install Java. In the next section, we will demonstrate several
    ways to install ZAP, depending on your requirements.
  prefs: []
  type: TYPE_NORMAL
- en: Installing ZAP on Windows
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The first step to installing ZAP on Windows is to install Java. This is because
    ZAP is dependent on Java. Refer to the previous *Installing Java* section for
    instructions on how to install Java.
  prefs: []
  type: TYPE_NORMAL
- en: 'To download the installer for Windows, do the following:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to the ZAP download page at [www.zaproxy.org/download/](http://www.zaproxy.org/download/).
    Click on the **Download** button next to **Windows (64) Installer** or **Windows
    (32) Installer**, depending on your computer’s processor. *Figure 1**.3* shows
    what this looks like:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: .
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.3 – ZAP Windows installers](image/Figure_1.03_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.3 – ZAP Windows installers
  prefs: []
  type: TYPE_NORMAL
- en: 'Open the installer once it is downloaded, and click on **Next >**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.4 – ZAP Windows installation wizard](image/Figure_1.04_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.4 – ZAP Windows installation wizard
  prefs: []
  type: TYPE_NORMAL
- en: 'Accept the agreement by checking the circle next to **I accept the agreement**
    and clicking on **Next >**, as you can see in *Figure 1**.5*:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.5 – ZAP License Agreement](image/Figure_1.05_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.5 – ZAP License Agreement
  prefs: []
  type: TYPE_NORMAL
- en: 'Then, check the circle next to **Standard installation** and click on **Next
    >**, as seen in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.6 – Select Installation Type](image/Figure_1.06_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.6 – Select Installation Type
  prefs: []
  type: TYPE_NORMAL
- en: 'On the next page, click on **Install**, as shown in *Figure 1**.7*:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.7 – Starting the installation](image/Figure_1.07_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.7 – Starting the installation
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on **Finish** to complete the setup. Please refer to *Figure 1**.8* to
    see what that looks like:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.8 – Installation completion](image/Figure_1.08_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.8 – Installation completion
  prefs: []
  type: TYPE_NORMAL
- en: This concludes the ZAP Windows installation; the next section will go over ZAP
    installation on macOS.
  prefs: []
  type: TYPE_NORMAL
- en: Installing ZAP on macOS
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To download the installer for macOS, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to the download section on the ZAP main website at [www.zaproxy.org/download/](http://www.zaproxy.org/download/).
    Click on the **Download** button next to **macOS Installer**, as shown in the
    following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.9 – The ZAP macOS Installer](image/Figure_1.09_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.9 – The ZAP macOS Installer
  prefs: []
  type: TYPE_NORMAL
- en: 'When the download is complete, open the installer. You may get an error stating
    **“OWASP ZAP” cannot be opened because the developer cannot be verified.** The
    following screenshot shows the error message:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.10 – Error message](image/Figure_1.10_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.10 – Error message
  prefs: []
  type: TYPE_NORMAL
- en: 'In that case, go to the **Security & Privacy** settings on the Macintosh computer,
    navigate to **General**, and click on **Open Anyway**. Let’s see what all this
    looks like:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.11 – The macOS Security & Privacy window](image/Figure_1.11_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.11 – The macOS Security & Privacy window
  prefs: []
  type: TYPE_NORMAL
- en: After updating the settings, click on the installer again to begin the install.
  prefs: []
  type: TYPE_NORMAL
- en: Installing ZAP using the cross-platform package
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The **cross-platform package** is a ZIP file that contains ZAP in a **.jar**
    format, a **.bat** script (for Windows), and a **.sh** script (for Unix-based
    systems). The scripts check the best memory option for the system before running
    ZAP from the **.jar** file. However, the cross-platform package requires Java
    *version 8* or newer to work. Therefore, Java is required to be installed on Windows
    or Linux operating systems. Refer to the *Installing Java* section for instructions
    on how to install Java.
  prefs: []
  type: TYPE_NORMAL
- en: 'To download the cross-platform package, take the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to the download section on the ZAP main website at [www.zaproxy.org/download/](http://www.zaproxy.org/download/).
    Click the **Download** button next to **Cross Platform Package**, as shown here:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.12 – ZAP Cross Platform Package](image/Figure_1.12_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.12 – ZAP Cross Platform Package
  prefs: []
  type: TYPE_NORMAL
- en: 'The following screenshot shows the extracted folder:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.13 – The cross-platform downloaded folder](image/Figure_1.13_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.13 – The cross-platform downloaded folder
  prefs: []
  type: TYPE_NORMAL
- en: To use the cross-platform package on a Unix-based operating system, open a new
    terminal window, navigate to the folder (directory) that we have downloaded and
    contains the **.jar** file, and type the **sh** command and the name of the file
    appended with **.sh**. In this example, the name of the file is **zap.sh**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Press *Enter* or *return* depending on your keyboard layout. ZAP will then
    start after running this command:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.14 – Starting zap.sh](image/Figure_1.14_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.14 – Starting zap.sh
  prefs: []
  type: TYPE_NORMAL
- en: On a Windows computer, after installing Java version 8 or newer, navigate to
    the folder where the files are stored and double-click the **.bat** file (**zap.bat**).
  prefs: []
  type: TYPE_NORMAL
- en: Installing Docker
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We are going to be using **Docker** throughout this book as a testing environment,
    and this section will help you install Docker on your machine if you don’t have
    it already running. You will need to download and install Docker on your computer.
    You can navigate to [https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/)
    and install the Docker version that is compatible with your computer.
  prefs: []
  type: TYPE_NORMAL
- en: For Windows
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: You will need to check the requirements and decide whether you are going to
    use *WSL 2 backend* or *Hyper-V backend* and Windows containers. After making
    sure you meet the installation requirements, go ahead and install Docker and make
    sure it is running on your system by running the **docker -v** command, as seen
    in *Figure 1**.15*. In doing this, you should see the version of the Docker environment
    you have installed on your machine.
  prefs: []
  type: TYPE_NORMAL
- en: 'Congratulations! You have now installed Docker and are ready to install ZAP
    on Docker:'
  prefs: []
  type: TYPE_NORMAL
- en: "![Figure 1.15 – Docker \uFEFFversion on Windows](image/Figure_1.15_B18829.jpg)"
  prefs: []
  type: TYPE_IMG
- en: Figure 1.15 – Docker version on Windows
  prefs: []
  type: TYPE_NORMAL
- en: For macOS
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'When installing Docker on an Apple computer, you will need to make sure you
    install the correct version depending on whether you have a Macintosh with an
    Intel chip or with an Apple chip. After installing the version that works with
    your computer, you can test it by running the **docker -v** command on a terminal,
    as seen in *Figure 1**.16*. You have now installed Docker and are ready to install
    ZAP:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.16 – Docker version on macOS](image/Figure_1.16_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.16 – Docker version on macOS
  prefs: []
  type: TYPE_NORMAL
- en: See also
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are several other ways to install ZAP on different platforms. Please visit
    https://www.zaproxy.org/download/ to learn more.
  prefs: []
  type: TYPE_NORMAL
- en: Setting up the testing environment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, you will set up the testing environment you will use in each
    chapter of this book. We will go through the process of setting up OWASP Juice
    Shop and signing up for PortSwigger Academy.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To prepare, we recommend using a common browser such as Google Chrome or Mozilla
    Firefox. In addition, ensure you have root or administrator permissions to run
    a terminal (Linux or macOS) or command prompt (Windows).
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The upcoming recipes will aid you in preparing the testing/lab environment that
    will be used throughout the recipes used in this book. These are commonly used
    labs, and are easy to sign up for or install and are free to use.
  prefs: []
  type: TYPE_NORMAL
- en: OWASP Juice Shop setup
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'OWASP Juice Shop is an open source, insecure web application used for training
    and learning various types of attacks. OWASP Juice Shop includes OWASP’s top ten
    vulnerabilities as well as flaws found in the real world. You can find more information
    about the project at [https://owasp.org/www-project-juice-shop/](https://owasp.org/www-project-juice-shop/).
    We are going to be using the Docker image for the simplicity of setup:'
  prefs: []
  type: TYPE_NORMAL
- en: 'The first step is to pull the image from Docker Hub by running the **docker
    pull bkimminich/juice-shop** command on your terminal after confirming that Docker
    is running on your machine:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.17 – Pulling the Juice Shop image from Docker Hub](image/Figure_1.17_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.17 – Pulling the Juice Shop image from Docker Hub
  prefs: []
  type: TYPE_NORMAL
- en: If everything works correctly, you will get a response similar to the screenshot
    in *Figure 1**.17*.
  prefs: []
  type: TYPE_NORMAL
- en: 'The next step is to launch the Docker image. You can do this by running the
    **docker run --rm -p 3000:3000 bkimminich/juice-shop** command line on your terminal,
    as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.18 – Launching the Docker image](image/Figure_1.18_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.18 – Launching the Docker image
  prefs: []
  type: TYPE_NORMAL
- en: 'After the Docker image finishes installing, you can navigate to **localhost:3000**
    on your browser, and you will see the OWASP Juice Shop application running on
    your machine. Please refer to *Figure 1**.19* for an example of this:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.19 – OWASP Juice Shop](image/Figure_1.19_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.19 – OWASP Juice Shop
  prefs: []
  type: TYPE_NORMAL
- en: At this point, you have set up OWASP Juice Shop. Congratulations! You have OWASP
    Juice Shop installed on your computer.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Sign up for PortSwigger Academy
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'PortSwigger Academy is a free web security platform created by the creators
    of *Burp Suite*. We are going to use their lab environment to test some vulnerabilities
    that are not found in OWASP Juice Shop and for the simplicity of having a vulnerable
    lab without the need for a complex environment setup:'
  prefs: []
  type: TYPE_NORMAL
- en: First, you will need to navigate to [https://portswigger.net/web-security](https://portswigger.net/web-security)
    and sign up for a free account.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'After you sign up for a free account, you can log in and navigate to [https://portswigger.net/web-security/all-labs](https://portswigger.net/web-security/all-labs).
    You can find all the labs provided by PortSwigger on this page, as shown in *Figure
    1**.20*, and we will use some of the labs during the course of this book:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.20 – PortSwigger labs](image/Figure_1.20_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.20 – PortSwigger labs
  prefs: []
  type: TYPE_NORMAL
- en: Now that you have set up your two testing environments, you are ready to start
    learning how to identify and test vulnerabilities with OWASP ZAP in the upcoming
    chapters.
  prefs: []
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It is important to use the testing environment we described to follow along
    with the rest of the cookbook and its recipes. We will also work with some of
    the PortSwigger Academy labs that skip the need for setting up complex environments
    and additional servers to carry out attacks.
  prefs: []
  type: TYPE_NORMAL
- en: There’s more...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Other testing environments can be used, such as **OWASP Mutillidae** or **bWAPP**,
    in place of OWASP Juice Shop.
  prefs: []
  type: TYPE_NORMAL
- en: Setting up a browser proxy and certificate
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this section, we will cover how to configure ZAP to run with your browser
    as well as how to set up a ZAP CA certificate to proxy HTTPS connections. Also,
    we are going to use the browser extension, **FoxyProxy**, which provides an easy
    way to change proxy configurations and switch between multiple proxies or disable
    a direct connection. ZAP proxy allows you to capture all the requests made by
    your browser, then modify or edit those requests to find vulnerabilities in the
    web app you will be testing.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: To proceed with this recipe, you need to have a basic understanding of navigating
    internet settings or browser network configuration. In addition, you need to understand
    how to navigate the browser marketplace to install extensions.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'FoxyProxy allows you to easily change the proxy configuration of browsers that
    do not have a simple setting to change proxy settings. You will need to take the
    following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to Google and search for **FoxyProxy** on Chrome and navigate to the
    **Chrome Web Store** where you can install the plugin on your browser. Once you
    have navigated to the **chrome web store**, it should look like the following
    screenshot, at which point you can then click on **Add to Chrome** and follow
    the prompts to install the plugin:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.21 – Adding FoxyProxy to Chrome](image/Figure_1.21_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.21 – Adding FoxyProxy to Chrome
  prefs: []
  type: TYPE_NORMAL
- en: 'To pin the extension on Chrome, click on the extension’s icon and click the
    pin-down icon, as seen in *Figure 1**.22*, which will attach the FoxyProxy extension
    to the top bar of your browser:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.22 – Pinning FoxyProxy](image/Figure_1.22_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.22 – Pinning FoxyProxy
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, click on the FoxyProxy icon. Click on **Options**, as seen in *Figure
    1**.23*, to open the options setting window where we will set up the proxy settings:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.23 – The Options button](image/Figure_1.23_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.23 – The Options button
  prefs: []
  type: TYPE_NORMAL
- en: 'On the options screen, click **Add New Proxy** to set up the new proxy configurations
    for the ZAP proxy:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.24 – Adding a new proxy](image/Figure_1.24_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.24 – Adding a new proxy
  prefs: []
  type: TYPE_NORMAL
- en: 'On the **Proxy settings** window, in the **Proxy Details** tab, set the **Host
    or IP Address** field to the value of your ZAP proxy configuration. As you can
    see from *Figure 1**.25*, my ZAP proxy configuration is **127.0.0.1** for the
    IP, and the port is **8080**. Then click **Save** to store your settings:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.25 – Proxy settings](image/Figure_1.25_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.25 – Proxy settings
  prefs: []
  type: TYPE_NORMAL
- en: 'To verify whether the settings are saved, click on the FoxyProxy icon on the
    browser. Notice on the following screenshot that the setting states **Use proxy
    127.0.0.1:8080 for** **all URLs**:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.26 – Using the created proxy](image/Figure_1.26_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.26 – Using the created proxy
  prefs: []
  type: TYPE_NORMAL
- en: 'The last step is to validate that your proxy is working with the ZAP proxy:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: "![Figure 1.27 – Valida\uFEFFtion that the proxy is being used](image/Figure_1.27_B18829.jpg)"
  prefs: []
  type: TYPE_IMG
- en: Figure 1.27 – Validation that the proxy is being used
  prefs: []
  type: TYPE_NORMAL
- en: CA Certificate
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Before proceeding to intercept web traffic, the self-signed ZAP certificate
    will need to be installed into the root CA authority of your browser of choice.
    This will prevent the browser from flagging the ZAP proxy as malicious and getting
    stuck at the **Browser Warning** screen. This happens because you don’t have a
    trusted **CA Certificate** installed on your browser. This section will focus
    on testing in the Google Chrome browser.
  prefs: []
  type: TYPE_NORMAL
- en: 'To install the ZAP certificate, navigate to the ZAP proxy, then go to **Tools**
    > **Options** > **Dynamic SSL Certificates** and save the certificate. Let’s look
    at it in the following screenshot:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 1.28 – The Dynamic SSL Certificates tab](image/Figure_1.28_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.28 – The Dynamic SSL Certificates tab
  prefs: []
  type: TYPE_NORMAL
- en: 'Another option is to go to **http://localhost:8080** on your browser and click
    the **Download** button under **HTTPS Warnings Prevention**, as shown in *Figure
    1**.29*. This will allow you to download the certificate:'
  prefs: []
  type: TYPE_NORMAL
- en: "![Figu\uFEFFre 1.29 – The certificate download](image/Figure_1.29_B18829.jpg)"
  prefs: []
  type: TYPE_IMG
- en: Figure 1.29 – The certificate download
  prefs: []
  type: TYPE_NORMAL
- en: 'To install the ZAP certificate to Chrome, you will need to take the following
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to the Chrome **Settings** page by clicking the three dots on the top right
    corner of the screen or by visiting **chrome://settings** and going to **Security**
    **and Privacy**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on **Manage Certificates** under **Security**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: On a macOS computer, click on **File** and then **Import items**, and select
    the certificate file while you are on the **Certificates** tab to start the certificate
    installation process. On a Windows computer, in the **Intended purpose** box,
    select **<All>**, navigate to the **Trusted Root Certification Authorities** tab,
    click on **Import**, then **Next**. Select the certificate file and click **Next**.
    On this window, keep the default options and click on **Next**, and then click
    **Finish**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'To install ZAP CA to Firefox, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Go to **Preferences**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Open the **Advanced** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Open the **Cryptography/Certificates** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **View Certificates**.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click the **Authorities** tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click **Import** and choose the saved **owasp_zap_root_ca.cer** file.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: In the wizard, choose to **Trust this certificate to identify websites** (check
    all the boxes).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Finalize the wizard.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Preparing the browser and certificate will allow you to quickly get testing
    on the application come start day versus wasting precious time having to configure
    network proxy settings or capturing web requests and responses.
  prefs: []
  type: TYPE_NORMAL
- en: Testing the ZAP setup
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This recipe will help troubleshoot the connection to ZAP and verify that each
    step has been set up correctly.
  prefs: []
  type: TYPE_NORMAL
- en: Getting ready
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In order to proceed with this recipe, you need to reboot your computer to ensure
    the installation process is complete and the tool is working properly.
  prefs: []
  type: TYPE_NORMAL
- en: How to do it...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'To ensure that ZAP has been set up correctly, follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: 'On the Chrome browser, start ZAP, open the **Extensions** menu, and double
    click the **Use proxy 127.0.0.1:8080 for all URLs** option, as shown in the following
    screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.30 – Choosing the created proxy](image/Figure_1.30_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.30 – Choosing the created proxy
  prefs: []
  type: TYPE_NORMAL
- en: 'Navigate to [google.com](http://google.com). The first time you use ZAP after
    setting up the proxy and installing the certificate, you will see the **Welcome
    to the Zap HUD** message and/or the options to the right and left of the browser
    window, as shown in the following screenshot:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![Figure 1.31 – ZAP HUD](image/Figure_1.31_B18829.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1.31 – ZAP HUD
  prefs: []
  type: TYPE_NORMAL
- en: How it works...
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Setting up and testing OWASP ZAP is performed to help you determine whether
    any errors are occurring with its use and functionality and allows you to have
    a clean installation working when it comes to starting an assessment during the
    testing window (start/stop dates). There’s nothing worse than getting to the first
    day of testing and realizing that something is broken or not working.
  prefs: []
  type: TYPE_NORMAL
